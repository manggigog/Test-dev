import{_ as A,z as C,F as y,G as u,H as c,I as e,a1 as M,P as _,Q as o,O as f,J as j,K as V,U as I,a4 as x,N as z,B as S,X as F,Y as N,r as U,D as H,y as $,Z as k,$ as g,a3 as J,a0 as E,n as K,a2 as q,bl as Q}from"./vendor-Dr_RpJ_Y.js";import{_ as O}from"./selected-icon-CfPkLSlb.js";import{_ as X}from"./MCOIN-BOqZVkND.js";import{k as Y,u as Z}from"./useOrderStatus-CfUN23nj.js";import{r as W,e as B,bN as ee,g as P}from"./index-CU2nzZe6.js";import{a as te}from"./useRefund-BaR9moOG.js";import{P as R}from"./flashSale-DDyqLyYN.js";const se=t=>(F("data-v-63080493"),t=t(),N(),t),oe={class:"flex items-center justify-between"},ne={class:"gap-3 flex-start"},re={key:0,class:"w-4 h-4",src:O,alt:""},le={key:1,class:"w-4 h-4 border border-solid rounded-full border-[#000]/40"},ae={class:"text-sm font-normal"},ce={class:"text-xs text-[#A6A6A6]"},ie={class:"h-[36px] text-sm font-semibold text-newOrigin whitespace-nowrap flex justify-start items-start"},de={class:"flex w-full gap-3"},ue={class:"flex-1 flex flex-col min-h-[5rem] justify-between"},me={class:"flex justify-between w-full font-semibold"},fe={class:"mr-1 text-base leading-[22px] line-clamp-2 text-[#2E2008]"},he={class:"text-base leading-[22px] text-[#2E2008] min-w-fit"},pe={key:0},ve={key:1,class:"flex items-center text-sm font-normal text-[#A6A6A6]"},xe={class:"text-sm font-normal text-[#A6A6A6]"},_e={key:0,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},be={class:"flex justify-end text-sm font-semibold text-[#A6A6A6]"},ye={class:"font-normal text-sm mr-1"},we={key:0},ge={key:1,class:"flex text-sm font-normal flex-row items-center text-newOrigin"},$e=se(()=>e("img",{class:"w-4 h-4 mr-1 font-normal text-sm",src:X},null,-1)),Ie=C({props:{order:null,isList:{type:Boolean},selectIds:null},emits:["select"],setup(t,{emit:h}){const{order:i}=t,n=Y(),p=l=>{const d=l.number??1,m=l.cardPrice??0,a=l.goodsActivityReduceAmount??0,s=new S(m*d-a).toNumber();return B(s)},v=l=>{const d=new S(l.price).times(l.number).minus(l.goodsActivityReduceAmount||0).plus(l.goodsAdjustChangeAmount||0).toNumber();return B(d||0)};return(l,d)=>{const m=y("VanImage");return c(),u("div",{class:z(["px-3 py-3 bg-white rounded-xl box-border default-border",{"border-orange":t.selectIds&&t.selectIds.includes(t.order.id)}]),onClick:d[0]||(d[0]=a=>h("select",t.order))},[e("div",oe,[e("div",ne,[e("div",null,[t.selectIds&&t.selectIds.includes(t.order.id)?(c(),u("img",re)):(c(),u("div",le))]),_(m,{round:"",src:t.order.stores&&t.order.stores.logo,class:"store-img w-8 h-8 overflow-hidden",alt:"",fit:"cover"},null,8,["src"]),e("div",ae,[e("p",null,o(t.order.stores&&t.order.stores.storeName),1),e("p",ce,o(f(W)(t.order.createTime))+" "+o(l.$t("order.buied")),1)])]),e("div",ie,o(f(n)[t.order.status+""]),1)]),(c(!0),u(j,null,V(t.order.orderGoods,a=>{var s,r;return c(),u("div",{class:"mt-4",key:a.goodsName},[e("div",de,[_(m,{src:(a.icons||"").split(",")[0],class:"w-20 h-20 overflow-hidden",style:{"border-radius":"0.625rem"},alt:"",fit:"cover"},null,8,["src"]),e("div",ue,[e("div",null,[e("div",me,[e("div",fe,o(a.goodsName),1),e("div",he,[t.order.payType===f(R).STORE_CARD?(c(),u("span",pe,o(a.cardPrice||0)+o((s=t.order.fmStoredCard)==null?void 0:s.symbol),1)):(c(),u("div",ve,[e("span",null,o(a.price||0)+" Mcoin",1)]))])]),e("div",xe,o(l.$t("order.quantity",{number:a.number||0})),1)]),f(te)(t.order)?(c(),u("div",_e,o(f(Z)(t.order)),1)):I("",!0),e("div",be,[e("span",ye,o(l.$t("order.actual payment")),1),t.order.payType===f(R).STORE_CARD?(c(),u("span",we,o(p(a))+o((r=t.order.fmStoredCard)==null?void 0:r.symbol),1)):(c(),u("span",ge,[$e,x(" "+o(v(a)),1)]))])])])])}),128)),M(l.$slots,"default",{},void 0,!0)],2)}}}),T=A(Ie,[["__scopeId","data-v-63080493"]]),ke={class:"px-3 text-base"},Ae={class:"flex justify-center items-center h-[44px]"},Ce={class:"flex items-center font-bold"},Se={class:"overflow-y-scroll max-h-[70vh] pb-[100px]"},Be={class:"mt-3 text-sm font-normal"},Pe={class:"text-primary font-semibold"},Re={class:"text-primary font-semibold"},Te={class:"flex flex-col mt-3"},je={class:"receipt__wrap flex flex-col items-center justify-center gap-3 py-5 px-6 fixed bottom-0 left-0 right-0"},Ve={class:"text-sm font-normal text-black"},Fe={class:"w-full flex flex-row justify-between items-center"},Ne={class:"flex items-center justify-center"},Ee={key:0,class:"w-4 h-4",src:O,alt:""},Oe={key:1,class:"w-4 h-4 border border-solid rounded-full border-[#000]/40"},De={key:0,class:"text-default"},Ge=C({props:{show:{type:Boolean},list:null,currentId:null,loading:{type:Boolean}},emits:["close","receipt"],setup(t,{emit:h}){const i=t,n=U([]);H(()=>i.show,s=>{if(s){const r=document.getElementById("container");K(()=>{r&&r.scrollIntoView()}),n.value=[],n.value.push(i.currentId)}},{deep:!0});const p=s=>{const r=s.id;n.value.includes(r)?n.value=n.value.filter(b=>b!==r):n.value.push(r)},v=()=>{h("receipt",n.value)},l=$(()=>i.list&&i.currentId?i.list.find(s=>+s.id==+i.currentId):[]),d=$(()=>i.list&&i.currentId?i.list.filter(s=>+s.id!=+i.currentId):[]),m=$(()=>{const s=[i.currentId,...d.value.map(r=>r.id)];return n.value.length===s.length&&s.every(r=>n.value.includes(r))}),a=()=>{if(m.value)n.value=[];else{const s=[i.currentId,...d.value.map(r=>r.id)];n.value=s}};return(s,r)=>{const b=y("van-icon"),G=y("VanButton"),L=y("van-popup");return c(),k(L,{show:t.show,"onUpdate:show":r[1]||(r[1]=w=>E(show)?show.value=w:null),round:"",class:"bg-[#F3F3F3]",position:"bottom",onClose:r[2]||(r[2]=w=>h("close")),"safe-area-inset-bottom":"","stop-propagation":!1},{default:g(()=>[e("div",ke,[e("div",Ae,[e("div",Ce,o(s.$t("order.Have you confirmed receipt of the goods")),1),_(b,{class:"absolute right-2.5",name:"cross",size:"20",color:"#000",onClick:r[0]||(r[0]=J(()=>h("close"),["stop"]))})]),e("div",Se,[f(l)?(c(),k(T,{key:0,id:"container",onSelect:p,selectIds:n.value,order:f(l)},null,8,["selectIds","order"])):I("",!0),e("div",Be,[x(o(s.$t("order.there are"))+" ",1),e("span",Pe,o(f(d).length),1),x(" "+o(s.$t("order.order merchant"))+" ",1),e("span",Re,o(s.$t("order.already")),1),x(" "+o(s.$t("order.can confirm receipt in batches")),1)]),e("div",Te,[(c(!0),u(j,null,V(f(d),w=>(c(),u("div",{key:w.id},[_(T,{class:"mb-3",onSelect:p,selectIds:n.value,order:w},null,8,["selectIds","order"])]))),128))]),e("div",je,[e("div",Ve,o(s.$t("order.to ensure your after-sales right")),1),e("div",Fe,[e("div",{class:"flex flex-col items-center justify-center cursor-pointer",onClick:a},[e("div",Ne,[f(m)?(c(),u("img",Ee)):(c(),u("div",Oe))])]),_(G,{loading:t.loading,round:"",disabled:!n.value||n.value&&n.value.length<=0,class:"ml-2 h-10 text-default min-w-[calc(100%-32px)] bg-btnOrBg rounded-[60px] font-semibold text-base",onClick:v},{default:g(()=>[x(o(s.$t("order.oneKeyConfirmGeted"))+" ",1),n.value.length?(c(),u("span",De,o(s.$t("order.selected count num",{count:n.value.length||0})),1)):I("",!0)]),_:1},8,["loading","disabled"])])])])])]),_:1},8,["show"])}}}),st=A(Ge,[["__scopeId","data-v-d38f364c"]]),Le="/static/images/success_logo-D0wfRRL8.png",Me="/static/images/success-CE-AM3EJ.svg",D=t=>(F("data-v-34373161"),t=t(),N(),t),ze=D(()=>e("img",{class:"w-[109px] h-auto ml-auto -mb-20",src:Le},null,-1)),Ue={class:"w-full p-5 bg-[#FEFFF9] rounded-[10px] text-center"},He=D(()=>e("img",{src:Me,class:"w-10 h-10 mx-auto"},null,-1)),Je={class:"py-3"},Ke={class:"flex justify-center"},qe=C({emits:["handleTo","reload"],setup(t,{expose:h,emit:i}){const[n,p]=q(!1),v=Q({amount:null}),l=m=>(v.amount=ee(m,P.voucherBack,P.FMCP).amount,v.amount?(p(!0),!0):!1);function d(){p(!1),i("reload")}return h({showToastPop:l}),(m,a)=>{const s=y("van-button"),r=y("VanPopup");return c(),k(r,{show:f(n),"onUpdate:show":a[1]||(a[1]=b=>E(n)?n.value=b:null),position:"center",style:{background:"transparent","min-width":"280px","max-width":"335px"},onClickOverlay:d,onClick:d},{default:g(()=>[ze,e("div",Ue,[He,e("div",Je,o(m.$t("voucher.confirmGeted",{amount:f(v).amount})),1),e("div",Ke,[_(s,{type:"primary",class:"border border-solid border-primary rounded-[40px] w-1/2 h-10 mx-2.5 text-primary font-semibold",onClick:d},{default:g(()=>[x(o(m.$t("common.I_see")),1)]),_:1}),_(s,{onClick:a[0]||(a[0]=b=>i("handleTo")),class:"w-1/2 h-10 mx-2.5 btn-orange btn-shadow text-white font-semibold"},{default:g(()=>[x(o(m.$t("common.go_see")),1)]),_:1})])])]),_:1},8,["show"])}}}),ot=A(qe,[["__scopeId","data-v-34373161"]]);export{st as B,ot as V};
