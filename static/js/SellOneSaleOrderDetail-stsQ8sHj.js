import{z as $,G as r,H as a,I as e,Q as s,U as h,O as u,a4 as b,y as P,_ as L,x as q,a2 as J,o as M,r as A,E as z,P as p,J as Q,Z as X,$ as Y,q as Z,F as W,X as ee,Y as te,T as se}from"./vendor-Dr_RpJ_Y.js";import{_ as oe,a as V}from"./buyer-C8mfyM9y.js";import{_ as G}from"./copy-CQ_1jpuF.js";import{h as _,f as K,r as ae,V as re,a as de,bp as ie,a8 as ne}from"./index-7OiUoGXy.js";import{_ as ce}from"./GoodsItem-D3IDBieu.js";import{B as le}from"./BackIcon-CDrGaEPo.js";import{l as ue}from"./luckyShopContract-DfZqYfy3.js";const me=""+new URL("../images/goods-info-Dp-60OiU.svg",import.meta.url).href,he={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl text-default font-Sans"},ve={class:"gap-1 flex-start"},fe=e("img",{src:oe,class:"w-4 h-4",alt:""},null,-1),pe={class:"font-semibold"},ye={class:"flex justify-between mt-2"},_e={class:"opacity-60"},$e={class:"font-semibold"},ge={key:0},xe={key:1},be={key:2},we={key:3},ke={key:4},Ce=$({props:{status:null},setup(t){const{status:i}=t;return(o,n)=>(a(),r("div",he,[e("div",ve,[fe,e("div",pe,s(o.$t("order.orderStatus")),1)]),e("div",ye,[e("div",_e,s(o.$t("order.currentStatus")),1),e("div",$e,[t.status===30?(a(),r("span",ge,s(o.$t("order.status1")),1)):t.status===40?(a(),r("span",xe,s(o.$t("order.status2")),1)):t.status===200?(a(),r("span",be,s(o.$t("order.status3")),1)):t.status===300?(a(),r("span",we,s(o.$t("refund.refunded")),1)):t.status===50?(a(),r("span",ke,s(o.$t("order.status4")),1)):h("",!0)])])]))}}),Se={class:"px-5 py-4 mt-2 text-sm text-right bg-white rounded-xl text-default font-Sans"},Ie={class:"gap-1 flex-start"},Te=e("img",{src:V,class:"w-4 h-4",alt:""},null,-1),De={class:"font-semibold"},Ne={class:"mt-2 flex-center-bw"},Be={class:"opacity-60"},Oe={key:0,src:G,class:"w-4 h-4 ml-2",alt:""},Pe={class:"mt-2 flex-center-bw"},Ae={class:"opacity-60"},Ke=e("img",{src:G,class:"w-4 h-4 ml-2",alt:""},null,-1),Ve={class:"flex justify-between mt-2"},Ge={class:"opacity-60"},He={class:"whitespace-normal"},Re={key:0,class:"mt-2 flex-center-bw"},Ue={class:"opacity-60"},je={key:1,class:"mt-2 flex-center-bw"},Fe={class:"opacity-60"},Ee={class:"flex-center"},Le=$({props:{order:null},setup(t){const{order:i}=t;return(o,n)=>(a(),r("div",Se,[e("div",Ie,[Te,e("div",De,s(o.$t("order.orderInfo")),1)]),e("div",Ne,[e("div",Be,s(o.$t("order.txHash")),1),e("div",{class:"flex items-center",onClick:n[0]||(n[0]=m=>u(_)(t.order.hash))},[b(s(u(K)(t.order.hash,"***",9,5)||"-")+" ",1),t.order.hash?(a(),r("img",Oe)):h("",!0)])]),e("div",Pe,[e("div",Ae,s(o.$t("order.payAddress")),1),e("div",{class:"flex items-center",onClick:n[1]||(n[1]=m=>u(_)(t.order.address))},[b(s(u(K)(t.order.address,"...",5,5))+" ",1),Ke])]),e("div",Ve,[e("div",Ge,s(o.$t("order.payTime")),1),e("div",He,s(u(ae)(t.order.createTime)),1)]),t.order.expressCompany?(a(),r("div",Re,[e("div",Ue,s(o.$t("order.deliveryCompany")),1),e("div",null,s(t.order.expressCompany),1)])):h("",!0),t.order.expressNo?(a(),r("div",je,[e("div",Fe,s(o.$t("order.deliveryId")),1),e("div",Ee,[e("div",null,s(t.order.expressNo),1),e("div",{class:"py-1 pl-2 rounded text-oriange1",onClick:n[2]||(n[2]=m=>u(_)(t.order.expressNo))},s(o.$t("common.copy")),1)])])):h("",!0)]))}}),qe={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl text-default font-Sans"},Je={class:"gap-1 flex-start"},Me=e("img",{src:V,class:"w-4 h-4",alt:""},null,-1),ze={class:"font-semibold"},Qe={class:"flex justify-between gap-2 mt-2"},Xe={class:"opacity-60 whitespace-nowrap"},Ye={class:"text-right break-all"},Ze={class:"flex justify-between mt-2"},We={class:"opacity-60"},et={class:"max-w-[180px] whitespace-normal text-right"},tt={class:"text-right break-all"},st={key:0,class:"text-right break-all"},ot={key:1,class:"text-right break-all"},at=$({props:{order:null},setup(t){const{order:i}=t,o=P(()=>i?(i.receiverProvince??"")+(i.receiverCity??"")+(i.receiverCounty??"")+(i.receiverDetailInfo??""):"-"),n=P(()=>i?`${o.value}  ${i.receiver}  ${i.receiverPhone}`:"-");return(m,y)=>(a(),r("div",qe,[e("div",Je,[Me,e("div",ze,s(m.$t("order.buyerInfo")),1)]),e("div",Qe,[e("div",Xe,s(m.$t("order.buyerRemark")),1),e("div",Ye,s(t.order.postscript||"-"),1)]),e("div",Ze,[e("div",We,s(m.$t("order.getInfo")),1),e("div",et,[e("div",tt,s(u(o)),1),t.order.receiverPhone?(a(),r("div",st,s(t.order.receiverPhone),1)):h("",!0),t.order.receiver?(a(),r("div",ot,s(t.order.receiver),1)):h("",!0),e("div",{class:"px-2 py-1 rounded text-oriange1",onClick:y[0]||(y[0]=g=>u(_)(u(n)))},s(m.$t("common.copy")),1)])])]))}}),rt=t=>(ee("data-v-b6259822"),t=t(),te(),t),dt={class:"px-3 text-default bg-[#f2f0ef]"},it={class:"gap-2 mt-2 flex-start"},nt={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl"},ct={class:"gap-1 flex-start"},lt=rt(()=>e("img",{src:me,class:"w-4 h-4",alt:""},null,-1)),ut={class:"font-semibold"},mt={class:"mt-5 mb-3 flex-center"},ht=$({setup(t){const{t:i}=q(),[o,n]=J(!1),{commodities:m,merchantForceReceived:y}=ue(),{getMerchantDhKey:g,decryptAddressKey:H,decryptKey:w}=re(),{orderGoodsStore:k}=de(),R=M(),U=Z(),j=R.query.id,c=A(null),C=async()=>{var T,D,N,B;const l=k.orderGood.id||j,d=await ie({id:l}),x=["receiverCity","receiverCounty","receiverDetailInfo","receiverProvince","receiverPhone","receiver","postscript"];if((T=d.data)!=null&&T.submitHash){const v=await g((D=d.data)==null?void 0:D.address,(N=d.data)==null?void 0:N.submitUserPubKey);v&&(d.data=H(d.data,v,x))}if(d.data.shippingHash){const v=await g(d.data.address,(B=d.data)==null?void 0:B.shippingUserPubKey);if(v){const O=w(d.data.expressNo,v);O.hash===d.data.shippingHash&&(d.data.expressNo=O.decrypt,d.data.expressCompany=w(d.data.expressCompany,v).decrypt)}}c.value=d.data;const f=await m(c.value.odGoodsId);c.value.commitStatus=f.status,I.value=await ne()>f.nextActionTime},S=l=>{U.push(l)},F=async()=>{n(!0);const l=await y(c.value.odGoodsId);n(!1),l.success&&(se(i("common.success")),setTimeout(()=>{C()},1500))},I=A(!1),E=()=>{S("/oneSaleOrderDelivery"),k.changeOrderGoodAction(JSON.stringify(c.value))};return z(async()=>{await C()}),(l,d)=>{var f;const x=W("VanButton");return a(),r("div",dt,[e("div",it,[p(le),e("div",null,s(l.$t("order.orderDetail")),1)]),c.value?(a(),r(Q,{key:0},[p(Ce,{status:((f=c.value)==null?void 0:f.commitStatus)||-1},null,8,["status"]),p(at,{order:c.value},null,8,["order"]),e("div",nt,[e("div",ct,[lt,e("div",ut,s(l.$t("order.goodsInfo")),1)]),p(ce,{onHandleTo:S,goods:c.value},null,8,["goods"])]),p(Le,{order:c.value},null,8,["order"]),e("div",mt,[c.value.commitStatus===30?(a(),r("button",{key:0,class:"btn-orange py-3 px-[70px] text-white text-sm font-semibold",onClick:E},s(l.$t("order.Ship")),1)):h("",!0),I.value&&c.value.commitStatus===40?(a(),X(x,{key:1,round:"",class:"btn text-white bg-[#FEA021] px-6 h-9 font-semibold",onClick:F,loading:u(o)},{default:Y(()=>[b(s(l.$t("order.forced receipt")),1)]),_:1},8,["loading"])):h("",!0)])],64)):h("",!0)])}}}),xt=L(ht,[["__scopeId","data-v-b6259822"]]);export{xt as default};
