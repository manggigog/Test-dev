import{_ as W,y as M,E as G,K as D,G as n,N as z,H as t,F as u,J as te,a0 as j,Q as d,P as a,I as se,O as x,Y as oe,Z as ne,a2 as y,w as de,x as Y,bc as X,r as h,D as $e,a3 as we,a4 as K,R as ke,bq as je,a1 as be,l as Ie,bs as Te,ba as Se,T as P,U as He,bG as Ae,bl as Ve,X as Ee,$ as Ne,z as xe,bh as Pe,n as Ue}from"./vendor-CjApaIpB.js";import{_ as Xe}from"./auth-icon-DbwNTi2t.js";import{_ as Ke}from"./member-BMygrgIC.js";import{b as Qe,_ as We,g as V,e as ue,aS as Ye,a4 as Ze,r as Ce,u as Je,aT as et,aU as tt,aV as st,V as ce,aW as ot,W as nt,aR as lt,aX as at,S as it}from"./index-lKIcPnY0.js";import{R as ee,_ as ct,M as rt}from"./rangking-Bvm-HxSI.js";import{R as Be}from"./RatioBox-B4KGLbLx.js";import{_ as ut}from"./ApproveInfo-Cu2y4770.js";import{B as dt}from"./BoutiqueLabelInLogo-A3q-qRMW.js";import{q as mt}from"./beiRanking-3R1HbwSb.js";import{_ as ft}from"./MCOIN-BcbOHmhy.js";import{_ as ht}from"./ImgBoutiqueLable-kFX5j2-1.js";import{q as pt}from"./cart-CFO7zzai.js";import{C as vt}from"./CommonVanProvider-B8cLU3Mi.js";import{_ as gt}from"./logo-CT48NEDW.js";import{c as yt,i as wt,s as xt}from"./convertToImage-Bw6wgzgM.js";import{M as _t}from"./MallTabBar-qisy7G3s.js";import{R as $t}from"./RemovedShelves-B1hFtBvn.js";import{q as _e}from"./mall-1rXHNG0u.js";import{s as kt}from"./useOrderStatus-DMn11Py2.js";import{O as bt,b as It}from"./offlineGoods-Biq4pIIG.js";import"./shop-CeqcS6K2.js";import"./BackIcon-D2Vm_lyR.js";import"./browser-DFlSdkZC.js";import"./upload-g92hiEmD.js";const Tt="/Test-dev/static/images/kefu-D_Ko4rIY.svg",St="/Test-dev/static/images/collect-oXqS1C1N.png",Ct="/Test-dev/static/images/collected-BX-G0Q8O.png",Bt="/Test-dev/static/images/share-tVl568Cu.svg",qt="/Test-dev/static/images/governance-BAxxHEE2.svg",Dt=e=>(oe("data-v-754a2b67"),e=e(),ne(),e),Lt={class:"py-8 text-base text-center text-black"},Ft={class:"flex flex-wrap items-center justify-center flex-1 gap-x-4 gap-y-1"},Rt={class:"w-[30px] flex-center bg-[#FED73A] rounded-3xl ml-1"},zt=Dt(()=>t("img",{src:Ke,class:"w-2.5 h-2.5"},null,-1)),Gt={class:"text-xs"},Mt={class:"mt-5"},Ot={class:"flex justify-center"},jt=M({props:{show:{type:Boolean},list:{default:()=>[]}},emits:["close"],setup(e,{emit:m}){return(i,c)=>{const o=G("van-button");return n(),D(We,{width:"90%",show:e.show,name:i.$t("shop.Service Guarantee"),teleport:"body",onClose:c[1]||(c[1]=()=>{m("close")})},{default:z(()=>[t("div",Lt,[t("div",Ft,[(n(!0),u(se,null,te(e.list,p=>(n(),u("div",{class:"flex items-center text-sm",key:p},[j(d(p.address&&a(Qe)(p.address,"....",4,3))+" ",1),t("div",Rt,[zt,t("span",Gt,"v"+d(p.memberLevel),1)])]))),128))]),t("div",Mt,d(i.$t("shop.Already guaranteed for this store")),1)]),t("div",Ot,[x(o,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:c[0]||(c[0]=p=>m("close"))},{default:z(()=>[j(d(i.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Ht=W(jt,[["__scopeId","data-v-754a2b67"]]),At={key:0,class:"flex items-center min-w-fit"},Vt=["src"],Et={class:"bg-[#FFF1D6] rounded-2xl text-xs font-normal py-0.5 px-1.5 pl-3.5"},Nt=M({props:{rankNum:null,type:{default:ee.SR},showHelpButton:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},emits:["help"],setup(e){return(m,i)=>+e.rankNum>0?(n(),u("div",At,[t("img",{src:a(V)(`images/shop/rank${e.rankNum>3?4:e.rankNum}.png`),class:"inline-block w-[14px] h-[16px] -mr-2.5 z-10"},null,8,Vt),t("div",Et,[j(d(e.type===a(ee).EBR?m.$t("ranking.store boost",{num:e.rankNum}):m.$t("ranking.recently hot sales",{num:e.rankNum}))+" ",1),e.showHelpButton&&e.isLogin?(n(),u("span",{key:0,onClick:i[0]||(i[0]=c=>m.$emit("help")),class:"ml-1 text-newOrigin text-xs font-normal cursor-pointer text-left"},d(e.type===a(ee).EBR?m.$t("ranking.power_to"):m.$t("mall.Help TA")),1)):y("",!0)])])):y("",!0)}}),Pt={key:0,class:"border-[0.5px] border-solid border-[#FF8812] rounded px-1 py-0.5 text-[#FF8812] text-xxs font-normal min-w-fit"},Ut=M({props:{time:{default:0}},setup(e){const m=e,{t:i}=de(),c=Y(()=>{const o=m.time||0;if(o<30)return i("common.immediateDelivery");if(o<60)return i("common.expressText",{txt:`1${i("common.minute")}`});const p=o/60,f=p/60,k=f/24;return k>=1?i("common.expressText",{txt:`${Math.round(k)}${i("common.day")}`}):f>=1?i("common.expressText",{txt:`${Math.round(f)}${i("common.hour")}`}):i("common.expressText",{txt:`${Math.floor(p)||1}${i("common.minute")}`})});return(o,p)=>e.time?(n(),u("span",Pt,d(a(c)),1)):y("",!0)}}),Xt=e=>(oe("data-v-054950fa"),e=e(),ne(),e),Kt={class:"relative"},Qt={class:"py-3 z-[999]"},Wt={class:"w-full flex justify-start items-center px-2.5"},Yt={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Zt=["src"],Jt={class:"absolute right-0 top-0"},es={class:"ml-2 flex flex-col justify-between items-start"},ts={key:0,src:qt,class:"w-4 mr-1 align-text-top"},ss={class:"flex items-center bg-[#FED73A] rounded-xl py-[0.20rem] px-1.5"},os=Xt(()=>t("img",{src:Xe,class:"inline-block w-3 h-3 mr-0.5"},null,-1)),ns={class:"text-xxs text-default"},ls={class:"flex items-center text-sm text-primary"},as={class:"ml-1"},is={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},cs={class:"w-full flex justify-start items-center mt-2 gap-1.5 overflow-x-auto px-2.5"},rs={class:"mt-3 overflow-x-auto px-2.5"},us={key:0,class:"flex"},ds=["onClick"],ms=["src"],fs={key:1,class:"flex"},hs={class:"flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]"},ps=["src"],vs=M({props:{info:null,list:{default:()=>[]},authorizeInfo:null},emits:["handleTo"],setup(e,{expose:m,emit:i}){const c=e,{accountStore:o}=ue(),[p,f]=X(!1),[k,L]=X(!1),C=h({}),B=async()=>{var v,_,w,T,b;if(!((v=c.info)!=null&&v.id))return;const{success:I,data:r}=await mt({shopId:(_=c.info)==null?void 0:_.id,month:Ye()});!I||(r==null?void 0:r.status)!==1||(C.value={...r,mai:r.allMai,type:2,id:r.rankingId,avatar:(w=c.info)==null?void 0:w.logo,nickname:(T=c.info)==null?void 0:T.storeName,address:(b=c.info)==null?void 0:b.merchant})},R=I=>{const r=c.info.scenery.split(",")||[];je({images:r,startPosition:I||0,loop:!1,closeOnPopstate:!0})};return $e(()=>{B()}),m({getMyRanking:B}),(I,r)=>{var _,w,T;const v=G("van-rate");return n(),u("div",Kt,[t("div",Qt,[t("div",Wt,[t("div",Yt,[t("img",{src:e.info.logo||e.info.scenery&&e.info.scenery.split(",")[0]||a(V)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Zt),t("div",Jt,[x(dt,{type:e.info.type},null,8,["type"])])]),t("div",es,[t("div",{class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] inline-flex",onClick:r[1]||(r[1]=K(b=>e.list&&e.list.length>0?a(L)(!0):null,["stop"]))},[e.list&&e.list.length>0?(n(),u("img",ts)):y("",!0),j(" "+d(e.info.storeName)+" ",1),(_=e.authorizeInfo)!=null&&_.authorizeAddress?(n(),u("div",{key:1,onClick:r[0]||(r[0]=K(()=>{a(f)(!0)},["stop"])),class:"inline-block ml-1.5 lex-shrink-0 align-text-bottom"},[t("div",ss,[os,t("span",ns,d(I.$t("ecology.authorized")),1)])])):y("",!0)]),t("div",ls,[x(v,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.info.star,"onUpdate:modelValue":r[2]||(r[2]=b=>e.info.star=b),size:16,gutter:"0",color:"#FEA021"},null,8,["modelValue"]),t("span",as,d(e.info.star),1)])]),t("div",is,[x(Be,{tag:I.$t("common.rebate"),ratio:e.info.discountRatio||0},null,8,["tag","ratio"])])]),t("div",cs,[(w=C.value)!=null&&w.sort?(n(),D(Nt,{key:0,"rank-num":(T=C.value)==null?void 0:T.sort,type:a(ee).EBR,"show-help-button":!0,"is-login":a(o).isLogin,onHelp:r[3]||(r[3]=b=>i("handleTo",`/talentRanking/rankingShop?shopId=${e.info.id}`))},null,8,["rank-num","type","is-login"])):y("",!0),we(I.$slots,"like",{},void 0,!0),x(ct,{type:e.info.buyFlag?1:e.info.watchFlag?2:e.info.followFlag?3:0},null,8,["type"]),e.info.recentExpressSeconds?(n(),D(Ut,{key:1,time:e.info.recentExpressSeconds},null,8,["time"])):y("",!0),e.info.metakeyFlag?(n(),D(rt,{key:2})):y("",!0)]),t("div",rs,[e.info.scenery?(n(),u("div",us,[(n(!0),u(se,null,te(e.info.scenery.split(","),(b,H)=>(n(),u("div",{key:b,class:ke(["flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]",e.info.scenery.split(",").length-1===H?"":"mr-2"]),onClick:A=>R(H)},[t("img",{src:b||a(V)("images/goods/defaultImg.png"),class:"object-cover w-full h-full aspect-square rounded-xl",alt:""},null,8,ms)],10,ds))),128))])):(n(),u("div",fs,[t("div",hs,[t("img",{src:e.info.logo||a(V)("images/goods/defaultImg.png"),class:"w-full h-full aspect-square rounded-xl object-cover"},null,8,ps)])]))]),we(I.$slots,"default",{},void 0,!0)]),x(Ht,{list:e.list,show:a(k),onClose:r[4]||(r[4]=b=>a(L)(!1))},null,8,["list","show"]),a(p)&&e.authorizeInfo?(n(),D(ut,{key:0,show:a(p),info:e.authorizeInfo,onClose:r[5]||(r[5]=b=>a(f)(!1))},null,8,["show","info"])):y("",!0)])}}}),gs=W(vs,[["__scopeId","data-v-054950fa"]]),ys="/Test-dev/static/images/plus-DOIrZp3k.png",ws={key:0,class:"bg-white rounded-xl p-3 my-3"},xs={class:"text-base font-semibold"},_s=["onClick"],$s={class:"relative w-[80px] h-[80px] flex-shrink-0 bg-b5 overflow-hidden rounded-lg"},ks={class:"object-cover w-full h-full aspect-square",fit:"cover"},bs={class:"w-full min-h-[80px] flex flex-col justify-between ml-2"},Is={class:"text-b1 font-semibold line-clamp-1"},Ts={class:"text-b3 font-normal line-clamp-1"},Ss={class:"text-b3 font-normal"},Cs={class:"flex justify-between items-center"},Bs={class:"flex-start"},qs=t("img",{class:"w-4 h-4 mr-1",src:ft},null,-1),Ds={class:"font-semibold mr-1"},Ls=["onClick"],Fs=t("img",{src:ys,class:"w-5 h-5"},null,-1),Rs=[Fs],zs={key:0},Gs={key:1},Ms=M({props:{merchantAddress:null},setup(e,{expose:m}){const i=e,c=be(),{t:o}=de(),p=Ie(),f=h([]),k=h(!1),L=h(!1),C=h(0),B=h(10),R=h(0),[I,r]=X(!1),v=()=>{r(!I.value)},_=g=>{p.push(`/goodsDetail?id=${g.id}`)},w=async()=>{k.value=!0,C.value+=1,await H(),k.value=!1},T=Y(()=>{var g;return I.value?f.value:(g=f.value)==null?void 0:g.slice(0,2)}),b=h([]),H=async()=>{const g=await Ze({page:C.value,size:B.value,isActivity:1,boutiqueTop:!0,merchantAddress:i.merchantAddress});if(k.value=!1,!g.success){L.value=!0;return}if(!g.data||!g.total){L.value=!0;return}R.value=g.total,b.value=g.data||[],f.value=C.value===1?b.value:f.value.concat(b.value),f.value.length>=R.value&&(L.value=!0)},A=()=>{C.value=0,R.value=0,L.value=!1,f.value=[],w()},O=async g=>{if(g.stock===0&&g.goodsTypes!==2){P(o("order.Insufficient stock"));return}P.loading({duration:0});const E={needlogin:"true",...c.query};p.replace({path:c.path,query:E});const U=await pt(g.id);P.clear(),U.success&&P(o("cart.addTips"))};return m({init:A}),(g,E)=>{const U=G("van-icon"),le=G("VanList"),Z=Te("lazy");return L.value&&R.value===0?y("",!0):(n(),u("div",ws,[t("div",xs,d(g.$t("shop.curactive")),1),x(le,{loading:k.value,"onUpdate:loading":E[0]||(E[0]=q=>k.value=q),finished:L.value,"loading-text":g.$t("common.loading"),onLoad:w},{default:z(()=>[(n(!0),u(se,null,te(a(T),q=>(n(),u("div",{class:"flex mt-3",key:q.id,onClick:N=>_(q)},[t("div",$s,[Se(t("img",ks,null,512),[[Z,q.icons&&q.icons.split(",")[0]||a(V)("images/goods/defaultImg.png")]]),x(ht,{activity:!0,type:2})]),t("div",bs,[t("section",null,[t("div",Is,d(q.goodsName),1),t("div",Ts,d(q==null?void 0:q.goodsDesc),1),t("div",Ss,d(g.$t("mall.15th sale",{salesVolume:q.volume15})),1)]),t("div",Cs,[t("div",Bs,[qs,t("span",Ds,d(q.price),1),x(Be,{tag:g.$t("common.rebate"),ratio:q.discountRatio||0},null,8,["tag","ratio"])]),t("div",{onClick:K(N=>O(q),["stop"])},Rs,8,Ls)])])],8,_s))),128)),f.value.length>2?(n(),u("div",{key:0,onClick:v,class:"text-xs text-b3 font-normal text-center mt-3.5"},[a(T).length==2?(n(),u("div",zs,[j(d(g.$t("shop.chakanhuodongshsangpin"))+" ",1),x(U,{name:"arrow-down"})])):(n(),u("div",Gs,[j(d(g.$t("refund.put way"))+" ",1),x(U,{name:"arrow-up"})]))])):y("",!0)]),_:1},8,["loading","finished","loading-text"])]))}}}),Os={class:"bg-white rounded-xl my-3 py-3"},js={class:"flex-center-bw px-3"},Hs={class:"text-base font-semibold"},As={class:"pl-3 pt-3"},Vs=["onClick"],Es={class:"object-cover w-full h-full aspect-square",fit:"cover"},Ns=M({props:{boutiqueGoods:null,title:null,type:null},emits:["toMore","toDetail"],setup(e,{emit:m}){const i=e,c=()=>{m("toMore",i.type)};return(o,p)=>{const f=G("van-icon"),k=G("van-swipe-item"),L=G("van-swipe"),C=Te("lazy");return n(),u("div",Os,[t("div",js,[t("div",Hs,d(e.title),1),t("div",{class:"text-xs text-b3 whitespace-nowrap",onClick:c},[j(d(o.$t("common.check more")),1),x(f,{name:"arrow"})])]),t("div",As,[x(L,{class:"flex-start",loop:!1,width:126,"show-indicators":!1},{default:z(()=>[(n(!0),u(se,null,te(e.boutiqueGoods,(B,R)=>(n(),D(k,{class:"flex",key:B.id},{default:z(()=>[t("div",{class:ke(["flex-1 w-full",{"mr-4":R<e.boutiqueGoods.length-1}])},[t("div",{onClick:()=>m("toDetail",B),class:"relative w-[110px] h-[110px] flex-shrink-0 bg-black-100 overflow-hidden rounded-lg"},[Se(t("img",Es,null,512),[[C,B&&B.goods&&B.goods.icons&&B.goods.icons.split(",")[0]||a(V)("images/goods/defaultImg.png")]])],8,Vs)],2)]),_:2},1024))),128))]),_:1})])])}}}),re=W(Ns,[["__scopeId","data-v-9f70f930"]]),Ps="/Test-dev/static/images/shop-zan-CIPmIHxz.svg",Us={class:"bg-[#FFF1D6] rounded-2xl text-xs py-0.5 px-1.5 flex items-center gap-x-1 min-w-fit"},Xs=t("img",{src:Ps,class:"w-[14px] h-[14px]"},null,-1),Ks=M({props:{likeFlag:{type:Boolean,default:!0},likeCount:{default:0},isLogin:{type:Boolean,default:!1}},emits:["onLike"],setup(e){return(m,i)=>(n(),u("div",Us,[Xs,t("span",null,d(e.likeCount),1),!e.likeFlag&&e.isLogin?(n(),u("span",{key:0,onClick:i[0]||(i[0]=c=>m.$emit("onLike")),class:"text-newOrigin text-xs cursor-pointer text-left"},d(m.$t("shop.like")),1)):y("",!0)]))}}),Qs={class:"flex items-center justify-between text-b3 text-xs mt-3"},Ws={class:"w-[70%] flex items-center"},Ys={key:0,class:"shrink-0"},Zs={class:"w-fit line-clamp-1 truncate"},Js={key:1,class:"shrink-0"},eo={class:"shrink-0 flex items-center whitespace-nowrap ml-3"},to=M({props:{commentReview:null,commentTotal:null},setup(e){const m=e,i=Y(()=>{var c;return!!((c=m.commentReview)!=null&&c.commentContent)});return(c,o)=>{const p=G("van-icon");return n(),u("div",Qs,[t("div",Ws,[a(i)?(n(),u("div",Ys,"“")):y("",!0),t("div",Zs,d(e.commentReview.commentContent),1),a(i)?(n(),u("div",Js,"”")):y("",!0)]),t("div",eo,[t("span",null,d(c.$t("offline.shop_evaluate_num",{num:e.commentTotal||0})),1),x(p,{name:"arrow",class:"text-xxs text-[#666] ml-1"})])])}}}),qe=e=>(oe("data-v-2bfae1a2"),e=e(),ne(),e),so={class:"w-full h-[190px] overflow-hidden"},oo=["src"],no={key:0,class:"absolute left-0 w-full px-3 flex-center-bw top-3"},lo={class:"ml-1 text-sm"},ao={class:"mt-[-45px]"},io={class:"border-4 rounded-2xl border-solid border-[#FFF] drop-shadow-lg w-[90px] h-[90px] bg-[#D9D9D9] m-auto"},co=["src"],ro={class:"text-[#2E2008] font-medium text-lg text-center mt-5"},uo={class:"flex items-center justify-between px-5 pt-10 pb-5"},mo={class:"flex items-center"},fo={class:"border border-solid border-[#D9D9D9] p-1"},ho={class:"text-[#2E2008] opacity-80 ml-3"},po=qe(()=>t("br",null,null,-1)),vo=qe(()=>t("img",{src:gt,class:"w-[60px] h-[60px] object-contain"},null,-1)),go=M({props:{show:{type:Boolean},shopInfo:null},emits:["close","onSuceess"],setup(e,{emit:m}){const{shopInfo:i,show:c}=e,{width:o,height:p}=He(),f=h(null),k=h(100);Ae(f,_=>{const w=_[0],{height:T}=w.contentRect;k.value=T||100});const L=Y(()=>window.location.origin+"/#/category?deliveryType=1&init=1&shopId="+i.id),{loadingToggle:C}=Ce(),[B,R]=X(!1),I=()=>{m("close")},r=()=>{R(!0),C(!0),document.getElementById("saveHtml")?setTimeout(()=>{v()},200):setTimeout(()=>{v()},3e3)},v=async()=>{let _=document.getElementById("saveHtml");_.style.display="block";const w=await yt(_);await wt(w)&&(_.style.display="none",xt(w,i.storeName||""),I(),_.style.display="block",R(!1),C(!1),m("onSuceess"))};return(_,w)=>{const T=G("van-icon"),b=G("VanButton"),H=G("van-popup");return n(),D(H,{show:e.show,"onUpdate:show":w[1]||(w[1]=A=>Ne(c)?c.value=A:null),onClickOverlay:I,class:"w-full h-full bg-default/20",style:Ee({paddingLeft:`${(a(o)-300)/2}px`,paddingTop:`${(a(p)-k.value)/2}px`}),onClick:I},{default:z(()=>[t("div",{class:"w-[300px] rounded-lg overflow-hidden",onClick:w[0]||(w[0]=K(()=>{},["stop"]))},[t("div",{class:"w-[300px] relative bg-white",id:"saveHtml",ref:(A,O)=>{O.saveHtml=A,f.value=A}},[t("div",so,[t("img",{src:(e.shopInfo.shareImg||e.shopInfo.scenery||a(V)("images/shop/shop_bg.png"))+"?"+new Date().getTime(),class:"object-cover w-full",alt:"",crossOrigin:"anonymous"},null,8,oo)]),a(B)?y("",!0):(n(),u("div",no,[x(b,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:r},{default:z(()=>[x(T,{name:"back-top",class:"rotate-180",size:"18"}),t("span",lo,d(_.$t("common.save")),1)]),_:1}),t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:I},[x(T,{name:"cross"})])])),t("div",ao,[t("div",io,[t("img",{src:(e.shopInfo.logo||a(V)("images/goods/defaultImg.png"))+"?"+new Date().getTime(),class:"h-[82px] aspect-square rounded-xl object-fill",crossOrigin:"anonymous"},null,8,co)]),t("div",ro,d(e.shopInfo.storeName||"-"),1),t("div",uo,[t("div",mo,[t("div",fo,[x(Ve,{value:a(L),size:60,level:"H"},null,8,["value"])]),t("div",ho,[j(d(_.$t("common.new found")),1),po,j(d(_.$t("common.share you")),1)])]),vo])])],512)])]),_:1},8,["show","style"])}}}),yo=W(go,[["__scopeId","data-v-2bfae1a2"]]),De=e=>(oe("data-v-083d1b81"),e=e(),ne(),e),wo={class:"flex items-center gap-4"},xo=De(()=>t("img",{class:"w-5 h-5",src:Tt},null,-1)),_o=[xo],$o={key:0,class:"w-5 h-5",src:St},ko={key:1,class:"w-5 h-5",src:Ct},bo=De(()=>t("img",{class:"w-5 h-5",src:Bt},null,-1)),Io=[bo],To={key:0,class:"px-3 safe-body overflow-y-scroll"},So={class:"px-2.5"},Co=M({name:"Shop"});function Bo(e){const{orderGoodsStore:m}=ue(),{t:i}=de(),{loadingToggle:c}=Ce(),o=h({}),p=be(),f=Ie(),k=h(null),{login:L}=Je(),[C,B]=X(!1),[R,I]=X(!1),r=h(),v=Y(()=>p.query.shopId),_=()=>{var s,l;(s=o.value)!=null&&s.merchant&&O(`/shopInfo?address=${(l=o.value)==null?void 0:l.merchant}`)},w=s=>{s===2?f.push(`category?shopId=${+v.value}&deliveryType=1`):s===3?f.push(`category?shopId=${+v.value}&deliveryType=2`):f.push(`boutique-goods?shopId=${+v.value}`)},T=h(null),b=h(null);xe(v,async s=>{var l,S;s&&s!==b.value&&(c(!0),b.value=s,k.value&&(k.value.list=[]),await he(),k.value&&k.value.resetData(),r.value&&((l=r.value)==null||l.getMyRanking()),T.value&&((S=T.value)==null||S.init()),c(!1))});const H=h(null),A=async()=>{const s=await it(o.value.merchant);s.success&&s.data&&(H.value=s.data)},O=s=>{f.push(s)},g=async()=>{const s=await nt(v.value);!s.success||!s.data||(o.value=s.data,await Ue(),Re())},E=async s=>{c(!0);const{success:l}=await st({shopId:s.id,type:s.isFollow?2:1});c(!1),l&&(s.isFollow=!s.isFollow,s.isFollow?P({message:i("mall.Followed-tip"),icon:ce("toast-success.svg"),duration:3e3}):P({message:i("mall.Unlocked successfully"),icon:ce("toast-success.svg"),duration:3e3}))},U=()=>{P({message:i("common.Saved successfully"),icon:ce("toast-success.svg"),duration:3e3})},le=()=>{m.changeOfflineInfo({store:o.value});const s={key:v.value,orderType:bt.STORE};f.push({path:"/offlineSubmit",query:s})},Z=h([]),q=async()=>{var l,S,F;if(!((l=o.value)!=null&&l.type))return;const s=await _e({merchant:(S=o.value)==null?void 0:S.merchant,status:1,page:1,size:12,type:(F=o.value)==null?void 0:F.type,sortType:3,orderBy:1});s.success&&(Z.value=s.data)},N=h(null),me=async()=>{var l;N.value=[];const s=await _e({merchant:(l=o.value)==null?void 0:l.merchant,status:1,page:1,size:12,deliveryType:1});s.success&&(N.value=s.data)},ae=h([]),Le=async()=>{if(!v.value)return;N.value=[];const{success:s,data:l}=await lt({shopId:Number(v.value),goodsStatus:It.Published,page:1,size:12,sortBy:"desc|goods_sales_volume"});s&&(ae.value=(l.records||[]).map(S=>({...S,goods:{icons:(S==null?void 0:S.goodsIcons)||""}})))},fe=h([]),Fe=async()=>{const{success:s,data:l}=await at({page:1,size:10,shopId:p.query.shopId});s&&(fe.value=l&&l[0].guaranteeList||[])},he=async()=>{await g(),q(),me(),Le(),Fe(),A()},pe=h(null),Re=()=>{pe.value&&pe.value.addEventListener("scroll",Ge)},ze=h(1),ve=h([]),Ge=s=>{const{scrollTop:l}=s.target,{length:S}=ve.value;for(let F=0;F<S;F++)if(l<ve.value[F].offsetTop){ze.value=F+1;break}},{accountStore:ge}=ue(),Me=async()=>{if(!ge.isLogin)return I(!0);o.value.likeFlag||(ot({shopId:v.value}),o.value.likeCount++,o.value.likeFlag=!0)};xe(()=>{var s;return(s=o.value)==null?void 0:s.merchant},async s=>{s&&await me()});const ye=h(0),J=h(null),Oe=async()=>{var S,F,Q,$;const s={page:1,size:1,shopId:v.value,sortBy:"desc|comment_time",havePicsFlag:null,commentStatus:1},l=await tt(s);l.success?(S=l.data)!=null&&S.records&&((F=l.data)==null?void 0:F.records.length)>0&&(J.value=(Q=l.data)==null?void 0:Q.records[0],ye.value=(($=l.data)==null?void 0:$.total)||0):J.value=null};return $e(async()=>{c(!0),await he(),await Oe(),c(!1)}),Pe(()=>{N.value=[]}),(s,l)=>{const S=G("VanButton");return n(),D(vt,{class:"h-full font-Puhui font-normal safe-bottom-page relative",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"}},{right:z(()=>[t("div",wo,[t("div",{onClick:_},_o),t("div",{onClick:l[0]||(l[0]=F=>E(o.value))},[o.value.isFollow?(n(),u("img",ko)):(n(),u("img",$o))]),t("div",{onClick:l[1]||(l[1]=K(F=>a(B)(!0),["stop"]))},Io)])]),default:z(()=>{var F,Q;return[o.value&&Object.keys(o.value).length!==0&&o.value.status==1?(n(),u("div",To,[o.value&&Object.keys(o.value).length!==0?(n(),D(gs,{key:0,ref:($,ie)=>{ie.shopHeader=$,r.value=$},info:o.value,list:fe.value,authorizeInfo:H.value,onHandleTo:l[3]||(l[3]=$=>O($)),onFollowShop:E,class:"bg-white rounded-xl"},{like:z(()=>{var $;return[x(Ks,{"like-flag":o.value.likeFlag,"like-count":($=o.value)==null?void 0:$.likeCount,"is-login":a(ge).isLogin,onOnLike:Me},null,8,["like-flag","like-count","is-login"])]}),default:z(()=>[t("div",So,[x(S,{round:"",class:"w-full text-b1 h-[46px] px-[1.125rem] bg-yellow text-base font-semibold mt-3",onClick:le},{default:z(()=>[j(d(s.$t("common.payBill")),1)]),_:1}),J.value?(n(),D(to,{key:0,commentTotal:+ye.value,commentReview:J.value,onClick:l[2]||(l[2]=K($=>O("/offline-evaluate-home?shopId="+a(v)),["stop"]))},null,8,["commentTotal","commentReview"])):y("",!0)])]),_:1},8,["info","list","authorizeInfo"])):y("",!0),x(Ms,{ref:($,ie)=>{ie.shopActivity=$,T.value=$},merchantAddress:(F=o.value)==null?void 0:F.merchant},null,8,["merchantAddress"]),o.value.type?(n(),D(re,{key:1,boutiqueGoods:Z.value,title:s.$t("shop.Main Store")+a(kt)(o.value.type),onToMore:w,onToDetail:l[4]||(l[4]=$=>O(`/goodsDetail?id=${$.goods.id}`))},null,8,["boutiqueGoods","title"])):y("",!0),x(re,{boutiqueGoods:N.value,type:2,onToMore:w,title:s.$t("shop.our_products"),onToDetail:l[5]||(l[5]=$=>O(`/goodsDetail?id=${$.goods.id}`))},null,8,["boutiqueGoods","title"]),(ae.value||[]).length?(n(),D(re,{key:2,boutiqueGoods:ae.value,type:3,onToMore:w,title:s.$t("shop.offline_services"),onToDetail:l[6]||(l[6]=$=>O(`/offlineGoodsDetail?goodsId=${$.goodsId}`))},null,8,["boutiqueGoods","title"])):y("",!0)])):o.value&&Object.keys(o.value).length!==0?(n(),D($t,{key:1,type:"shop"})):y("",!0),a(C)?(n(),D(yo,{key:2,show:a(C),shopInfo:o.value,onClose:l[7]||(l[7]=$=>a(B)(!1)),onOnSuceess:U},null,8,["show","shopInfo"])):y("",!0),a(v)?(n(),D(_t,{key:3,shopId:+a(v),shopType:(Q=o.value)==null?void 0:Q.type},null,8,["shopId","shopType"])):y("",!0),a(R)?(n(),D(et,{key:4,onLogin:a(L)},null,8,["onLogin"])):y("",!0)]}),_:1},8,["title"])}}const qo=M({...Co,setup:Bo}),tn=W(qo,[["__scopeId","data-v-083d1b81"]]);export{tn as default};
