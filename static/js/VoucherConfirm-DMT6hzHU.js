import{_ as A,y as S,E as b,F as d,G as a,H as t,a3 as z,O as y,Q as o,P as f,I as R,J as F,a2 as $,a0 as x,R as q,B as C,Y as V,Z as N,r as H,z as J,x as I,K as k,N as g,a4 as K,$ as E,n as U,bc as Q,bd as Y}from"./vendor-CjApaIpB.js";import{_ as O}from"./selected-icon-DEJAhYK1.js";import{_ as Z}from"./MCOIN-BcbOHmhy.js";import{u as W}from"./useOrderStatus-DMn11Py2.js";import{l as X,d as B,b2 as ee,q as T}from"./index-DBW_ANsl.js";import{u as te}from"./useRefundStatus-BOTs0ra-.js";import{P as j}from"./flashSale-DDyqLyYN.js";const D=e=>(V("data-v-7ee5fe8c"),e=e(),N(),e),se={class:"flex items-center justify-between"},oe={class:"gap-3 flex-start"},ne={key:0,class:"w-4 h-4",src:O,alt:""},re={key:1,class:"w-4 h-4 border border-solid rounded-full border-[#000]/40"},le={class:"text-sm font-normal"},ae={class:"text-xs text-[#A6A6A6]"},ce={class:"h-[36px] text-sm font-semibold text-newOrigin whitespace-nowrap flex justify-start items-start"},ie={class:"flex w-full gap-3"},de={class:"flex-1 flex flex-col min-h-[5rem] justify-between"},ue={class:"flex justify-between w-full font-semibold"},me={class:"mr-1 text-base leading-[22px] line-clamp-2 text-[#2E2008]"},fe={class:"text-base leading-[22px] text-[#2E2008] min-w-fit"},he={key:0},ve={key:1,class:"flex items-center text-sm font-normal text-[#A6A6A6]"},pe={class:"text-sm font-normal text-[#A6A6A6]"},xe={key:0,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},ye={key:1,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},_e={key:2,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},be={class:"flex justify-end text-sm font-semibold text-[#A6A6A6]"},we={class:"font-normal text-sm mr-1"},ge={key:0},$e={key:1,class:"flex text-sm font-normal flex-row items-center text-newOrigin"},Ie=D(()=>t("img",{class:"w-4 h-4 mr-1 font-normal text-sm",src:Z},null,-1)),ke=D(()=>t("span",null,"Â Mcoin",-1)),Ae=S({props:{order:null,isList:{type:Boolean},selectIds:null},emits:["select"],setup(e,{emit:h}){const{order:c}=e,n=W(c.refundStatus,c.payType),v=l=>{const u=l.number??1,m=l.cardPrice??0,i=l.goodsActivityReduceAmount??0,s=new C(m*u-i).toNumber();return B(s)},p=l=>{const u=new C(l.price).times(l.number).minus(l.goodsActivityReduceAmount||0).plus(l.goodsAdjustChangeAmount||0).toNumber();return B(u||0)};return(l,u)=>{const m=b("VanImage");return a(),d("div",{class:q(["px-3 py-3 bg-white rounded-xl box-border default-border",{"border-orange":e.selectIds&&e.selectIds.includes(e.order.id)}]),onClick:u[0]||(u[0]=i=>h("select",e.order))},[t("div",se,[t("div",oe,[t("div",null,[e.selectIds&&e.selectIds.includes(e.order.id)?(a(),d("img",ne)):(a(),d("div",re))]),y(m,{round:"",src:e.order.stores&&e.order.stores.logo,class:"store-img w-8 h-8 overflow-hidden",alt:"",fit:"cover"},null,8,["src"]),t("div",le,[t("p",null,o(e.order.stores&&e.order.stores.storeName),1),t("p",ae,o(f(X)(e.order.createTime))+" "+o(l.$t("order.buied")),1)])]),t("div",ce,o(f(n)[e.order.status+""]),1)]),(a(!0),d(R,null,F(e.order.orderGoods,i=>{var s,r;return a(),d("div",{class:"mt-4",key:i.goodsName},[t("div",ie,[y(m,{src:(i.icons||"").split(",")[0],class:"w-20 h-20 overflow-hidden",style:{"border-radius":"0.625rem"},alt:"",fit:"cover"},null,8,["src"]),t("div",de,[t("div",null,[t("div",ue,[t("div",me,o(i.goodsName),1),t("div",fe,[e.order.payType===f(j).STORE_CARD?(a(),d("span",he,o(i.cardPrice||0)+o((s=e.order.fmStoredCard)==null?void 0:s.symbol),1)):(a(),d("div",ve,[t("span",null,o(i.price||0)+" Mcoin",1)]))])]),t("div",pe,o(l.$t("order.quantity",{number:i.number||0})),1)]),e.order.status===5||e.order.refundStatus===3?(a(),d("div",xe,o(l.$t("refund.refund success tips")),1)):e.order.refundStatus!=null&&e.order.status===1&&e.order.refundStatus===4?(a(),d("div",ye,o(l.$t("refund.refund reject")),1)):$("",!0),e.order.refundStatus!=null?(a(),d("div",_e,o(f(te)(e.order.refundStatus)),1)):$("",!0),t("div",be,[t("span",we,o(l.$t("order.actual payment")),1),e.order.payType===f(j).STORE_CARD?(a(),d("span",ge,o(v(i))+o((r=e.order.fmStoredCard)==null?void 0:r.symbol),1)):(a(),d("span",$e,[Ie,x(" "+o(p(i)),1),ke]))])])])])}),128)),z(l.$slots,"default",{},void 0,!0)],2)}}}),P=A(Ae,[["__scopeId","data-v-7ee5fe8c"]]),Se={class:"px-3 text-base"},Ce={class:"flex justify-center items-center h-[44px]"},Be={class:"flex items-center font-bold"},Te={class:"overflow-y-scroll max-h-[70vh] pb-[100px]"},je={class:"mt-3 text-sm font-normal"},Pe={class:"text-primary font-semibold"},Re={class:"text-primary font-semibold"},Fe={class:"flex flex-col mt-3"},Ve={class:"receipt__wrap flex flex-col items-center justify-center gap-3 py-5 px-6 fixed bottom-0 left-0 right-0"},Ne={class:"text-sm font-normal text-black"},Ee={class:"w-full flex flex-row justify-between items-center"},Oe={class:"flex items-center justify-center"},De={key:0,class:"w-4 h-4",src:O,alt:""},Ge={key:1,class:"w-4 h-4 border border-solid rounded-full border-[#000]/40"},Me={key:0,class:"text-default"},Le=S({props:{show:{type:Boolean},list:null,currentId:null,loading:{type:Boolean}},emits:["close","receipt"],setup(e,{emit:h}){const c=e,n=H([]);J(()=>c.show,s=>{if(s){const r=document.getElementById("container");U(()=>{r&&r.scrollIntoView()}),n.value=[],n.value.push(c.currentId)}},{deep:!0});const v=s=>{const r=s.id;n.value.includes(r)?n.value=n.value.filter(_=>_!==r):n.value.push(r)},p=()=>{h("receipt",n.value)},l=I(()=>c.list&&c.currentId?c.list.find(s=>+s.id==+c.currentId):[]),u=I(()=>c.list&&c.currentId?c.list.filter(s=>+s.id!=+c.currentId):[]),m=I(()=>{const s=[c.currentId,...u.value.map(r=>r.id)];return n.value.length===s.length&&s.every(r=>n.value.includes(r))}),i=()=>{if(m.value)n.value=[];else{const s=[c.currentId,...u.value.map(r=>r.id)];n.value=s}};return(s,r)=>{const _=b("van-icon"),M=b("VanButton"),L=b("van-popup");return a(),k(L,{show:e.show,"onUpdate:show":r[1]||(r[1]=w=>E(show)?show.value=w:null),round:"",class:"bg-[#F3F3F3]",position:"bottom",onClose:r[2]||(r[2]=w=>h("close")),"safe-area-inset-bottom":"","stop-propagation":!1},{default:g(()=>[t("div",Se,[t("div",Ce,[t("div",Be,o(s.$t("order.Have you confirmed receipt of the goods")),1),y(_,{class:"absolute right-2.5",name:"cross",size:"20",color:"#000",onClick:r[0]||(r[0]=K(()=>h("close"),["stop"]))})]),t("div",Te,[f(l)?(a(),k(P,{key:0,id:"container",onSelect:v,selectIds:n.value,order:f(l)},null,8,["selectIds","order"])):$("",!0),t("div",je,[x(o(s.$t("order.there are"))+" ",1),t("span",Pe,o(f(u).length),1),x(" "+o(s.$t("order.order merchant"))+" ",1),t("span",Re,o(s.$t("order.already")),1),x(" "+o(s.$t("order.can confirm receipt in batches")),1)]),t("div",Fe,[(a(!0),d(R,null,F(f(u),w=>(a(),d("div",{key:w.id},[y(P,{class:"mb-3",onSelect:v,selectIds:n.value,order:w},null,8,["selectIds","order"])]))),128))]),t("div",Ve,[t("div",Ne,o(s.$t("order.to ensure your after-sales right")),1),t("div",Ee,[t("div",{class:"flex flex-col items-center justify-center cursor-pointer",onClick:i},[t("div",Oe,[f(m)?(a(),d("img",De)):(a(),d("div",Ge))])]),y(M,{loading:e.loading,round:"",disabled:!n.value||n.value&&n.value.length<=0,class:"ml-2 h-10 text-default min-w-[calc(100%-32px)] bg-btnOrBg rounded-[60px] font-semibold text-base",onClick:p},{default:g(()=>[x(o(s.$t("order.oneKeyConfirmGeted"))+" ",1),n.value.length?(a(),d("span",Me,o(s.$t("order.selected count num",{count:n.value.length||0})),1)):$("",!0)]),_:1},8,["loading","disabled"])])])])])]),_:1},8,["show"])}}}),nt=A(Le,[["__scopeId","data-v-d38f364c"]]),ze="/Test-dev/static/images/success_logo-D0wfRRL8.png",qe="/Test-dev/static/images/success-CE-AM3EJ.svg",G=e=>(V("data-v-34373161"),e=e(),N(),e),He=G(()=>t("img",{class:"w-[109px] h-auto ml-auto -mb-20",src:ze},null,-1)),Je={class:"w-full p-5 bg-[#FEFFF9] rounded-[10px] text-center"},Ke=G(()=>t("img",{src:qe,class:"w-10 h-10 mx-auto"},null,-1)),Ue={class:"py-3"},Qe={class:"flex justify-center"},Ye=S({emits:["handleTo","reload"],setup(e,{expose:h,emit:c}){const[n,v]=Q(!1),p=Y({amount:null}),l=m=>(p.amount=ee(m,T.voucherBack,T.FMCP).amount,p.amount?(v(!0),!0):!1);function u(){v(!1),c("reload")}return h({showToastPop:l}),(m,i)=>{const s=b("van-button"),r=b("VanPopup");return a(),k(r,{show:f(n),"onUpdate:show":i[1]||(i[1]=_=>E(n)?n.value=_:null),position:"center",style:{background:"transparent","min-width":"280px","max-width":"335px"},onClickOverlay:u,onClick:u},{default:g(()=>[He,t("div",Je,[Ke,t("div",Ue,o(m.$t("voucher.confirmGeted",{amount:f(p).amount})),1),t("div",Qe,[y(s,{type:"primary",class:"border border-solid border-primary rounded-[40px] w-1/2 h-10 mx-2.5 text-primary font-semibold",onClick:u},{default:g(()=>[x(o(m.$t("common.I_see")),1)]),_:1}),y(s,{onClick:i[0]||(i[0]=_=>c("handleTo")),class:"w-1/2 h-10 mx-2.5 btn-orange btn-shadow text-white font-semibold"},{default:g(()=>[x(o(m.$t("common.go_see")),1)]),_:1})])])]),_:1},8,["show"])}}}),rt=A(Ye,[["__scopeId","data-v-34373161"]]);export{nt as B,rt as V};
