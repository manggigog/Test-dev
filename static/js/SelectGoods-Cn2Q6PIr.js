import{C as S}from"./CommonVanProvider-BpsZUrD3.js";import{_ as b}from"./SearchBar-DUv-Q4mh.js";import{e as C,aJ as L,as as V}from"./index-DDhEkd_5.js";import{H as q}from"./HomeGoodsItem-CU3x-miH.js";import{_ as B,r as t,a1 as G,D as R,K as m,G as n,N as _,l as $,E as A,H as g,O as F,F as H,J as M,I as U}from"./vendor-BUT0HZ5j.js";import"./BackIcon-biFt6cm7.js";import"./search-Dwmdj_3F.js";import"./delete-C3qvlPYO.js";import"./store-CPx32ymB.js";import"./MCOIN-BcbOHmhy.js";import"./useCityMap-SBIl8UZu.js";import"./RatioBox-AW0ZHDVT.js";import"./ImgBoutiqueLable-BF5Xoxsv.js";import"./shop-CeqcS6K2.js";const z={class:"px-3"},E={class:"goods__wrap overflow-y-scroll mt-3 h-[calc(100vh-100px)]"},J={setup(P){const{cityMapStore:h}=C(),d=G(),y=$(),f=t({storeName:d.query.storeName?decodeURIComponent(d.query.storeName):"",storeId:d.query.storeId?d.query.storeId:""}),c=t({keyword:""}),u=t(0),k=t(20),s=t(!1),l=t(!1),a=t([]),w=()=>{console.log(c.value.keyword),I(),v()},I=()=>{a.value=[],u.value=0,s.value=!1,l.value=!1},v=async()=>{s.value=!0,u.value+=1,l.value=!1,await x(),s.value=!1},x=async()=>{var e;const{success:r,data:o}=await L({goodsNameLike:c.value.keyword,page:u.value,size:k.value,storeId:(e=f.value)==null?void 0:e.storeId,sortBy:"asc|goods_id"});if(!r||!o||!o.total){l.value=!0;return}const i=o.records||[];a.value=u.value===1?i:[...a.value,...i],a.value.length>=o.total&&(l.value=!0)},N=r=>{r.goodsId&&h.setSelectedGoods(r),y.back()};return R(()=>{v()}),(r,o)=>{const i=A("van-list");return n(),m(S,{title:f.value.storeName||"选择服务",class:"bg-white font-Puhui font-normal relative","theme-vars":{"nav-bar-background-color":"#fff","field-placeholder-text-color":"#A6A6A6"},ref:(e,p)=>{p.searchRef=e}},{default:_(()=>[g("div",z,[F(b,{modelValue:c.value.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value.keyword=e),placeholder:"请输入服务名称","search-button-text":"搜索",onSearch:w},null,8,["modelValue"]),g("div",E,[a.value.length===0&&!s.value?(n(),m(V,{key:0,name:"该门店暂无服务记录"})):(n(),m(i,{key:1,loading:s.value,"onUpdate:loading":o[1]||(o[1]=e=>s.value=e),finished:l.value,"finished-text":r.$t("common.noMore"),onLoad:v},{default:_(()=>[(n(!0),H(U,null,M(a.value,e=>(n(),m(q,{key:e.goodsId,goods:e,class:"mb-4 :last:mb-0",onClick:p=>N(e),"show-store-name":!1},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])]),_:1},8,["title"])}}},ae=B(J,[["__scopeId","data-v-2673812c"]]);export{ae as default};
