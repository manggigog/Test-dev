import{_ as b,y as C,U as B,r as p,z as S,E as V,K as F,G as I,N as k,H as n,O as E,ba as N,X as m,P as v,bb as P,a4 as $,$ as A,a0 as h,Y as D,Z as O}from"./vendor-CjApaIpB.js";import{_ as R}from"./Lottie-ni5dUCha.js";import{bq as f}from"./index-CduCwCyL.js";const z=o=>(D("data-v-0fb196b0"),o=o(),O(),o),L={class:"center-card text-b1 font-semibold"},q=z(()=>n("div",{class:"container relative"},[n("div",{class:"center-text",id:"original"},[n("div",null,"完成充电投票"),n("div",null,[h("获得 "),n("span",{class:"text-newOrigin"},"1"),h(" 张抵用券")])])],-1)),H=[q],M=C({props:{show:{type:Boolean},shopId:null,teleport:null},emits:["close"],setup(o,{emit:w}){const{show:r,teleport:T}=o,{height:c}=B(),a=p(null),d=p(!1),u=async()=>{d.value=!0,await f(500);const t=document.getElementById("original").cloneNode(!0);t.id="cloned-animation",t.classList.add("animated-div"),document.querySelector(".container").appendChild(t)},i=()=>{w("close")},y=38;function l(e){var t;Math.round(e.currentTime)===y&&(u(),(t=a.value)==null||t.lottieAnimation.removeEventListener("enterFrame",l))}const x=async()=>{var e;try{(e=a.value)==null||e.lottieAnimation.addEventListener("enterFrame",l)}catch{await f(1300),u()}};return S(()=>{var e;return(e=a.value)==null?void 0:e.lottieAnimation},e=>{console.log("lottieAnimation:",e),e&&x()}),(e,t)=>{const g=V("VanPopup");return I(),F(g,{show:o.show,"onUpdate:show":t[1]||(t[1]=s=>A(r)?r.value=s:null),teleport:o.teleport,onClickOverlay:$(i,["stop"]),onClose:i,round:"",class:"bg-transparent position-center",sty:"",style:{width:"100%","max-width":"375px"}},{default:k(()=>[n("div",{class:"w-full overflow-hidden relative",style:m({height:`${v(c)}px`}),onClick:i},[E(R,{path:"lottie/expand.json",renderer:"svg",loop:!1,class:"w-full",style:m({height:`${v(c)}px`}),ref:(s,_)=>{_.lottieRef=s,a.value=s},onEnterFrame:t[0]||(t[0]=s=>l())},null,8,["style"]),N(n("div",L,H,512),[[P,d.value]])],4)]),_:1},8,["show","teleport","onClickOverlay"])}}}),K=b(M,[["__scopeId","data-v-0fb196b0"]]);export{K as V};
