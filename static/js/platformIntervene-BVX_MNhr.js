import{_ as S,y as z,be as N,bf as A,a1 as D,D as P,F as f,G as a,H as i,O as r,Q as n,N as m,P as l,E as p,I as $,J as I,K as x,a2 as v,a0 as u,a4 as y}from"./vendor-BUT0HZ5j.js";import{D as j}from"./DeliveredItem-DTu_F5_-.js";import{C as E}from"./ChangeRegion-CK5Y8WZc.js";import{l as O,H as R}from"./order-BoOTHyt5.js";import{B as M}from"./BackIcon-biFt6cm7.js";import{b as q}from"./index-k1FFr-1T.js";import{f as H}from"./useOrderStatus-BSCfQVBG.js";import"./avatarRing-DpEnkbQ2.js";import"./address-BEqE8lWA.js";import"./GoodsItem-B9no7He4.js";import"./credit-Chkxk9-q.js";import"./mcoin-logo-1-BPG653EL.js";import"./flashSale-DDyqLyYN.js";import"./useShipTemplate-SAWfRcmZ.js";import"./enums-DlE-aiss.js";import"./orderTime-9z_oI6gw.js";import"./ChangeRegionPop-C7x8iMg_.js";const T={class:"px-3 bg-[#f2f0ef] mb-1"},G={class:"gap-2 mt-2 flex-start"},J={class:"text"},K={class:"flex justify-between mt-2.5 text-sm text-[#2E2008]"},Q={class:"font-medium opacity-60"},U={class:""},W={class:"mt-5 bg-[#F9F9F9] rounded-md p-2.5"},X={class:"flex items-center text-xxs gap-1.5 text-primary"},Y={key:0,class:"mt-4 flex flex-col gap-2.5"},Z={class:"font-bold text-primary"},ee={key:0,class:"flex justify-end gap-4 mt-5"},te={key:1,class:"flex justify-end mt-5"},se=z({setup(oe){const[g,b]=N(!1),e=A({active:1,page:0,size:10,finished:!1,list:[],loading:!1,total:0}),B=t=>{const s=H();return t.fmRefundReason&&t.fmRefundReason[s]},w=()=>{e.page=0,e.finished=!1,e.list=[],k()},k=async()=>{e.loading=!0,e.page+=1,await F(),e.loading=!1},F=async()=>{const t={page:e.page,size:e.size,type:4},s=await O(t);if(e.loading=!1,!s.success){e.finished=!0;return}if(!s.data||!s.total){e.finished=!0;return}e.total=s.total,e.list=e.page===1?s.data:e.list.concat(s.data),e.list.length>=e.total&&(e.finished=!0)},C=D();C.query.active&&(e.active=Number(C.query.active));const h=async(t,s)=>{try{if(b(!0),s){const{success:d}=await R({orderId:t.id,status:1});d&&w()}else{const{success:d}=await R({orderId:t.id,status:2});d&&w()}}finally{b(!1)}};return P(async()=>{}),(t,s)=>{const d=p("van-icon"),L=p("i18n-t"),_=p("VanButton"),V=p("VanList");return a(),f("div",T,[i("div",G,[r(M),i("div",J,n(t.$t("order.Platform intervention")),1),r(E,{showIcon:!0,showDownIcon:!0,class:"ml-auto bg-gray1 px-2 rounded-[20px] border-2 border-solid border-white",style:{"box-shadow":"0px 0px 15px 0px rgba(51, 47, 42, 0.3) inset"}})]),r(V,{class:"mt-2.5",loading:l(e).loading,"onUpdate:loading":s[0]||(s[0]=o=>l(e).loading=o),finished:l(e).finished,"finished-text":t.$t("common.noMore"),"loading-text":t.$t("common.loading"),onLoad:k},{default:m(()=>[(a(!0),f($,null,I(l(e).list,o=>(a(),x(j,{key:o.id,order:o,isService:!0},{default:m(()=>[i("div",K,[i("div",Q,n(t.$t("refund.reasonforreturn")),1),i("div",U,n(B(o)),1)]),i("div",W,[i("div",X,[r(d,{name:"warning",color:"#FEA021",size:"14"}),u(" "+n(t.$t("order.saleAuth")),1)]),o.fmOrdersPlatformInterventions&&o.fmOrdersPlatformInterventions.length>0?(a(),f("div",Y,[(a(!0),f($,null,I(o.fmOrdersPlatformInterventions,c=>(a(),f("div",{class:"flex items-center text-sm font-normal",key:c.id},[r(L,{keypath:"order.saleAuthRes",tag:"span"},{address:m(()=>[i("span",Z,n(l(q)(c.address,"....",5,4)),1)]),res:m(()=>[u(n(c.status===1?t.$t("common.agree"):t.$t("common.reject")),1)]),_:2},1024),c.status===1?(a(),x(d,{key:0,name:"checked",color:"#07C160",class:"ml-auto",size:"17"})):(a(),x(d,{key:1,name:"clear",color:"#FF4444",class:"ml-auto",size:"17"}))]))),128))])):v("",!0)]),+o.refundStatus==10?(a(),f("div",ee,[r(_,{class:"border-orange bg-[#fff] rounded-3xl text-[#fea021] w-[130px] h-[45px]",onClick:y(c=>h(o,!0),["stop"]),loading:l(g)},{default:m(()=>[u(n(t.$t("common.Buyer agrees")),1)]),_:2},1032,["onClick","loading"]),r(_,{class:"btn-orange rounded-3xl text-white w-[130px] h-[45px]",onClick:y(c=>h(o,!1),["stop"]),loading:l(g)},{default:m(()=>[u(n(t.$t("common.Seller agrees")),1)]),_:2},1032,["onClick","loading"])])):v("",!0),+o.refundStatus==20?(a(),f("div",te,[r(_,{class:"border-orange bg-[#fff] rounded-3xl text-[#fea021] w-[130px] h-[45px]",onClick:y(c=>h(o,!0),["stop"]),loading:l(g)},{default:m(()=>[u(n(t.$t("common.agree")),1)]),_:2},1032,["onClick","loading"])])):v("",!0)]),_:2},1032,["order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])}}}),be=S(se,[["__scopeId","data-v-3b3dd08e"]]);export{be as default};
