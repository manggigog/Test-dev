import{_ as X}from"./default-img-DtI_kRg6.js";import{_ as O,y as G,w as ee,x as R,E as I,K as P,G as a,N as u,H as t,F as c,a2 as V,Q as n,P as i,O as p,I as B,J as D,a0 as T,T as q,br as A,Y as H,Z as K,bc as M,r as m,D as te,l as se,R as oe}from"./vendor-D6JO6WHW.js";import{b as N,_ as ae,l as le}from"./index-CybuWkSo.js";import{B as ne}from"./BackIcon-CPUEW9je.js";import{C as re}from"./ConcatPop-DhjCMsdT.js";import{f as ce,a as ie}from"./concat-wMyLg38D.js";import{u as de}from"./user-6913AfeQ.js";import"./upload-pRJ1Wopi.js";import"./upload-1CGUg1c4.js";const Q=l=>(H("data-v-398dfccf"),l=l(),K(),l),ue=Q(()=>t("div",{class:"h-2"},null,-1)),fe={class:"max-h-[60vh] overflow-y-auto"},me={class:"bg-[#F4F4F4] rounded-xl mb-2.5 p-2.5"},pe={class:"text-sm text-[#2E2008]/60"},_e={class:"py-2 text-base text-[#2E2008]"},he={key:0,class:"w-full"},ve=["src"],xe={class:"text-sm text-right text-primary/60"},ge={class:"py-2 text-base text-right text-primary"},be={key:0,class:"w-full pb-2 text-right"},we=["src"],ye=Q(()=>t("div",{class:"h-4"},null,-1)),ke={class:"text-center flex-center-bw px-2"},$e=G({props:{show:{type:Boolean},data:null,lv:null},emits:["close","reply","delete"],setup(l,{emit:b}){const o=l,y=ee().t,E=()=>{var s;if(o.lv>3)b("reply",(s=o.data)==null?void 0:s.id);else{q(y("common.lv4 tips"));return}},k=()=>{var s;if(o.lv>3){b("delete",(s=o.data)==null?void 0:s.id);return}else{q(y("common.lv4 tips"));return}},f=R(()=>o.data.imageUrls?o.data.imageUrls.split(","):[]),_=s=>{A({images:f.value,closeable:!0,showIndex:!0,startPosition:s})},g=(s,d)=>{A({images:s,closeable:!0,showIndex:!0,startPosition:d})},J=R(()=>{if(o!=null&&o.data.replyJson)try{return(o==null?void 0:o.data.replyJson.split("----")).map(d=>{const h=JSON.parse(d);return{...h,showImgs:h.imageUrls?h.imageUrls.split(","):[]}})}catch(s){return console.log(s),[]}return[]});return(s,d)=>{const h=I("van-grid-item"),C=I("van-grid"),F=I("VanButton");return a(),P(ae,{width:"90%",show:l.show,name:s.$t("user.feedbackDetail"),onClose:d[0]||(d[0]=()=>{b("close")})},{default:u(()=>[ue,t("div",fe,[t("div",me,[t("div",pe,n(i(N)(l.data.address,"****",4,4)),1),t("div",_e,n(l.data.content),1),i(f)&&i(f).length>0?(a(),c("div",he,[p(C,{style:{"padding-left":"0"},border:!1,gutter:10,"column-num":4,square:""},{default:u(()=>[(a(!0),c(B,null,D(i(f),(r,w)=>(a(),P(h,{key:r,onClick:S=>_(w)},{default:u(()=>[t("img",{src:r,class:"w-full h-full rounded-lg"},null,8,ve)]),_:2},1032,["onClick"]))),128))]),_:1})])):V("",!0)]),(a(!0),c(B,null,D(i(J),(r,w)=>(a(),c("div",{key:w,class:"bg-[#F4F4F4] mb-2.5 rounded-xl p-2.5"},[t("div",xe,n(i(N)(r.address,"****",4,4)),1),t("div",ge,n(r.content),1),r.showImgs&&r.showImgs.length>0?(a(),c("div",be,[p(C,{style:{"padding-right":"0","justify-content":"flex-end"},border:!1,gutter:10,"column-num":4,square:""},{default:u(()=>[(a(!0),c(B,null,D(r.showImgs,(S,v)=>(a(),P(h,{key:v,onClick:U=>g(r.showImgs,v)},{default:u(()=>[t("img",{src:S,class:"w-full h-full rounded-lg"},null,8,we)]),_:2},1032,["onClick"]))),128))]),_:2},1024)])):V("",!0)]))),128))]),ye,t("div",ke,[p(F,{class:"font-semibold border-solid border border-[#fea021] text-primary h-[38px] min-w-[120px] px-4 rounded-3xl text-base",onClick:k},{default:u(()=>[T(n(s.$t("common.delete")),1)]),_:1}),p(F,{class:"font-semibold btn h-[38px] min-w-[120px] px-4 rounded-3xl text-base",onClick:E},{default:u(()=>[T(n(s.$t("user.I want to reply")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Ie=O($e,[["__scopeId","data-v-398dfccf"]]),Ce=l=>(H("data-v-7d359736"),l=l(),K(),l),Fe={class:"w-full bg-[#F2F0EF]"},Se={class:"relative -z-0 h-[44px] bg-[#FFFFFF]"},Be={class:"absolute top-3 left-2.5 text-[#2E2008] flex items-center h-5"},De={class:"font-medium"},Ve={class:"overflow-y-auto bg-white scroll-box"},Ee=["onClick"],Je=Ce(()=>t("img",{src:X,class:"flex-shrink-0 w-11 h-11"},null,-1)),Le={class:"w-[calc(100%-3.5rem)] flex flex-col h-11 justify-between"},Pe={class:"flex justify-between w-full text-sm"},Te={class:"text-[#2E2008]/60"},Ne={class:"flex items-center w-full"},Ue={key:0,style:{flex:"0 0 6px"},class:"w-[6px] h-[6px] rounded-full mr-2.5 bg-[#FB1A18]"},je={class:"w-full truncate text-black-600"},ze={key:1,class:"px-1.5 flex-shrink-0 ml-4 py-1 text-xs text-primary rounded border border-primary"},Re={class:"mt-2 text-xs text-center"},qe={class:"flex flex-col items-center justify-center mt-[20px] pb-[20px] px-4"},Ae=G({setup(l){const b=se(),[o,y]=M(!1),[E,k]=M(!1),f=m(!1),_=m(!1),g=m(0),J=m(10),s=m(0),d=m(null),h=()=>{b.push("/concatSubmit")},C=e=>{d.value=e||null,y(!0)},F=e=>{e&&(_.value=!1,g.value=0,s.value=0,L()),y(!1),k(!1)},r=async e=>{d.value=e||null,(await ce({id:e||""})).success&&(k(!1),_.value=!1,g.value=0,s.value=0,L())},w=m(null),S=e=>{w.value=e,b.push("/concatDetail?id="+e.id)},v=m([]),U=async()=>{const e=await ie({page:g.value,size:J.value});if(!e.success){_.value=!0;return}if(!e.data||!e.total){_.value=!0;return}s.value=e.total,v.value=g.value===1?e.data:v.value.concat(e.data),v.value.length>=s.value&&(_.value=!0)},j=m({}),Y=async()=>{const e=await de();!e.success||!e.data||(j.value=e.data)},L=async()=>{f.value=!0,g.value+=1,await U(),f.value=!1};return te(()=>{Y()}),(e,$)=>{const Z=I("VanList"),W=I("VanButton");return a(),c("div",Fe,[t("header",Se,[t("div",Be,[p(ne,null,{default:u(()=>[t("span",De,n(e.$t("common.comminicate")),1)]),_:1})])]),t("div",Ve,[p(Z,{loading:f.value,"onUpdate:loading":$[0]||($[0]=x=>f.value=x),finished:_.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:L},{default:u(()=>[(a(!0),c(B,null,D(v.value,(x,z)=>(a(),c("div",{key:z,onClick:Me=>S(x),class:oe(["flex items-center border-b px-4 gap-3 border-solid border-[#000000]/10 py-5 w-full",{"border-none":z===v.value.length-1}])},[Je,t("div",Le,[t("div",Pe,[t("span",null,n(i(N)(x.address,"...",5,5)),1),t("span",Te,n(i(le)(x.createTime)),1)]),t("div",Ne,[x.replyJson?V("",!0):(a(),c("div",Ue)),t("div",je,n(x.content),1),x.replyJson?(a(),c("div",ze,n(e.$t("user.Replied")),1)):V("",!0)])])],10,Ee))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),t("div",Re,n(e.$t("common.lv4 tips")),1),t("div",qe,[p(W,{class:"font-semibold btn h-[38px] min-w-[160px] px-4 rounded-3xl text-base",onClick:h},{default:u(()=>[T(n(e.$t("user.Ialsofeedback")),1)]),_:1})]),p(re,{id:d.value,show:i(o),onClose:F},null,8,["id","show"]),p(Ie,{lv:j.value.memberLevel,data:w.value,show:i(E),onReply:C,onDelete:r,onClose:$[1]||($[1]=()=>{i(k)(!1)})},null,8,["lv","data","show"])])}}}),et=O(Ae,[["__scopeId","data-v-7d359736"]]);export{et as default};
