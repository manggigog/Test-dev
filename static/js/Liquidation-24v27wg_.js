import{_ as nt}from"./bg-dot-bY5zV9J7.js";import{_ as I,y as A,r as w,F as d,G as c,H as o,Q as a,R as y,I as F,J as L,X as j,Y as P,Z as U,a2 as _,P as n,a0 as C,E as v,O as h,N as k,bc as ct,w as it,x as $,bd as dt,B as z,D as rt,a1 as ut,l as mt,n as ft,K as ht}from"./vendor-D6JO6WHW.js";import{E as gt}from"./EcologyHeader-san7Ns-Y.js";import{_ as vt}from"./copy-w-Dr8nkqKW.js";import{_ as bt}from"./link-CItP-_Ep.js";import{h as pt,b as N,a5 as G,ao as kt,d as Y,q as xt,a7 as yt,N as _t}from"./index-CybuWkSo.js";import{B as $t}from"./BackIcon-CPUEW9je.js";import{u as wt}from"./lendingPoolContract-DdJpPR6p.js";import"./UserLevel-Cw0ldKsx.js";import"./avatarRing-DtI_kRg6.js";import"./UserAsset-DxS-WgVn.js";import"./TokenBalance-B0WwY7MA.js";const Ct=e=>(P("data-v-031a8168"),e=e(),U(),e),At=["onClick"],Bt=Ct(()=>o("div",{class:"h-[2px]"},null,-1)),St=A({props:{list:null,color:{default:"rgba(255, 255, 255, 0.4)"},activeColor:{default:"white"}},emits:["change"],setup(e,{expose:r,emit:g}){const l=w(null),b=u=>{l.value!==u.desc?l.value=u.desc:l.value=u.asc,g("change",l.value)},p=()=>{l.value=null,g("change",l.value)};return r({resetSort:p}),(u,T)=>(c(),d("div",{class:y(["py-3 px-2.5 flex items-center text-sm text-black-0 font-light",e.list.length==1?"justify-start":"justify-between"])},[o("div",{class:y({" font-semibold":!l.value,"mr-[57px]":e.list.length==1}),onClick:p},a(u.$t("common.default")),3),(c(!0),d(F,null,L(e.list,t=>(c(),d("div",{class:"flex items-center",key:t.asc,onClick:V=>b(t)},[o("div",{class:y(["mr-2.5",{"font-semibold":l.value===t.asc||l.value===t.desc}])},a(t.name),3),o("div",null,[o("div",{class:y(["triangle_up",{triangle_up_active:l.value===t.asc}]),style:j(l.value===t.asc?`border-bottom-color: ${e.activeColor}`:`border-bottom-color: ${e.color}`)},null,6),Bt,o("div",{class:y(["triangle_down",{triangle_down_active:l.value===t.desc}]),style:j(l.value===t.desc?`border-top-color: ${e.activeColor}`:`border-top-color: ${e.color}`)},null,6)])],8,At))),128))],2))}}),qt=I(St,[["__scopeId","data-v-031a8168"]]),Ft={class:"font-normal text-[#2E2008] ml-2.5 text-sm"},Lt={class:"flex items-center justify-between pb-2.5 border-b border-soild border-[#724422]/20"},It=o("img",{src:vt,class:"w-4 h-4 ml-1",alt:""},null,-1),Tt={class:"mt-1.5 text-xs text-balck-300 font-normal"},Vt={key:0,class:"font-semibold text-[#FB1A18]"},Et={key:1,class:"font-semibold text-[#FB1A18]"},Rt={class:"flex-center-bw mt-2.5"},Mt={class:"font-semibold font-WorkSans"},Dt={class:"flex-center-bw mt-2.5"},jt={class:"font-semibold font-WorkSans"},zt={class:"flex-center-bw mt-2.5"},Nt={class:"font-semibold font-WorkSans"},Wt={key:0,class:"flex-center-bw mt-2.5"},Pt={class:"font-semibold font-WorkSans"},Ut=["href"],Gt=o("img",{src:bt,class:"w-5 h-5 ml-1",alt:"Link to BSC"},null,-1),Yt={class:"flex-center-bw mt-2.5"},Ht={class:"font-semibold font-WorkSans"},W=A({props:{data:{default:()=>({})}},setup(e){return(r,g)=>(c(),d("div",Ft,[o("div",Lt,[o("div",null,[o("div",null,a(r.$t("ecology.flow id"))+" "+a(e.data.id),1),e.data.borrower?(c(),d("div",{key:0,class:"mt-1.5 text-xs text-balck-300 font-normal flex items-center",onClick:g[0]||(g[0]=l=>n(pt)(e.data.borrower))},[C(a(n(N)(e.data.borrower,"***",5,5))+" ",1),It])):_("",!0),o("div",Tt,a(n(G)(e.data.startTime*1e3,"Y/m/d H:i:s")),1)]),e.data.status===2?(c(),d("div",Vt,a(r.$t("ecology.Cleared")),1)):(c(),d("div",Et,a(r.$t("ecology.Overdue days",{time:n(kt)(e.data.dueTime*1e3)})),1))]),o("div",Rt,[o("span",null,a(r.$t("ecology.Original loan amount")),1),o("span",Mt,a(e.data.loanAmount)+" MUSD ",1)]),o("div",Dt,[o("span",null,a(r.$t("jiebei.wait pay amount")),1),o("span",jt,a(n(Y)(e.data.result))+" MUSD",1)]),o("div",zt,[o("span",null,a(r.$t("ecology.Mortgage quantity")),1),o("span",Nt,a(e.data.collateralAmount)+" MAI",1)]),e.data.hash?(c(),d("div",Wt,[o("span",null,a(r.$t("order.hash")),1),o("span",Pt,[o("a",{class:"text-sm font-normal text-right flex items-center underline text-[#FF8812]",href:`${n(xt).chainConfig.blockExplorerUrls[0]}/tx/${e.data.hash}`},[C(a(n(N)(e.data.hash,"***",9,5)||"--")+" ",1),Gt],8,Ut)])])):_("",!0),o("div",Yt,[o("span",null,a(r.$t("ecology.morgage date")),1),o("span",Ht,a(n(yt)(e.data.dueTime)),1)])]))}}),Ot={class:"fixed bottom-0 w-full px-2.5 safe-bottom sm:bottom-[0%] lg:bottom-[0%] z-20 cartbarBody safe-bottom-page pointer-events-none"},Jt={class:"w-full h-14 flex items-center justify-between pb-0.5 px-3.5 bg-white rounded-xl sm:w-[355px] shadow-2 pointer-events-auto"},Kt={class:"font-normal text-[#2E2008]"},Qt={class:"flex items-center gap-3 text-base font-semibold font-WorkSans"},Xt={class:"text-sm opacity-80"},Zt=A({props:{checked:null,loading:{type:Boolean},totalAmount:null,isCheckAll:{type:Boolean}},emits:["submit","totalCheck"],setup(e,{emit:r}){return(g,l)=>{const b=v("VanRadio"),p=v("VanButton");return c(),d("div",Ot,[o("div",Jt,[o("div",Kt,[o("div",Qt,[h(b,{checked:e.isCheckAll,"checked-color":"#FEA021",onClick:l[0]||(l[0]=u=>r("totalCheck"))},null,8,["checked"]),C(" "+a(e.totalAmount||0)+" Mai ",1)]),o("div",Xt,a(g.$t("ecology.pens selected",{num:e.checked.length})),1)]),h(p,{class:"btn-red btn-shadow px-8 min-w-[135px] h-[40px] text-white",loading:e.loading,disabled:!e.checked.length,onClick:l[1]||(l[1]=u=>r("submit"))},{default:k(()=>[C(a(g.$t("ecology.Liquidation")),1)]),_:1},8,["loading","disabled"])])])}}}),te=I(Zt,[["__scopeId","data-v-312ba4af"]]),ee=e=>_t("GET","/lendingPool/list",e,!1),H=e=>(P("data-v-fb2b3a46"),e=e(),U(),e),oe={class:"mx-2 my-2 rounded-b-xl bg-[#6C4B33] bg-shadow rounded-t-xl relative"},se=H(()=>o("img",{src:nt,class:"w-[130px] h-[75px] absolute bottom-1 right-2"},null,-1)),ae={class:"justify-center items-center text-center relative h-[2.375rem] flex bg-[#2E2008] text-base rounded-t-xl font-semibold text-white p-[3px]"},le={class:"px-1.5"},ne={key:0,class:"items-center pb-2.5 text-white flex px-2.5"},ce={key:0},ie={class:"min-w-min p-2.5"},de={key:0},re=H(()=>o("div",{class:"safe-bottom-page"},null,-1)),ue=A({setup(e){const r=mt(),g=ut(),[l,b]=ct(!1),{liquidateBatch:p}=wt(),{t:u}=it(),T=$(()=>{const s=new Date().getTime()-864e5;return G(s,`Y${u("common.year")}m${u("common.month")}d${u("common.day2")}`)}),t=dt({active:0,page:0,size:10,finished:!1,list:[],loading:!1,total:0,checked:[],sort:null}),V=$(()=>[{name:u("jiebei.wait pay amount"),asc:1,desc:2},{name:u("ecology.Mortgage MAI quantity"),asc:3,desc:4}]),O=s=>{t.sort=s,R()},B=w(null),E=$(()=>!!(t.checked&&t.list&&t.list.length>0&&t.list.length===t.checked.length)),J=()=>{E.value?Q():K()},K=()=>{B.value.toggleAll(!0)},Q=()=>{B.value.toggleAll()},X=$(()=>t.checked&&t.checked.length>0?Y(t.checked.reduce((s,f)=>s.plus(new z(f.collateralAmount)),new z(0))):0),R=()=>{t.page=0,t.total=0,t.finished=!1,t.list=[],t.checked=[],M()},M=async()=>{t.loading=!0,t.page+=1,await et(),setTimeout(()=>{t.loading=!1},1e3)},S=w(null),m=w(null),Z=()=>{var s;m.value=2,r.replace({path:"/ecology-liquidation",query:{status:m.value}}),(s=S.value)==null||s.resetSort()},tt=()=>{var s;m.value===2&&(m.value=null,r.replace({path:"/ecology-liquidation",query:{status:m.value}}),(s=S.value)==null||s.resetSort())},et=async()=>{const s=await ee({page:t.page,size:t.size,sort:t.sort,status:m.value});if(!s.success){t.finished=!0;return}if(!s.data||!+s.total){t.finished=!0;return}t.total=s.total;const f=document.getElementById("fm-page"),q=f.scrollY||f.scrollTop;t.list=t.page===1?s.data:t.list.concat(s.data),t.list.length>=t.total&&(t.finished=!0),ft(()=>{f.scrollTo({top:q})})},ot=async()=>{const s=t.checked.map(f=>+f.id);b(!0);try{if(!(await p(s)).success)return;R()}finally{b(!1)}};return rt(()=>{g.query.status&&(m.value=+g.query.status)}),(s,f)=>{const q=v("van-icon"),D=v("van-swipe-cell"),st=v("van-checkbox"),at=v("van-checkbox-group"),lt=v("VanList");return c(),d("div",{class:"relative",ref:(i,x)=>{x.container=i}},[h(gt),o("div",oe,[se,o("div",ae,[h($t,{onBack:tt,url:m.value===2?"/ecology-liquidation":"",class:"absolute left-2.5 font-normal -translate-y-1/2 top-1/2"},null,8,["url"]),o("span",null,a(m.value===2?s.$t("ecology.Liquidation records"):s.$t("ecology.Loans to be liquidated")),1),m.value!==2?(c(),d("div",{key:0,onClick:Z,class:"text-primary absolute right-2.5 font-normal -translate-y-1/2 top-1/2 text-sm"},a(s.$t("flashSale.Record")),1)):_("",!0)]),o("div",le,[h(qt,{ref:(i,x)=>{x.sortBoxRef=i,S.value=i},list:n(V),onChange:O},null,8,["list"]),m.value!==2?(c(),d("div",ne,[h(q,{name:"info",color:"#fff",size:"18",class:"mr-1.5"}),o("span",null,a(s.$t("ecology.Current display data cutoff"))+a(n(T)),1)])):_("",!0),h(lt,{loading:n(t).loading,"onUpdate:loading":f[1]||(f[1]=i=>n(t).loading=i),finished:n(t).finished,"finished-text":s.$t("common.noMore"),"loading-text":s.$t("common.loading"),onLoad:M},{default:k(()=>[m.value===2?(c(),d("div",ce,[(c(!0),d(F,null,L(n(t).list,i=>(c(),d("div",{class:"bg-[#FFFDF8] rounded-xl mb-2.5",key:i.id},[h(D,null,{default:k(()=>[o("div",ie,[h(W,{data:i},null,8,["data"])])]),_:2},1024)]))),128))])):(c(),ht(at,{key:1,modelValue:n(t).checked,"onUpdate:modelValue":f[0]||(f[0]=i=>n(t).checked=i),ref:(i,x)=>{x.checkboxGroup=i,B.value=i},"checked-color":"#FEA021"},{default:k(()=>[(c(!0),d(F,null,L(n(t).list,i=>(c(),d("div",{class:"bg-[#FFFDF8] rounded-xl mb-2.5",key:i.id},[h(D,null,{default:k(()=>[h(st,{name:i,class:"min-w-min p-2.5"},{default:k(()=>[h(W,{data:i},null,8,["data"])]),_:2},1032,["name"])]),_:2},1024)]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["loading","finished","finished-text","loading-text"])])]),m.value!==2?(c(),d("div",de,[h(te,{isCheckAll:n(E),checked:n(t).checked,loading:n(l),totalAmount:n(X),onSubmit:ot,onTotalCheck:J},null,8,["isCheckAll","checked","loading","totalAmount"]),re])):_("",!0)],512)}}}),we=I(ue,[["__scopeId","data-v-fb2b3a46"]]);export{we as default};
