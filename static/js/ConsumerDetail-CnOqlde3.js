import{x as T,B as F,F as n,G as a,H as t,Q as s,a2 as m,P as o,a0 as g,I as K,_ as G,w as M,bc as U,r as C,a1 as V,D as H,K as w,N as q,T as j,O as k}from"./vendor-D6JO6WHW.js";import{_ as Y}from"./OfflineGoods-B2XKWwbl.js";import{_ as Q}from"./OfflineStore-07wrZPej.js";import{_ as W,a as z}from"./ServiceByStore-UZ467Xtv.js";import{_ as y}from"./MCOIN-BcbOHmhy.js";import{_ as J}from"./USDT-BFPkoPAz.js";import{_ as E}from"./FMCP-CFalj3L2.js";import{_ as X}from"./link-BVzz25qg.js";import{_ as D}from"./copy-w-7FY5xbhR.js";import{d as x,q as Z,b as N,h as P,l as A,R as tt,bd as et}from"./index-Ds2hFbCb.js";import{P as st}from"./order-B5BGKYED.js";import{p as ot}from"./useOrderStatus-DeHjEZ0k.js";import{a as u,o as rt}from"./offlineGoods-Biq4pIIG.js";import{C as at}from"./CommonVanProvider-CI5dtYow.js";import"./ImgBoutiqueLable-Dod52ZXF.js";import"./shop-CeqcS6K2.js";import"./BackIcon-CPUEW9je.js";const nt={class:"p-3 py-4 break-all bg-white rounded-xl"},it={class:"title text-b1 text-sm font-semibold"},ct={class:"content"},lt={class:"flex justify-between items-center mt-[16px]"},dt={class:"text-b3 text-sm font-normal"},mt={class:"text-b1 text-sm font-normal text-right"},ut={class:"flex justify-between items-center mt-[16px]"},ft={class:"text-b3 text-sm font-normal"},ht={class:"text-b1 text-sm font-normal text-right"},xt={class:"flex justify-start items-center"},_t=t("img",{class:"w-[17px] h-[17px] flex-shrink-0",src:y},null,-1),vt={class:"text-b1 text-sm font-normal ml-1"},bt={key:0,class:"flex justify-between items-center mt-[16px]"},yt={class:"text-b3 text-sm font-normal line-clamp-1 max-w-[100px]"},pt={class:"text-b1 text-sm font-normal text-right"},gt={class:"flex justify-start items-center"},wt=t("span",{class:"text-b1 text-sm font-normal"}," - ",-1),kt=t("img",{class:"w-[17px] h-[17px] ml-1",src:y},null,-1),At={class:"text-b1 text-sm font-normal ml-1"},Tt={class:"flex justify-between items-center mt-[16px]"},$t={class:"text-b3 text-sm font-normal"},St={class:"text-b1 text-sm font-normal text-right"},Ct={key:0,class:"flex justify-start items-center"},jt={class:"text-b1 text-sm font-normal ml-1 flex justify-end items-center"},Nt={class:"flex justify-start items-center"},Pt=t("img",{class:"w-[17px] h-[17px] mx-1",src:J},null,-1),Et={class:"flex justify-start items-center ml-1"},Dt=t("span",{class:"text-b3"},"(",-1),Lt=t("img",{class:"w-[17px] h-[17px] mx-1",src:y},null,-1),Rt=t("span",{class:"text-b3"}," ) ",-1),Ot={key:0,class:"flex justify-start items-center"},It=t("span",{class:"text-b3 mx-1"},"+",-1),Bt=t("img",{src:E,class:"w-4 h-4 mr-1"},null,-1),Ft={class:""},Kt={key:1,class:"flex justify-start items-center"},Gt=t("img",{class:"w-[17px] h-[17px] mx-1",src:y},null,-1),Mt={class:"text-b1 text-sm font-normal flex items-center gap-1"},Ut=t("span",{class:"text-b3 mx-1"},"+",-1),Vt=t("img",{src:E,class:"w-4 h-4"},null,-1),Ht={class:""},qt={class:"flex justify-between items-center mt-[16px]"},Yt={class:"text-b3 text-sm font-normal"},Qt={class:"text-b1 text-sm font-normal text-right"},Wt={class:"flex justify-between items-center mt-[16px]"},zt={class:"text-b3 text-sm font-normal"},Jt=["href"],Xt=t("img",{src:X,class:"w-5 h-5 ml-1",alt:""},null,-1),Zt={key:1},te={class:"flex justify-between items-center mt-[16px]"},ee={class:"text-b3 text-sm font-normal"},se=t("img",{src:D,class:"w-5 h-5 ml-1",alt:""},null,-1),oe={key:1,class:"flex justify-between items-center mt-[16px]"},re={class:"text-b3 text-sm font-normal"},ae={class:"text-b1 text-sm font-normal text-right"},ne={key:2,class:"flex justify-between items-center mt-[16px]"},ie={class:"text-b3 text-sm font-normal"},ce={class:"text-b1 text-sm font-normal text-right"},le={key:3,class:"flex justify-between items-center mt-[16px]"},de={class:"text-b3 text-sm font-normal"},me={key:0},ue={key:1},fe={class:"text-b1 text-sm font-normal text-right"},he={key:4,class:"flex justify-between items-center mt-[16px]"},xe={class:"text-b3 text-sm font-normal"},_e={class:"text-b1 text-sm font-normal text-right"},ve={class:"flex justify-between items-center mt-[16px]"},be={class:"text-b3 text-sm font-normal whitespace-nowrap"},ye={class:"text-b1 text-sm font-normal text-right flex items-center"},pe={class:"break-all flex-1"},ge=t("img",{src:D,class:"w-5 h-5",alt:""},null,-1),we=[ge],ke={props:{order:{type:Object,required:!0,default:()=>({})}},setup(e){const c=e,v=T(()=>{var f,_;const r=((f=c.order)==null?void 0:f.orderRealAmount)||0,d=((_=c.order)==null?void 0:_.voucherAmount)||0;return new F(r).minus(d).toNumber()});return(r,d)=>{var f;return a(),n("div",nt,[t("div",it,[t("span",null,s(r.$t("order.orderInfo")),1)]),t("div",ct,[t("div",lt,[t("div",dt,s(r.$t("offline.pay type method")),1),t("div",mt,s(e.order.orderPaySource?o(ot)(+e.order.orderPaySource):"--"),1)]),t("div",ut,[t("div",ft,s(r.$t("offline.order_price")),1),t("div",ht,[t("p",xt,[_t,t("span",vt,s(o(x)(e.order.orderTotalAmount)),1)])])]),e.order.actAmount?(a(),n("div",bt,[t("div",yt,s(((f=e.order.fmGeneralActivity)==null?void 0:f.name)||"-"),1),t("div",pt,[t("p",gt,[wt,kt,t("span",At,s(o(x)(e.order.actAmount)),1)])])])):m("",!0),t("div",Tt,[t("div",$t,s(r.$t("order.total price actual buyer")),1),t("div",St,[+e.order.orderPaySource===o(st).USDT_WALLET?(a(),n("div",Ct,[t("span",jt,[t("span",Nt,[Pt,g(" "+s(o(x)(e.order.orderRealUsdt||0)),1)]),t("span",Et,[Dt,Lt,t("span",null,s(o(x)(o(v))),1),Rt]),e.order.voucherAmount?(a(),n("span",Ot,[It,Bt,t("span",Ft,s(o(x)(e.order.voucherAmount||0)),1)])):m("",!0)])])):(a(),n("div",Kt,[Gt,t("span",Mt,[t("span",null,s(o(x)(o(v)||0)),1),e.order.voucherAmount?(a(),n(K,{key:0},[Ut,Vt,t("span",Ht,s(o(x)(e.order.voucherAmount||0)),1)],64)):m("",!0)])]))])]),t("div",qt,[t("div",Yt,s(r.$t("common.ratio")),1),t("div",Qt,s(e.order.orderDiscountRatio)+"% ",1)]),t("div",Wt,[t("div",zt,s(r.$t("order.hash")),1),e.order.orderTransactionHash?(a(),n("a",{key:0,class:"text-sm font-normal text-right flex items-center underline text-[#FF8812]",href:`${o(Z).chainConfig.blockExplorerUrls[0]}/tx/${e.order.orderTransactionHash}`},[g(s(o(N)(e.order.orderTransactionHash,"***",9,5)||"--")+" ",1),Xt],8,Jt)):(a(),n("span",Zt," -- "))]),t("div",te,[t("div",ee,s(r.$t("offline.create address")),1),t("div",{class:"text-b1 text-sm font-normal text-right flex items-center",onClick:d[0]||(d[0]=_=>o(P)(e.order.orderPayAddress))},[g(s(o(N)(e.order.orderPayAddress,"...",5,5))+" ",1),se])]),e.order.createTime?(a(),n("div",oe,[t("div",re,s(r.$t("order.createTime")),1),t("div",ae,s(o(A)(e.order.createTime)),1)])):m("",!0),e.order.payTime?(a(),n("div",ne,[t("div",ie,s(r.$t("order.chainFinishTime")),1),t("div",ce,s(o(A)(e.order.payTime)),1)])):m("",!0),e.order.finishTime?(a(),n("div",le,[t("div",de,[e.order.orderStatus===o(u).CANCELLED?(a(),n("span",me,s(r.$t("offline.cancel_time")),1)):(a(),n("span",ue,s(r.$t("order.finishTime")),1))]),t("div",fe,s(o(A)(e.order.finishTime)),1)])):m("",!0),e.order.orderStatus===o(u).CANCELLED?(a(),n("div",he,[t("div",xe,s(r.$t("offline.cancel_reason")),1),t("div",_e,s(e.order.cancelReason||"--"),1)])):m("",!0),t("div",ve,[t("div",be,s(r.$t("order.orderNumber")),1),t("div",ye,[t("div",pe,s(e.order.orderId||"--"),1),t("div",{class:"ml-1 w-5 h-5 min-w-5 min-h-5",onClick:d[1]||(d[1]=_=>o(P)(e.order.orderId))},we)])])])])}}},Ae={class:"px-3 pb-20 flex flex-col gap-3 safe-body overflow-y-auto"},Te={class:"w-full p-3 rounded-xl bg-white font-Puhui"},$e={setup(e){var S;const{t:c}=M(),v=V(),[r,d]=U(!1),{getUserDhKey:f,decryptKey:_}=tt(),L={[u.PAYMENT_FAILED]:c("order.fail"),[u.PAYING]:c("order.paying"),[u.PAYMENT_SUCCESS]:c("order.To be confirmed"),[u.CANCELLED]:c("order.canceled"),[u.COMPLETED]:c("order.completed"),[u.CLOSED]:c("order.closed")},i=C({}),R=C(((S=v.query)==null?void 0:S.id)||""),O=async()=>{var p,b;j.loading({message:c("common.loading"),forbidClick:!0}),d(!0);const l=await et({id:R.value});if(j.clear(),d(!1),l.success&&l.data&&(i.value=l.data||{},(p=l.data)!=null&&p.orderRemark&&((b=l.data)!=null&&b.orderSubmitShopPubKey)))try{const h=await f(l.data.shopId,l.data.orderSubmitShopPubKey);if(console.log("dhkey:",h),h){const B=_(l.data.orderRemark,h);i.value.orderRemark=B.decrypt}}catch(h){console.error("解密失败:",h)}},$=T(()=>rt(i.value.orderType)),I=T(()=>L[i.value.orderStatus]||"--");return H(()=>{O()}),(l,p)=>(a(),w(at,{title:l.$t("order.orderDetail"),class:"font-Puhui font-normal relative app-container main-bg","theme-vars":{"field-placeholder-text-color":"#A6A6A6",navBarBackgroundColor:"transparent"},ref:(b,h)=>{h.EvaluateDetailRef=b}},{default:q(()=>[t("section",Ae,[t("div",Te,[k(Q,{status:o(I),"show-order-status":"",loading:o(r),store:{images:i.value.shopPics,name:i.value.shopName}},null,8,["status","loading","store"]),o($).GOODS?(a(),w(Y,{key:0,class:"mt-3",showNum:"",goods:{goodsName:i.value.relName||"-",goodsIcons:i.value.relIcons,goodsPrice:i.value.relPrice||0,goodsNumber:i.value.relNumber||0}},null,8,["goods"])):o($).STORE?(a(),w(W,{key:1,price:i.value.orderRealAmount,loading:o(r)},null,8,["price","loading"])):m("",!0)]),k(ke,{order:i.value},null,8,["order"]),k(z,{order:i.value,isBuyer:""},null,8,["order"])])]),_:1},8,["title"]))}},Ve=G($e,[["__scopeId","data-v-c3a7103c"]]);export{Ve as default};
