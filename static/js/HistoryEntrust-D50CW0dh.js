import{_ as M,y as G,w as Y,bc as z,r as l,x as Z,bd as X,E as C,K as H,G as _,N as w,H as n,Q as p,O as v,a4 as A,R as P,P as r,$ as N,F as R,J as K,a0 as U,I as O,Y as J,Z as Q,a1 as ee}from"./vendor-CjApaIpB.js";import{E as te}from"./Item-C4I1Vk82.js";import{a6 as $,N as se,q as oe}from"./index-CduCwCyL.js";import{B as ne}from"./BackIcon-D2Vm_lyR.js";import{h as le}from"./otc-N8nOl-fb.js";const ae="/Test-dev/static/images/filter-BdP5HjSE.svg",ie=i=>(J("data-v-1b9ed6a7"),i=i(),Q(),i),re={class:"text-center"},de={class:"py-6 flex-start"},ue=ie(()=>n("div",{class:"mx-3"},"-",-1)),ce={class:"flex items-center justify-start gap-3 py-6"},me={class:"pt-3 flex-center-bw"},pe=G({props:{show:{type:Boolean}},emits:["close","filter"],setup(i,{emit:F}){const{show:k}=i,{t:h}=Y(),[u,c]=z(!1),[g,m]=z(!1),f=l(),b=l(),B=l(new Date(new Date("2020/1/1").getTime())),S=l(),E=Z(()=>[{id:0,label:h("common.all")},{id:1,label:h("common.buy filter")},{id:2,label:h("common.sale filter")}]),t=X({startTime:null,endTime:null}),V=()=>{t.endTime=null,t.startTime=null,T.value=0,x.value=0},T=l(0),I=e=>{T.value=e},x=l(0),y=()=>{c(!1),m(!1),(!t.startTime||!t.endTime)&&(t.endTime=null,t.startTime=null)},q=e=>{f.value=new Date($(e)),S.value=new Date(new Date(e).getTime()),t.startTime=$(f.value),c(!1),m(!0)},L=e=>{b.value=new Date($(e)),t.startTime=$(f.value),t.endTime=$(e),m(!1)},s=()=>{const e={direct:T.value,clinch:x.value,startTime:t.startTime?t.startTime+" 00:00:00":t.startTime,endTime:t.endTime?t.endTime+" 23:59:59":t.endTime};F("filter",e)};return(e,o)=>{const d=C("van-datetime-picker"),D=C("van-popup"),j=C("VanButton"),W=C("VanPopup");return _(),H(W,{show:i.show,"onUpdate:show":o[6]||(o[6]=a=>N(k)?k.value=a:null),position:"bottom",round:"",class:"p-5",teleport:"body",closeable:"",style:{minHeight:"60vh"},"close-on-click-overlay":"",onClose:o[7]||(o[7]=()=>{F("close")})},{default:w(()=>[n("div",null,[n("div",re,p(e.$t("common.filter")),1)]),n("div",null,p(e.$t("common.Time")),1),n("div",de,[n("div",{class:"rounded bg-[#F5F5F5] h-[35px] van-cell flex justify-center items-center",onClick:o[0]||(o[0]=A(a=>r(c)(!0),["stop"]))},[n("div",{class:P({"opacity-30":!r(t).startTime})},p(r(t).startTime||e.$t("goods.selectStartTime")),3)]),v(D,{show:r(u),"onUpdate:show":o[2]||(o[2]=a=>N(u)?u.value=a:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"},"close-on-click-overlay":!1},{default:w(()=>[v(d,{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=a=>f.value=a),"min-date":B.value,type:"date",title:e.$t("goods.selectStartTime"),onCancel:y,onConfirm:q},null,8,["modelValue","min-date","title"])]),_:1},8,["show"]),ue,n("div",{class:"rounded bg-[#F5F5F5] h-[35px] van-cell flex justify-center items-center",onClick:o[3]||(o[3]=A(a=>r(c)(!0),["stop"]))},[n("div",{class:P({"opacity-30":!r(t).endTime})},p(r(t).endTime||e.$t("goods.selectEndTime")),3)]),v(D,{show:r(g),"onUpdate:show":o[5]||(o[5]=a=>N(g)?g.value=a:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"},"close-on-click-overlay":!1},{default:w(()=>[v(d,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=a=>b.value=a),onConfirm:L,"min-date":S.value,onCancel:y,type:"date",title:e.$t("goods.selectEndTime")},null,8,["modelValue","min-date","title"])]),_:1},8,["show"])]),n("div",null,p(e.$t("common.direction")),1),n("div",ce,[(_(!0),R(O,null,K(r(E),a=>(_(),H(j,{class:P(["rounded text-sm px-3 h-[35px]",T.value===a.id?"bg-[#FEA021] text-white":"bg-[#F5F5F5] text-black"]),key:a.id,onClick:Ce=>I(a.id)},{default:w(()=>[U(p(a.label),1)]),_:2},1032,["class","onClick"]))),128))]),n("div",me,[v(j,{class:"border-orange bg-[#fff] rounded-3xl text-[#FEA021] w-[150px] h-[40px]",onClick:V},{default:w(()=>[U(p(e.$t("common.reset")),1)]),_:1}),v(j,{class:"btn-orange rounded-3xl text-white w-[150px] h-[40px]",onClick:s},{default:w(()=>[U(p(e.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show"])}}}),ve=M(pe,[["__scopeId","data-v-1b9ed6a7"]]),fe=i=>se("GET","/wmaiKline/tradeList",i),Te=i=>(J("data-v-7871899c"),i=i(),Q(),i),ye={class:"relative h-full bg-[#F5F5F5] font-Puhui safe-bottom-page"},he={class:"sticky top-[0rem] z-50 w-full h-[3.125rem] px-[1rem] bg-[#FFFFFF] flex items-center"},we={class:"relative w-full flex justify-between items-center"},ge={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[18.75rem] flex justify-center items-center"},be={class:"text-[#2E2008] text-[1.125rem] not-italic font-bold leading-[1.625rem] text-center"},xe=Te(()=>n("img",{src:ae,class:"w-[20px] h-[20px]"},null,-1)),_e=[xe],Fe={class:"relative mx-[0.75rem] my-[0.75rem] overflow-hidden"},$e=G({setup(i){const F=ee(),[k,h]=z(!1),u=l(!1),c=l(!1),g=l(0),m=l(0),f=l(10),b=l(0),B=l(null),S=1,E=l(""),t=l(""),V=F.query.key,T=F.query.type,I=async()=>{u.value=!0,m.value+=1,await q(),u.value=!1},x=l([]),y=l([]),q=async()=>{const s={type:g.value,startTime:E.value,endTime:t.value,userAddress:oe[`otc${V}`]};s.type===0&&delete s.type,s.startTime||delete s.startTime,s.endTime||delete s.endTime,V||delete s.userAddress;let e={queryStartTime:null,queryEndTime:null,type:null};Number(T)===2&&(e.queryStartTime=s.startTime,e.queryEndTime=s.endTime,e.type=s.type),e.queryStartTime||delete e.queryStartTime,e.queryEndTime||delete e.queryEndTime,e.type||delete e.type;const d=await(+T==2?fe({...e,page:m.value,size:f.value}):le({page:m.value,size:f.value},{...s}));if(u.value=!1,!d.success){c.value=!0;return}b.value=d.total,x.value=d.data,y.value=m.value===1?x.value:y.value.concat(x.value),y.value.length>=b.value?c.value=!0:c.value=!1},L=s=>{m.value=1,g.value=s.direct,B.value=s.clinch,E.value=s.startTime,t.value=s.endTime,h(!1),y.value=[],q()};return(s,e)=>{const o=C("VanList");return _(),R("div",ye,[n("div",he,[n("div",we,[v(ne),n("div",ge,[n("span",be,p(s.$t("common.Historical transactions")),1)]),n("div",{onClick:e[0]||(e[0]=d=>r(h)(!0))},_e)])]),n("div",Fe,[v(o,{loading:u.value,"onUpdate:loading":e[1]||(e[1]=d=>u.value=d),finished:c.value,"finished-text":s.$t("common.noMore"),"loading-text":s.$t("common.loading"),onLoad:I},{default:w(()=>[(_(!0),R(O,null,K(y.value,(d,D)=>(_(),H(te,{key:D,type:S,routerType:+r(T),info:d},null,8,["routerType","info"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),v(ve,{show:r(k),onClose:e[2]||(e[2]=d=>r(h)(!1)),onFilter:L},null,8,["show"])])}}}),De=M($e,[["__scopeId","data-v-7871899c"]]);export{De as default};
