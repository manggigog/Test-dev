import{_ as W,y as A,E as G,K as q,G as o,N as R,H as t,F as r,J as ee,a0 as j,Q as u,P as a,I as te,O as y,Y as se,Z as oe,a2 as g,be as K,r as f,D as xe,a3 as ye,a4 as Q,R as $e,br as Ae,a1 as ke,w as be,l as Ie,x as ne,bt as Se,bc as Te,T as P,U as Me,bM as He,bn as Ve,X as Ee,$ as Ne,z as we,bj as Pe,n as Ue}from"./vendor-BUT0HZ5j.js";import{_ as Ke}from"./auth-icon-DbwNTi2t.js";import{_ as Qe}from"./member-BMygrgIC.js";import{b as Xe,_ as We,g as V,e as ue,bl as Ye,a6 as Ze,r as Ce,u as Je,bm as et,aB as tt,bn as st,V as ce,bo as ot,W as nt,aA as lt,bp as at,S as it}from"./index-k1FFr-1T.js";import{R as J}from"./rangking-soiwLY3n.js";import{_ as ct,M as rt}from"./MetaKeyTag-HQQOzr5T.js";import{_ as ut}from"./ExpressMinutesTag-mEi2oDXk.js";import{R as Be}from"./RatioBox-ys008e7W.js";import{_ as dt}from"./ApproveInfo-C2uitxR-.js";import{B as mt}from"./BoutiqueLabelInLogo-8rzV321c.js";import{q as ft}from"./beiRanking-DNCkxFG_.js";import{_ as vt}from"./MCOIN-BcbOHmhy.js";import{_ as ht}from"./ImgBoutiqueLable-BF5Xoxsv.js";import{q as pt}from"./cart-D1U0eSk3.js";import{C as gt}from"./CommonVanProvider-BpsZUrD3.js";import{_ as yt}from"./logo-CT48NEDW.js";import{c as wt,i as _t,s as xt}from"./convertToImage-DIjasxRw.js";import{M as $t}from"./MallTabBar-UXdlrWhd.js";import{R as kt}from"./RemovedShelves-B9PBZPPN.js";import{b as _e}from"./mall-BnAUsXOy.js";import{s as bt}from"./useOrderStatus-BSCfQVBG.js";import{O as It,c as St}from"./offlineGoods-DvT2Go6q.js";import"./shop-CeqcS6K2.js";import"./BackIcon-biFt6cm7.js";import"./browser-DFlSdkZC.js";import"./upload-B40Myr0u.js";const Tt="/Test-dev/static/images/kefu-D_Ko4rIY.svg",Ct="/Test-dev/static/images/collect-oXqS1C1N.png",Bt="/Test-dev/static/images/collected-BX-G0Q8O.png",Lt="/Test-dev/static/images/share-tVl568Cu.svg",qt="/Test-dev/static/images/governance-BAxxHEE2.svg",Dt=e=>(se("data-v-754a2b67"),e=e(),oe(),e),Ft={class:"py-8 text-base text-center text-black"},zt={class:"flex flex-wrap items-center justify-center flex-1 gap-x-4 gap-y-1"},Rt={class:"w-[30px] flex-center bg-[#FED73A] rounded-3xl ml-1"},Gt=Dt(()=>t("img",{src:Qe,class:"w-2.5 h-2.5"},null,-1)),Ot={class:"text-xs"},jt={class:"mt-5"},At={class:"flex justify-center"},Mt=A({props:{show:{type:Boolean},list:{default:()=>[]}},emits:["close"],setup(e,{emit:d}){return(m,i)=>{const l=G("van-button");return o(),q(We,{width:"90%",show:e.show,name:m.$t("shop.Service Guarantee"),teleport:"body",onClose:i[1]||(i[1]=()=>{d("close")})},{default:R(()=>[t("div",Ft,[t("div",zt,[(o(!0),r(te,null,ee(e.list,k=>(o(),r("div",{class:"flex items-center text-sm",key:k},[j(u(k.address&&a(Xe)(k.address,"....",4,3))+" ",1),t("div",Rt,[Gt,t("span",Ot,"v"+u(k.memberLevel),1)])]))),128))]),t("div",jt,u(m.$t("shop.Already guaranteed for this store")),1)]),t("div",At,[y(l,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:i[0]||(i[0]=k=>d("close"))},{default:R(()=>[j(u(m.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Ht=W(Mt,[["__scopeId","data-v-754a2b67"]]),Vt={key:0,class:"flex items-center min-w-fit"},Et=["src"],Nt={class:"bg-[#FFF1D6] rounded-2xl text-xs font-normal py-0.5 px-1.5 pl-3.5"},Pt=A({props:{rankNum:null,type:{default:J.SR},showHelpButton:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},emits:["help"],setup(e){return(d,m)=>+e.rankNum>0?(o(),r("div",Vt,[t("img",{src:a(V)(`images/shop/rank${e.rankNum>3?4:e.rankNum}.png`),class:"inline-block w-[14px] h-[16px] -mr-2.5 z-10"},null,8,Et),t("div",Nt,[j(u(e.type===a(J).EBR?d.$t("ranking.store boost",{num:e.rankNum}):d.$t("ranking.recently hot sales",{num:e.rankNum}))+" ",1),e.showHelpButton&&e.isLogin?(o(),r("span",{key:0,onClick:m[0]||(m[0]=i=>d.$emit("help")),class:"ml-1 text-newOrigin text-xs font-normal cursor-pointer text-left"},u(e.type===a(J).EBR?d.$t("ranking.power_to"):d.$t("mall.Help TA")),1)):g("",!0)])])):g("",!0)}}),Ut=e=>(se("data-v-054950fa"),e=e(),oe(),e),Kt={class:"relative"},Qt={class:"py-3 z-[999]"},Xt={class:"w-full flex justify-start items-center px-2.5"},Wt={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Yt=["src"],Zt={class:"absolute right-0 top-0"},Jt={class:"ml-2 flex flex-col justify-between items-start"},es={key:0,src:qt,class:"w-4 mr-1 align-text-top"},ts={class:"flex items-center bg-[#FED73A] rounded-xl py-[0.20rem] px-1.5"},ss=Ut(()=>t("img",{src:Ke,class:"inline-block w-3 h-3 mr-0.5"},null,-1)),os={class:"text-xxs text-default"},ns={class:"flex items-center text-sm text-primary"},ls={class:"ml-1"},as={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},is={class:"w-full flex justify-start items-center mt-2 gap-1.5 overflow-x-auto px-2.5"},cs={class:"mt-3 overflow-x-auto px-2.5"},rs={key:0,class:"flex"},us=["onClick"],ds=["src"],ms={key:1,class:"flex"},fs={class:"flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]"},vs=["src"],hs=A({props:{info:null,list:{default:()=>[]},authorizeInfo:null},emits:["handleTo"],setup(e,{expose:d,emit:m}){const i=e,{accountStore:l}=ue(),[k,w]=K(!1),[I,D]=K(!1),C=f({}),B=async()=>{var v,_,p,S,$;if(!((v=i.info)!=null&&v.id))return;const{success:b,data:c}=await ft({shopId:(_=i.info)==null?void 0:_.id,month:Ye()});!b||(c==null?void 0:c.status)!==1||(C.value={...c,mai:c.allMai,type:2,id:c.rankingId,avatar:(p=i.info)==null?void 0:p.logo,nickname:(S=i.info)==null?void 0:S.storeName,address:($=i.info)==null?void 0:$.merchant})},z=b=>{const c=i.info.scenery.split(",")||[];Ae({images:c,startPosition:b||0,loop:!1,closeOnPopstate:!0})};return xe(()=>{B()}),d({getMyRanking:B}),(b,c)=>{var _,p,S;const v=G("van-rate");return o(),r("div",Kt,[t("div",Qt,[t("div",Xt,[t("div",Wt,[t("img",{src:e.info.logo||e.info.scenery&&e.info.scenery.split(",")[0]||a(V)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Yt),t("div",Zt,[y(mt,{type:e.info.type},null,8,["type"])])]),t("div",Jt,[t("div",{class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] inline-flex",onClick:c[1]||(c[1]=Q($=>e.list&&e.list.length>0?a(D)(!0):null,["stop"]))},[e.list&&e.list.length>0?(o(),r("img",es)):g("",!0),j(" "+u(e.info.storeName)+" ",1),(_=e.authorizeInfo)!=null&&_.authorizeAddress?(o(),r("div",{key:1,onClick:c[0]||(c[0]=Q(()=>{a(w)(!0)},["stop"])),class:"inline-block ml-1.5 lex-shrink-0 align-text-bottom"},[t("div",ts,[ss,t("span",os,u(b.$t("ecology.authorized")),1)])])):g("",!0)]),t("div",ns,[y(v,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.info.star,"onUpdate:modelValue":c[2]||(c[2]=$=>e.info.star=$),size:16,gutter:"0",color:"#FEA021"},null,8,["modelValue"]),t("span",ls,u(e.info.star),1)])]),t("div",as,[y(Be,{tag:b.$t("common.rebate"),ratio:e.info.discountRatio||0},null,8,["tag","ratio"])])]),t("div",is,[(p=C.value)!=null&&p.sort?(o(),q(Pt,{key:0,"rank-num":(S=C.value)==null?void 0:S.sort,type:a(J).EBR,"show-help-button":!0,"is-login":a(l).isLogin,onHelp:c[3]||(c[3]=$=>m("handleTo",`/talentRanking/rankingShop?shopId=${e.info.id}`))},null,8,["rank-num","type","is-login"])):g("",!0),ye(b.$slots,"like",{},void 0,!0),y(ct,{type:e.info.buyFlag?1:e.info.watchFlag?2:e.info.followFlag?3:0},null,8,["type"]),e.info.recentExpressSeconds?(o(),q(ut,{key:1,time:e.info.recentExpressSeconds},null,8,["time"])):g("",!0),e.info.metakeyFlag?(o(),q(rt,{key:2})):g("",!0)]),t("div",cs,[e.info.scenery?(o(),r("div",rs,[(o(!0),r(te,null,ee(e.info.scenery.split(","),($,M)=>(o(),r("div",{key:$,class:$e(["flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]",e.info.scenery.split(",").length-1===M?"":"mr-2"]),onClick:H=>z(M)},[t("img",{src:$||a(V)("images/goods/defaultImg.png"),class:"object-cover w-full h-full aspect-square rounded-xl",alt:""},null,8,ds)],10,us))),128))])):(o(),r("div",ms,[t("div",fs,[t("img",{src:e.info.logo||a(V)("images/goods/defaultImg.png"),class:"w-full h-full aspect-square rounded-xl object-cover"},null,8,vs)])]))]),ye(b.$slots,"default",{},void 0,!0)]),y(Ht,{list:e.list,show:a(I),onClose:c[4]||(c[4]=$=>a(D)(!1))},null,8,["list","show"]),a(k)&&e.authorizeInfo?(o(),q(dt,{key:0,show:a(k),info:e.authorizeInfo,onClose:c[5]||(c[5]=$=>a(w)(!1))},null,8,["show","info"])):g("",!0)])}}}),ps=W(hs,[["__scopeId","data-v-054950fa"]]),gs="/Test-dev/static/images/plus-DOIrZp3k.png",ys={key:0,class:"bg-white rounded-xl p-3 my-3"},ws={class:"text-base font-semibold"},_s=["onClick"],xs={class:"relative w-[80px] h-[80px] flex-shrink-0 bg-b5 overflow-hidden rounded-lg"},$s={class:"object-cover w-full h-full aspect-square",fit:"cover"},ks={class:"w-full min-h-[80px] flex flex-col justify-between ml-2"},bs={class:"text-b1 font-semibold line-clamp-1"},Is={class:"text-b3 font-normal line-clamp-1"},Ss={class:"text-b3 font-normal"},Ts={class:"flex justify-between items-center"},Cs={class:"flex-start"},Bs=t("img",{class:"w-4 h-4 mr-1",src:vt},null,-1),Ls={class:"font-semibold mr-1"},qs=["onClick"],Ds=t("img",{src:gs,class:"w-5 h-5"},null,-1),Fs=[Ds],zs={key:0},Rs={key:1},Gs=A({props:{merchantAddress:null},setup(e,{expose:d}){const m=e,i=ke(),{t:l}=be(),k=Ie(),w=f([]),I=f(!1),D=f(!1),C=f(0),B=f(10),z=f(0),[b,c]=K(!1),v=()=>{c(!b.value)},_=h=>{k.push(`/goodsDetail?id=${h.id}`)},p=async()=>{I.value=!0,C.value+=1,await M(),I.value=!1},S=ne(()=>{var h;return b.value?w.value:(h=w.value)==null?void 0:h.slice(0,2)}),$=f([]),M=async()=>{const h=await Ze({page:C.value,size:B.value,isActivity:1,boutiqueTop:!0,merchantAddress:m.merchantAddress});if(I.value=!1,!h.success){D.value=!0;return}if(!h.data||!h.total){D.value=!0;return}z.value=h.total,$.value=h.data||[],w.value=C.value===1?$.value:w.value.concat($.value),w.value.length>=z.value&&(D.value=!0)},H=()=>{C.value=0,z.value=0,D.value=!1,w.value=[],p()},O=async h=>{if(h.stock===0&&h.goodsTypes!==2){P(l("order.Insufficient stock"));return}P.loading({duration:0});const E={needlogin:"true",...i.query};k.replace({path:i.path,query:E});const U=await pt(h.id);P.clear(),U.success&&P(l("cart.addTips"))};return d({init:H}),(h,E)=>{const U=G("van-icon"),le=G("VanList"),Y=Se("lazy");return D.value&&z.value===0?g("",!0):(o(),r("div",ys,[t("div",ws,u(h.$t("shop.curactive")),1),y(le,{loading:I.value,"onUpdate:loading":E[0]||(E[0]=L=>I.value=L),finished:D.value,"loading-text":h.$t("common.loading"),onLoad:p},{default:R(()=>[(o(!0),r(te,null,ee(a(S),L=>(o(),r("div",{class:"flex mt-3",key:L.id,onClick:N=>_(L)},[t("div",xs,[Te(t("img",$s,null,512),[[Y,L.icons&&L.icons.split(",")[0]||a(V)("images/goods/defaultImg.png")]]),y(ht,{activity:!0,type:2})]),t("div",ks,[t("section",null,[t("div",bs,u(L.goodsName),1),t("div",Is,u(L==null?void 0:L.goodsDesc),1),t("div",Ss,u(h.$t("mall.15th sale",{salesVolume:L.volume15})),1)]),t("div",Ts,[t("div",Cs,[Bs,t("span",Ls,u(L.price),1),y(Be,{tag:h.$t("common.rebate"),ratio:L.discountRatio||0},null,8,["tag","ratio"])]),t("div",{onClick:Q(N=>O(L),["stop"])},Fs,8,qs)])])],8,_s))),128)),w.value.length>2?(o(),r("div",{key:0,onClick:v,class:"text-xs text-b3 font-normal text-center mt-3.5"},[a(S).length==2?(o(),r("div",zs,[j(u(h.$t("shop.chakanhuodongshsangpin"))+" ",1),y(U,{name:"arrow-down"})])):(o(),r("div",Rs,[j(u(h.$t("refund.put way"))+" ",1),y(U,{name:"arrow-up"})]))])):g("",!0)]),_:1},8,["loading","finished","loading-text"])]))}}}),Os={class:"bg-white rounded-xl my-3 py-3"},js={class:"flex-center-bw px-3"},As={class:"text-base font-semibold"},Ms={class:"pl-3 pt-3"},Hs=["onClick"],Vs={class:"object-cover w-full h-full aspect-square",fit:"cover"},Es=A({props:{boutiqueGoods:null,title:null,type:null},emits:["toMore","toDetail"],setup(e,{emit:d}){const m=e,i=()=>{d("toMore",m.type)};return(l,k)=>{const w=G("van-icon"),I=G("van-swipe-item"),D=G("van-swipe"),C=Se("lazy");return o(),r("div",Os,[t("div",js,[t("div",As,u(e.title),1),t("div",{class:"text-xs text-b3 whitespace-nowrap",onClick:i},[j(u(l.$t("common.check more")),1),y(w,{name:"arrow"})])]),t("div",Ms,[y(D,{class:"flex-start",loop:!1,width:126,"show-indicators":!1},{default:R(()=>[(o(!0),r(te,null,ee(e.boutiqueGoods,(B,z)=>(o(),q(I,{class:"flex",key:B.id},{default:R(()=>[t("div",{class:$e(["flex-1 w-full",{"mr-4":z<e.boutiqueGoods.length-1}])},[t("div",{onClick:()=>d("toDetail",B),class:"relative w-[110px] h-[110px] flex-shrink-0 bg-black-100 overflow-hidden rounded-lg"},[Te(t("img",Vs,null,512),[[C,B&&B.goods&&B.goods.icons&&B.goods.icons.split(",")[0]||a(V)("images/goods/defaultImg.png")]])],8,Hs)],2)]),_:2},1024))),128))]),_:1})])])}}}),re=W(Es,[["__scopeId","data-v-9f70f930"]]),Ns="/Test-dev/static/images/shop-zan-CIPmIHxz.svg",Ps={class:"bg-[#FFF1D6] rounded-2xl text-xs py-0.5 px-1.5 flex items-center gap-x-1 min-w-fit"},Us=t("img",{src:Ns,class:"w-[14px] h-[14px]"},null,-1),Ks=A({props:{likeFlag:{type:Boolean,default:!0},likeCount:{default:0},isLogin:{type:Boolean,default:!1}},emits:["onLike"],setup(e){return(d,m)=>(o(),r("div",Ps,[Us,t("span",null,u(e.likeCount),1),!e.likeFlag&&e.isLogin?(o(),r("span",{key:0,onClick:m[0]||(m[0]=i=>d.$emit("onLike")),class:"text-newOrigin text-xs cursor-pointer text-left"},u(d.$t("shop.like")),1)):g("",!0)]))}}),Qs={class:"flex items-center justify-between text-b3 text-xs mt-3"},Xs={class:"w-[70%] flex items-center"},Ws={key:0,class:"shrink-0"},Ys={class:"w-fit line-clamp-1 truncate"},Zs={key:1,class:"shrink-0"},Js={class:"shrink-0 flex items-center whitespace-nowrap ml-3"},eo=A({props:{commentReview:null,commentTotal:null},setup(e){const d=e,m=ne(()=>{var i;return!!((i=d.commentReview)!=null&&i.commentContent)});return(i,l)=>{const k=G("van-icon");return o(),r("div",Qs,[t("div",Xs,[a(m)?(o(),r("div",Ws,"“")):g("",!0),t("div",Ys,u(e.commentReview.commentContent),1),a(m)?(o(),r("div",Zs,"”")):g("",!0)]),t("div",Js,[t("span",null,u(i.$t("offline.shop_evaluate_num",{num:e.commentTotal||0})),1),y(k,{name:"arrow",class:"text-xxs text-[#666] ml-1"})])])}}}),Le=e=>(se("data-v-2bfae1a2"),e=e(),oe(),e),to={class:"w-full h-[190px] overflow-hidden"},so=["src"],oo={key:0,class:"absolute left-0 w-full px-3 flex-center-bw top-3"},no={class:"ml-1 text-sm"},lo={class:"mt-[-45px]"},ao={class:"border-4 rounded-2xl border-solid border-[#FFF] drop-shadow-lg w-[90px] h-[90px] bg-[#D9D9D9] m-auto"},io=["src"],co={class:"text-[#2E2008] font-medium text-lg text-center mt-5"},ro={class:"flex items-center justify-between px-5 pt-10 pb-5"},uo={class:"flex items-center"},mo={class:"border border-solid border-[#D9D9D9] p-1"},fo={class:"text-[#2E2008] opacity-80 ml-3"},vo=Le(()=>t("br",null,null,-1)),ho=Le(()=>t("img",{src:yt,class:"w-[60px] h-[60px] object-contain"},null,-1)),po=A({props:{show:{type:Boolean},shopInfo:null},emits:["close","onSuceess"],setup(e,{emit:d}){const{shopInfo:m,show:i}=e,{width:l,height:k}=Me(),w=f(null),I=f(100);He(w,_=>{const p=_[0],{height:S}=p.contentRect;I.value=S||100});const D=ne(()=>window.location.origin+"/#/category?deliveryType=1&init=1&shopId="+m.id),{loadingToggle:C}=Ce(),[B,z]=K(!1),b=()=>{d("close")},c=()=>{z(!0),C(!0),document.getElementById("saveHtml")?setTimeout(()=>{v()},200):setTimeout(()=>{v()},3e3)},v=async()=>{let _=document.getElementById("saveHtml");_.style.display="block";const p=await wt(_);await _t(p)&&(_.style.display="none",xt(p,m.storeName||""),b(),_.style.display="block",z(!1),C(!1),d("onSuceess"))};return(_,p)=>{const S=G("van-icon"),$=G("VanButton"),M=G("van-popup");return o(),q(M,{show:e.show,"onUpdate:show":p[1]||(p[1]=H=>Ne(i)?i.value=H:null),onClickOverlay:b,class:"w-full h-full bg-default/20",style:Ee({paddingLeft:`${(a(l)-300)/2}px`,paddingTop:`${(a(k)-I.value)/2}px`}),onClick:b},{default:R(()=>[t("div",{class:"w-[300px] rounded-lg overflow-hidden",onClick:p[0]||(p[0]=Q(()=>{},["stop"]))},[t("div",{class:"w-[300px] relative bg-white",id:"saveHtml",ref:(H,O)=>{O.saveHtml=H,w.value=H}},[t("div",to,[t("img",{src:(e.shopInfo.shareImg||e.shopInfo.scenery||a(V)("images/shop/shop_bg.png"))+"?"+new Date().getTime(),class:"object-cover w-full",alt:"",crossOrigin:"anonymous"},null,8,so)]),a(B)?g("",!0):(o(),r("div",oo,[y($,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:c},{default:R(()=>[y(S,{name:"back-top",class:"rotate-180",size:"18"}),t("span",no,u(_.$t("common.save")),1)]),_:1}),t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:b},[y(S,{name:"cross"})])])),t("div",lo,[t("div",ao,[t("img",{src:(e.shopInfo.logo||a(V)("images/goods/defaultImg.png"))+"?"+new Date().getTime(),class:"h-[82px] aspect-square rounded-xl object-fill",crossOrigin:"anonymous"},null,8,io)]),t("div",co,u(e.shopInfo.storeName||"-"),1),t("div",ro,[t("div",uo,[t("div",mo,[y(Ve,{value:a(D),size:60,level:"H"},null,8,["value"])]),t("div",fo,[j(u(_.$t("common.new found")),1),vo,j(u(_.$t("common.share you")),1)])]),ho])])],512)])]),_:1},8,["show","style"])}}}),go=W(po,[["__scopeId","data-v-2bfae1a2"]]),qe=e=>(se("data-v-47693954"),e=e(),oe(),e),yo={class:"flex items-center gap-4"},wo=qe(()=>t("img",{class:"w-5 h-5",src:Tt},null,-1)),_o=[wo],xo={key:0,class:"w-5 h-5",src:Ct},$o={key:1,class:"w-5 h-5",src:Bt},ko=qe(()=>t("img",{class:"w-5 h-5",src:Lt},null,-1)),bo=[ko],Io={key:0,class:"px-3 safe-body overflow-y-scroll"},So={class:"px-2.5"},To=A({name:"Shop"});function Co(e){const{orderGoodsStore:d}=ue(),{t:m}=be(),{loadingToggle:i}=Ce(),l=f({}),k=ke(),w=Ie(),I=f(null),{login:D}=Je(),[C,B]=K(!1),[z,b]=K(!1),c=f(),v=ne(()=>k.query.shopId),_=()=>{var s,n;(s=l.value)!=null&&s.merchant&&O(`/shopInfo?address=${(n=l.value)==null?void 0:n.merchant}`)},p=s=>{s===2?w.push(`category?shopId=${+v.value}&deliveryType=1`):s===3?w.push(`category?shopId=${+v.value}&deliveryType=2`):w.push(`boutique-goods?shopId=${+v.value}`)},S=f(null),$=f(null);we(v,async s=>{var n,T;s&&s!==$.value&&(i(!0),$.value=s,I.value&&(I.value.list=[]),await fe(),I.value&&I.value.resetData(),c.value&&((n=c.value)==null||n.getMyRanking()),S.value&&((T=S.value)==null||T.init()),i(!1))});const M=f(null),H=async()=>{const s=await it(l.value.merchant);s.success&&s.data&&(M.value=s.data)},O=s=>{w.push(s)},h=async()=>{const s=await nt(v.value);!s.success||!s.data||(l.value=s.data,await Ue(),ze())},E=async s=>{i(!0);const{success:n}=await st({shopIds:[s.id],type:s.isFollow?2:1});i(!1),n&&(s.isFollow=!s.isFollow,s.isFollow?P({message:m("mall.Followed-tip"),icon:ce("toast-success.svg"),duration:3e3}):P({message:m("mall.Unlocked successfully"),icon:ce("toast-success.svg"),duration:3e3}))},U=()=>{P({message:m("common.Saved successfully"),icon:ce("toast-success.svg"),duration:3e3})},le=()=>{d.changeOfflineInfo({store:l.value});const s={key:v.value,orderType:It.STORE};w.push({path:"/offlineSubmit",query:s})},Y=f([]),L=async()=>{var n,T,F;if(!((n=l.value)!=null&&n.type))return;const s=await _e({merchant:(T=l.value)==null?void 0:T.merchant,status:1,page:1,size:12,type:(F=l.value)==null?void 0:F.type,sortType:3,orderBy:1});s.success&&(Y.value=s.data)},N=f(null),de=async()=>{var n;N.value=[];const s=await _e({merchant:(n=l.value)==null?void 0:n.merchant,status:1,page:1,size:12,deliveryType:1});s.success&&(N.value=s.data)},ae=f([]),De=async()=>{if(!v.value)return;N.value=[];const{success:s,data:n}=await lt({shopId:Number(v.value),goodsStatus:St.Published,page:1,size:12,sortBy:"desc|goods_sales_volume"});s&&(ae.value=(n.records||[]).map(T=>({...T,goods:{icons:(T==null?void 0:T.goodsIcons)||""}})))},me=f([]),Fe=async()=>{const{success:s,data:n}=await at({page:1,size:10,shopId:k.query.shopId});s&&(me.value=n&&n[0].guaranteeList||[])},fe=async()=>{await h(),L(),de(),De(),Fe(),H()},ve=f(null),ze=()=>{ve.value&&ve.value.addEventListener("scroll",Ge)},Re=f(1),he=f([]),Ge=s=>{const{scrollTop:n}=s.target,{length:T}=he.value;for(let F=0;F<T;F++)if(n<he.value[F].offsetTop){Re.value=F+1;break}},{accountStore:pe}=ue(),Oe=async()=>{if(!pe.isLogin)return b(!0);l.value.likeFlag||(ot({shopId:v.value}),l.value.likeCount++,l.value.likeFlag=!0)};we(()=>{var s;return(s=l.value)==null?void 0:s.merchant},async s=>{s&&await de()});const ge=f(0),Z=f(null),je=async()=>{var T,F,X,x;const s={page:1,size:1,shopId:v.value,sortBy:"desc|comment_time",havePicsFlag:null,commentStatus:1},n=await tt(s);n.success?(T=n.data)!=null&&T.records&&((F=n.data)==null?void 0:F.records.length)>0&&(Z.value=(X=n.data)==null?void 0:X.records[0],ge.value=((x=n.data)==null?void 0:x.total)||0):Z.value=null};return xe(async()=>{i(!0),await fe(),await je(),i(!1)}),Pe(()=>{N.value=[]}),(s,n)=>{const T=G("VanButton");return o(),q(gt,{class:"h-full font-Puhui font-normal safe-bottom-page relative",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"}},{right:R(()=>[t("div",yo,[t("div",{onClick:_},_o),t("div",{onClick:n[0]||(n[0]=F=>E(l.value))},[l.value.isFollow?(o(),r("img",$o)):(o(),r("img",xo))]),t("div",{onClick:n[1]||(n[1]=Q(F=>a(B)(!0),["stop"]))},bo)])]),default:R(()=>{var F,X;return[l.value&&Object.keys(l.value).length!==0&&l.value.status==1?(o(),r("div",Io,[l.value&&Object.keys(l.value).length!==0?(o(),q(ps,{key:0,ref:(x,ie)=>{ie.shopHeader=x,c.value=x},info:l.value,list:me.value,authorizeInfo:M.value,onHandleTo:n[3]||(n[3]=x=>O(x)),onFollowShop:E,class:"bg-white rounded-xl"},{like:R(()=>{var x;return[y(Ks,{"like-flag":l.value.likeFlag,"like-count":(x=l.value)==null?void 0:x.likeCount,"is-login":a(pe).isLogin,onOnLike:Oe},null,8,["like-flag","like-count","is-login"])]}),default:R(()=>[t("div",So,[y(T,{round:"",class:"w-full text-b1 h-[46px] px-[1.125rem] bg-yellow text-base font-semibold mt-3",onClick:le},{default:R(()=>[j(u(s.$t("common.payBill")),1)]),_:1}),Z.value?(o(),q(eo,{key:0,commentTotal:+ge.value,commentReview:Z.value,onClick:n[2]||(n[2]=Q(x=>O("/offline-evaluate-home?shopId="+a(v)),["stop"]))},null,8,["commentTotal","commentReview"])):g("",!0)])]),_:1},8,["info","list","authorizeInfo"])):g("",!0),y(Gs,{ref:(x,ie)=>{ie.shopActivity=x,S.value=x},merchantAddress:(F=l.value)==null?void 0:F.merchant},null,8,["merchantAddress"]),l.value.type?(o(),q(re,{key:1,boutiqueGoods:Y.value,title:s.$t("shop.Main Store")+a(bt)(l.value.type),onToMore:p,onToDetail:n[4]||(n[4]=x=>O(`/goodsDetail?id=${x.goods.id}`))},null,8,["boutiqueGoods","title"])):g("",!0),y(re,{boutiqueGoods:N.value,type:2,onToMore:p,title:s.$t("shop.our_products"),onToDetail:n[5]||(n[5]=x=>O(`/goodsDetail?id=${x.goods.id}`))},null,8,["boutiqueGoods","title"]),(ae.value||[]).length?(o(),q(re,{key:2,boutiqueGoods:ae.value,type:3,onToMore:p,title:s.$t("shop.offline_services"),onToDetail:n[6]||(n[6]=x=>O(`/offlineGoodsDetail?goodsId=${x.goodsId}`))},null,8,["boutiqueGoods","title"])):g("",!0)])):l.value&&Object.keys(l.value).length!==0?(o(),q(kt,{key:1,type:"shop"})):g("",!0),a(C)?(o(),q(go,{key:2,show:a(C),shopInfo:l.value,onClose:n[7]||(n[7]=x=>a(B)(!1)),onOnSuceess:U},null,8,["show","shopInfo"])):g("",!0),a(v)?(o(),q($t,{key:3,shopId:+a(v),shopType:(X=l.value)==null?void 0:X.type},null,8,["shopId","shopType"])):g("",!0),a(z)?(o(),q(et,{key:4,onLogin:a(D)},null,8,["onLogin"])):g("",!0)]}),_:1},8,["title"])}}const Bo=A({...To,setup:Co}),sn=W(Bo,[["__scopeId","data-v-47693954"]]);export{sn as default};
