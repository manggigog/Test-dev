import{_ as j,z as B,r as v,F as I,G as i,H as o,J as E,K as U,Z as V,U as S,$ as F,I as e,N as z,P as w,O as d,a3 as q,Q as k,X as M,Y as K,q as G,E as J,a2 as H,a4 as oe,V as ne,a0 as le,D as Q,y as X,a1 as ae,bF as ce,bH as ie,bI as re,bG as ue,n as de,bj as pe,bk as fe,bm as he}from"./vendor-Dr_RpJ_Y.js";import{_ as ve}from"./adpng-DqTFHGH_.js";import{a as me,r as _e,q as ge,e as ye,g as Z}from"./mall-COk3vM6s.js";import{z as ee,a as xe,Y as we,k as te}from"./index-CU2nzZe6.js";import{l as be,a as W}from"./shop-CeqcS6K2.js";import{c as $e}from"./category-CPc0zbBB.js";import{R as ke}from"./Recommends-C0kti2vZ.js";import{C as Ce}from"./ChangeRegionPop-Czyv5Q4t.js";import{c as Le}from"./user-CDTMM2rk.js";import{u as Ie}from"./useShowActiveInfo-Bt4VVJoh.js";import"./GoodsItem-BWjh4rbS.js";import"./buy-cart-DX6aL7m1.js";import"./goods-BVwS8oFG.js";import"./ShopMaskTips-ClYuWX9C.js";import"./GoodsPrice-BO5T8eoh.js";import"./MCOIN-BOqZVkND.js";import"./WaterFull-BoFTr9ol.js";/* empty css                                                              */import"./ImgBoutiqueLable-B-2xCcw4.js";import"./RatioBox-BwMA7vB_.js";import"./MetaKeyTag-DnBwtzWh.js";import"./useOrderStatus-CfUN23nj.js";import"./rangking-soiwLY3n.js";const Se="/static/images/msg_icon_type_2-CRHOGGKj.png",Re="/static/images/msg_icon_type_1-llTYHMvU.png",Fe="/static/images/msg_close_dark-CMJSlgeW.png",Te=s=>(M("data-v-5c448efa"),s=s(),K(),s),Be={key:0,class:"notification-bg-2 w-full h-[30px] absolute -bottom-[4px] px-0 left-0"},Pe=["onClick"],Oe={key:0,src:Se,class:"w-3.5 h-auto flex-shrink-0"},Ae={key:1,src:Re,class:"w-3.5 h-auto flex-shrink-0"},De={class:"flex-1 text-sm"},ze=["onClick"],Ee=Te(()=>e("img",{src:Fe,class:"w-4 h-auto"},null,-1)),Ue=[Ee],Ve=["onClick"],qe=B({emits:["handleTo"],setup(s,{expose:_,emit:n}){const{currentLocale:r}=ee(),p=v([]),f=(u,h)=>{me({id:h.id}),p.value.splice(u,1)},a=()=>{_e(),p.value.length=0};return _({_queryRemindList:async()=>{var h;const u=await ge({page:1,size:999});if(u.success){const g=(h=u.data)==null?void 0:h.filter(L=>L.readFlag===0);p.value=g||[]}}}),(u,h)=>{var R;const g=I("van-notice-bar"),L=I("van-swipe-cell");return o(),i("div",{class:z(["notification-container w-full font-normal",{"mb-1":((R=p.value)==null?void 0:R.length)>1}])},[(o(!0),i(E,null,U(p.value,(l,T)=>(o(),i("div",{key:l.id,class:"relative"},[T==0?(o(),V(L,{key:0,class:"h-[38px]"},{right:F(()=>[e("div",{class:z([{"bg-[#FED53D]":l.type===2,"bg-[#FFA123]":l.type===1},"h-[30px] flex items-center ml-1 px-4 rounded-[10px]"]),onClick:q(a,["stop"])},k(u.$t("mall.Clear")),11,Ve)]),default:F(()=>[p.value&&p.value.length>1?(o(),i("div",Be,[e("div",{class:z(["h-full rounded-[10px] box-shadow",{"bg-[#FED53D]":l.type===1,"bg-[#FFA123]":l.type===2}])},null,2)])):S("",!0),e("div",{class:z([{"bg-[#FED53D]":l.type===2,"bg-[#FFA123]":l.type===1},"notification-bg box-shadow flex items-center gap-2 h-[30px] rounded-[10px] px-2 relative"]),onClick:q(x=>n("handleTo","/orderMessage"+("?type="+l.type)+(l.category?"&category="+l.category:"")),["stop"])},[l.type===2?(o(),i("img",Oe)):l.type===1?(o(),i("img",Ae)):S("",!0),e("div",De,[w(g,{scrollable:"",color:l.type===2?"#222221":"#ffffff",background:"rgba(0,0,0,0)",text:l[`content${d(be)[d(r)]||"En"}`]},null,8,["color","text"])]),e("div",{class:"flex-shrink-0 w-5 ml-auto",onClick:q(x=>f(T,l),["stop"])},Ue,8,ze)],10,Pe)]),_:2},1024)):S("",!0)]))),128))],2)}}}),je=j(qe,[["__scopeId","data-v-5c448efa"]]),Ne={key:0,class:"px-4 mt-2.5 py-4 bg-white rounded-xl category-box"},He={class:"container flex overflow-x-auto"},Me=["onClick"],Ke={class:"text-sm text-[#2e2008] opacity-60 text-center whitespace-nowrap mt-1"},Ge=B({setup(s){const{currentLocale:_}=ee(),n=G(),r=v([]),p=async()=>{const a=await $e();a.success&&(r.value=a.data||[])},f=a=>{n.push(`/search?classId=${a.id}&className=${a[`${W[_.value]||"en"}Name`]}`)};return J(()=>{p()}),(a,C)=>{const u=I("VanImage");return r.value.length?(o(),i("div",Ne,[e("div",He,[(o(!0),i(E,null,U(r.value,h=>(o(),i("div",{style:{flex:"0 0 18.18%"},class:"flex flex-col",key:h.name,onClick:g=>f(h)},[w(u,{src:h.logo,class:"mx-auto aspect-square w-11 h-11",alt:""},null,8,["src"]),e("span",Ke,k(h[`${d(W)[d(_)]||"en"}Name`]),1)],8,Me))),128))])])):S("",!0)}}}),Ye=j(Ge,[["__scopeId","data-v-3e00afd0"]]),Je="/static/images/hot-2BuvZhRT.png",Qe="/static/images/triangle-BeVcU1o4.png",Xe=s=>(M("data-v-7a74119a"),s=s(),K(),s),Ze={class:"flex items-center gap-1 py-1 text-sm leading-normal"},We=["src"],et=Xe(()=>e("img",{src:Qe,class:"w-2 h-auto ml-1.5"},null,-1)),tt=["onClick"],st={class:"flex items-center"},ot=["src"],nt=B({props:{showIcon:{type:Boolean,default:!1},showOverlay:{type:Boolean,default:!0},showDownIcon:{type:Boolean,default:!0}},emits:["showPopRegin","showOverlay","showMallOverlay"],setup(s,{expose:_,emit:n}){const r=s,p=v(""),{regionStore:f}=xe(),[a,C]=H(!1),[u,h]=H(!1),g=()=>{C(!1),n("showOverlay",!1)},L=x=>{p.value=x,x!==f.country&&(h(!1),C(!0))},R=()=>{h(!1)},l=x=>{h(x),n("showOverlay",x)};function T(){r.showDownIcon&&l(!0)}return _({closePop:R}),(x,$)=>{const O=I("van-icon"),A=I("VanPopup");return o(),i("div",null,[e("div",{class:"change-region-tools flex items-center bg-[#F0F0F0] px-3 rounded-full",onClick:T},[e("div",Ze,[e("img",{src:d(we)(`mall/${d(f).country}-flag.svg`),class:"w-4 h-auto"},null,8,We),e("span",null,k(d(f).country),1)]),et]),d(u)?(o(),V(A,{key:0,teleport:"body",overlay:s.showOverlay,show:d(u),"onUpdate:show":$[0]||($[0]=y=>le(u)?u.value=y:null),position:"top",style:ne([{background:"transparent",width:"100%","max-width":"375px",left:"50%",transform:"translateX(-50%)",display:"flex"},{justifyContent:s.showIcon?"flex-end":"flex-start"}]),onClickOverlay:$[1]||($[1]=y=>l(!1)),onClick:$[2]||($[2]=y=>l(!1))},{default:F(()=>[e("div",{class:z(["min-w-[150px] sm:mt-[40%] mt-20 bg-[#f9f9f9] rounded-xl box-1 px-4",s.showIcon?"mr-2.5":"ml-2.5"])},[(o(!0),i(E,null,U(d(f).countries,y=>(o(),i("div",{key:y.key,class:z(["font-Silom py-1 leading-10 border-b text-sm border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":d(f).country===y.key}]),onClick:N=>L(y.key)},[e("div",st,[e("img",{class:"w-5 h-auto mr-1.5",src:y.icon,alt:""},null,8,ot),oe(" "+k(y.text),1)]),d(f).country===y.key?(o(),V(O,{key:0,name:"success",alt:""})):S("",!0)],10,tt))),128))],2)]),_:1},8,["overlay","show","style"])):S("",!0),w(Ce,{currentKey:p.value,show:d(a),onClose:g},null,8,["currentKey","show"])])}}}),lt=j(nt,[["__scopeId","data-v-7a74119a"]]),se=s=>(M("data-v-df20a652"),s=s(),K(),s),at={class:"z-[889] overflow-visible relative min-h-[12rem] my-bg"},ct={class:"search-tools-bar w-full pt-3.5 bg-white flex-center-bw"},it={class:"search-input flex items-center justify-between w-full h-8 bg-[#F0F0F0] rounded-full relative z-[999]"},rt={class:"flex items-center flex-1 gap-1 px-2 text-sm h-9 text-black/30"},ut={class:"line-clamp-1"},dt=["src"],pt={class:"search-tools-bar px-2.5 bg-white"},ft={class:"flex py-2.5 items-center gap-1.5 overflow-x-auto text-xs"},ht={class:"flex items-center flex-shrink-0 mr-[15px]"},vt=se(()=>e("img",{src:Je,class:"w-2.5 h-auto mr-[2px]"},null,-1)),mt={class:"text-black font-normal ml-1"},_t=["onClick"],gt={class:"text-[#666]"},yt={class:"swiper-container px-2.5 mt-2.5 relative z-10"},xt={class:"swiper-slide-wrapper"},wt=["src"],bt=se(()=>e("div",{class:"swiper-pagination"},null,-1)),$t=B({props:{bannerList:{default:[]},expressList:{default:[]},hotList:{default:[]},hotListBottom:{default:[]}},setup(s,{expose:_}){const n=s,r=G(),p=t=>{r.push(t)},f=v(null);Q(()=>n.bannerList,()=>{de(()=>{var t;f.value&&((t=f.value)==null||t.$el.swiper.autoplay.start())})}),X(()=>n.bannerList[a.value]),X(()=>g.value==="left"?a.value>=n.bannerList.length-1?n.bannerList[0].colorCode:n.bannerList[a.value+1].colorCode:g.value==="right"?a.value===0?n.bannerList[n.bannerList.length-1].colorCode:n.bannerList[a.value-1].colorCode:null);const a=v(0),C=()=>{var t,c;u.value=0,g.value=null,a.value!==((t=f.value)==null?void 0:t.$el.swiper.realIndex)&&(a.value=(c=f.value)==null?void 0:c.$el.swiper.realIndex)},u=v(0),h=v(-1),g=v(null),L=(t,c)=>{if((c===0||c===1)&&(u.value=0,g.value=null),g.value){h.value=c;return}if(u.value===0){u.value=c;return}h.value=c,h.value<u.value?g.value="right":g.value="left",u.value=c},[R,l]=H(!1),T=t=>{t&&window.open(t,"_self")},x=v(null),$=v(null),O=t=>{l(t)};Q(()=>R.value,t=>{const c=document.getElementById("fm-page");t?c.style.overflow="hidden":c.style.overflow="auto"});const A=()=>{x.value.closePop()},y=()=>{A(),l(!1)},N=()=>{const t=$.value&&$.value.popShow?r.currentRoute.value.fullPath:"/search";r.push(t)};return _({closeRegionPop:A}),(t,c)=>{const Y=I("van-icon"),b=I("van-swipe-item"),P=I("van-swipe");return o(),i("div",at,[d(R)?(o(),i("div",{key:0,class:"my-overlay",onClick:y,onTouchmove:c[0]||(c[0]=q(()=>{},["prevent"]))},null,32)):S("",!0),e("div",ct,[w(lt,{class:"relative z-[999] ml-2.5",ref:(m,D)=>{D.region=m,x.value=m},onShowOverlay:O,showOverlay:!1},null,512),e("div",{onClick:N,class:"relative ml-4 mr-2.5 flex-1"},[e("div",it,[e("div",rt,[w(Y,{size:"16",name:"search",class:"font-bold text-black/30"}),w(P,{vertical:"",class:"leading-9 h-9",autoplay:5e3,touchable:!1,"show-indicators":!1},{default:F(()=>[(o(!0),i(E,null,U(s.hotList,m=>(o(),V(b,{key:m.id},{default:F(()=>[e("div",ut,[m.iconUrl?(o(),i("img",{key:0,class:"inline-block w-auto h-5 mr-1 align-middle",src:m.iconUrl},null,8,dt)):S("",!0),e("span",null,k(m.keyword),1)])]),_:2},1024))),128))]),_:1})])])])]),e("div",pt,[e("div",ft,[e("div",ht,[vt,e("span",mt,k(t.$t("mall.hotSearch")),1)]),(o(!0),i(E,null,U(s.hotListBottom,m=>(o(),i("div",{class:"hot-search-keyword bg-[#F5F5F5] px-2.5 py-0.5 rounded-xl flex-shrink-0",key:m.id,onClick:D=>p("/search?keyword="+m.keyword)},[e("span",gt,k(m.keyword),1)],8,_t))),128))])]),e("div",yt,[ae(t.$slots,"default",{},void 0,!0),s.bannerList&&s.bannerList.length>0?(o(),V(d(ue),{key:0,ref:(m,D)=>{D.swiperRef=m,f.value=m},modules:[d(ie),d(re)],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,onSlideChange:C,onProgress:L,class:"swiper-container"},{default:F(()=>[(o(!0),i(E,null,U(s.bannerList,(m,D)=>(o(),V(d(ce),{key:m.id,virtualIndex:D,onClick:Zt=>T(m.linkUrl)},{default:F(()=>[e("div",xt,[e("img",{class:"w-full h-full rounded-md object-cover",src:m.imageUrl||d(te)("images/mall/mall_banner.png")},null,8,wt)])]),_:2},1032,["virtualIndex","onClick"]))),128)),bt]),_:1},8,["modules"])):S("",!0)])])}}}),kt=j($t,[["__scopeId","data-v-df20a652"]]),Ct="/static/images/new-text-DlOd6omk.png",Lt="/static/images/gift-icon-ChLUyQdL.png",It="/static/images/activity-text-fIwfO6KT.png",St="/static/images/active-icon-C76y8UVY.png",Rt={class:"flex gap-3 my-3"},Ft={class:"flex flex-col justify-between h-14"},Tt=e("img",{src:Ct,class:"w-8"},null,-1),Bt={class:"text-[#999] text-xxs"},Pt={class:"text-xs text-primary"},Ot=e("div",{class:"h-full flex flex-col justify-end"},[e("img",{src:Lt,class:"h-auto w-9"})],-1),At={class:"flex flex-col justify-between h-14"},Dt=e("img",{src:It,class:"w-8"},null,-1),zt={class:"text-[#999] text-xxs"},Et={class:"text-xs text-primary"},Ut=e("img",{src:St,class:"w-[75px] h-[72px]"},null,-1),Vt=B({emits:["handleTo"],setup(s,{emit:_}){return G(),(n,r)=>(o(),i("div",Rt,[e("div",{onClick:r[0]||(r[0]=p=>_("handleTo","/activity-goods?type=1")),class:"flex items-center justify-between flex-1 px-4 py-3 bg-white rounded-xl"},[e("div",Ft,[Tt,e("div",Bt,k(n.$t("mall.New Arrivals")),1),e("div",Pt,k(n.$t("avtivity.check")),1)]),Ot]),e("div",{onClick:r[1]||(r[1]=p=>_("handleTo","/activity-goods?type=2")),class:"flex items-center justify-between flex-1 px-4 pr-[6px] py-[3px] bg-white rounded-xl"},[e("div",At,[Dt,e("div",zt,k(n.$t("mall.Hot sale products")),1),e("div",Et,k(n.$t("avtivity.check")),1)]),Ut])]))}}),qt=B({props:{limit:null},setup(s){const _=v(0),n=()=>{document.getElementById("fm-page").scrollTo({top:0,left:0,behavior:"smooth"})};return J(()=>{document.getElementById("fm-page").addEventListener("scroll",()=>{_.value=document.getElementById("fm-page").scrollTop})}),(r,p)=>{const f=I("van-icon");return pe((o(),i("div",{ref:(a,C)=>{C.toTop=a},onClick:n,class:"fixed flex shadow-1 items-center justify-center z-50 w-8 h-8 bg-white rounded-full right-2.5 bottom-[20%]"},[w(f,{name:"back-top",class:"text-xl"})],512)),[[fe,_.value>(s.limit||200)]])}}}),jt=s=>(M("data-v-79a3b8c6"),s=s(),K(),s),Nt={class:"w-full bg-fixed bg-[#F8F8F8] linear-mall h-full overflow-y-scroll"},Ht={class:"relative px-2.5 overflow-hidden"},Mt={class:"ad-img-container"},Kt=["onClick"],Gt=jt(()=>e("img",{src:ve,alt:"广告"},null,-1)),Yt=[Gt],Jt=B({name:"Mall"});function Qt(s){const _=v(null),n=v(null),r=v(!1),p=G(),[f,a]=H(!1),{showActiveInfo:C,getShowActiveInfo:u}=Ie(),h=async()=>{var t,c;r.value=!0,await((t=_.value)==null?void 0:t.onRefresh()),(c=n.value)==null||c._queryRemindList(),r.value=!1},g=v(null),L=v([{id:1,imageUrl:te("images/mall/mall_banner.png"),linkUrl:null}]),R=async()=>{const t=await ye({locationType:1});t.success&&(L.value=t.data)},l=()=>{console.log("scroll")},T=v([]),x=v([]),$=async()=>{const t=await Z({page:1,size:50,type:2});t.success&&(x.value=t.data||[])},O=v([]),A=async()=>{const t=await Z({page:1,size:50,type:1});t.success&&(O.value=t.data||[])},y=t=>{p.push(t)},N=()=>{a(!1),p.push("/520-home")};return J(()=>{R(),$(),A(),u()}),he(()=>{var t;Le(),(t=n.value)==null||t._queryRemindList()}),(t,c)=>{const Y=I("van-pull-refresh");return o(),i("div",Nt,[w(kt,{bannerList:L.value,expressList:T.value,hotList:x.value,hotListBottom:O.value},{default:F(()=>[w(je,{onHandleTo:y,ref:(b,P)=>{P.noticeRef=b,n.value=b}},null,512)]),_:1},8,["bannerList","expressList","hotList","hotListBottom"]),e("div",Ht,[w(Ye),w(Vt,{onHandleTo:y,ref:(b,P)=>{P.activeHandleRef=b,g.value=b}},null,512),w(Y,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=b=>r.value=b),onRefresh:h,class:"min-h-screen"},{default:F(()=>[w(ke,{isSearchPage:!1,ref:(b,P)=>{P.listRef=b,_.value=b},onScroll:l,activeInfo:d(C)},null,8,["activeInfo"])]),_:1},8,["modelValue"])]),w(qt),d(f)?(o(),i("div",{key:0,class:"overlay",onClick:c[1]||(c[1]=b=>d(a)(!1)),"z-index":"9999"},[e("div",Mt,[e("div",{onClick:q(N,["stop"])},Yt,8,Kt)])])):S("",!0)])}}const Xt=B({...Jt,setup:Qt}),bs=j(Xt,[["__scopeId","data-v-79a3b8c6"]]);export{bs as default};
