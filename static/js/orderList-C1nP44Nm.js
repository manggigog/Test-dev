import{_ as M,z as Q,q as J,x as K,bQ as X,F as I,G as c,H as r,I as o,U as m,a1 as Y,Q as t,O as d,J as b,K as j,V as Z,a3 as w,Z as A,a4 as k,P as y,$ as p,T as V,X as ee,Y as se,a2 as _,bl as te,o as oe}from"./vendor-Dr_RpJ_Y.js";import{_ as re}from"./avatarRing-CLGxkH-F.js";import{_ as ne}from"./address-AoifhxGN.js";import{G as ae}from"./GoodsItem-DZxsKjaZ.js";import{a as W,i as de,f as ie,r as N}from"./index-7OiUoGXy.js";import{u as ce,a as F,f as le}from"./useOrderStatus-CUBDjZMz.js";import{c as ue,n as me,m as fe,I as U}from"./order-D0_No2Ew.js";import{P as O}from"./flashSale-DDyqLyYN.js";import{C as he}from"./ChangeRegion-CWmxWHoW.js";import{B as pe}from"./BackIcon-CDrGaEPo.js";import"./credit-EZuPIBEN.js";import"./mcoin-logo-1-Deho8IWN.js";import"./useShipTemplate-VxaDU85Q.js";import"./enums-DlE-aiss.js";import"./ChangeRegionPop-BFcmEqdg.js";const ye=""+new URL("../images/addTag-B03q_prA.svg",import.meta.url).href,q=e=>(ee("data-v-6acd15eb"),e=e(),se(),e),ge={class:"gap-2 flex-center-bw"},xe=q(()=>o("div",{class:"w-8 h-8"},[o("img",{src:re,class:"w-full h-full rounded-md object-cover",alt:"",fit:"cover"})],-1)),ve={class:"flex flex-col justify-center flex-1 h-8 text-default"},be={class:"text-sm font-semibold flex-center-bw"},we={key:0},ke={class:"text-primary"},$e={class:"text-xs opacity-60"},Ce={key:0},Te={key:1},Re={key:2},Se={key:0,class:"bg-[#34C2A9] rounded-[2px] w-[20px] h-[20px] text-center mr-[8px]"},Ae=q(()=>o("img",{src:ye,class:"w-4 h-4",alt:""},null,-1)),Ie={class:"text-sm text-default"},Le={class:"flex justify-between gap-2 text-[#C96C26] text-sm font-normal rounded-lg bg-[#FFF5E9] p-2"},Be={class:"whitespace-nowrap w-[100px]"},Ve={key:0,class:"opacity-60"},Ne={key:1,class:"break-all opacity-60"},Fe={class:"break-all"},Oe={key:0,class:"text-base text-black font-semibold mt-2 border-t-[1px] border-[#F2F2F2] border-solid pt-2"},je=q(()=>o("img",{src:ne,class:"inline-block w-[18px]"},null,-1)),qe={key:1,class:"mt-1 text-sm text-default opacity-60"},De={key:0,class:"pt-2.5 text-xs text-[#B9B9B9]"},Pe={class:"items-center inline"},ze={class:"block"},Ee={class:"colon"},Ge={class:"block"},He={class:"colon"},_e={class:"block"},Ue={class:"colon"},Me={class:"block"},Qe={class:"colon"},We={key:1,class:"text-right"},Je={key:1,class:"flex justify-end mt-3"},Ke=Q({props:{order:null,isService:{type:Boolean},nowTime:null},emits:["open"],setup(e,{emit:$}){const g=e,{accountStore:f}=W(),x=J(),{t:v}=K(),n=s=>{g.isService||x.push(s)},L=()=>{g.isService||x.push(`/sellerOrderDetail?id=${g.order.id}`)},C=X("openBatchReceiptPop",null),{merchantConfirm:B}=de(),T=async s=>{if(f.isOnlyView)return V(v("order.Requires merchant account operation"));if(C){C(s);return}s.loading=!0;try{const l=(await ue({orderIds:s.id})).data.ordIds,h=await B(l);if(!h.success)return;if(s.payType!==O.STORE_CARD){if(!(await me({ordIds:l,hash:h.result.hash})).success)return;s.merchantsConfirm=1,V.success(v("order.confirmSuccess"))}}finally{s.loading=!1}},R=s=>{$("open",s)};return(s,a)=>{var u,S,D,P,z,E,G,H;const l=I("van-count-down"),h=I("VanButton");return r(),c("div",{class:"px-5 mt-3 bg-white rounded-xl py-7",onClick:L},[o("div",ge,[xe,o("div",ve,[o("div",be,[e.order.userAddress&&e.order.userAddress.address?(r(),c("div",we,t(d(ie)(e.order.userAddress.address,"...",5,5)),1)):m("",!0),o("div",ke,t(d(ce)(e.order)),1)]),o("div",$e,[e.order.status==4?(r(),c("span",Ce,t(d(N)(e.order.finishTime))+" "+t(s.$t("common.finish")),1)):e.order.status==2?(r(),c("span",Te,t(d(N)(e.order.expressTime))+" "+t(s.$t("order.Ship")),1)):(r(),c("span",Re,t(d(N)(e.order.createTime))+" "+t(s.$t("order.buied")),1))])])]),o("ul",{class:"flex justify-start tagStyle items-center mt-[8px] text-white",onClick:a[0]||(a[0]=w(i=>R(e.order),["stop"]))},[((S=(u=e.order)==null?void 0:u.orderLabelList)==null?void 0:S.length)>0?(r(),c(b,{key:0},[(r(!0),c(b,null,j((P=(D=e.order)==null?void 0:D.orderLabelList)==null?void 0:P.slice(0,5),i=>(r(),c("li",{style:Z({backgroundColor:i==null?void 0:i.colorHex}),class:"text-[10px] min-h-[16px] min-w-[20px] rounded-[2px] h-[20px] px-[4px] mr-[6px]",key:i==null?void 0:i.id},t(i==null?void 0:i.content),5))),128)),((E=(z=e.order)==null?void 0:z.orderLabelList)==null?void 0:E.length)>5?(r(),c("li",Se," ... ")):m("",!0)],64)):m("",!0),Ae]),(r(!0),c(b,null,j(e.order.orderGoods,i=>(r(),A(ae,{creditFlag:e.order.creditFlag,payType:e.order.payType,key:i.goodsName,goods:i,storeCard:e.order.fmStoredCard,onHandleTo:n},null,8,["creditFlag","payType","goods","storeCard"]))),128)),o("div",Ie,[o("div",Le,[o("div",Be,t(s.$t("order.remark")),1),(G=e.order.userAddress)!=null&&G.postscript?(r(),c("div",Ne,t((H=e.order.userAddress)==null?void 0:H.postscript),1)):(r(),c("div",Ve,t(s.$t("order.noRemark")),1))])]),o("div",Fe,[e.order.userAddress?(r(),c("div",Oe,[je,k(" "+t(e.order.userAddress.provinceName??"")+t(e.order.userAddress.cityName??"")+t(e.order.userAddress.countyName??"")+t(e.order.userAddress.detailInfo??""),1)])):m("",!0),e.order.userAddress?(r(),c("div",qe,t(e.order.userAddress.userName)+" "+t(e.order.userAddress.telNumber),1)):m("",!0)]),e.order.status===2?(r(),c("div",De,[d(F)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0?(r(),c(b,{key:0},[o("div",null,t(s.$t("order.observeTip")),1),o("div",Pe,[y(l,{class:"order-time",time:d(F)(e.order.expressTime,e.order.confirmLimit,e.nowTime)},{default:p(i=>[o("span",ze,t(i.days),1),o("span",Ee,t(s.$t("common.day")),1),o("span",Ge,t(i.hours),1),o("span",He,t(s.$t("common.hours")),1),o("span",_e,t(i.minutes),1),o("span",Ue,t(s.$t("common.minutes")),1),o("span",Me,t(i.seconds),1),o("span",Qe,t(s.$t("common.seconds")),1)]),_:1},8,["time"]),o("span",null,t(s.$t("order.sellConfirmTip")),1)])],64)):e.order.payType===d(O).WITHDRAW_POINTS&&!e.order.merchantsConfirm?(r(),c("div",We,t(s.$t("order.sellConfirm")),1)):m("",!0)])):m("",!0),e.isService?m("",!0):(r(),c("div",Je,[!d(f).isOnlyView&&e.order.status===1?(r(),A(h,{key:0,class:"btn-orange h-[37px] px-9 text-white text-sm font-semibold",onClick:a[1]||(a[1]=w(i=>d(f).isOnlyView?d(V)(s.$t("order.Requires merchant account operation")):d(x).push(`/orderDelivery?id=${e.order.id}`),["stop"]))},{default:p(()=>[k(t(s.$t("order.Ship")),1)]),_:1})):m("",!0),!d(f).isOnlyView&&e.order.status===2&&e.order.payType!==d(O).STORE_CARD&&!e.order.merchantsConfirm?(r(),A(h,{key:1,class:"btn-orange h-[37px] px-6 text-white text-sm font-semibold",disabled:d(F)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0,loading:e.order.loading,onClick:a[2]||(a[2]=w(i=>T(e.order),["stop"]))},{default:p(()=>[k(t(s.$t("order.confirmGeted")),1)]),_:1},8,["disabled","loading"])):m("",!0)])),Y(s.$slots,"default",{},void 0,!0)])}}}),Xe=M(Ke,[["__scopeId","data-v-6acd15eb"]]),Ye={class:"px-3 bg-[#f2f0ef] mb-1"},Ze={class:"gap-2 mt-2 flex-start"},es={class:"text"},ss={class:"flex justify-between mt-2.5 text-sm text-[#2E2008]"},ts={class:"font-medium opacity-60"},os={class:""},rs={class:"flex-center-bw mt-2.5"},ns=Q({setup(e){const{reloadStore:$}=W(),[g,f]=_(!1),[x,v]=_(!1),n=te({active:1,page:0,size:10,finished:!1,list:[],loading:!1,total:0}),L=s=>{const a=le()||"jtName";return s.fmRefundReason&&s.fmRefundReason[a]},C=async()=>{n.loading=!0,n.page+=1,await B(),n.loading=!1},B=async()=>{const s={page:n.page,size:n.size,type:3},a=await fe(s);if(n.loading=!1,!a.success){n.finished=!0;return}if(!a.data||!a.total){n.finished=!0;return}n.total=a.total,n.list=n.page===1?a.data:n.list.concat(a.data),n.list.length>=n.total&&(n.finished=!0)},T=oe();T.query.active&&(n.active=Number(T.query.active));const R=async(s,a)=>{if(a){v(!0);const l=await U({orderId:s.id,type:1});v(!1),l.success&&$.reload()}else{f(!0);const l=await U({orderId:s.id,type:2});f(!1),l.success&&$.reload()}};return(s,a)=>{const l=I("VanButton"),h=I("VanList");return r(),c("div",Ye,[o("div",Ze,[y(pe),o("div",es,t(s.$t("common.service")),1),y(he,{showIcon:!0,showDownIcon:!0,class:"ml-auto bg-gray1 px-2 rounded-[20px] border-2 border-solid border-white",style:{"box-shadow":"0px 0px 15px 0px rgba(51, 47, 42, 0.3) inset"}})]),y(h,{class:"mt-2.5",loading:d(n).loading,"onUpdate:loading":a[0]||(a[0]=u=>d(n).loading=u),finished:d(n).finished,"finished-text":s.$t("common.noMore"),"loading-text":s.$t("common.loading"),onLoad:C},{default:p(()=>[(r(!0),c(b,null,j(d(n).list,u=>(r(),A(Xe,{key:u.id,order:u,isService:!0},{default:p(()=>[o("div",ss,[o("div",ts,t(s.$t("refund.reasonforreturn")),1),o("div",os,t(L(u)),1)]),o("div",rs,[y(l,{class:"border-orange bg-[#fff] rounded-3xl text-[#fea021] w-[130px] h-[45px]",onClick:w(S=>R(u,!0),["stop"]),loading:d(x)},{default:p(()=>[k(t(s.$t("common.agree")),1)]),_:2},1032,["onClick","loading"]),y(l,{class:"btn-orange rounded-3xl text-white w-[130px] h-[45px]",onClick:w(S=>R(u,!1),["stop"]),loading:d(g)},{default:p(()=>[k(t(s.$t("common.reject")),1)]),_:2},1032,["onClick","loading"])])]),_:2},1032,["order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])}}}),ws=M(ns,[["__scopeId","data-v-323db6d9"]]);export{ws as default};
