import{z as x,r as u,D as b,Z as D,G as f,H as c,F as M,P as k,_ as V,I as i,Q as v,N,O as $,U as R,J as j,a1 as H,a3 as L}from"./vendor-Dr_RpJ_Y.js";import{L as T}from"./Lottie_v2-DIiMHpUu.js";import{k as F,f as A}from"./index-CU2nzZe6.js";const O="/static/images/rank-vote-BOp99hG1.svg",z={key:1,src:O,class:"w-5 h-5"},E=x({props:{direction:null},emits:["completePlay"],setup(e,{emit:a}){const s=e,n=u(null),t=u(null),m=()=>{t.value=n.value.getLottieAnimation(),t.value.setSpeed(+s.direction==200?.5:1),t.value.play()},l=()=>{t.value.destroy(),a("completePlay")};return b(()=>s==null?void 0:s.direction,o=>{o&&setTimeout(()=>{m()},300)},{immediate:!0,deep:!0}),(o,d)=>e.direction?(c(),D(T,{key:0,class:"w-5 h-5",path:+e.direction==200?"lottie/greenLight.json":"lottie/redLight.json",ref:(r,h)=>{h.lottieRef=r,n.value=r},renderer:"svg",autoplay:!0,loop:!1,onComplete:l},null,8,["path"])):(c(),f("img",z))}}),G={class:"text-[#4D2E0F] text-right text-[22px] font-BebasNeue"},J=x({props:{score:null},setup(e){const a=e,s=u(null),n=u(Math.max(Math.floor(a.score||0),0)),t=u(null);return b(()=>a==null?void 0:a.score,(m,l)=>{t.value=Math.max(Math.floor(m),0),n.value=Math.max(Math.floor(l),0),setTimeout(()=>{var o;(o=s.value)==null||o.start()},150)},{immediate:!1,deep:!0}),(m,l)=>{const o=M("count-to");return c(),f("div",G,[k(o,{startVal:n.value,endVal:t.value,duration:2e3,autoplay:!1,ref:(d,r)=>{r.countToRef=d,s.value=d}},null,8,["startVal","endVal"])])}}}),Q={class:"py-3 pl-2 pr-4 flex items-center gap-x-2"},U={class:"flex-col text-left flex-1"},Z={class:"text-[#7D3619] line-clamp-1"},q={class:"text-xs text-b3 mt-0.5"},K={class:"flex items-center justify-center gap-x-2"},W={class:"text-[#7D3619]"},X=x({props:{rankItem:null,showTip:{type:Boolean},noRank:{type:Boolean},hideScore:{type:Boolean},showPower:{type:Boolean}},emits:["voteShop","toDetail"],setup(e,{emit:a}){const{rankItem:s}=e;return(n,t)=>{var l,o,d,r,h,p,g,y,I,w,B,S,C;const m=M("van-image");return c(),f("div",Q,[i("div",{class:N(["w-8 h-4 font-bold text-base text-center text-[#995C1F] index-number",{up:((l=e.rankItem)==null?void 0:l.preHeat)&&+((o=e.rankItem)==null?void 0:o.sort)<+((d=e.rankItem)==null?void 0:d.preHeat),down:((r=e.rankItem)==null?void 0:r.preHeat)&&+((h=e.rankItem)==null?void 0:h.sort)>+((p=e.rankItem)==null?void 0:p.preHeat)}])},v(+((g=e.rankItem)==null?void 0:g.sort)||"-"),3),i("div",{class:"flex-1 flex items-center",onClick:t[0]||(t[0]=P=>a("toDetail"))},[k(m,{round:"",fit:"cover",src:(((y=e.rankItem)==null?void 0:y.avatar)||((I=e.rankItem)==null?void 0:I.logo)||"").split()[0]||$(F)("images/avatarRing.png"),class:"w-[40px] h-[40px] mr-2 rounded-full object-cover"},null,8,["src"]),i("div",U,[i("div",Z,v(((w=e.rankItem)==null?void 0:w.storeName)||"-"),1),i("div",q,v($(A)((B=e.rankItem)==null?void 0:B.shopAddress,"***",0,4)),1)])]),i("div",K,[e.hideScore?R("",!0):(c(),D(J,{key:0,score:(S=e.rankItem)==null?void 0:S.score},null,8,["score"])),e.showPower?(c(),f(j,{key:1},[n.$slots.right?H(n.$slots,"right",{key:0},void 0,!0):(c(),f("div",{key:1,class:"text-xs flex items-center min-w-fit",onClick:t[2]||(t[2]=L(P=>a("voteShop"),["stop"]))},[k(E,{direction:(C=e.rankItem)==null?void 0:C.direction,onCompletePlay:t[1]||(t[1]=()=>{e.rankItem.direction=null})},null,8,["direction"]),i("span",W,v(n.$t("ranking.power")),1)]))],64)):R("",!0)])])}}}),te=V(X,[["__scopeId","data-v-66e7a4fc"]]);export{te as R,J as _,E as a};
