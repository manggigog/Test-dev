import{_ as B,y as N,a1 as S,l as D,r as a,x as F,D as G,E as H,F as m,G as i,H as e,O as K,bc as R,a2 as V,bo as $,bz as j,K as h,N as q,I as z,J as M,Y as O,Z as E}from"./vendor-BUT0HZ5j.js";import{_ as J}from"./search-Dwmdj_3F.js";import{_ as U}from"./delete-C3qvlPYO.js";import{B as P}from"./BackIcon-biFt6cm7.js";/* empty css                                                               */import{H as T}from"./HomeGoodsItem-pAy6D7Fx.js";import{e as Y,as as Z,aJ as A}from"./index-BvL8wS8a.js";import"./store-CPx32ymB.js";import"./MCOIN-BcbOHmhy.js";import"./useCityMap-CVu2_p19.js";import"./RatioBox-CG9RFZMG.js";import"./ImgBoutiqueLable-BF5Xoxsv.js";import"./shop-CeqcS6K2.js";const p=d=>(O("data-v-47fb899c"),d=d(),E(),d),Q={class:"font-Puhui font-normal relative pb-20 app-container"},W={class:"header__wrap w-full h-[50px]"},X={class:"header__title h-full van-nav-bar__content"},ee={class:"van-nav-bar__left van-haptics-feedback"},se=p(()=>e("div",{class:"van-nav-bar__title van-ellipsis text-b1 text-lg font-bold"}," 门店套餐 ",-1)),oe={class:"search__wrap w-full h-[48px] px-3 pb-3"},te={class:"search__input w-full h-full bg-white rounded-3xl flex items-center justify-center px-3 py-2.5"},ae=p(()=>e("div",{class:"search__icon flex-shrink-0"},[e("img",{src:J,class:"w-4 h-4"})],-1)),ne=["onKeyup"],le=p(()=>e("img",{src:U,class:"w-4 h-4",alt:""},null,-1)),ie=[le],re=p(()=>e("span",{class:"text-[#FF8812] text-sm font-semibold whitespace-nowrap"}," 搜索 ",-1)),ce=[re],de={class:"list__wrap"},ue={class:"goods__wrap overflow-y-scroll"},_e=N({name:"OfflineHome"});function pe(d){const x=S(),y=D();Y();const r=a(""),n=a(!1),u=a(0),k=a(20),c=a(!1),l=a([]),g=F(()=>{var o;return((o=x.query)==null?void 0:o.storeId)||""}),I=()=>{r.value="",v()},b=a(null),v=()=>{n.value||(u.value=0,c.value=!1,l.value=[],f(),b.value.blur())},f=async()=>{n.value=!0,u.value+=1,c.value=!1,await C(),n.value=!1},C=async()=>{const{success:o,data:t}=await A({goodsNameLike:r.value,page:u.value,size:k.value,storeId:g.value,sortBy:"asc|goods_id"});if(!o||!t||!t.total){c.value=!0;return}const _=t.records||[];l.value=u.value===1?_:[...l.value,..._],l.value.length>=t.total&&(c.value=!0)},L=o=>{y.push({path:"/offlineGoodsDetail",query:{goodsId:o.goodsId,storeId:g.value}})};return G(()=>{f()}),(o,t)=>{const _=H("van-list");return i(),m("div",Q,[e("div",W,[e("div",X,[e("div",ee,[K(P)]),se])]),e("div",oe,[e("div",te,[ae,R(e("input",{ref:(s,w)=>{w.searchRef=s,b.value=s},type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),class:"w-full h-full bg-transparent ml-1 font-normal",placeholder:"请输入搜寻关键字",onKeyup:j(v,["enter"]),enterkeyhint:"search"},null,40,ne),[[$,r.value]]),r.value?(i(),m("div",{key:0,class:"flex-shrink-0 flex items-center justify-center",onClick:I},ie)):V("",!0),e("div",{class:"search__btn ml-2 flex-shrink-0",onClick:v},ce)])]),e("div",de,[e("div",ue,[l.value.length===0&&!n.value?(i(),h(Z,{key:0,name:o.$t("common.No data yet")},null,8,["name"])):(i(),h(_,{key:1,loading:n.value,"onUpdate:loading":t[1]||(t[1]=s=>n.value=s),finished:c.value,"finished-text":o.$t("common.noMore"),onLoad:f},{default:q(()=>[(i(!0),m(z,null,M(l.value,s=>(i(),h(T,{key:s.goodsId,goods:s,class:"mb-4 :last:mb-0",onClick:w=>L(s),"show-store-name":""},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])])}}const ve=Object.assign(_e,{setup:pe}),Ne=B(ve,[["__scopeId","data-v-47fb899c"]]);export{Ne as default};
