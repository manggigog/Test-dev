import{y as w,w as k,bc as C,bd as $,x as B,D,E as L,F as v,G as d,H as n,O as g,P as o,Q as p,K as y,l as F,a1 as z,R as E,N as S,I as V,J as N,_ as P,r as T,bh as q,bH as G,Y as M,Z as R}from"./vendor-CjApaIpB.js";import{_ as j}from"./tips-C7iNMZn2.js";import{c as H,d as U,s as O,q as Y,N as A,g as J,bg as K,a5 as Q}from"./index-B3VH42pz.js";import{D as Z}from"./DescriptionPop-BQs1BXFj.js";import{B as W}from"./BetweenTab-B_wy4hnL.js";import{B as X}from"./BackIcon-D2Vm_lyR.js";const ee={class:"px-3 py-6"},te={class:"w-fit rounded-lg relative flex flex-col justify-evenly pl-2.5"},oe={class:"text-sm text-[#585654]"},se=n("img",{src:j,class:"w-4 h-4"},null,-1),ae={class:"mt-1 flex items-center"},ne={class:"text-[40px] text-[#2E2008] font-BebasNeue leading-[48px]"},le={key:1},ie=w({emits:["handleTo"],setup(c,{emit:f}){const{t:l}=k(),[s,e]=C(!1),[m,h]=C(!1),i=$({balance:null}),_=B(()=>[{url:"voucher/Coupons1",text:l("voucher.used to deduct MC"),subText:l("voucher.can be withdrawn")},{url:"voucher/Coupons2",text:l("voucher.Coupons2_title"),subText:l("voucher.Coupons2_desc")},{url:"voucher/Coupons3",text:l("voucher.Coupons3_title"),subText:l("voucher.Coupons3_desc")},{url:"voucher/Coupons4",text:l("voucher.Coupons4_title"),subText:l("voucher.Coupons4_desc")},{url:"voucher/Coupons5",text:l("voucher.Coupons5_title"),subText:l("voucher.Coupons5_desc")},{url:"voucher/Coupons6",text:l("voucher.Coupons6_title"),subText:l("voucher.Coupons6_desc")}]),x=async()=>{e(!0),i.balance=await O(Y.FMCP).balanceOf(),e(!1)};return D(()=>{x()}),(b,r)=>{const a=L("VanLoading");return d(),v("div",ee,[n("div",te,[n("div",{class:"flex items-center gap-0.5",onClick:r[0]||(r[0]=t=>o(h)(!0))},[n("span",oe,p(b.$t("voucher.available quota")),1),se]),n("div",ae,[n("div",ne,[o(s)?(d(),y(a,{key:0,size:"40"})):(d(),v("span",le,p(o(H)(o(U)(o(i).balance||0))),1))]),n("div",{class:"ml-2 w-fit h-fit py-1.5 px-[9px] bg-white rounded-[4px] text-sm text-[#FF8812] font-semibold",onClick:r[1]||(r[1]=t=>f("handleTo","/mall"))},p(b.$t("voucher.go_use")),1)])]),g(Z,{list:o(_),show:o(m),onClose:r[2]||(r[2]=t=>o(h)(!1))},null,8,["list","show"])])}}}),ce=c=>A("GET","/logGrow/list",c),re={class:"min-h-[calc(100vh_-_50px_-_120px_-_44.5px)] bg-white"},ue={class:"text-sm text-[#585654]"},de={class:"mt-0.5 text-[#999]"},pe={class:"ml-2 text-sm text-[#FF8812] font-semibold"},me=w({props:{path:{default:"/creditPledge"},topDistance:{type:Boolean,default:!1}},setup(c){const f=c,l=F(),{t:s}=k(),e=$({active:null,page:0,size:10,finished:!1,list:[],loading:!1,total:0}),m=B(()=>[{id:null,name:s("common.all")},{id:2,name:s("order.order")},{id:99,name:s("order.afterSale")},{id:1,name:s("common.get")}]),h=a=>{let t="";switch(Number(a.type)){case 1:t=a.growFlag?s("voucher.type1"):s("voucher.type2");break;case 2:t=a.growFlag?s("voucher.type3"):s("voucher.type4");break;case 3:t=a.growFlag?s("voucher.type5"):s("voucher.type6");break;case 4:t=s("voucher.type7");break;case 5:t=s("voucher.type8");break;case 6:t=s("voucher.type9");break;case 7:t=s("voucher.type_ranking");break;default:t=s("goods.other")}return t},i=a=>{l.replace({path:f.path,query:{active:a}}),e.active=a,_()},_=()=>{e.page=0,e.total=0,e.finished=!1,e.list=[],x()},x=async()=>{e.loading=!0,e.page+=1,await b(),setTimeout(()=>{e.loading=!1},1e3)},b=async()=>{const a={page:e.page,size:e.size,typeList:null,incomeType:null};e.active===0?delete a.incomeType:e.active===99?a.typeList=4:a.incomeType=e.active;const t=await ce(a);if(e.loading=!1,!t.success){e.finished=!0;return}if(!t.data||!+t.total){e.finished=!0;return}e.total=t.total,e.list=e.page===1?t.data:e.list.concat(t.data),e.list.length>=e.total&&(e.finished=!0)},r=z();return r.query.active&&(e.active=Number(r.query.active)),(a,t)=>{const I=L("VanList");return d(),v("div",null,[n("div",{class:E(["sticky top-[50px] z-[51] w-full pt-3 px-3 bg-white",{"rounded-none":c.topDistance,"rounded-t-xl":!c.topDistance}])},[g(W,{options:o(m),"label-key":"name","value-key":"id",modelValue:o(e).active,"onUpdate:modelValue":t[0]||(t[0]=u=>o(e).active=u),onChange:i},null,8,["options","modelValue"])],2),n("div",re,[o(e).finished&&o(e).total===0?(d(),y(K,{key:0,needTextTop:!0,titleColor:"#A45E00",url:o(J)("images/evaluate_empty.png"),title:a.$t("voucher.no records"),top:"2rem",iconSize:"16rem"},null,8,["url","title"])):(d(),y(I,{key:1,loading:o(e).loading,"onUpdate:loading":t[1]||(t[1]=u=>o(e).loading=u),finished:o(e).finished,"finished-text":a.$t("common.noMore"),"loading-text":a.$t("common.loading"),onLoad:x,class:"bg-white p-3"},{default:S(()=>[(d(!0),v(V,null,N(o(e).list,u=>(d(),v("div",{class:"mb-2 pb-2 border-solid border-b-[0.5px] border-[#D9D9D9] flex justify-between",key:u.id},[n("div",ue,[n("div",null,p(h(u)),1),n("div",de,p(o(Q)(u.createTime)),1)]),n("div",pe,p(Number(u.incomeType)===1?"+":"-")+p(u.amount),1)]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"]))])])}}}),he=c=>(M("data-v-0def6810"),c=c(),R(),c),ve={class:"voucher__container relative font-Puhui"},fe=he(()=>n("div",{class:"absolute top-[30px] right-[17.5px] z-[49] bg"},null,-1)),ge={class:"relative w-full h-[50px] px-3 flex justify-between items-center"},_e={class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-base text-[#2E2008] font-bold"},xe={class:"relative z-[50]"},be=w({setup(c){const f=F(),l=i=>{f.push(i)},s=T(0);let e=T(!0);const m=G(()=>{const i=document.getElementById("fm-page");s.value=i.scrollY||i.scrollTop,s.value<20?e.value=!1:e.value=!0},100),h=()=>{document.getElementById("fm-page").addEventListener("scroll",m),m()};return q(()=>{const i=document.getElementById("fm-page");i&&i.removeEventListener("scroll",m)}),D(()=>{h()}),(i,_)=>(d(),v("div",ve,[fe,n("div",{class:E(["sticky top-0 z-[51]",{"bg-[#fff]":o(e)," bg-black/0":!o(e)}])},[n("div",ge,[g(X),n("div",_e,p(i.$t("voucher.voucher")),1)])],2),n("div",xe,[g(ie,{onHandleTo:l}),g(me,{topDistance:o(e),path:"/voucher"},null,8,["topDistance"])])]))}}),Be=P(be,[["__scopeId","data-v-0def6810"]]);export{Be as default};
