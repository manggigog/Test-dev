import{_ as q,z as j,o as D,q as F,r as a,y as f,E as G,F as H,G as h,H as r,I as s,P as K,Q as k,O as R,bj as V,U as z,bt as E,bv as M,Z as g,$ as O,J as U,K as P,X as J,Y as Q}from"./vendor-Dr_RpJ_Y.js";import{_ as T}from"./search-C4fLtTfY.js";import{_ as X}from"./delete-BlDblrKv.js";import{B as Y}from"./BackIcon-CDrGaEPo.js";/* empty css                                                               */import{H as Z}from"./HomeGoodsItem-BHyDvW3X.js";import{a as A,B as W,aS as ee}from"./index-7OiUoGXy.js";import"./MCOIN-Bodfn-v1.js";import"./store-odfdGeH-.js";import"./useCityMap-CJiyuUmB.js";import"./RatioBox-C8BvsGJW.js";import"./ImgBoutiqueLable-B-2xCcw4.js";import"./shop-CeqcS6K2.js";const x=d=>(J("data-v-5f993a66"),d=d(),Q(),d),se={class:"font-Puhui font-normal relative pb-20 app-container sm:w-[375px]"},oe={class:"header__wrap w-full h-[50px]"},te={class:"header__title h-full van-nav-bar__content"},ae={class:"van-nav-bar__left van-haptics-feedback"},ne={class:"van-nav-bar__title van-ellipsis text-b1 text-lg font-bold"},le={class:"search__wrap w-full h-[48px] px-3 pb-3"},re={class:"search__input w-full h-full bg-white rounded-3xl flex items-center justify-center px-3 py-2.5"},ie=x(()=>s("div",{class:"search__icon flex-shrink-0"},[s("img",{src:T,class:"w-4 h-4"})],-1)),ce=["placeholder","onKeyup"],de=x(()=>s("img",{src:X,class:"w-4 h-4",alt:""},null,-1)),ue=[de],pe={class:"text-[#FF8812] text-sm font-semibold whitespace-nowrap"},_e={class:"list__wrap safe-bottom"},me={class:"goods__wrap overflow-y-scroll"},ve=j({name:"OfflineHome"});function fe(d){const _=D(),I=F();A();const i=a(""),n=a(!1),u=a(0),C=a(20),c=a(!1),l=a([]),y=f(()=>{var e;return((e=_.query)==null?void 0:e.storeId)||""}),S=f(()=>{var e;return((e=_.query)==null?void 0:e.shopId)||""}),B=f(()=>{var e;return((e=_.query)==null?void 0:e.shopName)||""}),L=()=>{i.value="",m()},w=a(null),m=()=>{n.value||(u.value=0,c.value=!1,l.value=[],v(),w.value.blur())},v=async()=>{n.value=!0,u.value+=1,c.value=!1,await N(),n.value=!1},N=async()=>{const{success:e,data:t}=await ee({goodsNameLike:i.value,page:u.value,size:C.value,storeId:y.value,shopId:S.value,sortBy:"desc|goods_sales_volume,asc|goods_id"});if(!e||!t||!t.total){c.value=!0;return}const p=t.records||[];l.value=u.value===1?p:[...l.value,...p],l.value.length>=t.total&&(c.value=!0)},$=e=>{I.push({path:"/offlineGoodsDetail",query:{goodsId:e.goodsId,storeId:y.value}})};return G(()=>{v()}),(e,t)=>{const p=H("van-list");return r(),h("div",se,[s("div",oe,[s("div",te,[s("div",ae,[K(Y)]),s("div",ne,k(R(B)||e.$t("city.Store service")),1)])]),s("div",le,[s("div",re,[ie,V(s("input",{ref:(o,b)=>{b.searchRef=o,w.value=o},type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full h-full bg-transparent ml-1 font-normal",placeholder:e.$t("mall.Enter search keywords"),onKeyup:M(m,["enter"]),enterkeyhint:"search"},null,40,ce),[[E,i.value]]),i.value?(r(),h("div",{key:0,class:"flex-shrink-0 flex items-center justify-center",onClick:L},ue)):z("",!0),s("div",{class:"search__btn ml-2 flex-shrink-0",onClick:m},[s("span",pe,k(e.$t("common.search")),1)])])]),s("div",_e,[s("div",me,[l.value.length===0&&!n.value?(r(),g(W,{key:0,name:e.$t("common.No data yet")},null,8,["name"])):(r(),g(p,{key:1,loading:n.value,"onUpdate:loading":t[1]||(t[1]=o=>n.value=o),finished:c.value,"finished-text":e.$t("common.noMore"),onLoad:v},{default:O(()=>[(r(!0),h(U,null,P(l.value,o=>(r(),g(Z,{key:o.goodsId,goods:o,class:"mb-4 :last:mb-0",onClick:b=>$(o),"show-store-name":""},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])])}}const he=Object.assign(ve,{setup:fe}),qe=q(he,[["__scopeId","data-v-5f993a66"]]);export{qe as default};
