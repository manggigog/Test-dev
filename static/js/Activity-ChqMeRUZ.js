import{_ as V,y as R,z as at,E as D,K as L,G as s,N as S,H as t,Q as _,O as B,a3 as vt,Y as O,Z as J,l as lt,r as v,D as K,F as n,I as W,J as Y,P as r,bc as z,R as H,a0 as G,a4 as pt,bj as ft,a2 as mt,B as ht,T as it}from"./vendor-D6JO6WHW.js";import{N as M,a5 as _t,g as c,a6 as ut,t as xt}from"./index-CybuWkSo.js";import{B as yt}from"./BackIcon-CPUEW9je.js";const gt="/static/images/activity-banner-DQTrm-Wl.png",wt="/static/images/popbg-icon-BZL9HIiA.png",Et=e=>(O("data-v-5c8d9b5a"),e=e(),J(),e),Ft={class:"flex flex-col items-center justify-end h-full"},Bt=Et(()=>t("img",{src:wt,class:"w-[90%]"},null,-1)),bt={class:"content w-full rounded-t-2xl -mt-12 px-2.5 pb-4"},Dt={class:"h-[55px] relative text-lg font-bold flex items-center justify-center"},Ct={class:"absolute right-2.5 top-1/2 -translate-y-1/2"},kt={class:"min-h-[40vh] max-h-[66vh] overflow-y-auto"},$t=R({props:{show:{type:Boolean,default:!1},title:null},emits:["close"],setup(e,{emit:E}){const w=e;return at(()=>w.show,m=>{m?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100vw",document.body.style.top=`-${window.scrollY}px`):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,parseInt(document.body.style.top||"0",10)*-1))}),(m,i)=>{const x=D("van-icon"),d=D("van-overlay");return s(),L(d,{"class-name":"myClassStyle","lock-scroll":!1,show:e.show,"z-index":"999"},{default:S(()=>[t("div",Ft,[Bt,t("div",bt,[t("div",Dt,[t("span",null,_(e.title),1),t("div",Ct,[B(x,{name:"cross",size:"20",onClick:i[0]||(i[0]=y=>E("close"))})])]),t("div",kt,[vt(m.$slots,"default",{},void 0,!0)])])])]),_:3},8,["show"])}}}),ct=V($t,[["__scopeId","data-v-5c8d9b5a"]]),At=e=>M("GET","/fmActivity/list",e),Lt=()=>M("GET","/fmActivity/getAccount",""),St=()=>M("GET","/fmActivity/open",""),Rt=()=>M("GET","/fmActivity/redPacketList",""),It=()=>M("GET","/fmActivity/getPrizePoolRemaining",""),Pt={key:0,class:"py-10 text-center",color:"#000"},Tt={key:1,class:"py-10 text-center text-[#999]"},zt={key:2,class:"overflow-y-scroll"},Mt=["onClick"],jt=["src"],Nt={class:"ml-2.5"},qt={class:"text-base font-bold"},Gt={class:"mt-0.5 text-xs text-[#999] flex items-center"},Vt=R({props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{expose:E,emit:w}){const m=g=>{switch(g){case .1:return c("images/activity/reward1.png");case .2:return c("images/activity/reward2.png");case .5:return c("images/activity/reward3.png");default:return c("images/activity/reward3.png")}},i=lt(),x=v([]),d=v(!0),y=async()=>{d.value=!0;const{success:g,data:a}=await Rt();g&&(x.value=a,d.value=!1)},A=g=>{g&&i.push(g)};return K(()=>{y()}),E({getList:y}),(g,a)=>{const p=D("van-loading");return s(),L(ct,{title:"中奖记录",show:e.show,onClose:a[0]||(a[0]=f=>w("close"))},{default:S(()=>[d.value?(s(),n("div",Pt,[B(p,{size:"38"})])):x.value.length<1?(s(),n("div",Tt," 暂无中奖记录 ")):(s(),n("div",zt,[(s(!0),n(W,null,Y(x.value,f=>(s(),n("div",{class:"bg-white rounded-xl font-normal mb-1.5 py-4 px-2.5 flex items-center",key:f.id,onClick:o=>A(f.url)},[t("img",{src:m(+f.amount),class:"w-10 h-10"},null,8,jt),t("div",Nt,[t("div",qt,_(f.amount)+"Mcoin红包",1),t("div",Gt,_(r(_t)(f.createTime)),1)])],8,Mt))),128))]))]),_:1},8,["show"])}}}),Ot={class:"w-10 h-10 flex justify-center items-center bg-[#FFE5E5] rounded-full"},Jt=["src"],Kt={class:"ml-2.5"},Wt={class:"text-base font-bold"},Yt={class:"mt-0.5 text-xs text-[#999] flex items-center"},Ht=G(" 抽奖次数 + "),Zt={class:"ml-0.5"},Qt={key:1},Ut={key:0,class:"ml-auto text-xs text-[#999]"},Xt={key:0},te=["onClick"],ee={key:1,class:"ml-auto text-xs text-[#999]"},se=["onClick"],oe=R({props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:E}){const[w,m]=z(!0);window.addEventListener("eip6963:announceProvider",a=>{console.log("Detected provider:",a.detail.info);const p=a.detail.info;if(p.name==="MetaKey"){m(!1);return}else m(!0);console.log("Provider Name:",p.name),console.log("Provider UUID:",p.uuid)}),window.dispatchEvent(new Event("eip6963:requestProvider"));const i=lt(),x=v([]),d=v(!1),y=async()=>{d.value=!0;const{success:a,data:p}=await At({page:1,size:40});a&&(x.value=p,d.value=!1)},A=a=>{switch(a.id){case 1:i.push("/mall");break;case 2:i.push("/buyerOrderList?active=1");break;case 3:i.push("/evaluate-my");break;case 4:i.push("/talentRanking?type=2");break;case 6:w.value&&(window.location.href="http://metakey.pro/");break;case 8:xt("/maiPledge");break;case 9:i.push("/home");break;case 12:w.value&&(window.location.href="http://metakey.pro/");break}},g=v(null);return K(()=>{const a=new Date,p=new Date(a.getFullYear(),a.getMonth(),a.getDate());g.value=p.getTime(),y()}),(a,p)=>{const f=D("van-loading");return s(),L(ct,{title:"红包任务",show:e.show,onClose:p[0]||(p[0]=o=>E("close"))},{default:S(()=>[(s(!0),n(W,null,Y(x.value,(o,C)=>{var I,j,P,N,k;return s(),n("div",{class:"bg-white rounded-xl font-normal mb-1.5 py-4 px-2.5 flex items-center overflow-y-scroll",key:o.id},[t("div",Ot,[t("img",{src:r(c)(`images/activity/task-icon${C+1}.png`),class:H(o.id===8?"w-[26px] h-[16px]":"w-5 h-5")},null,10,Jt)]),t("div",Kt,[t("div",Wt,_(o.name),1),t("div",Yt,[Ht,t("div",Zt,[d.value?(s(),L(f,{key:0,size:"12px"})):(s(),n("span",Qt,_(o.rewardCount),1))])])]),o.id===12?(s(),n("div",Ut,[o.activityLogList&&((I=o.activityLogList[0])==null?void 0:I.createTime)>g.value?(s(),n("div",Xt,_(r(ut)((j=o.activityLogList[0])==null?void 0:j.createTime))+" 已完成 ",1)):(s(),n("div",{key:1,onClick:q=>A(o),class:"ml-auto px-3.5 py-1.5 rounded-full bg-[#EA3F37] text-sm text-white"}," 去完成 ",8,te))])):(o.id===6?o.activityLogList&&o.activityLogList.length>1:o.activityLogList)?(s(),n("div",ee,_(r(ut)(o.id==6?(P=o.activityLogList[0])==null?void 0:P.createTime:(N=o.activityLogList[0])==null?void 0:N.createTime))+" 已完成 ",1)):(s(),n("div",{key:2,onClick:q=>A(o),class:"ml-auto px-3.5 py-1.5 min-w-[70px] text-center rounded-full bg-[#EA3F37] text-sm text-white"},_(o.id===6?`${o.activityLogList&&((k=o.activityLogList[0])==null?void 0:k.rewardCount)||0} / 2`:"去完成"),9,se))])}),128))]),_:1},8,["show"])}}}),ne="/static/images/res-icon-B_JJKNJH.png",ie="/static/images/pity-bg-DE48PuDZ.png",ue="/static/images/congrats-1M0lFEEo.png",ae="/static/images/pity-ClRuOiEy.png",le="/static/images/cry-DG98Fag7.png",dt=e=>(O("data-v-cc9fedd4"),e=e(),J(),e),ce={key:0,src:ne,class:"w-[80%] relative z-10"},de={key:1,src:ie,class:"w-[80%] relative z-10"},re={class:"h-[28px] mt-2.5"},ve={key:0,src:ue,class:"w-auto h-full mx-auto"},pe={key:1,src:ae,class:"w-auto h-full mx-auto"},fe={key:0},me=["src"],he={class:"mt-2 text-xl text-center"},_e={key:1},xe=dt(()=>t("img",{src:le,class:"w-[70px] h-auto pt-3 m-auto"},null,-1)),ye=dt(()=>t("div",{class:"mt-2 text-xl text-center"},"奖池金额剩余为0",-1)),ge=[xe,ye],we=R({props:{show:{type:Boolean,default:!1},data:{default:()=>({text:"谢谢参与",img:c("images/activity/reward0.png"),index:3})},poolRemain:null},emits:["close"],setup(e,{emit:E}){const w=e;return at(()=>w.show,m=>{m?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100vw",document.body.style.top=`-${window.scrollY}px`):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,parseInt(document.body.style.top||"0",10)*-1))}),(m,i)=>{const x=D("van-icon"),d=D("van-overlay");return s(),L(d,{"lock-scroll":!1,show:e.show,"z-index":"999"},{default:S(()=>[t("div",{class:"flex flex-col items-center justify-center h-full",onClick:i[2]||(i[2]=pt(()=>{},["stop"]))},[+e.poolRemain?(s(),n("img",ce)):(s(),n("img",de)),t("div",{class:H([+e.poolRemain?"bg":"gray-bg","w-[72%] min-h-[100px] px-7 pb-8 rounded-[30px] -mt-9 pt-9 flex flex-col items-center"])},[t("div",re,[+e.poolRemain?(s(),n("img",ve)):(s(),n("img",pe))]),+e.poolRemain?(s(),n("div",fe,[t("img",{src:e.data.img,class:"w-[7rem] h-auto pt-3 m-auto"},null,8,me),t("div",he,_(e.data.text),1)])):(s(),n("div",_e,ge)),t("div",{onClick:i[0]||(i[0]=y=>E("close")),class:"mt-5 w-full btn py-3.5 text-lg font-bold rounded-[28px] text-white flex justify-center items-center"}," 确认 ")],2),t("div",{onClick:i[1]||(i[1]=y=>E("close")),class:"flex items-center justify-center flex-shrink-0 w-10 h-10 mt-8 mb-4 border border-white rounded-full"},[B(x,{name:"cross",size:"20",color:"white"})])])]),_:1},8,["show"])}}}),Ee=V(we,[["__scopeId","data-v-cc9fedd4"]]),b=e=>(O("data-v-1f93903f"),e=e(),J(),e),Fe={class:"bg-activity"},Be={class:"absolute left-1 px-1 py-2.5"},be=b(()=>t("div",null,[t("img",{src:gt,class:"w-full"})],-1)),De={class:"mt-[-14vh]"},Ce={class:"flex items-center justify-center"},ke={class:"w-full plan-bg pt-[60px] px-4"},$e={class:"text-[#B17118] flex justify-end text-xs text-right mt-1.5 relative z-10"},Ae=G(" 中奖记录 "),Le={class:"flex items-start justify-between w-full mt-2"},Se={class:"plan1-bg py-3 px-1.5 h-[75px]"},Re=b(()=>t("div",{class:"text-[#D17F4E] text-xs"},"累计获得红包",-1)),Ie={class:"flex items-start mt-1"},Pe=["src"],Te={class:"text-[#8D3A09]"},ze=b(()=>t("div",{class:"text-[#C87600] text-xxs font-normal break-words"}," 红包有效期24小时请尽快领取 ",-1)),Me={class:"flex-1 plan2-bg px-1.5 py-3 h-[75px] ml-2"},je=b(()=>t("div",{class:"text-[#D17F4E] text-xs text-center"},"剩余抽奖次数",-1)),Ne={class:"flex items-center justify-center mt-1"},qe={class:"plan3-bg flex justify-around mt-1 pt-3.5 h-[75px]"},Ge={class:"text-[#8D3A09] text-center flex-1"},Ve=b(()=>t("div",{class:"text-[#D17F4E] text-xs"},"奖池总金额",-1)),Oe={class:"text-xl font-bold"},Je=b(()=>t("span",{class:"font-normal text-xxs"},"Mcoin",-1)),Ke={class:"text-[#8D3A09] text-center flex-1"},We=b(()=>t("div",{class:"text-xs text-[#D17F4E]"},"奖池剩余金额",-1)),Ye={class:"text-xl font-bold"},He=b(()=>t("span",{class:"font-normal text-xxs"},"Mcoin",-1)),Ze=ft('<div data-v-1f93903f><div class="text-[#8D3A09] font-bold px-5 py-2" data-v-1f93903f>活动规则</div><div class="text-xs font-normal text-white px-9" data-v-1f93903f><div class="point" data-v-1f93903f> 活动截止时间为即日起至北京时间2025年2月12日（农历正月十五元宵节）； </div><div class="point" data-v-1f93903f> 参与活动的用户需满足账户积分大于等于≥10000，同一用户仅可参与一次活动，同一地址使用不同终端设备终端参与活动均视为同一用户； </div><div class="point" data-v-1f93903f> 活动期间内，用户可以通过完成任务获取抽奖次数，不同任务可获取的抽奖次数不同； </div><div class="point" data-v-1f93903f> 本次活动设置奖金池总额50000MCOIN，红包奖金将按照先到先得的原则发放。一旦奖金剩余额为0时，后续抽奖将不再获得奖励。 </div></div></div>',1),Qe={class:"flex flex-row-reverse items-center justify-between w-full px-4 py-2"},Ue=b(()=>t("span",{class:"text-white"},"下载APP",-1)),Xe={class:"flex items-center"},ts=b(()=>t("span",null,"任务进度",-1)),es=["src"],ss=R({name:"BoutiqueGood"});function os(e){const[E,w]=z(!1),[m,i]=z(!1),[x,d]=z(!1);window.dispatchEvent(new Event("eip6963:requestProvider"));const y=v(null),A=v({wordWarp:!0}),g=v([{padding:"30px",imgs:[{src:c("images/activity/turntable.png"),width:340,height:340}]}]),a=v([{background:"#FFF2E2",fonts:[{text:"888Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward3.png"),top:40,width:50,height:50}]},{background:"#FDEBCF",fonts:[{text:"33Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward2.png"),width:50,height:50,top:40}]},{background:"#FFF2E2",fonts:[{text:"1.68Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward1.png"),width:50,height:50,top:40}]},{background:"#FDEBCF",fonts:[{text:"66Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward3.png"),width:50,height:50,top:40}]},{background:"#FFF2E2",fonts:[{text:"8.88Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward2.png"),top:40,width:50,height:50}]},{background:"#FDEBCF",fonts:[{text:"3.33Mcoin",top:20,fontColor:"#D17F4E",fontSize:16}],imgs:[{src:c("images/activity/reward1.png"),top:40,width:50,height:50}]}]),p=[{radius:"30%",background:"#869cfa",pointer:!1,imgs:[{src:c("images/activity/award-btn.png"),top:-68,width:150,height:150}]}],f=v({frequency:null,allFrequency:null,redPacketTotalAmount:0}),o=async()=>{const l=await Lt();f.value=l.data,console.log(l)},C=v({text:null,img:null,index:0}),I=v(null),j=async()=>{var u,F;if(f.value.frequency<=0){it.fail("抽奖次数不足");return}if(I.value=k.value,+k.value<=0)return d(!0);const l=await St();if(l.success)C.value.index=l.data;else{(u=y.value)==null||u.stop(3);return}(F=y.value)==null||F.play(),setTimeout(()=>{var $;($=y.value)==null||$.stop(l.data)},3e3)},P=v(null),N=l=>{var u,F,$;C.value.text=l.fonts[0].text,C.value.img=(F=(u=a.value[C.value.index])==null?void 0:u.imgs[0])==null?void 0:F.src,d(!0),($=P.value)==null||$.getList(),o(),Z()},k=v(null),q=v(null),Z=async()=>{var u,F;const l=await It();l.success&&(k.value=+ht((u=l.data)==null?void 0:u.prizePoolRemaining),q.value=(F=l.data)==null?void 0:F.prizePool)},[Q,U]=z(!0),rt=()=>{if(Q.value)try{window.location.href="http://metakey.pro/"}catch(l){it.success("下载失败"),console.log(l,"失败")}};return window.addEventListener("eip6963:announceProvider",l=>{if(console.log("Detected provider:",l.detail.info),l.detail.info.name==="MetaKey"){U(!1);return}else U(!0)}),window.dispatchEvent(new Event("eip6963:requestProvider")),K(()=>{o(),Z()}),(l,u)=>{var tt,et,st;const F=D("LuckyWheel"),$=D("van-icon"),X=D("VanButton");return s(),n("div",Fe,[t("div",Be,[B(yt)]),be,t("div",De,[t("div",Ce,[B(F,{ref:(h,T)=>{T.myLucky=h,y.value=h},width:"340px",height:"340px",prizes:a.value,blocks:g.value,buttons:p,"default-style":A.value,onStart:j,onEnd:N},null,8,["prizes","blocks","default-style"])]),t("div",ke,[t("div",$e,[t("div",{onClick:u[0]||(u[0]=h=>r(w)(!0))},[Ae,B($,{name:"arrow",color:"#B17118"})])]),t("div",Le,[t("div",Se,[Re,t("div",Ie,[t("img",{src:r(c)("images/activity/gift.png"),class:"w-[32px] h-[32px] mr-1"},null,8,Pe),t("div",null,[t("div",Te,_((tt=f.value)==null?void 0:tt.redPacketTotalAmount),1),ze])])]),t("div",Me,[je,t("div",Ne,[(s(!0),n(W,null,Y((st=(et=f.value)==null?void 0:et.frequency)==null?void 0:st.toString().split(""),(h,T)=>{var ot,nt;return s(),n("div",{class:H(["rounded-lg bg-[#FFF2E0] p-2 text-[#8D3A09] text-center",((nt=(ot=f.value)==null?void 0:ot.frequency)==null?void 0:nt.toString().split("").length)-1===T?"":"mr-1"]),key:h},_(h),3)}),128))])])]),t("div",qe,[t("div",Ge,[Ve,t("div",Oe,[G(_(q.value),1),Je])]),t("div",Ke,[We,t("div",Ye,[G(_(k.value),1),He])])])]),Ze,t("div",Qe,[r(Q)?(s(),L(X,{key:0,round:"",onClick:rt,class:"btn-red h-[43px] w-full flex-1 font-medium text-sm mr-3"},{default:S(()=>[Ue]),_:1})):mt("",!0),B(X,{onClick:u[1]||(u[1]=h=>r(i)(!0)),round:"",class:"bg-white w-full flex-1 h-[43px] font-semibold text-sm"},{default:S(()=>[t("div",Xe,[ts,t("img",{src:r(c)("images/activity/right.png"),class:"w-[15px] h-[15px] ml-1.5"},null,8,es)])]),_:1})]),B(Vt,{ref:(h,T)=>{T.awardRecordRef=h,P.value=h},show:r(E),onClose:u[2]||(u[2]=h=>r(w)(!1))},null,8,["show"]),B(oe,{show:r(m),onClose:u[3]||(u[3]=h=>r(i)(!1))},null,8,["show"]),B(Ee,{data:C.value,show:r(x),poolRemain:I.value,onClose:u[4]||(u[4]=h=>r(d)(!1))},null,8,["data","show","poolRemain"])])])}}const ns=R({...ss,setup:os}),ls=V(ns,[["__scopeId","data-v-1f93903f"]]);export{ls as default};
