import{_ as E,y as L,x as O,bc as j,E as S,F as c,a2 as T,G as a,H as e,P as u,O as m,N as k,Q as i,a4 as N,w as oe,r as B,z as Q,D as ne,a9 as le,K as U,I as ae,a0 as $,R as M,$ as ie,T as V,Y as F,Z as P,bd as ce,ba as de,bb as re,bm as me}from"./vendor-D6JO6WHW.js";import{_ as ue,a as pe,b as fe,e as ve}from"./GoodsInfo-CT0HCcXZ.js";import{_ as he}from"./kefu-BZ7ykajd.js";import{r as G,h as ge,V as q,aY as xe,g as ye,d as we}from"./index-koYZVdtr.js";import{c as _e}from"./goods-CbG5uzbJ.js";import{D as H}from"./goods-BVwS8oFG.js";import{c as Y,i as J,s as W}from"./convertToImage-vwJ7l1co.js";import{d as K}from"./active_empty-CBz3QrKQ.js";import{H as be}from"./HelpPop-nJzX1W44.js";import{B as ke}from"./BoutiqueLabelInLogo-Cv7_YziD.js";import{R as $e}from"./RatioBox-CM_1wIbR.js";import{_ as Se}from"./MCOIN-BcbOHmhy.js";import{_ as Be}from"./logo-CT48NEDW.js";const ss="/Test-dev/static/images/good_back-D3eNN5v8.png",os="/Test-dev/static/images/good_share-1a0Cq1VD.png",Te="/Test-dev/static/images/collect_b-kiXhnb3F.svg",Ce="/Test-dev/static/images/collect_gray-BYsbfCdJ.svg",Ie="/Test-dev/static/images/collect_g-CmKkIt4l.svg",Ae={class:"w-[335px] relative rounded-none",id:"serverQR"},De={class:"img-box rounded-none"},Ue=["src"],Ve={key:0,class:"fixed left-0 w-full px-2.5 flex-center-bw top-1.5"},je={class:"ml-1 text-sm font-normal"},Ee=L({props:{show:{type:Boolean},imgUrl:null},emits:["close","onSuccess"],setup(t,{emit:y}){const l=t,{loadingToggle:o}=G(),f=O(()=>l.imgUrl?l.imgUrl.startsWith("http")?l.imgUrl+"?"+new Date().getTime():K:K),[g,d]=j(!1),p=()=>{y("close")},C=()=>{d(!0),o(!0),document.getElementById("serverQR")?setTimeout(()=>{_()},200):setTimeout(()=>{_()},3e3)},_=async()=>{let r=document.getElementById("serverQR");r.style.display="block";const v=await Y(r);await J(v)&&W(v,"img")&&setTimeout(()=>{p(),d(!1),o(!1),y("onSuccess")},3e3)};return(r,v)=>{const b=S("van-icon"),I=S("VanButton");return l.show?(a(),c("div",{key:0,class:"popup-overlay",onClick:p},[e("div",Ae,[e("div",De,[e("img",{src:u(f),alt:"",crossOrigin:"anonymous"},null,8,Ue)]),u(g)?T("",!0):(a(),c("div",Ve,[m(I,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:N(C,["stop"])},{default:k(()=>[m(b,{name:"back-top",class:"rotate-180",size:"14"}),e("span",je,i(r.$t("common.save")),1)]),_:1},8,["onClick"]),e("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:p},[m(b,{name:"cross"})])]))])])):T("",!0)}}}),Le=E(Ee,[["__scopeId","data-v-062c2a0c"]]),R=t=>(F("data-v-248246d4"),t=t(),P(),t),He={class:"w-full flex items-center justify-between bg-white rounded-full sm:w-[355px]"},Oe={class:"flex justify-between"},Ne={key:0,src:ue,class:"w-6 h-6 m-auto mb-1"},Fe={key:1,src:pe,class:"w-6 h-6 m-auto mb-1"},Pe={class:"text-[#999] text-xs"},Re={key:0,class:"text-xs text-center px-1.5 mr-3"},ze=R(()=>e("img",{src:he,class:"w-6 h-6 m-auto mb-1"},null,-1)),Me={class:"text-[#999] text-xs"},qe={key:0,src:Te,class:"w-6 h-6 m-auto mb-1"},Ke={key:1,src:Ce,class:"w-6 h-6 m-auto mb-1"},Qe={class:"text-[#999] text-xs"},Ge={key:1,class:"text-xs text-center px-1.5"},Ye=R(()=>e("img",{src:Ie,class:"w-6 h-6 m-auto mb-1"},null,-1)),Je={class:"text-[#e2e2e2] text-xs"},We={key:0,class:"flex flex-1 justify-end"},Xe={class:"flex items-center"},Ze=R(()=>e("img",{src:fe,class:"h-6 m-auto mr-1 w-11"},null,-1)),et={key:0,class:"text-center text-white"},tt={class:"text-sm leading-3"},st={class:"text-lg font-medium leading-5"},ot=$(" Mcoin "),nt={class:"text-[0.675rem]"},lt={class:"mr-0.5"},at={key:1,class:"py-2.5 ml-2 text-[#999] text-base"},it={key:2,class:"py-2.5 ml-2 text-[#999] text-base"},ct=L({props:{isFollow:{type:Boolean},goodsId:null,isSale:{type:Boolean},isSaleEnd:{type:Boolean},isSaleStart:{type:Boolean},isSaleOver:{type:Boolean},goods:null,systemTime:null,currentAmount:null,totalAmount:null,payType:null,boutiqueFlag:{type:Boolean},deliveryType:null,storeInfo:null,stock:null,goodsTypes:null},emits:["handeToShop","handleConnect","handleBuy","handleAddCart","toPurchase","handleOffine"],setup(t,{expose:y,emit:l}){const o=t,[f,g]=j(!1),{t:d}=oe(),p=B(!1),[C,_]=j(!1),r=B(!1),v=B([]),b=B(null),I=s=>{var n;if(s.id==="metakey"){try{window==null||window.handleCustomerService({shopId:(n=o.goods)==null?void 0:n.shopId})}catch(w){console.log(w)}return}if(s.id==="downloadmetakey"){Z();return}s.customerServiceLink?s.customerServiceLink.includes("img.s3")?(b.value=s.customerServiceLink,g(!0)):(V({message:d("common.link copy and open"),duration:4e3}),ge(s.customerServiceLink)):V({message:d("common.no service")})},X=async()=>{const s=o.storeInfo.id,n=await xe(s);if(n.success){const w=[];n.data.forEach(x=>{x.customerServiceLink&&w.push({text:x.nickname,id:x.id,customerServiceLink:x.customerServiceLink,disabled:!1})}),v.value=w,C.value?w.unshift({text:d("common.meta-key-service"),id:"metakey",disabled:!1}):w.unshift({text:d("common.meta-key-service"),id:"downloadmetakey",disabled:!1})}},D=B(!1),Z=()=>{D.value=!0};Q(()=>o.storeInfo,()=>{var s;(s=o.storeInfo)!=null&&s.id&&X()},{immediate:!0,deep:!0});const z=B(!1),ee=O(()=>[{text:d("piggy.normalBuy"),id:1}]),te=s=>{l("handleBuy",`payType=${s.id}`)},se=()=>{_e({goodsId:o.goodsId,type:p.value?2:1,collectType:o.isSale?2:1}).then(s=>{s.success&&(p.value?V({message:d("common.cancel collect"),icon:q("toast-success.svg")}):V({message:d("common.collect success"),icon:q("toast-success.svg")}),p.value=!p.value)})};return y({}),ne(()=>{var s;p.value=o.isFollow,(s=window.ethereum)!=null&&s.isMetaKey?_(!0):_(!1)}),le(()=>{}),(s,n)=>{const w=S("van-popover"),x=S("VanButton");return a(),c("div",{class:M(["fixed bottom-0 sm:left-1/2 sm:-translate-x-2/4 left-0 sm:w-[375px] w-full bg-white box-shadow safe-bottom flex-center pt-2.5 px-2.5 font-Puhui font-normal",u(f)?"z-[2003]":"z-20"])},[e("div",He,[e("div",Oe,[e("div",{class:"text-xs text-center px-1.5 mr-3",onClick:n[0]||(n[0]=()=>l("handeToShop"))},[t.isSale?(a(),c("img",Fe)):(a(),c("img",Ne)),e("div",Pe,i(s.$t("mall.shop")),1)]),m(w,{show:r.value,"onUpdate:show":n[1]||(n[1]=h=>r.value=h),actions:v.value,onSelect:I,placement:"top",trigger:"click"},{reference:k(()=>[v.value.length>0?(a(),c("div",Re,[ze,e("div",Me,i(s.$t("common.service")),1)])):T("",!0)]),_:1},8,["show","actions"]),!t.isSale&&t.deliveryType!==u(H).offeline?(a(),c("div",{key:0,class:"text-xs text-center px-1.5",onClick:se},[p.value?(a(),c("img",qe)):(a(),c("img",Ke)),e("div",Qe,i(s.$t("common.collect")),1)])):(a(),c("div",Ge,[Ye,e("div",Je,i(s.$t("common.collect")),1)]))]),t.isSale?(a(),U(x,{key:1,class:M(["min-w-[60px] rounded-3xl px-2.5",o.isSaleEnd||o.isSaleStart||o.currentAmount>=o.totalAmount?"bg-[#D9D9D9]":"bg-[#FB1A18]"]),disabled:o.isSaleStart||o.isSaleEnd||o.currentAmount>=o.totalAmount,onClick:n[6]||(n[6]=()=>{l("toPurchase")})},{default:k(()=>[e("div",Xe,[Ze,!o.isSaleEnd&&!o.isSaleStart&&o.currentAmount<o.totalAmount?(a(),c("div",et,[e("div",tt,[e("span",st,i(t.goods.price),1),ot]),e("div",nt,[e("span",lt,i(s.$t("refund.TotalNum",{num:t.totalAmount})),1),e("span",null,i(s.$t("flashSale.Already snatched"))+i(o.currentAmount)+i(s.$t("common.pieces")),1)])])):o.isSaleStart?(a(),c("div",at,i(s.$t("common.no start")),1)):(a(),c("div",it,i(o.currentAmount>=o.totalAmount?s.$t("flashSale.Alreadygrabbed"):s.$t("flashSale.gooderror")),1))])]),_:1},8,["disabled","class"])):(a(),c("div",We,[t.deliveryType===u(H).online?(a(),c(ae,{key:0},[m(x,{class:"px-4 text-sm text-newOrigin rounded-r-none bg-newOrigin/20 rounded-l-3xl",disabled:t.stock===0&&t.goodsTypes!=2,onClick:n[2]||(n[2]=N(h=>l("handleAddCart"),["stop"]))},{default:k(()=>[$(i(s.$t("common.addCart")),1)]),_:1},8,["disabled"]),t.payType!==3||t.boutiqueFlag?(a(),U(x,{key:0,class:"px-4 text-sm text-default rounded-l-none rounded-r-3xl bg-btnOrBg",onClick:n[3]||(n[3]=()=>l("handleBuy",t.payType===2?"":"payType=1")),disabled:t.stock===0&&t.goodsTypes!=2},{default:k(()=>[$(i(t.payType===2?s.$t("piggy.cardBuy"):s.$t("common.Buy it now")),1)]),_:1},8,["disabled"])):(a(),U(w,{key:1,placement:"top",show:z.value,"onUpdate:show":n[4]||(n[4]=h=>z.value=h),actions:u(ee),onSelect:te},{reference:k(()=>[m(x,{class:"px-5 text-sm text-white bg-primary rounded-r-3xl",disabled:t.stock===0&&t.goodsTypes!=2},{default:k(()=>[$(i(s.$t("common.Buy it now")),1)]),_:1},8,["disabled"])]),_:1},8,["show","actions"]))],64)):(a(),U(x,{key:1,class:"max-w-[200px] w-full !justify-center text-sm text-default text-center bg-btnOrBg rounded-3xl ml-6",onClick:n[5]||(n[5]=()=>l("handleOffine")),text:s.$t("common.payBill")},null,8,["text"]))]))]),m(Le,{show:u(f),"onUpdate:show":n[7]||(n[7]=h=>ie(f)?f.value=h:null),imgUrl:b.value,onOnSuccess:n[8]||(n[8]=h=>u(g)(!1)),onClose:n[9]||(n[9]=h=>u(g)(!1))},null,8,["show","imgUrl"]),m(be,{show:D.value,"onUpdate:show":n[10]||(n[10]=h=>D.value=h),display:["download","account","wallet","auth"],onClose:n[11]||(n[11]=h=>D.value=!1)},null,8,["show"])],2)}}}),ns=E(ct,[["__scopeId","data-v-248246d4"]]),dt="/Test-dev/static/images/arrow-right-DsR0bSjL.svg",rt=t=>(F("data-v-0e486320"),t=t(),P(),t),mt={class:"w-full flex justify-start items-center"},ut={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},pt=["src"],ft={class:"absolute right-0 top-0"},vt={class:"ml-1 h-10 flex flex-col justify-between items-start"},ht={class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] flex items-center"},gt=rt(()=>e("img",{src:dt,class:"shrink-0 w-4 h-4 object-cover"},null,-1)),xt={class:"flex items-center text-xs text-primary"},yt={class:"ml-1"},wt={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},_t=L({props:{store:null},emits:["handleTo"],setup(t,{emit:y}){const l=t;return ce({}),Q(()=>l.store.id,()=>{},{immediate:!0}),(o,f)=>{const g=S("van-rate");return a(),c("div",{class:"p-3 mb-2.5 bg-white rounded-xl text-base",onClick:f[1]||(f[1]=d=>y("handleTo",`/shop?shopId=${t.store.id}`))},[e("div",mt,[e("div",ut,[e("img",{src:t.store.logo||t.store.scenery&&t.store.scenery.split(",")[0]||u(ye)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,pt),e("div",ft,[m(ke,{type:t.store.type},null,8,["type"])])]),e("div",vt,[e("div",ht,[$(i(t.store.storeName)+" ",1),gt]),e("div",xt,[m(g,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:t.store.star,"onUpdate:modelValue":f[0]||(f[0]=d=>t.store.star=d),size:14,gutter:"1",color:"#FEA021"},null,8,["modelValue"]),e("span",yt,i(t.store.star),1)])]),e("div",wt,[m($e,{tag:o.$t("common.rebate"),ratio:t.store.discountRatio||0},null,8,["tag","ratio"])])])])}}}),ls=E(_t,[["__scopeId","data-v-0e486320"]]),A=t=>(F("data-v-e260fc0e"),t=t(),P(),t),bt={class:"w-[335px] relative",id:"saveHtml"},kt={class:"img-box"},$t=["src"],St={key:0,class:"fixed left-0 w-full px-2.5 flex-center-bw top-1.5"},Bt=A(()=>e("div",null,null,-1)),Tt={class:"px-2.5 py-2"},Ct={class:"flex items-center justify-start text-primary"},It=A(()=>e("div",{class:"mr-1.5 w-6 flex-shrink-0"},[e("img",{class:"w-6 h-6",src:Se})],-1)),At={class:"text-[#FEA021] text-3xl font-medium mr-1"},Dt=A(()=>e("span",{class:"text-base"},"Mcoin",-1)),Ut={class:"self-center ml-4"},Vt={class:"mt-1 text-sm font-semibold text-left text-default"},jt={class:"flex items-center justify-between pt-8"},Et={class:"flex items-center"},Lt={class:"border border-solid border-black/20 p-0.5"},Ht={class:"ml-3 text-sm text-black-800 opacity-80"},Ot=A(()=>e("br",null,null,-1)),Nt=A(()=>e("img",{src:Be,class:"w-[60px] h-[60px] object-contain"},null,-1)),Ft={key:1,class:"fixed w-fit px-2.5 left-1/2 bottom-9 transform -translate-x-1/2"},Pt={class:"ml-1 text-sm font-normal"},Rt=L({props:{show:{type:Boolean},goods:null,codeUrl:null},emits:["close","onSuceess"],setup(t,{emit:y}){const l=t,{loadingToggle:o}=G(),f=O(()=>l.codeUrl||window.location.origin+"/#/goodsDetail?id="+l.goods.id),[g,d]=j(!1),p=()=>{y("close")},C=()=>{d(!0),o(!0),document.getElementById("saveHtml")?setTimeout(()=>{_()},200):setTimeout(()=>{_()},3e3)},_=async()=>{let r=document.getElementById("saveHtml");r.style.display="block";const v=await Y(r);await J(v)&&W(v,l.goods.goodsName||l.goods.title||"")&&setTimeout(()=>{p(),d(!1),o(!1),y("onSuceess")},3e3)};return(r,v)=>{const b=S("van-icon"),I=S("VanButton");return l.show?(a(),c("div",{key:0,class:"popup-overlay",onClick:p},[e("div",{class:"popup-content",onClick:v[0]||(v[0]=N(()=>{},["stop"]))},[e("div",bt,[e("div",kt,[e("img",{src:(l.goods.icons||l.goods.mainImageUrls||"").split(",")[0]+"?"+new Date().getTime(),alt:"",crossOrigin:"anonymous"},null,8,$t)]),u(g)?T("",!0):(a(),c("div",St,[Bt,e("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:p},[m(b,{name:"cross"})])])),e("div",Tt,[e("div",Ct,[It,e("div",null,[e("span",At,i(u(we)(l.goods.price||0)),1),Dt]),de(e("div",Ut,[m(ve,{goods:t.goods},null,8,["goods"])],512),[[re,t.goods.deliveryType===u(H).online]])]),e("div",Vt,i(l.goods.goodsName||l.goods.title||""),1),e("div",jt,[e("div",Et,[e("div",Lt,[m(me,{value:u(f),size:60,level:"H"},null,8,["value"])]),e("div",Ht,[$(i(r.$t("common.new found")),1),Ot,$(i(r.$t("common.share you")),1)])]),Nt])]),u(g)?T("",!0):(a(),c("div",Ft,[m(I,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:C},{default:k(()=>[m(b,{name:"back-top",class:"rotate-180",size:"14"}),e("span",Pt,i(r.$t("common.save img")),1)]),_:1})]))])])])):T("",!0)}}}),as=E(Rt,[["__scopeId","data-v-e260fc0e"]]);export{ns as G,ls as S,ss as _,as as a,os as b};
