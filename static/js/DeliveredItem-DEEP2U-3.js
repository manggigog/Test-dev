import{_ as W,y as z,l as J,w as K,bM as Q,E as V,F as d,G as r,H as o,a2 as i,a3 as X,Q as s,P as a,I as f,J as D,X as Y,a4 as v,K as k,a0 as b,O as Z,N as w,T as g,Y as U,Z as _}from"./vendor-CjApaIpB.js";import{_ as ee}from"./avatarRing-DpEnkbQ2.js";import{_ as se}from"./address-BEqE8lWA.js";import{G as te}from"./GoodsItem-C7-jPXAv.js";import{e as oe,o as re,b as de,l as p}from"./index-DBW_ANsl.js";import{u as ne}from"./useOrderStatus-DMn11Py2.js";import{c as ae,n as ie}from"./order-DMAXIMUy.js";import{P as T}from"./flashSale-DDyqLyYN.js";import{g as C}from"./orderTime-CCbBt5rb.js";const ce="/Test-dev/static/images/addTag-B03q_prA.svg",S=e=>(U("data-v-7ad6a5a5"),e=e(),_(),e),le={class:"gap-2 flex-center-bw"},ue=S(()=>o("div",{class:"w-8 h-8"},[o("img",{src:ee,class:"w-full h-full rounded-md",alt:"",fit:"cover"})],-1)),me={class:"flex flex-col justify-center flex-1 h-8 text-default"},he={class:"text-sm font-semibold flex-center-bw"},fe={key:0},ye={class:"text-primary"},xe={key:0},ve={key:1},ke={key:2},be={class:"text-xs opacity-60"},we={key:0},ge={key:1},pe={key:2},Te={key:0,class:"bg-[#34C2A9] rounded-[2px] w-[20px] h-[20px] text-center mr-[8px]"},Ce=S(()=>o("img",{src:ce,class:"w-4 h-4",alt:""},null,-1)),Se={class:"text-sm text-default"},$e={class:"flex justify-between gap-2 text-[#C96C26] text-sm font-normal rounded-lg bg-[#FFF5E9] p-2"},Ae={class:"whitespace-nowrap w-[100px]"},Ie={key:0,class:"opacity-60"},Re={key:1,class:"break-all opacity-60"},Be={class:"break-all"},Ne={key:0,class:"text-base text-black font-semibold mt-2 border-t-[1px] border-[#F2F2F2] border-solid pt-2"},Fe=S(()=>o("img",{src:se,class:"inline-block w-[18px]"},null,-1)),Le={key:1,class:"mt-1 text-sm text-default opacity-60"},Oe={key:0,class:"pt-2.5 text-xs text-[#B9B9B9]"},Ve={class:"items-center inline"},De={class:"block"},Pe={class:"colon"},je={class:"block"},Ee={class:"colon"},Ge={class:"block"},He={class:"colon"},qe={class:"block"},Me={class:"colon"},We={key:1,class:"text-right"},ze={key:1,class:"flex justify-end mt-3"},Je=z({props:{order:null,isService:{type:Boolean},nowTime:null},emits:["open"],setup(e,{emit:P}){const l=e,{accountStore:m}=oe(),y=J(),j=ne(l.order.refundStatus,l.order.payType),{t:$}=K(),E=t=>{l.isService||y.push(t)},G=()=>{l.isService||y.push(`/sellerOrderDetail?id=${l.order.id}`)},A=Q("openBatchReceiptPop",null),{merchantConfirm:H}=re(),q=async t=>{if(m.isOnlyView)return g($("order.Requires merchant account operation"));if(A){A(t);return}t.loading=!0;try{const h=(await ae({orderIds:t.id})).data.ordIds,u=await H(h);if(!u.success)return;if(t.payType!==T.STORE_CARD){if(!(await ie({ordIds:h,hash:u.result.hash})).success)return;t.merchantsConfirm=1,g.success($("order.confirmSuccess"))}}finally{t.loading=!1}},M=t=>{P("open",t)};return(t,c)=>{var x,I,R,B,N,F,L,O;const h=V("van-count-down"),u=V("VanButton");return r(),d("div",{class:"px-5 mt-3 bg-white rounded-xl py-7",onClick:G},[o("div",le,[ue,o("div",me,[o("div",he,[e.order.userAddress&&e.order.userAddress.address?(r(),d("div",fe,s(a(de)(e.order.userAddress.address,"...",5,5)),1)):i("",!0),o("div",ye,[e.order.status==-1?(r(),d("span",xe,s(t.$t("order.canceled")),1)):e.order.status===0&&e.order.hash?(r(),d("span",ve,s(t.$t("order.wait block chain")),1)):(r(),d("span",ke,s(a(j)[e.order.status+""]),1))])]),o("div",be,[e.order.status==4?(r(),d("span",we,s(a(p)(e.order.finishTime))+" "+s(t.$t("common.finish")),1)):e.order.status==2?(r(),d("span",ge,s(a(p)(e.order.expressTime))+" "+s(t.$t("order.Ship")),1)):(r(),d("span",pe,s(a(p)(e.order.createTime))+" "+s(t.$t("order.buied")),1))])])]),o("ul",{class:"flex justify-start tagStyle items-center mt-[8px] text-white",onClick:c[0]||(c[0]=v(n=>M(e.order),["stop"]))},[((I=(x=e.order)==null?void 0:x.orderLabelList)==null?void 0:I.length)>0?(r(),d(f,{key:0},[(r(!0),d(f,null,D((B=(R=e.order)==null?void 0:R.orderLabelList)==null?void 0:B.slice(0,5),n=>(r(),d("li",{style:Y({backgroundColor:n==null?void 0:n.colorHex}),class:"text-[10px] min-h-[16px] min-w-[20px] rounded-[2px] h-[20px] px-[4px] mr-[6px]",key:n==null?void 0:n.id},s(n==null?void 0:n.content),5))),128)),((F=(N=e.order)==null?void 0:N.orderLabelList)==null?void 0:F.length)>5?(r(),d("li",Te," ... ")):i("",!0)],64)):i("",!0),Ce]),(r(!0),d(f,null,D(e.order.orderGoods,n=>(r(),k(te,{creditFlag:e.order.creditFlag,payType:e.order.payType,key:n.goodsName,goods:n,storeCard:e.order.fmStoredCard,onHandleTo:E},null,8,["creditFlag","payType","goods","storeCard"]))),128)),o("div",Se,[o("div",$e,[o("div",Ae,s(t.$t("order.remark")),1),(L=e.order.userAddress)!=null&&L.postscript?(r(),d("div",Re,s((O=e.order.userAddress)==null?void 0:O.postscript),1)):(r(),d("div",Ie,s(t.$t("order.noRemark")),1))])]),o("div",Be,[e.order.userAddress?(r(),d("div",Ne,[Fe,b(" "+s(e.order.userAddress.provinceName??"")+s(e.order.userAddress.cityName??"")+s(e.order.userAddress.countyName??"")+s(e.order.userAddress.detailInfo??""),1)])):i("",!0),e.order.userAddress?(r(),d("div",Le,s(e.order.userAddress.userName)+" "+s(e.order.userAddress.telNumber),1)):i("",!0)]),e.order.status===2?(r(),d("div",Oe,[a(C)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0?(r(),d(f,{key:0},[o("div",null,s(t.$t("order.observeTip")),1),o("div",Ve,[Z(h,{class:"order-time",time:a(C)(e.order.expressTime,e.order.confirmLimit,e.nowTime)},{default:w(n=>[o("span",De,s(n.days),1),o("span",Pe,s(t.$t("common.day")),1),o("span",je,s(n.hours),1),o("span",Ee,s(t.$t("common.hours")),1),o("span",Ge,s(n.minutes),1),o("span",He,s(t.$t("common.minutes")),1),o("span",qe,s(n.seconds),1),o("span",Me,s(t.$t("common.seconds")),1)]),_:1},8,["time"]),o("span",null,s(t.$t("order.sellConfirmTip")),1)])],64)):e.order.payType===a(T).WITHDRAW_POINTS&&!e.order.merchantsConfirm?(r(),d("div",We,s(t.$t("order.sellConfirm")),1)):i("",!0)])):i("",!0),e.isService?i("",!0):(r(),d("div",ze,[!a(m).isOnlyView&&e.order.status===1?(r(),k(u,{key:0,class:"btn-orange h-[37px] px-9 text-white text-sm font-semibold",onClick:c[1]||(c[1]=v(n=>a(m).isOnlyView?a(g)(t.$t("order.Requires merchant account operation")):a(y).push(`/orderDelivery?id=${e.order.id}`),["stop"]))},{default:w(()=>[b(s(t.$t("order.Ship")),1)]),_:1})):i("",!0),!a(m).isOnlyView&&e.order.status===2&&e.order.payType!==a(T).STORE_CARD&&!e.order.merchantsConfirm?(r(),k(u,{key:1,class:"btn-orange h-[37px] px-6 text-white text-sm font-semibold",disabled:a(C)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0,loading:e.order.loading,onClick:c[2]||(c[2]=v(n=>q(e.order),["stop"]))},{default:w(()=>[b(s(t.$t("order.confirmGeted")),1)]),_:1},8,["disabled","loading"])):i("",!0)])),X(t.$slots,"default",{},void 0,!0)])}}}),ts=W(Je,[["__scopeId","data-v-7ad6a5a5"]]);export{ts as D};
