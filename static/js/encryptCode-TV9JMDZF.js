import{_ as I,y as N,bc as V,x as z,r as n,a1 as K,D as B,l as F,F as D,G as x,O as b,H as e,ba as g,Q as r,P as o,bb as w,bl as E,R as P,K as Q,a2 as U,Y as j,Z as M,E as O}from"./vendor-CjApaIpB.js";import{_ as A}from"./EvalHeader-C_PCVdjb.js";import{e as G,R as H,b as J,h as L}from"./index-B3VH42pz.js";import{q as T}from"./user-DYGd6ROD.js";import"./BackIcon-D2Vm_lyR.js";const u=l=>(j("data-v-064d11f4"),l=l(),M(),l),W={class:"px-2.5 font-normal"},Y={class:"px-4"},Z={class:"mt-8 text-lg text-center text-primary"},X=u(()=>e("div",{class:"h-5 w-[1px] bg-primary mb-2 mx-auto"},null,-1)),ee={class:"flex items-center justify-center gap-2"},te=u(()=>e("div",{class:"flex-1 h-[1px] bg-primary"},null,-1)),se=u(()=>e("div",{class:"flex-1 h-[1px] bg-primary"},null,-1)),oe=u(()=>e("div",{class:"h-5 w-[1px] bg-primary mt-2 mx-auto"},null,-1)),ae={class:"mt-5 text-center"},ne={class:"container mx-auto px-3.5 my-8 bg-white py-2.5 rounded-xl"},re={class:"px-4"},le={class:"line-clamp-2"},ce={class:"absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},ie=N({setup(l){const{accountStore:d}=G(),a=K(),q=F(),{generateKey:v,encryptKey:S}=H(),[p,$]=V(!1),y=z(()=>{var s;let t={type:a.query.type,...S(m.value,a.query.code),id:null};return a.query.type==="1"&&(t.id=d.store.id||null),a.query.type==="2"&&(t.id=((s=f.value)==null?void 0:s.id)||null),JSON.stringify(t)}),m=n(null),f=n(null),c=n(!0),C=async()=>{const{success:t,data:s}=await T();t&&(f.value=s)},_=n(null),h=n(0);return B(async()=>{var s;h.value=((s=_.value)==null?void 0:s.clientWidth)-30,c.value=!1;const t=q.currentRoute.value.path;+a.query.type==1?m.value=await v("merchant",t):+a.query.type==2&&(m.value=await v("user",t),await C()),c.value=!0}),(t,s)=>{const k=O("van-icon");return x(),D("div",W,[b(A,{title:t.$t("encryption.Key Management")},null,8,["title"]),e("div",Y,[e("div",Z,r(+o(a).query.type==1?`${o(d).store.storeName}`:`${o(J)(o(d).account,"...",4,4)} ${t.$t("encryption.consumer")}`),1),e("div",{ref:(i,R)=>{R.conRef=i,_.value=i},class:"container mx-auto px-3.5 mt-4 bg-white py-11 rounded-xl"},[X,e("div",ee,[te,g(b(E,{value:o(y),size:h.value,level:"L"},null,8,["value","size"]),[[w,c.value]]),se]),oe],512),e("div",ae,r(t.$t("encryption.scan the QR")),1),g(e("div",ne,[e("div",re,r(t.$t("encryption.Plain text key")),1),e("div",{class:P(["w-full break-all relative overflow-hidden bg-[#F4F4F4] rounded-xl px-4 py-2.5 mt-2 text-sm",{"filter-box":!o(p)}]),onClick:s[0]||(s[0]=i=>o($)(!o(p)))},[e("div",le,r(o(y)),1),e("div",ce,[o(p)?U("",!0):(x(),Q(k,{key:0,name:"eye-o",size:"22"}))])],2),e("div",{class:"mt-3.5 text-center text-primary text-base",onClick:s[1]||(s[1]=i=>o(L)(o(y)))},r(t.$t("encryption.Copy the key")),1)],512),[[w,c.value]])])])}}}),ve=I(ie,[["__scopeId","data-v-064d11f4"]]);export{ve as default};
