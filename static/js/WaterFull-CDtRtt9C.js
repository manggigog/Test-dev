import{_ as w,y as B,r as d,x as F,z as I,D as J,F as p,G as v,H as y,I as L,J as H,K as T,ab as A}from"./vendor-BUT0HZ5j.js";const N={class:"gap-2 u-waterfall"},S=B({props:{value:null,addTime:null,idKey:null,isSearchPage:{type:Boolean},cardComponent:null,extData:null},emits:["handleTo","handleAddCart"],setup(i,{expose:k,emit:s}){const f=i,m=d(null),D=d(null),n=d([]),o=d([]),r=d([]),c=u=>JSON.parse(JSON.stringify(u)),C=F(()=>c(f.value)),h=async()=>{if(!r.value.length)return;let u=await D.value,t=await m.value,e=r.value[0];if(!e)return;let l=(u==null?void 0:u.clientHeight)||0,a=(t==null?void 0:t.clientHeight)||0;if(n.value.length===0||l<a)n.value.push(e);else if(l>a)o.value.push(e);else if(l===a){let g=n.value.length;o.value.length<=g?o.value.push(e):n.value.push(e)}else{let g=n.value.length,x=o.value.length;g<=x?n.value.push(e):o.value.push(e)}r.value.splice(0,1),r.value.length&&setTimeout(()=>{h()},f.addTime)};return I(()=>C,(u,t)=>{let e=Array.isArray(t)&&t.length>0?t.length:0;r.value=r.value.concat(c(u.value.slice(e))),h()},{deep:!0,immediate:!0}),J(()=>{r.value=c(C.value),h()}),k({clearData:()=>{n.value=[],o.value=[]}}),(u,t)=>(v(),p("div",N,[y("div",{ref:(e,l)=>{l.leftColumn=e,D.value=e},class:"u-column"},[(v(!0),p(L,null,H(n.value,(e,l)=>(v(),T(A(i.cardComponent),{key:e.id,item:e,index:l,position:"left",extData:i.extData,onHandleTo:t[0]||(t[0]=a=>s("handleTo",a)),onHandleAddCart:t[1]||(t[1]=a=>s("handleAddCart",a)),onDelete:a=>s("delete",e,l)},null,8,["item","index","extData","onDelete"]))),128))],512),y("div",{ref:(e,l)=>{l.rightColumn=e,m.value=e},class:"u-column"},[(v(!0),p(L,null,H(o.value,(e,l)=>(v(),T(A(i.cardComponent),{key:e.id,item:e,index:l,position:"right",extData:i.extData,onHandleTo:t[2]||(t[2]=a=>s("handleTo",a)),onHandleAddCart:t[3]||(t[3]=a=>s("handleAddCart",a)),onDelete:a=>s("delete",e,l)},null,8,["item","index","extData","onDelete"]))),128))],512)]))}}),W=w(S,[["__scopeId","data-v-1d765a3d"]]);export{W};
