import{_ as j,z as U,r as m,F as I,G as i,H as o,J as z,K as E,Z as V,U as R,$ as F,I as e,N as D,P as x,O as d,a3 as q,Q as k,X as M,Y as K,q as G,E as J,a2 as H,a4 as oe,V as ne,a0 as le,D as Q,y as X,a1 as ae,bF as ce,bH as ie,bI as re,bG as ue,n as de,bj as pe,bk as fe,bm as he}from"./vendor-Dr_RpJ_Y.js";import{_ as me}from"./adpng-DGFmXgre.js";import{a as ve,r as _e,q as ge,e as ye,g as Z}from"./mall-BRPa8DWq.js";import{z as ee,a as we,Y as xe,k as te}from"./index-7OiUoGXy.js";import{l as be,a as W}from"./shop-CeqcS6K2.js";import{c as $e}from"./category-gSvk10eY.js";import{R as ke}from"./Recommends-u8lvU_xg.js";import{C as Le}from"./ChangeRegionPop-BFcmEqdg.js";import{c as Ce}from"./user-DxDy-AJj.js";import{u as Ie}from"./useShowActiveInfo-BV_mozbF.js";import"./GoodsItem-Lg__8eri.js";import"./buy-cart-m4kq4Bzt.js";import"./goods-BVwS8oFG.js";import"./ShopMaskTips-ClYuWX9C.js";import"./GoodsPrice-Dz5PcG19.js";import"./MCOIN-Bodfn-v1.js";import"./WaterFull-BoFTr9ol.js";/* empty css                                                              */import"./ImgBoutiqueLable-B-2xCcw4.js";import"./RatioBox-C8BvsGJW.js";import"./MetaKeyTag-A7XrHmre.js";import"./useOrderStatus-CUBDjZMz.js";import"./rangking-soiwLY3n.js";const Re=""+new URL("../images/msg_icon_type_2-CRHOGGKj.png",import.meta.url).href,Se=""+new URL("../images/msg_icon_type_1-llTYHMvU.png",import.meta.url).href,Fe=""+new URL("../images/msg_close_dark-CMJSlgeW.png",import.meta.url).href,Te=s=>(M("data-v-5c448efa"),s=s(),K(),s),Ue={key:0,class:"notification-bg-2 w-full h-[30px] absolute -bottom-[4px] px-0 left-0"},Be=["onClick"],Pe={key:0,src:Re,class:"w-3.5 h-auto flex-shrink-0"},Oe={key:1,src:Se,class:"w-3.5 h-auto flex-shrink-0"},Ae={class:"flex-1 text-sm"},De=["onClick"],ze=Te(()=>e("img",{src:Fe,class:"w-4 h-auto"},null,-1)),Ee=[ze],Ve=["onClick"],qe=U({emits:["handleTo"],setup(s,{expose:_,emit:n}){const{currentLocale:r}=ee(),p=m([]),f=(u,h)=>{ve({id:h.id}),p.value.splice(u,1)},a=()=>{_e(),p.value.length=0};return _({_queryRemindList:async()=>{var h;const u=await ge({page:1,size:999});if(u.success){const g=(h=u.data)==null?void 0:h.filter(C=>C.readFlag===0);p.value=g||[]}}}),(u,h)=>{var S;const g=I("van-notice-bar"),C=I("van-swipe-cell");return o(),i("div",{class:D(["notification-container w-full font-normal",{"mb-1":((S=p.value)==null?void 0:S.length)>1}])},[(o(!0),i(z,null,E(p.value,(l,T)=>(o(),i("div",{key:l.id,class:"relative"},[T==0?(o(),V(C,{key:0,class:"h-[38px]"},{right:F(()=>[e("div",{class:D([{"bg-[#FED53D]":l.type===2,"bg-[#FFA123]":l.type===1},"h-[30px] flex items-center ml-1 px-4 rounded-[10px]"]),onClick:q(a,["stop"])},k(u.$t("mall.Clear")),11,Ve)]),default:F(()=>[p.value&&p.value.length>1?(o(),i("div",Ue,[e("div",{class:D(["h-full rounded-[10px] box-shadow",{"bg-[#FED53D]":l.type===1,"bg-[#FFA123]":l.type===2}])},null,2)])):R("",!0),e("div",{class:D([{"bg-[#FED53D]":l.type===2,"bg-[#FFA123]":l.type===1},"notification-bg box-shadow flex items-center gap-2 h-[30px] rounded-[10px] px-2 relative"]),onClick:q(w=>n("handleTo","/orderMessage"+("?type="+l.type)+(l.category?"&category="+l.category:"")),["stop"])},[l.type===2?(o(),i("img",Pe)):l.type===1?(o(),i("img",Oe)):R("",!0),e("div",Ae,[x(g,{scrollable:"",color:l.type===2?"#222221":"#ffffff",background:"rgba(0,0,0,0)",text:l[`content${d(be)[d(r)]||"En"}`]},null,8,["color","text"])]),e("div",{class:"flex-shrink-0 w-5 ml-auto",onClick:q(w=>f(T,l),["stop"])},Ee,8,De)],10,Be)]),_:2},1024)):R("",!0)]))),128))],2)}}}),je=j(qe,[["__scopeId","data-v-5c448efa"]]),Ne={key:0,class:"px-4 mt-2.5 py-4 bg-white rounded-xl category-box"},He={class:"container flex overflow-x-auto"},Me=["onClick"],Ke={class:"text-sm text-[#2e2008] opacity-60 text-center whitespace-nowrap mt-1"},Ge=U({setup(s){const{currentLocale:_}=ee(),n=G(),r=m([]),p=async()=>{const a=await $e();a.success&&(r.value=a.data||[])},f=a=>{n.push(`/search?classId=${a.id}&className=${a[`${W[_.value]||"en"}Name`]}`)};return J(()=>{p()}),(a,L)=>{const u=I("VanImage");return r.value.length?(o(),i("div",Ne,[e("div",He,[(o(!0),i(z,null,E(r.value,h=>(o(),i("div",{style:{flex:"0 0 18.18%"},class:"flex flex-col",key:h.name,onClick:g=>f(h)},[x(u,{src:h.logo,class:"mx-auto aspect-square w-11 h-11",alt:""},null,8,["src"]),e("span",Ke,k(h[`${d(W)[d(_)]||"en"}Name`]),1)],8,Me))),128))])])):R("",!0)}}}),Ye=j(Ge,[["__scopeId","data-v-3e00afd0"]]),Je=""+new URL("../images/hot-2BuvZhRT.png",import.meta.url).href,Qe=""+new URL("../images/triangle-BeVcU1o4.png",import.meta.url).href,Xe=s=>(M("data-v-7a74119a"),s=s(),K(),s),Ze={class:"flex items-center gap-1 py-1 text-sm leading-normal"},We=["src"],et=Xe(()=>e("img",{src:Qe,class:"w-2 h-auto ml-1.5"},null,-1)),tt=["onClick"],st={class:"flex items-center"},ot=["src"],nt=U({props:{showIcon:{type:Boolean,default:!1},showOverlay:{type:Boolean,default:!0},showDownIcon:{type:Boolean,default:!0}},emits:["showPopRegin","showOverlay","showMallOverlay"],setup(s,{expose:_,emit:n}){const r=s,p=m(""),{regionStore:f}=we(),[a,L]=H(!1),[u,h]=H(!1),g=()=>{L(!1),n("showOverlay",!1)},C=w=>{p.value=w,w!==f.country&&(h(!1),L(!0))},S=()=>{h(!1)},l=w=>{h(w),n("showOverlay",w)};function T(){r.showDownIcon&&l(!0)}return _({closePop:S}),(w,$)=>{const P=I("van-icon"),O=I("VanPopup");return o(),i("div",null,[e("div",{class:"change-region-tools flex items-center bg-[#F0F0F0] px-3 rounded-full",onClick:T},[e("div",Ze,[e("img",{src:d(xe)(`mall/${d(f).country}-flag.svg`),class:"w-4 h-auto"},null,8,We),e("span",null,k(d(f).country),1)]),et]),d(u)?(o(),V(O,{key:0,teleport:"body",overlay:s.showOverlay,show:d(u),"onUpdate:show":$[0]||($[0]=y=>le(u)?u.value=y:null),position:"top",style:ne([{background:"transparent",width:"100%","max-width":"375px",left:"50%",transform:"translateX(-50%)",display:"flex"},{justifyContent:s.showIcon?"flex-end":"flex-start"}]),onClickOverlay:$[1]||($[1]=y=>l(!1)),onClick:$[2]||($[2]=y=>l(!1))},{default:F(()=>[e("div",{class:D(["min-w-[150px] sm:mt-[40%] mt-20 bg-[#f9f9f9] rounded-xl box-1 px-4",s.showIcon?"mr-2.5":"ml-2.5"])},[(o(!0),i(z,null,E(d(f).countries,y=>(o(),i("div",{key:y.key,class:D(["font-Silom py-1 leading-10 border-b text-sm border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":d(f).country===y.key}]),onClick:N=>C(y.key)},[e("div",st,[e("img",{class:"w-5 h-auto mr-1.5",src:y.icon,alt:""},null,8,ot),oe(" "+k(y.text),1)]),d(f).country===y.key?(o(),V(P,{key:0,name:"success",alt:""})):R("",!0)],10,tt))),128))],2)]),_:1},8,["overlay","show","style"])):R("",!0),x(Le,{currentKey:p.value,show:d(a),onClose:g},null,8,["currentKey","show"])])}}}),lt=j(nt,[["__scopeId","data-v-7a74119a"]]),se=s=>(M("data-v-df20a652"),s=s(),K(),s),at={class:"z-[889] overflow-visible relative min-h-[12rem] my-bg"},ct={class:"search-tools-bar w-full pt-3.5 bg-white flex-center-bw"},it={class:"search-input flex items-center justify-between w-full h-8 bg-[#F0F0F0] rounded-full relative z-[999]"},rt={class:"flex items-center flex-1 gap-1 px-2 text-sm h-9 text-black/30"},ut={class:"line-clamp-1"},dt=["src"],pt={class:"search-tools-bar px-2.5 bg-white"},ft={class:"flex py-2.5 items-center gap-1.5 overflow-x-auto text-xs"},ht={class:"flex items-center flex-shrink-0 mr-[15px]"},mt=se(()=>e("img",{src:Je,class:"w-2.5 h-auto mr-[2px]"},null,-1)),vt={class:"text-black font-normal ml-1"},_t=["onClick"],gt={class:"text-[#666]"},yt={class:"swiper-container px-2.5 mt-2.5 relative z-10"},wt={class:"swiper-slide-wrapper"},xt=["src"],bt=se(()=>e("div",{class:"swiper-pagination"},null,-1)),$t=U({props:{bannerList:{default:[]},expressList:{default:[]},hotList:{default:[]},hotListBottom:{default:[]}},setup(s,{expose:_}){const n=s,r=G(),p=t=>{r.push(t)},f=m(null);Q(()=>n.bannerList,()=>{de(()=>{var t;f.value&&((t=f.value)==null||t.$el.swiper.autoplay.start())})}),X(()=>n.bannerList[a.value]),X(()=>g.value==="left"?a.value>=n.bannerList.length-1?n.bannerList[0].colorCode:n.bannerList[a.value+1].colorCode:g.value==="right"?a.value===0?n.bannerList[n.bannerList.length-1].colorCode:n.bannerList[a.value-1].colorCode:null);const a=m(0),L=()=>{var t,c;u.value=0,g.value=null,a.value!==((t=f.value)==null?void 0:t.$el.swiper.realIndex)&&(a.value=(c=f.value)==null?void 0:c.$el.swiper.realIndex)},u=m(0),h=m(-1),g=m(null),C=(t,c)=>{if((c===0||c===1)&&(u.value=0,g.value=null),g.value){h.value=c;return}if(u.value===0){u.value=c;return}h.value=c,h.value<u.value?g.value="right":g.value="left",u.value=c},[S,l]=H(!1),T=t=>{t&&window.open(t,"_self")},w=m(null),$=m(null),P=t=>{l(t)};Q(()=>S.value,t=>{const c=document.getElementById("fm-page");t?c.style.overflow="hidden":c.style.overflow="auto"});const O=()=>{w.value.closePop()},y=()=>{O(),l(!1)},N=()=>{const t=$.value&&$.value.popShow?r.currentRoute.value.fullPath:"/search";r.push(t)};return _({closeRegionPop:O}),(t,c)=>{const Y=I("van-icon"),b=I("van-swipe-item"),B=I("van-swipe");return o(),i("div",at,[d(S)?(o(),i("div",{key:0,class:"my-overlay",onClick:y,onTouchmove:c[0]||(c[0]=q(()=>{},["prevent"]))},null,32)):R("",!0),e("div",ct,[x(lt,{class:"relative z-[999] ml-2.5",ref:(v,A)=>{A.region=v,w.value=v},onShowOverlay:P,showOverlay:!1},null,512),e("div",{onClick:N,class:"relative ml-4 mr-2.5 flex-1"},[e("div",it,[e("div",rt,[x(Y,{size:"16",name:"search",class:"font-bold text-black/30"}),x(B,{vertical:"",class:"leading-9 h-9",autoplay:5e3,touchable:!1,"show-indicators":!1},{default:F(()=>[(o(!0),i(z,null,E(s.hotList,v=>(o(),V(b,{key:v.id},{default:F(()=>[e("div",ut,[v.iconUrl?(o(),i("img",{key:0,class:"inline-block w-auto h-5 mr-1 align-middle",src:v.iconUrl},null,8,dt)):R("",!0),e("span",null,k(v.keyword),1)])]),_:2},1024))),128))]),_:1})])])])]),e("div",pt,[e("div",ft,[e("div",ht,[mt,e("span",vt,k(t.$t("mall.hotSearch")),1)]),(o(!0),i(z,null,E(s.hotListBottom,v=>(o(),i("div",{class:"hot-search-keyword bg-[#F5F5F5] px-2.5 py-0.5 rounded-xl flex-shrink-0",key:v.id,onClick:A=>p("/search?keyword="+v.keyword)},[e("span",gt,k(v.keyword),1)],8,_t))),128))])]),e("div",yt,[ae(t.$slots,"default",{},void 0,!0),s.bannerList&&s.bannerList.length>0?(o(),V(d(ue),{key:0,ref:(v,A)=>{A.swiperRef=v,f.value=v},modules:[d(ie),d(re)],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,onSlideChange:L,onProgress:C,class:"swiper-container"},{default:F(()=>[(o(!0),i(z,null,E(s.bannerList,(v,A)=>(o(),V(d(ce),{key:v.id,virtualIndex:A,onClick:Zt=>T(v.linkUrl)},{default:F(()=>[e("div",wt,[e("img",{class:"w-full h-full rounded-md object-cover",src:v.imageUrl||d(te)("images/mall/mall_banner.png")},null,8,xt)])]),_:2},1032,["virtualIndex","onClick"]))),128)),bt]),_:1},8,["modules"])):R("",!0)])])}}}),kt=j($t,[["__scopeId","data-v-df20a652"]]),Lt=""+new URL("../images/new-text-DlOd6omk.png",import.meta.url).href,Ct=""+new URL("../images/gift-icon-ChLUyQdL.png",import.meta.url).href,It=""+new URL("../images/activity-text-fIwfO6KT.png",import.meta.url).href,Rt=""+new URL("../images/active-icon-C76y8UVY.png",import.meta.url).href,St={class:"flex gap-3 my-3"},Ft={class:"flex flex-col justify-between h-14"},Tt=e("img",{src:Lt,class:"w-8"},null,-1),Ut={class:"text-[#999] text-xxs"},Bt={class:"text-xs text-primary"},Pt=e("div",{class:"h-full flex flex-col justify-end"},[e("img",{src:Ct,class:"h-auto w-9"})],-1),Ot={class:"flex flex-col justify-between h-14"},At=e("img",{src:It,class:"w-8"},null,-1),Dt={class:"text-[#999] text-xxs"},zt={class:"text-xs text-primary"},Et=e("img",{src:Rt,class:"w-[75px] h-[72px]"},null,-1),Vt=U({emits:["handleTo"],setup(s,{emit:_}){return G(),(n,r)=>(o(),i("div",St,[e("div",{onClick:r[0]||(r[0]=p=>_("handleTo","/activity-goods?type=1")),class:"flex items-center justify-between flex-1 px-4 py-3 bg-white rounded-xl"},[e("div",Ft,[Tt,e("div",Ut,k(n.$t("mall.New Arrivals")),1),e("div",Bt,k(n.$t("avtivity.check")),1)]),Pt]),e("div",{onClick:r[1]||(r[1]=p=>_("handleTo","/activity-goods?type=2")),class:"flex items-center justify-between flex-1 px-4 pr-[6px] py-[3px] bg-white rounded-xl"},[e("div",Ot,[At,e("div",Dt,k(n.$t("mall.Hot sale products")),1),e("div",zt,k(n.$t("avtivity.check")),1)]),Et])]))}}),qt=U({props:{limit:null},setup(s){const _=m(0),n=()=>{document.getElementById("fm-page").scrollTo({top:0,left:0,behavior:"smooth"})};return J(()=>{document.getElementById("fm-page").addEventListener("scroll",()=>{_.value=document.getElementById("fm-page").scrollTop})}),(r,p)=>{const f=I("van-icon");return pe((o(),i("div",{ref:(a,L)=>{L.toTop=a},onClick:n,class:"fixed flex shadow-1 items-center justify-center z-50 w-8 h-8 bg-white rounded-full right-2.5 bottom-[20%]"},[x(f,{name:"back-top",class:"text-xl"})],512)),[[fe,_.value>(s.limit||200)]])}}}),jt=s=>(M("data-v-79a3b8c6"),s=s(),K(),s),Nt={class:"w-full bg-fixed bg-[#F8F8F8] linear-mall h-full overflow-y-scroll"},Ht={class:"relative px-2.5 overflow-hidden"},Mt={class:"ad-img-container"},Kt=["onClick"],Gt=jt(()=>e("img",{src:me,alt:"广告"},null,-1)),Yt=[Gt],Jt=U({name:"Mall"});function Qt(s){const _=m(null),n=m(null),r=m(!1),p=G(),[f,a]=H(!1),{showActiveInfo:L,getShowActiveInfo:u}=Ie(),h=async()=>{var t,c;r.value=!0,await((t=_.value)==null?void 0:t.onRefresh()),(c=n.value)==null||c._queryRemindList(),r.value=!1},g=m(null),C=m([{id:1,imageUrl:te("images/mall/mall_banner.png"),linkUrl:null}]),S=async()=>{const t=await ye({locationType:1});t.success&&(C.value=t.data)},l=()=>{console.log("scroll")},T=m([]),w=m([]),$=async()=>{const t=await Z({page:1,size:50,type:2});t.success&&(w.value=t.data||[])},P=m([]),O=async()=>{const t=await Z({page:1,size:50,type:1});t.success&&(P.value=t.data||[])},y=t=>{p.push(t)},N=()=>{a(!1),p.push("/520-home")};return J(()=>{S(),$(),O(),u()}),he(()=>{var t;Ce(),(t=n.value)==null||t._queryRemindList()}),(t,c)=>{const Y=I("van-pull-refresh");return o(),i("div",Nt,[x(kt,{bannerList:C.value,expressList:T.value,hotList:w.value,hotListBottom:P.value},{default:F(()=>[x(je,{onHandleTo:y,ref:(b,B)=>{B.noticeRef=b,n.value=b}},null,512)]),_:1},8,["bannerList","expressList","hotList","hotListBottom"]),e("div",Ht,[x(Ye),x(Vt,{onHandleTo:y,ref:(b,B)=>{B.activeHandleRef=b,g.value=b}},null,512),x(Y,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=b=>r.value=b),onRefresh:h,class:"min-h-screen"},{default:F(()=>[x(ke,{isSearchPage:!1,ref:(b,B)=>{B.listRef=b,_.value=b},onScroll:l,activeInfo:d(L)},null,8,["activeInfo"])]),_:1},8,["modelValue"])]),x(qt),d(f)?(o(),i("div",{key:0,class:"overlay",onClick:c[1]||(c[1]=b=>d(a)(!1)),"z-index":"9999"},[e("div",Mt,[e("div",{onClick:q(N,["stop"])},Yt,8,Kt)])])):R("",!0)])}}const Xt=U({...Jt,setup:Qt}),bs=j(Xt,[["__scopeId","data-v-79a3b8c6"]]);export{bs as default};
