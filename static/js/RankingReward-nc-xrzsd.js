import{_ as z,y as N,l as R,r as c,bc as q,D as M,E as g,K as C,G as n,N as L,H as e,O as x,a0 as $,F as d,P as f,Q as u,I as B,J as P,a2 as j,R as y,Y as A,Z as H,a4 as W}from"./vendor-D6JO6WHW.js";import{S as X}from"./SkewCard-CGstOBqH.js";import{g as G,V as ee,c as te,d as se,l as oe}from"./index-koYZVdtr.js";import{b as ae}from"./beiExtRewardContract-M7NPmlv1.js";import{_ as ne}from"./DataSelectMonth-DMM5Y_qC.js";import{B as le}from"./BackIcon-CPUEW9je.js";import{h as ce,i as ue}from"./beiRanking-BuHtFe5z.js";const ie=i=>(A("data-v-0b5f8dc2"),i=i(),H(),i),re={class:"relative p-3"},de={class:"text-b1 text-base font-semibold flex items-center"},_e=$(" 本月已完成充电"),ve={key:1,class:"text-[#FF8812]"},pe=$("次 "),me={class:"text-xs text-b3 leading-[18px] font-normal"},fe={class:"flex items-center gap-x-0.5 w-full overflow-x-auto mt-4"},xe={class:"text-center"},ge={class:"w-5 h-5 rounded-full symbol-bg mx-auto"},he=["src"],be={class:"text-b3 text-xs leading-[18px] mt-1 font-normal"},we={key:0,class:"h-[52px] flex items-center"},ye=["src"],Fe=ie(()=>e("span",{class:"text-b1 text-base font-semibold"},"去充电",-1)),ke=N({setup(i){const{userVoteDetailView:D,voteMonthTimestampView:V}=ae(),h=R(),l=5,t=c(0),[T,b]=q(!0),I=async()=>{const{success:p,result:r}=await V();if(!p)return;const{success:w,result:_}=await D(r==null?void 0:r.thisMonthTime);w&&(b(!1),t.value=+(_==null?void 0:_.times))},v=()=>{h.replace("/talentRanking")};return M(()=>{I()}),(p,r)=>{const w=g("VanLoading"),_=g("VanButton");return n(),C(X,{width:"175",right:"24",height:"25",class:"mt-2.5"},{default:L(()=>[e("div",re,[e("div",de,[_e,f(T)?(n(),C(w,{key:0,size:"16",color:"#FF8812"})):(n(),d("span",ve,u(t.value),1)),pe]),e("div",me,[t.value>=l?(n(),d(B,{key:0},[$(" 领取 "+u(t.value>=l?l:t.value)+" 抵用券，已领取全部抵用券 ",1)],64)):(n(),d(B,{key:1},[$(" 已领取 "+u(t.value>=l?l:t.value)+" 抵用券，还有 "+u(l-t.value)+" 抵用券可领取，再接再厉 ",1)],64))]),e("div",fe,[(n(),d(B,null,P(l,s=>e("div",{key:s,class:"flex gap-x-0.5"},[e("div",xe,[e("div",{class:y(["w-[53px] h-[52px] rounded-lg bg-b5 text-center py-2",{"!bg-[#FFF8EC] border border-solid border-[#FF8812]":s<=t.value}])},[e("div",ge,[e("img",{src:f(G)(s<=t.value?"images/ranking/received.png":"images/ranking/receiving.png")},null,8,he)]),e("div",{class:y(["text-xs font-semibold text-b3 mt-1",{"text-[#FF8812]":s<=t.value}])}," +1 ",2)],2),e("div",be,u(s-t.value>0?`累投${s-t.value}次`:"已领取"),1)]),s!==5?(n(),d("div",we,[e("img",{src:f(ee)(s<=t.value?"ranking/arrow-double-light.svg":"ranking/arrow-double.svg"),class:"w-3 h-3"},null,8,ye)])):j("",!0)])),64))]),x(_,{class:"btn-calim w-full !h-10 !rounded-[10px] !mt-4",onClick:v},{default:L(()=>[Fe]),_:1})])]),_:1})}}}),Be=z(ke,[["__scopeId","data-v-0b5f8dc2"]]),J=i=>(A("data-v-1d61690a"),i=i(),H(),i),Ce={class:"app-container flex flex-col h-screen overflow-x-hidden overflow-y-scroll font-Puhui"},$e={class:"sticky top-0 z-10"},De={class:"sticky top-0 z-50 h-[50px] px-3 flex justify-center items-center"},Ve={class:"absolute left-3 flex items-center gap-1 -translate-y-1/2 top-1/2"},Te=J(()=>e("div",{class:"text-lg text-[#2E2008] font-bold"},"充电奖励",-1)),Ie={class:"bg-container"},Le={class:"text-left pt-4 px-3"},Ee=J(()=>e("div",{class:"text-b2 font-normal"},"累计充电投票领取抵用券",-1)),Se={class:"mt-1 text-b1 text-[40px] leading-[48px] font-BebasNeue"},ze={key:1},Ne={class:"flex items-center justify-between"},Re={class:"text-b2"},Me={class:"flex items-center gap-x-1"},Pe={class:"font-semibold"},je=["src"],Ae={class:"flex items-center justify-between mt-2"},He=["onClick"],Ge={class:"text-b2 line-clamp-1"},Je={class:"text-b3 min-w-fit"},Ke=N({setup(i){const D=R(),V={0:"充电",100:"积分充电",200:"LP充电",400:"LP放电"},h=o=>{D.push(o)},l=c(!1),t=c(0),T=async()=>{l.value=!0;const o=await ce();l.value=!1,o.success&&(t.value=o.data||0)},b=c(null),I=o=>{b.value=o,S()},v=c(!1),p=c(!1),r=c(0),w=c(20),_=c(0),s=c([]),K=async()=>{var m,k;const o=await ue({page:r.value,size:w.value,month:b.value?b.value.getTime()/1e3:null});if(!o.success){p.value=!0;return}_.value=((m=o.data)==null?void 0:m.total)||0,s.value=r.value===1?((k=o.data)==null?void 0:k.records)||[]:s.value.concat(o.data.records||[]),s.value&&s.value.length>=_.value&&(p.value=!0)},E=async()=>{v.value=!0,r.value+=1,await K(),v.value=!1},S=()=>{r.value=0,p.value=!1,s.value=[],E()},F=c(0),O=o=>{F.value=o.target.scrollTop};return M(()=>{S(),T()}),(o,m)=>{const k=g("VanLoading"),Q=g("Empty"),U=g("VanImage"),Y=g("VanList");return n(),d("div",Ce,[e("div",{class:y(["flex-none transition-all duration-300",{"filter-color":F.value>=308}])},[e("div",$e,[e("section",De,[e("div",Ve,[x(le)]),Te,e("div",{class:"absolute right-3 text-sm text-b2 font-normal",onClick:m[0]||(m[0]=a=>h("/assist-records"))}," 充电记录 ")])])],2),e("div",{class:"list-wrap flex-1 pb-3 overflow-y-auto overflow-x-hidden z-20",onScroll:O},[e("div",Ie,[e("div",{class:y(["bg-pre",{"opacity-0":F.value>=308}])},null,2)]),e("div",Le,[Ee,e("div",Se,[l.value?(n(),C(k,{key:0,class:"h-[48px]",size:"40"})):(n(),d("span",ze,u(f(te)(f(se)(t.value))),1))]),x(Be,{onHandleTo:h})]),e("div",{class:y(["p-3 sticky top-[-12px] z-20 transition-all duration-300 flex items-center",{"filter-color":F.value>=308}])},[x(ne,{class:"relative z-50",onChangeTime:I})],2),x(Y,{class:"min-h-[calc(100vh-50px-44px-12px)] bg-white rounded-xl text-sm px-3 py-1 mx-3",loading:v.value,"onUpdate:loading":m[1]||(m[1]=a=>v.value=a),finished:p.value,"loading-text":o.$t("common.loading"),onLoad:E},{default:L(()=>[!v.value&&!s.value.length?(n(),C(Q,{key:0,name:o.$t("common.No data yet"),class:"pb-8"},null,8,["name"])):j("",!0),(n(!0),d(B,null,P(s.value,(a,Z)=>(n(),d("div",{key:Z,class:"py-2 border-b border-solid border-b4 last:border-none"},[e("div",Ne,[e("div",Re,u(V[+(a==null?void 0:a.direct)])+u(a.ticket||0)+"票 ",1),e("div",Me,[e("span",Pe,"+"+u(a.amount||0),1),e("img",{src:f(G)("images/tokens/FMCP.png"),class:"w-4 h-4"},null,8,je)])]),e("div",Ae,[e("div",{class:"flex items-center gap-x-1",onClick:W(Oe=>h("/category?shopId="+a.shopId),["stop"])},[x(U,{class:"w-6 h-6",round:"",src:a.logo},null,8,["src"]),e("div",Ge,u(a.storeName||"店铺已转移"),1)],8,He),e("div",Je,u(a.createTime?f(oe)(a.createTime):""),1)])]))),128))]),_:1},8,["loading","finished","loading-text"])],32)])}}}),et=z(Ke,[["__scopeId","data-v-1d61690a"]]);export{et as default};
