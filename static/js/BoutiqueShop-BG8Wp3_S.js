import{y as S,F as a,G as l,Q as d,X as A,_ as H,l as E,r as v,x as M,z as G,D as K,E as D,H as s,I as b,J as g,a2 as u,O as C,K as L,a4 as F,a0 as j,Y as P,Z as O,w as Q,R,P as U,N as I}from"./vendor-D6JO6WHW.js";import{_ as V}from"./MCOIN-BOqZVkND.js";import{_ as q}from"./ShopMaskTips-wgA1ZEjb.js";import{B as W}from"./BackIcon-CPUEW9je.js";import{a as X}from"./mall-DnMZRkyz.js";import"./index-CybuWkSo.js";const z=S({props:{label:null,bgColor:null,color:null},setup(r){return(y,i)=>(l(),a("div",{class:"whitespace-nowrap rounded bg-red-004 text-white px-1.5 py-0.5 text-xxs",style:A({backgroundColor:r.bgColor||null,color:r.color||null})},d(r.label),5))}}),J=r=>(P("data-v-66558c28"),r=r(),O(),r),Y={class:"gap-3 bg-transparent u-waterfall"},Z=["onClick"],ee={class:"w-full h-full rounded-xl bg-white"},te={class:"relative w-full h-full pb-3 bg-white rounded-xl"},se={class:"w-full max-h-[250px] relative overflow-hidden"},le=["src"],ae={key:0,class:"mb-0.5 text-black-900 font-semibold opacity-80 text-sm mt-2.5 text-left line-clamp-2 pl-2.5 pr-2.5"},oe={key:1,class:"w-full mb-2"},ne={key:2,class:"flex items-center gap-2 mt-1.5 overflow-x-auto pl-2.5 pr-2.5"},ce={key:3,class:"mt-2.5 flex justify-start pl-2.5 pr-2.5"},re=["onClick"],ie={class:"w-full pt-[100%] rounded relative"},ue=["src"],de={key:0,class:"flex items-center justify-center flex-shrink-0 w-full text-xs line-clamp-1 text-primary"},pe=J(()=>s("div",{class:"mr-0.5",style:{flex:"0 0 1rem"}},[s("img",{class:"w-4 h-4",src:V})],-1)),he={class:"font-bold text-center truncate text-xxs"},ve={class:"text-xs font-semibold"},_e=j("Mcoin "),fe={key:1,class:"flex items-center justify-center w-full text-xs text-center truncate text-primary"},xe={class:"mr-1 font-normal text-xxs opacity-60"},me={class:"text-xxs text-primary"},ye={class:"text-xs"},be=["onClick"],ge={class:"w-full h-full rounded-xl bg-white"},we={class:"relative w-full h-full pb-3 bg-white rounded-xl"},ke={class:"w-full max-h-[250px] relative overflow-hidden"},$e=["src"],Ce={key:0,class:"mb-0.5 text-black-900 font-semibold opacity-80 text-sm mt-2.5 text-left line-clamp-2 pl-2.5 pr-2.5"},Te={key:1,class:"w-full mb-2"},Le={key:2,class:"flex items-center gap-2 mt-1.5 overflow-x-auto pl-2.5 pr-2.5"},Se={key:3,class:"mt-2.5 flex justify-start pl-2.5 pr-2.5"},Be=["onClick"],Ne={class:"w-full pt-[100%] rounded relative"},je=["src"],Ie={key:0,class:"flex items-center justify-center flex-shrink-0 w-full text-xs line-clamp-1 text-primary"},De=J(()=>s("div",{class:"mr-0.5",style:{flex:"0 0 1rem"}},[s("img",{class:"w-4 h-4",src:V})],-1)),Fe={class:"font-bold text-center truncate text-xxs"},qe={class:"text-xs font-semibold"},ze=j("Mcoin "),He={key:1,class:"flex items-center justify-center w-full text-xs text-center truncate text-primary"},Ee={class:"mr-1 font-normal text-xxs opacity-60"},Me={class:"text-xxs text-primary truncate"},Pe={class:"text-xxs"},Oe=S({props:{value:null,addTime:null,idKey:null},setup(r){const y=r,i=E(),w=v(null),x=v(null),p=v([]),n=v([]),h=v([]),B=c=>{c.stores.id&&i.push(`category?shopId=${c.stores.id}&deliveryType=1`)},k=c=>{c.id&&i.push(`goodsDetail?id=${c.id}`)},m=c=>JSON.parse(JSON.stringify(c)),N=M(()=>m(y.value)),$=async()=>{if(!h.value.length)return;let c=await x.value,f=await w.value,o=h.value[0];if(!o)return;let e=(c==null?void 0:c.clientHeight)||0,_=(f==null?void 0:f.clientHeight)||0;if(p.value.length===0&&n.value.length===0)p.value.push(o);else if(e<_)p.value.push(o);else if(e>_)n.value.push(o);else{let t=p.value.length,T=n.value.length;t<=T?p.value.push(o):n.value.push(o)}h.value.splice(0,1),h.value.length&&setTimeout(()=>{$()},y.addTime)};return G(()=>N,(c,f)=>{let o=Array.isArray(f)&&f.length>0?f.length:0;h.value=h.value.concat(m(c.value.slice(o))),$()},{deep:!0,immediate:!0}),K(()=>{h.value=m(N.value),$()}),(c,f)=>{const o=D("van-skeleton");return l(),a("div",Y,[s("div",{ref:(e,_)=>{_.leftColumn=e,x.value=e},class:"u-column"},[(l(!0),a(b,null,g(p.value,(e,_)=>(l(),a("div",{class:"mb-4 text-center",onClick:t=>B(e),key:e.id},[s("div",ee,[s("div",te,[s("div",se,[s("img",{src:e&&e.stores&&e.stores.logo,class:"object-cover w-full h-auto rounded-t-xl aspect-square"},null,8,le)]),e.stores.storeName?(l(),a("div",ae,[s("span",null,d(e.stores.storeName||"-"),1)])):u("",!0),e.stores.id?u("",!0):(l(),a("div",oe,[C(o,{row:_%2==0?1:2,class:"mx-2","row-width":["100%"]},null,8,["row"])])),e.subclasses&&e.subclasses.length>0?(l(),a("div",ne,[(l(!0),a(b,null,g(e.subclasses,t=>(l(),L(z,{label:t.name,key:t.id,bgColor:"#FFD81F",color:"#000"},null,8,["label"]))),128))])):u("",!0),e.goods?(l(),a("div",ce,[(l(!0),a(b,null,g(e.goods.slice(0,2),t=>(l(),a("div",{style:{flex:"0 0 48%"},class:"flex flex-col items-center gap-2 w-[48%] mr-1",onClick:F(T=>k(t),["stop"]),key:t.id},[s("div",ie,[(t.status!=1||!+t.stock)&&+t.goodsTypes!=2?(l(),L(q,{key:0,status:t.status,stock:t.stock},null,8,["status","stock"])):u("",!0),s("img",{src:t.icons&&t.icons.split(",")[0],class:"absolute top-0 left-0 w-full h-full rounded aspect-square object-cove"},null,8,ue)]),t.payType!==2?(l(),a("div",de,[pe,s("div",he,[s("span",ve,d(t.price||0),1),_e])])):u("",!0),t.payType===2?(l(),a("div",fe,[s("div",xe,d(c.$t("piggy.cardPrice")),1),s("div",me,[s("span",ye,d(t.cardPrice||0),1),j(" "+d(t.symbol||""),1)])])):u("",!0)],8,re))),128))])):u("",!0)])])],8,Z))),128))],512),s("div",{ref:(e,_)=>{_.rightColumn=e,w.value=e},class:"u-column"},[(l(!0),a(b,null,g(n.value,(e,_)=>(l(),a("div",{class:"mb-4 text-center",onClick:t=>B(e),key:e.id},[s("div",ge,[s("div",we,[s("div",ke,[s("img",{src:e&&e.stores&&e.stores.logo,class:"object-cover w-full h-auto rounded-t-xl aspect-square"},null,8,$e)]),e.stores.storeName?(l(),a("div",Ce,[s("span",null,d(e.stores.storeName||"-"),1)])):u("",!0),e.stores.id?u("",!0):(l(),a("div",Te,[C(o,{row:_%2==0?1:2,class:"mx-2","row-width":["100%"]},null,8,["row"])])),e.subclasses&&e.subclasses.length>0?(l(),a("div",Le,[(l(!0),a(b,null,g(e.subclasses,t=>(l(),L(z,{label:t.name,key:t.id,bgColor:"#FFD81F",color:"#000"},null,8,["label"]))),128))])):u("",!0),e.goods?(l(),a("div",Se,[(l(!0),a(b,null,g(e.goods.slice(0,2),t=>(l(),a("div",{style:{flex:"0 0 48%"},class:"flex flex-col items-center gap-2 w-[48%] mr-1",onClick:F(T=>k(t),["stop"]),key:t.id},[s("div",Ne,[(t.status!=1||!+t.stock)&&+t.goodsTypes!=2?(l(),L(q,{key:0,status:t.status,stock:t.stock},null,8,["status","stock"])):u("",!0),s("img",{src:t.icons&&t.icons.split(",")[0],class:"absolute top-0 left-0 w-full h-full rounded aspect-square object-cove"},null,8,je)]),t.payType!==2?(l(),a("div",Ie,[De,s("div",Fe,[s("span",qe,d(t.price||0),1),ze])])):u("",!0),t.payType===2?(l(),a("div",He,[s("div",Ee,d(c.$t("piggy.cardPrice")),1),s("div",Me,[s("span",Pe,d(t.cardPrice||0),1),j(" "+d(t.symbol||""),1)])])):u("",!0)],8,Be))),128))])):u("",!0)])])],8,be))),128))],512)])}}}),Ve=H(Oe,[["__scopeId","data-v-66558c28"]]),Je=r=>(P("data-v-7a045aa9"),r=r(),O(),r),Ae={class:"flex h-[53px] bg-[#E2DBCD80] backdrop-blur-sm rounded-2xl p-1"},Ge=["onClick"],Ke={key:0,class:"hot-tag rounded-sm absolute right-[-0.2rem] top-1 z-20 text-center flex items-center justify-center"},Qe=Je(()=>s("span",{class:"text-white text-xxs"},"HOT",-1)),Re=[Qe],Ue={class:"name flex items-center text-[18px] line-height-[35px] text-black font-medium z-10 text-nowrap"},We={class:"text-xxs text-gray-500 mt-1 text-nowrap"},Xe={key:1,class:"selected-bar w-12 h-2 bg-default absolute bottom-5"},Ye=S({props:{orderBy:null},emits:["change"],setup(r,{emit:y}){const{t:i}=Q(),w=M(()=>[{name:i("common.recommend"),subName:i("activity.you may also like"),value:3},{name:i("activity.List"),subName:i("ranking.Ecological help list"),value:10},{name:i("activity.Local hot spots"),subName:i("activity.Word of mouth hot sale"),value:1},{name:i("activity.Select new stores"),subName:i("activity.Tasting Experience"),value:11}]);return(x,p)=>(l(),a("div",Ae,[(l(!0),a(b,null,g(U(w),n=>(l(),a("div",{class:R(["w-1/4 flex flex-col items-center p-1 cursor-pointer relative",{"bg-white rounded-xl":r.orderBy==n.value}]),key:n.value,onClick:h=>y("change",n.value)},[n.value===1?(l(),a("div",Ke,Re)):u("",!0),s("div",Ue,d(n.name),1),s("div",We,d(n.subName),1),r.orderBy==n.value?(l(),a("div",Xe)):u("",!0)],10,Ge))),128))]))}}),Ze=H(Ye,[["__scopeId","data-v-7a045aa9"]]),et={class:"overflow-y-auto"},tt={class:"bg-transparent"},st={class:"sticky top-0 flex font-normal justify-center text-sm items-center h-[44px] px-2.5 z-50 bg-origin5"},lt={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},at=s("div",{class:"font-semibold"},null,-1),ot={class:"min-h-[60vh]"},nt={class:"px-2.5"},ct=S({name:"BoutiqueShop"});function rt(r){const y=E(),i=v(3),w=o=>{o!==i.value&&(i.value=o,c())},x=v([]),p=v(!1),n=v(!1),h=v(0),B=v(10),k=v(0),m=v([]),N=async()=>{const o=await X({page:h.value,size:B.value,sortType:i.value,orderBy:1,boutiqueFlag:!0});if(p.value=!1,!o.success){n.value=!0;return}if(!o.data||!o.total){n.value=!0;return}k.value=o.total,m.value=(o.data||[]).map(e=>({...e})),x.value=h.value===1?m.value:x.value.concat(m.value),x.value.length>=k.value&&(n.value=!0)},$=async()=>{p.value=!0,h.value+=1,await N(),setTimeout(()=>{p.value=!1},1e3)},c=()=>{m.value=[],x.value=[],h.value=0,k.value=0,n.value=!1,$()},f=o=>{y.push(o)};return(o,e)=>{const _=D("van-sticky"),t=D("VanList");return l(),a("div",et,[s("div",tt,[s("section",st,[s("div",lt,[C(W,null,{default:I(()=>[s("span",null,d(o.$t("mall.Boutique Shop")),1)]),_:1})]),at]),s("section",ot,[C(_,{"offset-top":43},{default:I(()=>[s("div",nt,[C(Ze,{orderBy:i.value,onChange:w},null,8,["orderBy"])])]),_:1}),C(t,{class:"mt-4 px-2.5 bg-transparent",loading:p.value,"onUpdate:loading":e[0]||(e[0]=T=>p.value=T),finished:n.value,"finished-text":o.$t("common.noMore"),"loading-text":o.$t("common.loading"),onLoad:$},{default:I(()=>[x.value.length>0?(l(),L(Ve,{key:0,class:"bg-transparent",value:m.value,addTime:150,onHandleTo:f},null,8,["value"])):u("",!0)]),_:1},8,["loading","finished","finished-text","loading-text"])])])])}}const _t=S({...ct,setup:rt});export{_t as default};
