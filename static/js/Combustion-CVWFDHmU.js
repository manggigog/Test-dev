import{d as R,c as q}from"./index-B3VH42pz.js";import{o as J}from"./OTCContract-BmRWCyc8.js";import{e as W}from"./exchangeContract-DK-3HvtY.js";import{_ as X,y as Y,bc as d,bd as w,r,D as Z,E as t,K as m,G as o,N as b,H as e,O as h,a0 as M,F as x,Q as n,P as a,$ as ss}from"./vendor-CjApaIpB.js";const es={class:"flex items-center justify-between mb-4"},as={class:"flex font-semibold"},ts={key:1},os={class:"flex items-center justify-between mt-5"},ns={class:"opacity-80"},cs={class:"text-[#2E2008] font-semibold"},is={key:1},ls={class:"flex items-center justify-between mt-10"},ds=Y({props:{show:{type:Boolean}},emits:["close","success"],setup(B,{emit:A}){const{lastPrice:C}=W(),{burnMAI:k,balances:u,musd:I,mai:P,system:L}=J(),[V]=d(!1),[D,p]=d(!1),[S,_]=d(!1),f=w({musdBalance:null,maiBalance:null,maiPrice:null}),y=()=>{A("close")},c=w({MAI:"",MUSD:""}),i=r(0),N=r(0),U=async()=>{c.MUSD=await I(),c.MAI=await P()},$=async()=>{const s=await u(c.MAI,l.value);i.value=+s},l=r(""),j=async()=>{const s=await L();l.value=s},z=async()=>{const s=await u(c.MUSD,l.value);N.value=+s},E=async()=>{_(!0);const s=await k();_(!1),s.success&&g()},T=async()=>{p(!0),f.maiPrice=+await C(),p(!1)},g=async()=>{T(),await j(),await U(),$(),z()};return Z(async()=>{await g()}),(s,v)=>{const F=t("van-loading"),G=t("van-icon"),H=t("VanLoading"),K=t("VanButton"),O=t("van-popup");return o(),m(O,{show:B.show,"onUpdate:show":v[0]||(v[0]=Q=>ss(show)?show.value=Q:null),round:"",style:{padding:"20px"},onClose:y},{default:b(()=>[e("div",es,[e("div",as,[M(n(s.$t("ecology.price"))+": ",1),a(D)?(o(),m(F,{key:0,size:"18px"})):(o(),x("span",ts,n(a(R)(a(f).maiPrice,6))+" MUSD",1))]),h(G,{name:"cross",size:"18px",onClick:y})]),e("div",os,[e("div",ns,"MAI "+n(s.$t("ecology.canBurn")),1),e("div",cs,[a(V)?(o(),m(H,{key:0,size:"18"})):(o(),x("span",is,n(a(q)(i.value||0)),1))])]),e("div",ls,[h(K,{class:"btn h-[35px] min-w-[240px] px-4 text-white font-semibold",loading:a(S),disabled:i.value<=0,onClick:E},{default:b(()=>[M(n(s.$t("ecology.burn",{token:"MAI"})),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),_s=X(ds,[["__scopeId","data-v-6b439e56"]]);export{_s as C};
