import{_ as L,y as U,w as E,bc as q,r as m,x as R,D as T,F as O,G as j,H as i,O as n,Q as V,N as c,E as d,P as p,T as K,l as P,a0 as F}from"./vendor-D6JO6WHW.js";import{c as G}from"./address-CBN0UUqZ.js";import{B as H}from"./BackIcon-CPUEW9je.js";import{R as J,e as M,v as Q,a1 as x}from"./index-Ds2hFbCb.js";const z={class:"relative text-center"},W={class:"mb-1 flex-start h-[44px] px-2.5"},X={class:"font-semibold"},Y={class:"overflow-hidden rounded-lg"},Z=U({setup(ee){const{generateKey:g,encryptAddressKey:C}=J(),{regionStore:v}=M(),{currentLocale:$}=Q(),f=P(),{t:h,messages:w}=E(),N=w.value[$.value][`${v.country}areaList`],[b,y]=q(!1),u=m(!1),r=m(""),a=m({userName:null,telNumber:null,provinceName:null,cityName:null,countyName:null,country:"",isDefault:!1,detailInfo:null,areaCode:null}),_=R(()=>v.country==="CN"?3:2),I=()=>{const l=sessionStorage.getItem("editAddress")||"";if(!l)return;const e=JSON.parse(l);a.value=e,a.value.isDefault=!!(e.isDefault&&e.isDefault>=1),r.value=e.provinceName+"/"+e.cityName+"/"+e.countyName,Object.entries(N.city_list).forEach(s=>{s[1]===e.cityName&&(a.value.areaCode=s[0])})},k=l=>{a.value.provinceName=l[0].name,a.value.cityName=l[1].name,a.value.countyName=(l[2]??"").name,r.value=[...new Set(l.map(e=>e.name))].join("/"),u.value=!1},D=async()=>{if(b.value)return;if(!x(a.value.telNumber))return K(h("address.number was identified"));y(!0);const l=f.currentRoute.value.path,e=await g("user",l);let t;e?t=C(a.value,e):t=a.value;const s=await G({...t,isDefault:a.value.isDefault?1:0});y(!1),s.success&&f.back()};return T(()=>{I()}),(l,e)=>{const t=d("van-field"),s=d("van-area"),A=d("van-popup"),B=d("van-cell-group"),S=d("VanButton");return j(),O("div",z,[i("header",W,[n(H),i("span",X,V(l.$t("common.address")),1)]),i("div",Y,[n(B,{inset:""},{default:c(()=>[n(t,{modelValue:a.value.userName,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.userName=o),label:l.$t("common.name"),placeholder:l.$t("common.name")},null,8,["modelValue","label","placeholder"]),n(t,{modelValue:a.value.telNumber,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.telNumber=o),label:l.$t("common.phone"),placeholder:l.$t("common.phone")},null,8,["modelValue","label","placeholder"]),n(t,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),"is-link":"",readonly:"",label:l.$t("common.area"),placeholder:l.$t("common.area"),onClick:e[3]||(e[3]=o=>u.value=!0)},null,8,["modelValue","label","placeholder"]),n(A,{show:u.value,"onUpdate:show":e[6]||(e[6]=o=>u.value=o),round:"",position:"bottom"},{default:c(()=>[n(s,{modelValue:a.value.areaCode,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.areaCode=o),title:l.$t("common.area"),"area-list":p(N),"columns-num":p(_),onCancel:e[5]||(e[5]=o=>u.value=!1),onConfirm:k},null,8,["modelValue","title","area-list","columns-num"])]),_:1},8,["show"]),n(t,{modelValue:a.value.detailInfo,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.detailInfo=o),label:l.$t("common.detail address"),placeholder:l.$t("common.detail address")},null,8,["modelValue","label","placeholder"])]),_:1})]),n(S,{class:"px-20 mt-20 btn-orange btn-shadow",onClick:D,loading:p(b),disabled:!a.value.userName||!a.value.telNumber||!r.value||!a.value.detailInfo},{default:c(()=>[F(V(l.$t("common.save")),1)]),_:1},8,["loading","disabled"])])}}}),ne=L(Z,[["__scopeId","data-v-e25d2f98"]]);export{ne as default};
