import{_ as C,y as B,U as E,r as m,z as V,D as k,E as S,K as A,G as v,N as I,H as a,O as N,F as D,a2 as P,X as f,P as h,a4 as $,$ as b,a0 as w,Y as M,Z as O}from"./vendor-CjApaIpB.js";import{_ as R}from"./Lottie-ni5dUCha.js";import{bq as y}from"./index-lKIcPnY0.js";const T=o=>(M("data-v-f685da46"),o=o(),O(),o),z={key:0,class:"center-card text-b1 font-semibold"},L=T(()=>a("div",{class:"container relative"},[a("div",{class:"center-text",id:"original"},[a("div",null,"完成充电投票"),a("div",null,[w("获得 "),a("span",{class:"text-newOrigin"},"1"),w(" 张抵用券")])])],-1)),q=[L],H=B({props:{show:{type:Boolean},shopId:null,teleport:null},emits:["close"],setup(o,{emit:x}){const{show:c,teleport:U}=o,{height:u}=E(),n=m(null),l=m(!1),d=async()=>{l.value=!0,await y(500);const t=document.getElementById("original").cloneNode(!0);t.id="cloned-animation",t.classList.add("animated-div"),document.querySelector(".container").appendChild(t)},i=()=>{var e,t;x("close"),(e=n.value)!=null&&e.lottieAnimation&&((t=n.value)==null||t.lottieAnimation.destroy())},p=38;function r(e){var t;console.log("当前时间：",e.currentTime,Math.round(e.currentTime)),console.log("目标时间:",p),Math.round(e.currentTime)>=p&&(d(),(t=n.value)==null||t.lottieAnimation.removeEventListener("enterFrame",r))}const g=async()=>{var e;try{(e=n.value)==null||e.lottieAnimation.addEventListener("enterFrame",r)}catch{await y(1300),d()}};return V(()=>{var e;return(e=n.value)==null?void 0:e.lottieAnimation},e=>{e&&g()}),k(()=>{l.value=!1}),(e,t)=>{const F=S("VanPopup");return v(),A(F,{show:o.show,"onUpdate:show":t[1]||(t[1]=s=>b(c)?c.value=s:null),teleport:o.teleport,onClickOverlay:$(i,["stop"]),onClose:i,round:"",class:"bg-transparent position-center",sty:"",style:{width:"100%","max-width":"375px"}},{default:I(()=>[a("div",{class:"w-full overflow-hidden relative",style:f({height:`${h(u)}px`}),onClick:i},[N(R,{path:"lottie/expand.json",renderer:"svg",loop:!1,class:"w-full",style:f({height:`${h(u)}px`}),ref:(s,_)=>{_.lottieRef=s,n.value=s},onEnterFrame:t[0]||(t[0]=s=>r())},null,8,["style"]),l.value?(v(),D("div",z,q)):P("",!0)],4)]),_:1},8,["show","teleport","onClickOverlay"])}}}),W=C(H,[["__scopeId","data-v-f685da46"]]);export{W as V};
