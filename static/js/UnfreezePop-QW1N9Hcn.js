import{_ as B,y as A,x as k,B as l,r as I,K as F,G as f,N as h,H as t,O as N,F as D,a2 as O,P as s,Q as m,I as S,Y as j,Z as M}from"./vendor-BUT0HZ5j.js";import{i as R,g as _,d as w,q as x,C as G}from"./index-hbwLMIYO.js";import{_ as $}from"./ApproveButton-D3AYOtgA.js";const b=o=>(j("data-v-7712a9e6"),o=o(),M(),o),P={class:"w-full h-[88px]"},T={class:"gap-1 text-sm flex justify-between w-full h-[20px]"},V=b(()=>t("div",{class:"text-b2 font-normal text-sm"},"账户余额：",-1)),U={class:"flex items-center gap-1 text-b1 text-sm font-normal"},q=["src"],z={class:""},E={class:"gap-1 text-sm flex justify-between w-full mt-2 h-[20px]"},H=b(()=>t("div",{class:"text-b2 font-normal text-sm"},"退还金额：",-1)),K={class:"flex items-center gap-1 text-b1 text-sm font-normal"},Q=["src"],Y={class:""},Z={class:"text-b1 text-base font-semibold"},J=A({props:{show:{type:Boolean},type:null,order:null,loading:{type:Boolean}},emits:["close","handleSubmit"],setup(o,{emit:u}){const i=o,g=R(),c=k(()=>{var a,n,p;return i.order&&((a=i.order)!=null&&a.orderGoods)&&((n=i.order)==null?void 0:n.orderGoods.length)>0?(p=i.order)==null?void 0:p.orderGoods.reduce((C,e)=>{let d=0;return e.payType===4||e.payType===10?d=+new l(new l(e.price*e.number).minus(e.goodsActivityReduceAmount||0).plus(e.goodsAdjustChangeAmount||0).times(100-e.balanceDiscountRatio)).div(100):d=+new l(new l(e.price*e.number).minus(e.goodsActivityReduceAmount||0).plus(e.goodsAdjustChangeAmount||0).times(100-e.discountRatio)).div(100),C+d},0):0}),r=I(0),v=async()=>{r.value=await(await g).balanceOf()},y=()=>{v()};return(a,n)=>(f(),F(G,{width:"90%",show:o.show,title:o.type==1?a.$t("order.credit limit_v2"):a.$t("order.pay to credit"),teleport:"body",onClose:n[0]||(n[0]=()=>{u("close")}),onOpen:y,showConfirm:!1,showReject:!1},{default:h(()=>[t("div",P,[t("div",T,[o.type!=1?(f(),D(S,{key:0},[V,t("div",U,[t("img",{src:s(_)("images/tokens/MCOIN.png"),class:"w-5"},null,8,q),t("span",z,m(s(w)(r.value||0)),1)])],64)):O("",!0)]),t("div",E,[H,t("div",K,[t("img",{src:s(_)("images/tokens/MCOIN.png"),class:"w-5"},null,8,Q),t("span",Y,m(s(w)(s(c)||0)),1)])]),N($,{disabled:s(c)<=0||+s(c)>+r.value,classes:"main-btn w-full text-white mt-5 rounded-full text-b1",approveAmount:+s(c),contract:s(x).order,token:s(x).MCOIN,fallBack:()=>u("handleSubmit"),loading:o.loading},{default:h(()=>[t("span",Z,m(a.$t("common.confrim")),1)]),_:1},8,["disabled","approveAmount","contract","token","fallBack","loading"])])]),_:1},8,["show","title"]))}}),ee=B(J,[["__scopeId","data-v-7712a9e6"]]);export{ee as U};
