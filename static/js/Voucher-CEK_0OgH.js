import{z as w,x as k,a2 as C,bl as $,y as B,E as L,F as D,G as f,H as d,I as n,P as g,O as o,Q as p,Z as y,q as z,o as I,N as E,$ as S,J as V,K as P,_ as N,r as T,ad as q,bE as j,X as G,Y as M}from"./vendor-Dr_RpJ_Y.js";import{_ as R}from"./tips-C8VMk_au.js";import{d as U,e as H,j as O,g as Y,R as A,k as J,B as K,az as Q}from"./index-BckdT6oc.js";import{D as X}from"./DescriptionPop-Cx06amZN.js";import{B as Z}from"./BetweenTab-nGcUWfRT.js";import{B as W}from"./BackIcon-CDrGaEPo.js";/* empty css                                                               */const ee={class:"px-3 py-6"},te={class:"w-fit rounded-lg relative flex flex-col justify-evenly pl-2.5"},oe={class:"text-sm text-[#585654]"},se=n("img",{src:R,class:"w-4 h-4"},null,-1),ae={class:"mt-1 flex items-center"},ne={class:"text-[40px] text-[#2E2008] font-BebasNeue leading-[48px]"},le={key:1},ie=w({emits:["handleTo"],setup(c,{emit:v}){const{t:i}=k(),[s,e]=C(!1),[m,h]=C(!1),l=$({balance:null}),_=B(()=>[{url:"voucher/Coupons1",text:i("voucher.used to deduct MC"),subText:i("voucher.can be withdrawn")},{url:"voucher/Coupons2",text:i("voucher.Coupons2_title"),subText:i("voucher.Coupons2_desc")},{url:"voucher/Coupons3",text:i("voucher.Coupons3_title"),subText:i("voucher.Coupons3_desc")},{url:"voucher/Coupons5",text:i("voucher.Coupons5_title"),subText:i("voucher.Coupons5_desc")},{url:"voucher/Coupons6",text:i("voucher.Coupons6_title"),subText:i("voucher.Coupons6_desc")}]),x=async()=>{e(!0),l.balance=await O(Y.FMCP).balanceOf(),e(!1)};return L(()=>{x()}),(b,r)=>{const a=D("VanLoading");return d(),f("div",ee,[n("div",te,[n("div",{class:"flex items-center gap-0.5",onClick:r[0]||(r[0]=t=>o(h)(!0))},[n("span",oe,p(b.$t("voucher.available quota")),1),se]),n("div",ae,[n("div",ne,[o(s)?(d(),y(a,{key:0,size:"40"})):(d(),f("span",le,p(o(U)(o(H)(o(l).balance||0))),1))]),n("div",{class:"ml-2 w-fit h-fit py-1.5 px-[9px] bg-white rounded-[4px] text-sm text-[#FF8812] font-semibold",onClick:r[1]||(r[1]=t=>v("handleTo","/mall"))},p(b.$t("voucher.go_use")),1)])]),g(X,{list:o(_),show:o(m),onClose:r[2]||(r[2]=t=>o(h)(!1))},null,8,["list","show"])])}}}),ce=c=>A("GET","/logGrow/list",c),re={class:"min-h-[calc(100vh_-_50px_-_120px_-_44.5px)] bg-white"},ue={class:"text-sm text-[#585654]"},de={class:"mt-0.5 text-[#999]"},pe={class:"ml-2 text-sm text-[#FF8812] font-semibold"},me=w({props:{path:{default:"/creditPledge"},topDistance:{type:Boolean,default:!1}},setup(c){const v=c,i=z(),{t:s}=k(),e=$({active:null,page:0,size:10,finished:!1,list:[],loading:!1,total:0}),m=B(()=>[{id:null,name:s("common.all")},{id:2,name:s("order.order")},{id:99,name:s("order.afterSale")},{id:1,name:s("common.get")}]),h=a=>{let t="";switch(Number(a.type)){case 1:t=a.growFlag?s("voucher.type1"):s("voucher.type2");break;case 2:t=a.growFlag?s("voucher.type3"):s("voucher.type4");break;case 3:t=a.growFlag?s("voucher.type5"):s("voucher.type6");break;case 4:t=s("voucher.type7");break;case 5:t=s("voucher.type8");break;case 6:t=s("voucher.type9");break;case 7:t=s("voucher.type_ranking");break;default:t=s("goods.other")}return t},l=a=>{i.replace({path:v.path,query:{active:a}}),e.active=a,_()},_=()=>{e.page=0,e.total=0,e.finished=!1,e.list=[],x()},x=async()=>{e.loading=!0,e.page+=1,await b(),setTimeout(()=>{e.loading=!1},1e3)},b=async()=>{const a={page:e.page,size:e.size,typeList:null,incomeType:null};e.active===0?delete a.incomeType:e.active===99?a.typeList=4:a.incomeType=e.active;const t=await ce(a);if(e.loading=!1,!t.success){e.finished=!0;return}if(!t.data||!+t.total){e.finished=!0;return}e.total=t.total,e.list=e.page===1?t.data:e.list.concat(t.data),e.list.length>=e.total&&(e.finished=!0)},r=I();return r.query.active&&(e.active=Number(r.query.active)),(a,t)=>{const F=D("VanList");return d(),f("div",null,[n("div",{class:E(["sticky top-[50px] z-[51] w-full pt-3 px-3 bg-white",{"rounded-none":c.topDistance,"rounded-t-xl":!c.topDistance}])},[g(Z,{options:o(m),"label-key":"name","value-key":"id",modelValue:o(e).active,"onUpdate:modelValue":t[0]||(t[0]=u=>o(e).active=u),onChange:l},null,8,["options","modelValue"])],2),n("div",re,[o(e).finished&&o(e).total===0?(d(),y(K,{key:0,needTextTop:!0,titleColor:"#A45E00",url:o(J)("images/evaluate_empty.png"),title:a.$t("voucher.no records"),top:"2rem",iconSize:"16rem"},null,8,["url","title"])):(d(),y(F,{key:1,loading:o(e).loading,"onUpdate:loading":t[1]||(t[1]=u=>o(e).loading=u),finished:o(e).finished,"finished-text":a.$t("common.noMore"),"loading-text":a.$t("common.loading"),onLoad:x,class:"bg-white p-3"},{default:S(()=>[(d(!0),f(V,null,P(o(e).list,u=>(d(),f("div",{class:"mb-2 pb-2 border-solid border-b-[0.5px] border-[#D9D9D9] flex justify-between",key:u.id},[n("div",ue,[n("div",null,p(h(u)),1),n("div",de,p(o(Q)(u.createTime)),1)]),n("div",pe,p(Number(u.incomeType)===1?"+":"-")+p(u.amount),1)]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"]))])])}}}),he=c=>(G("data-v-0def6810"),c=c(),M(),c),fe={class:"voucher__container relative font-Puhui"},ve=he(()=>n("div",{class:"absolute top-[30px] right-[17.5px] z-[49] bg"},null,-1)),ge={class:"relative w-full h-[50px] px-3 flex justify-between items-center"},_e={class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-base text-[#2E2008] font-bold"},xe={class:"relative z-[50]"},be=w({setup(c){const v=z(),i=l=>{v.push(l)},s=T(0);let e=T(!0);const m=j(()=>{const l=document.getElementById("fm-page");s.value=l.scrollY||l.scrollTop,s.value<20?e.value=!1:e.value=!0},100),h=()=>{document.getElementById("fm-page").addEventListener("scroll",m),m()};return q(()=>{const l=document.getElementById("fm-page");l&&l.removeEventListener("scroll",m)}),L(()=>{h()}),(l,_)=>(d(),f("div",fe,[ve,n("div",{class:E(["sticky top-0 z-[51]",{"bg-[#fff]":o(e)," bg-black/0":!o(e)}])},[n("div",ge,[g(W),n("div",_e,p(l.$t("voucher.voucher")),1)])],2),n("div",xe,[g(ie,{onHandleTo:i}),g(me,{topDistance:o(e),path:"/voucher"},null,8,["topDistance"])])]))}}),Le=N(be,[["__scopeId","data-v-0def6810"]]);export{Le as default};
