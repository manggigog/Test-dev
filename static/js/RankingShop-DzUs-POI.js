import{_ as vo,y as ao,a1 as _o,l as bo,x as wo,r as v,be as _,bV as xo,D as ko,E as no,K as b,G as a,N as y,H as e,F as w,a2 as r,O as d,P as n,Q as l,a4 as yo,R as Io,a0 as So,Y as Co,Z as Vo,T as $o}from"./vendor-BUT0HZ5j.js";import{_ as zo}from"./member-BMygrgIC.js";import{a as Do,S as To}from"./ShopVotePop-brmRcUuS.js";import{S as Ao}from"./SkewCard-E8FQjhIJ.js";import{V as Go}from"./VoteRewardPop-B2eKSXW-.js";import{C as Po}from"./CommonVanProvider-BpsZUrD3.js";import{H as lo}from"./HomeGoodsItem-pAy6D7Fx.js";import{_ as Bo}from"./ApproveInfo-86Yozb0_.js";import{r as Ro,g as io,b as No,d as I,l as Lo}from"./index-BvL8wS8a.js";import{d as qo,q as Eo}from"./beiRanking-DA1QuarC.js";import"./shop-CeqcS6K2.js";import"./beiExtRewardContract-ChOHNGby.js";import"./beiConstContract-Chl2nHlo.js";import"./Lottie-DS9vA_OS.js";import"./BackIcon-biFt6cm7.js";import"./store-CPx32ymB.js";import"./MCOIN-BcbOHmhy.js";import"./useCityMap-CVu2_p19.js";import"./RatioBox-CG9RFZMG.js";import"./ImgBoutiqueLable-BF5Xoxsv.js";const Mo="/Test-dev/static/images/auth-BiC43gt4.svg",x=c=>(Co("data-v-69179888"),c=c(),Vo(),c),Fo={class:"relative z-10 p-3"},Ho={class:"flex items-center gap-x-1"},Oo={class:"relative"},Ko={class:"absolute bottom-[-10px] left-0 right-0 w-[40px] border-[1px] border-solid border-white flex-center bg-yellow rounded-3xl mx-auto my-1"},Qo=x(()=>e("img",{src:zo,class:"w-4 h-4"},null,-1)),Yo={class:"flex flex-col gap-1"},Zo={class:"text-base font-semibold line-clamp-1"},jo={class:"text-b3 flex items-center"},Jo=x(()=>e("img",{src:Mo,class:"inline-block w-4 h-4 mr-0.5"},null,-1)),Uo={class:"text-newOrigin"},Wo={class:"bg-b5 py-3 grid grid-cols-3 rounded-lg mt-[17px]"},Xo={class:"text-center"},oe={class:"text-center"},ee=x(()=>e("p",null,"LP",-1)),se={class:"text-center"},te=x(()=>e("p",null,"MAI",-1)),ne={class:"card"},le={class:"text-b1 font-semibold"},ie=["innerHTML"],ae={class:"card"},re={class:"text-b1 font-semibold"},de={class:"flex-center-bw text-b1 mt-3"},ue={class:"text-b3"},ce={class:"flex-center-bw text-b1 mt-3"},pe={class:"text-b3"},fe={class:"flex-center-bw text-b1 mt-3"},he={class:"text-b3"},ge={class:"flex-center-bw text-b1 mt-3"},me={class:"text-b3"},ve={key:0,class:"card"},_e={class:"text-b1 font-semibold"},be={key:1,class:"card"},we={class:"text-b1 font-semibold"},xe={key:0,class:"relative py-4"},ke=ao({name:"RankingShop"});function ye(c){const k=_o(),S=bo(),{loadingToggle:C}=Ro(),p=wo(()=>{var s;return(s=k==null?void 0:k.query)==null?void 0:s.shopId}),t=v(null),f=v(null),h=v(null),[V,$]=_(!1),[z,D]=_(!1),[T,ro]=_(!1),[A,G]=_(!1),P=v(null),{width:B}=xo(P),uo=async()=>{if(!p.value)return;const{success:s,data:o}=await Eo({shopId:p.value,month:1e4});!s||!o||(t.value=o,o!=null&&o.goodsId&&(f.value={goodsId:o==null?void 0:o.goodsId,goodsName:o==null?void 0:o.goodsName,goodsPrice:o==null?void 0:o.price,goodsDesc:o==null?void 0:o.goodsDesc,goodsIcons:o==null?void 0:o.icons,goodsDiscountRatio:o==null?void 0:o.discountRatio,goodsType:o==null?void 0:o.goodsType}),o!=null&&o.offlineGoodsId&&(h.value={goodsId:o==null?void 0:o.offlineGoodsId,goodsName:o==null?void 0:o.offlineGoodsName,goodsPrice:o==null?void 0:o.offlineGoodsPrice,goodsDesc:o==null?void 0:o.offlineGoodsDesc,goodsIcons:o==null?void 0:o.offlineGoodsIcons,goodsDiscountRatio:o==null?void 0:o.offlineGoodsDiscountRatio,goodsType:o==null?void 0:o.offlineGoodsType}))},co=async()=>{if(!p.value)return;const{success:s,data:o}=await qo(p.value);s&&ro(o)},po=()=>{var s;S.push({path:"/goodsDetail",query:{id:(s=f.value)==null?void 0:s.goodsId}})},fo=()=>{var s;S.push({path:"/offlineGoodsDetail",query:{goodsId:(s=h.value)==null?void 0:s.goodsId}})},ho=async(s,o=!1)=>{o?G(o):$o({icon:io("images/sucess_icon.png"),duration:3e3,message:+(s==null?void 0:s.direct)==400?"放电成功":"充电成功"})};return ko(async()=>{C(!0),co(),await uo(),C(!1)}),(s,o)=>{const go=no("VanImage"),mo=no("VanButton");return a(),b(Po,{id:"rangkingShop",class:"h-full font-Puhui font-normal relative px-3",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"},ref:(u,g)=>{g.shopEl=u,P.value=u}},{default:y(()=>{var u,g,R,N,L,q,E,M;return[e("div",{class:Io(["safe-page-body overflow-y-auto w-full",{"safe-page-allow":n(T)}])},[d(Ao,{class:"mb-3",width:(n(B)*.74).toFixed(),right:"27"},{default:y(()=>{var i,m,F,H,O,K,Q,Y,Z,j,J,U,W,X,oo,eo,so,to;return[d(Do,{class:"absolute right-1.5 top-1.5 -z-20",type:(i=t.value)==null?void 0:i.type,width:(n(B)*.356).toFixed()},null,8,["type","width"]),e("div",Fo,[e("div",Ho,[e("div",Oo,[d(go,{round:"",src:(((m=t.value)==null?void 0:m.logo)||"").split(",")[0],errorIcon:n(io)("images/ranking/noPosition.png"),fit:"cover",width:"46px",height:"46px"},null,8,["src","errorIcon"]),e("div",Ko,[Qo,e("span",null,"V"+l((F=t.value)==null?void 0:F.memberLevel),1)])]),e("div",Yo,[e("div",Zo,l((H=t.value)==null?void 0:H.storeName),1),e("div",jo,[e("div",null,l(n(No)((O=t.value)==null?void 0:O.shopAddress,"****",4,4)),1),(K=t.value)!=null&&K.authorizeAddress?(a(),w("div",{key:0,onClick:o[0]||(o[0]=yo(()=>{n(D)(!0)},["stop"])),class:"inline-block ml-1 lex-shrink-0 align-text-bottom"},[Jo,e("span",Uo,l(s.$t("ecology.authorized")),1)])):r("",!0)])])]),e("div",Wo,[e("div",Xo,[e("p",null,l(s.$t("common.credit")),1),e("p",null,l(n(I)((Q=t.value)!=null&&Q.authorizeAddress?(Y=t.value)==null?void 0:Y.authorizeContribute:(Z=t.value)!=null&&Z.authorizeShop?0:(j=t.value)==null?void 0:j.contribute,0)),1)]),e("div",oe,[ee,e("p",null,l(n(I)((J=t.value)!=null&&J.authorizeAddress?(U=t.value)==null?void 0:U.authorizeLp:(W=t.value)!=null&&W.authorizeShop?0:(X=t.value)==null?void 0:X.lp)),1)]),e("div",se,[te,e("p",null,l(n(I)((oo=t.value)!=null&&oo.authorizeAddress?(eo=t.value)==null?void 0:eo.authorizeMai:(so=t.value)!=null&&so.authorizeShop?0:(to=t.value)==null?void 0:to.mai,0)),1)])])])]}),_:1},8,["width"]),e("div",ne,[e("p",le,l(s.$t("ranking.shop introduction")),1),e("div",{class:"mt-3 min-h-10 text-b2 whitespace-pre-wrap",innerHTML:(u=t.value)==null?void 0:u.introduction},null,8,ie)]),e("div",ae,[e("p",re,l(s.$t("ranking.business_data")),1),e("div",de,[e("div",ue,l(s.$t("shop.Opening hours")),1),e("div",null,l(n(Lo)((g=t.value)==null?void 0:g.shopCreateTime)),1)]),e("div",ce,[e("div",pe,l(s.$t("ranking.visitors")),1),e("div",null,l(((R=t.value)==null?void 0:R.lookCount)||0),1)]),e("div",fe,[e("div",he,l(s.$t("ranking.listing_goods")),1),e("div",null,l(((N=t.value)==null?void 0:N.goodsCount)||0),1)]),e("div",ge,[e("div",me,l(s.$t("ranking.listing_offline_goods")),1),e("div",null,l(((L=t.value)==null?void 0:L.offlineListGoodsCount)||0),1)])]),(q=f.value)!=null&&q.goodsId?(a(),w("div",ve,[e("p",_e,l(s.$t("ranking.hot_goods")),1),d(lo,{goods:f.value,class:"mt-3",onClick:po},null,8,["goods"])])):r("",!0),(E=h.value)!=null&&E.goodsId?(a(),w("div",be,[e("p",we,l(s.$t("ranking.hot_offline")),1),d(lo,{goods:h.value,class:"mt-3",onClick:fo},null,8,["goods"])])):r("",!0)],2),n(T)?(a(),w("div",xe,[d(mo,{class:"btn-yellow w-full h-[46px] rounded-full border-none text-base font-semibold",onClick:o[1]||(o[1]=i=>n($)(!0))},{default:y(()=>[So(l(s.$t("ranking.power")),1)]),_:1})])):r("",!0),n(z)&&t.value.authorizeAddress?(a(),b(Bo,{key:1,show:n(z),info:t.value,onClose:o[2]||(o[2]=i=>n(D)(!1))},null,8,["show","info"])):r("",!0),n(V)?(a(),b(To,{key:2,show:n(V),shopId:(M=t.value)==null?void 0:M.shopId,teleport:"#rangkingShop",onClose:o[3]||(o[3]=i=>n($)(!1)),onVoteSuccess:o[4]||(o[4]=(i,m)=>ho(i,m))},null,8,["show","shopId"])):r("",!0),n(A)?(a(),b(Go,{key:3,show:n(A),onClose:o[5]||(o[5]=i=>n(G)(!1))},null,8,["show"])):r("",!0)]}),_:1},8,["title"])}}const Ie=ao({...ke,setup:ye}),Ke=vo(Ie,[["__scopeId","data-v-69179888"]]);export{Ke as default};
