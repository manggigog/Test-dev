import{e as R,d as c,r as g,aa as l,f}from"./index-k1FFr-1T.js";const S=()=>{const{contributesStore:e}=R(),{loadingToggle:o}=g(),m=t=>{var a,s,r,n;c(+e.freeRelease)<=0||(+((a=e.releaseData)==null?void 0:a.remainTotal)&&+((s=e.releaseData)==null?void 0:s.remainTotal)>0&&(!((r=e.releaseData)!=null&&r.nextSubmitDate)||new Date().getTime()>=+((n=e.releaseData)==null?void 0:n.nextSubmitDate))?b(t):i(t))},p=t=>{var a,s,r,n;c(+e.freeRelease)<=0||(+((a=e.releaseData)==null?void 0:a.remainTotal)&&+((s=e.releaseData)==null?void 0:s.remainTotal)>0&&(!((r=e.releaseData)!=null&&r.nextSubmitDate)||new Date().getTime()>=+((n=e.releaseData)==null?void 0:n.nextSubmitDate))?D(t):u(t))},b=async t=>{if(!(await l()).success){i(t);return}e.calculateContributes("subtract",+e.freeRelease),typeof t=="function"&&t(),e.releaseSecondFlag=!1,e.releaseSecond=86400},i=async t=>{if(!(await f().pointReleaseBatch()).success){t(!1);return}e.calculateContributes("subtract",+e.freeRelease),typeof t=="function"&&t()},D=async t=>{o(!0,2);try{if(!(await l()).success){u(t);return}e.calculateContributes("subtract",+e.freeRelease),typeof t=="function"&&t()}finally{o(!1)}e.releaseSecondFlag=!1,e.releaseSecond=86400},u=async t=>{o(!0,2);const a=await f().pointReleaseBatch();if(o(!1),!a.success){t(!1);return}e.calculateContributes("subtract",+e.freeRelease),typeof t=="function"&&t()};return{handleNaturePoints:m,handleNaturePointsToast:p}};export{S as u};
