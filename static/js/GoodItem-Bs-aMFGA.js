import{G as d,H as r,Q as c,r as h,I as t,a3 as x,P as _,O as p,z as y,y as $,F as b}from"./vendor-Dr_RpJ_Y.js";import{_ as v,a as w}from"./collect-EjkhARjb.js";import{u as C}from"./useCityMap-B_oYsQIQ.js";import{aK as k,aL as N,aM as j,aN as L}from"./index-LRhcxFAI.js";import{_ as B}from"./MCOIN-Bodfn-v1.js";import{_ as S}from"./ImgBoutiqueLable-B-2xCcw4.js";const D=""+new URL("../images/store-icon-6hi-LzbB.svg",import.meta.url).href,E={class:"text-sm font-normal text-[#FF8812]"},F={props:{text:{type:String,default:"代买单"}},setup(e){return(o,f)=>(r(),d("span",E,c(e.text),1))}},V={class:"flex items-start justify-start"},A=t("div",null,[t("img",{src:D,class:"w-[22px] h-[22px] min-w-[22px] min-h-[22px]",alt:"店铺的图标"})],-1),G={class:"ml-2 w-full"},M={class:"flex items-center justify-between"},P={class:"line-clamp-1 text-base font-b1 font-semibold"},z={key:0,src:v,alt:"收藏",class:"w-5 h-5"},O={key:1,src:w,alt:"取消",class:"w-5 h-5"},H={class:"mt-1 flex items-center"},K={class:"text-sm text-b3 font-normal"},Q={class:"text-xs leading-[18px] text-b3 font-normal mt-1 line-clamp-1 w-full flex items-center justify-start"},R={class:"line-clamp-1"},T={class:"ml-auto whitespace-nowrap pl-1"},_t={props:{store:{type:Object,default:()=>({})}},setup(e){const o=e,{distanceFormat:f}=C(),a=h(!1),u=async()=>{var s,n;if(a.value||!((s=o.store)!=null&&s.storeId))return;o.store.collectId=9999,a.value=!0;const l=await N({storeId:(n=o.store)==null?void 0:n.storeId});a.value=!1,l.success&&(o.store.collectId=l.data)},g=async()=>{var s;if(a.value||!((s=o.store)!=null&&s.storeId))return;let l=o.store.collectId;o.store.collectId=null,a.value=!0,await k({ids:[l]}),a.value=!1};return(l,s)=>{var n,i,m;return r(),d("div",V,[A,t("div",G,[t("div",M,[t("span",P,c(((n=e.store)==null?void 0:n.storeName)||"--"),1),t("div",{onClick:s[0]||(s[0]=x(I=>e.store.collectId?g():u(),["stop"]))},[e.store.collectId?(r(),d("img",z)):(r(),d("img",O))])]),t("div",H,[t("div",K,c(((i=e.store)==null?void 0:i.goodsCategoryName3)||"")+" "+c(e.store.areaExtName3||""),1),_(F,{class:"ml-1",text:l.$t("goods.Buying agent")},null,8,["text"])]),t("div",Q,[t("span",R,c(((m=e.store)==null?void 0:m.storeAddress)||"--"),1),t("span",T,c(p(f)(e.store.distance,l.$t("city.Distance from you"))),1)])])])}}},U=["data-store-name"],q={class:"shrink-0 offline-goods-img__wrap w-[70px] h-[70px] overflow-hidden relative"},J={class:"offline-goods-info__wrap ml-2 flex-1 flex flex-col justify-between min-h-[70px]",style:{width:"calc(100% - 70px - 8px)"}},W={class:"w-full flex flex-col items-start"},X={class:"w-full flex justify-between items-center"},Y={class:"font-semibold text-[#2E2008] text-base line-clamp-1"},Z=["alt"],tt=["alt"],et={class:"w-full mt-1"},st={class:"font-normal text-[#999] text-sm line-clamp-1"},ot={class:"mt-1 w-full flex items-center justify-between"},lt={class:"font-normal text-[#999] text-sm"},at={class:"flex items-center justify-start font-Puhui"},ct={class:"flex items-center"},nt=t("img",{src:B,class:"w-[17px] h-[17px] mr-1"},null,-1),it={class:"text-b1 font-semibold text-sm"},ht=y({props:{goods:{default:{}},store:{default:{}}},setup(e){const o=e,f=$(()=>{var s;return(((s=o.goods.goodsIcons)==null?void 0:s.split(","))||[""])[0]}),a=h(!1),u=async()=>{var s,n,i;if(a.value||!((s=o.goods)!=null&&s.goodsId))return;o.goods.collectId=9999,a.value=!0;const l=await j({goodsId:(n=o.goods)==null?void 0:n.goodsId,storeId:(i=o.store)==null?void 0:i.storeId});a.value=!1,l.success&&(o.goods.collectId=l.data)},g=async()=>{var s;if(a.value||!((s=o.goods)!=null&&s.goodsId))return;let l=o.goods.collectId;o.goods.collectId=null,a.value=!0,await L({ids:[l]}),a.value=!1};return(l,s)=>{var i,m;const n=b("VanImage");return r(),d("section",{class:"flex items-start","data-store-name":e.goods.shopName},[t("div",q,[_(n,{src:p(f),class:"offline-goods-img w-[70px] h-[70px] rounded-lg overflow-hidden",alt:l.$t("goods.goodsImage"),fit:"cover"},null,8,["src","alt"]),_(S,{type:e.goods.goodsType||null},null,8,["type"])]),t("div",J,[t("div",W,[t("div",X,[t("div",Y,c(e.goods.goodsName||""),1),t("div",{onClick:s[0]||(s[0]=x(I=>e.goods.collectId?g():u(),["stop"]))},[e.goods.collectId?(r(),d("img",{key:0,src:v,alt:l.$t("common.collect"),class:"w-5 h-5"},null,8,Z)):(r(),d("img",{key:1,src:w,alt:l.$t("common.cancel"),class:"w-5 h-5"},null,8,tt))])]),t("div",et,[t("div",st,c(((i=e.store)==null?void 0:i.storeName)||"")+" "+c(((m=e.store)==null?void 0:m.areaExtName3)||""),1)]),t("div",ot,[t("div",lt,c(l.$t("city.1 item in total")),1),t("div",at,[t("div",ct,[nt,t("div",it,c(e.goods.goodsPrice),1)])])])])])],8,U)}}});export{_t as _,ht as a};
