import{_ as B,y as D,r as i,D as R,F as n,G as s,H as l,O as _,Q as a,N as v,E as h,l as V,I as x,J as F,K as w,a2 as S,P as $,a0 as I}from"./vendor-BUT0HZ5j.js";import{_ as M}from"./RefundGoodItem-2QJqa0H-.js";import{B as O}from"./BackIcon-biFt6cm7.js";import{l as z}from"./order-CKUhc8Y9.js";import{r as A}from"./useRefundStatus-DsYoZX36.js";import{P as E}from"./flashSale-DDyqLyYN.js";import"./useOrderStatus-BSCfQVBG.js";import"./index-hbwLMIYO.js";import"./useShipTemplate-SAWfRcmZ.js";import"./enums-DlE-aiss.js";const P={class:"relative"},U={class:"px-3 bg-[#f2f0ef] parent-view"},q={class:"gap-2 pt-2 flex-start sticky top-0 z-10 bg-[#f2f0ef]"},G={class:"flex items-center"},H={class:"flex items-center mt-[15px] rounded-lg bg-[#F9F9F9] px-3 py-4"},J={class:"mr-2 text-sm whitespace-nowrap"},K={key:0,class:"line"},Q={key:1},j={key:0,class:"flex items-center ml-2 opacity-60"},W={key:1,class:"flex items-center ml-2 opacity-60"},X={key:1,class:"ml-2"},Y={key:2,class:"ml-2"},Z={key:3,class:"ml-2"},ee={key:4,class:"ml-2"},te=D({setup(se){const C=V(),r=i([]),d=i([]),u=i(!1),m=i(!1),p=i(0),L=i(10),g=i(0),T=async()=>{u.value=!0,p.value+=1,await b(),u.value=!1},b=async()=>{const t=await z({page:p.value,size:L.value,status:-1,type:2,refundStatus:99,tab:2});if(u.value=!1,!t.success){m.value=!0;return}if(!t.data||!t.total){m.value=!0;return}g.value=t.total,r.value=t.data.map(o=>{if(o.refundStatus===1){const f=new Date(o.systemTime).getTime(),y=new Date(o.autoRefundTime).getTime()-f;return{...o,cutDownTimestamp:y}}else return o}),d.value=p.value===1?r.value:d.value.concat(r.value),d.value.length>=g.value&&(m.value=!0)},N=t=>{C.push(t)};return R(()=>{T()}),(t,o)=>{const f=h("van-count-down"),k=h("VanList"),y=h("router-view");return s(),n("div",P,[l("div",U,[l("div",q,[_(O,{url:"profile"}),l("div",G,[l("div",null,a(t.$t("order.refund title")),1)])]),_(k,{loading:u.value,"onUpdate:loading":o[0]||(o[0]=e=>u.value=e),finished:m.value,"finished-text":t.$t("common.noMore"),"loading-text":t.$t("common.loading"),onLoad:T},{default:v(()=>[(s(!0),n(x,null,F(d.value,e=>(s(),w(M,{payType:e.payType,key:e.id,"fm-stored-card":e.fmStoredCard,onClick:c=>N(`/refundDetail?id=${e.id}`),isList:!0,order:e},{default:v(()=>[l("div",H,[l("span",J,a($(A)(e.refundStatus,e.payType)),1),[1,2,3,14].includes(+e.refundStatus)?(s(),n("span",K)):S("",!0),e.refundStatus===1?(s(),n("span",Q,[e.payType!==$(E).STORE_CARD?(s(),n("span",j,[e.cutDownTimestamp>0?(s(),w(f,{key:0,time:e.cutDownTimestamp},{default:v(c=>[I(a(t.$t("common.shop will",{time:c.days+t.$t("common.days")+c.hours+t.$t("common.hours")+c.minutes+t.$t("common.minutes")+c.seconds+t.$t("common.seconds")})),1)]),_:2},1032,["time"])):(s(),n("span",W,a(t.$t("refund.not delivered the goods")),1))])):(s(),n("span",X,a(t.$t("order.status4")),1))])):e.refundStatus===2?(s(),n("span",Y,a(t.$t("refund.refundbeingconfirmed")),1)):e.refundStatus===3?(s(),n("span",Z,a(t.$t("refund.refund success tips"))+" "+a(e.totalAmount)+" "+a(+e.payType==2?e.fmStoredCard&&e.fmStoredCard.symbol:"MCOIN"),1)):e.refundStatus===14?(s(),n("span",ee,a(t.$t("refund.User forced liquidation"))+" "+a(e.totalAmount)+" "+a(+e.payType==2?e.fmStoredCard&&e.fmStoredCard.symbol:"MCOIN"),1)):S("",!0)])]),_:2},1032,["payType","fm-stored-card","onClick","order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_(y,{class:"child-view"})])}}}),pe=B(te,[["__scopeId","data-v-49f9340e"]]);export{pe as default};
