import{z,a2 as oe,F as x,G as w,H as y,I as t,P as v,O as o,$ as S,J as R,K,N as le,a4 as T,Z as H,U as J,Q as l,a0 as ce,_ as ie,x as re,r as k,y as I,bl as de,E as ue,T as pe,X as me,Y as _e,n as ye}from"./vendor-Dr_RpJ_Y.js";import{z as fe,A as ge,b_ as he,F as d,H as $,I as B,J as M,K as D,L as V,w as be,g as A,G as ve,j as xe,e as U,bZ as j}from"./index-LRhcxFAI.js";import{_ as we}from"./LinkAddress-DPINngbD.js";import{n as Fe}from"./nftContract-DBLyyiOi.js";const ke=""+new URL("../images/tip-icon-BgBW1BFB.svg",import.meta.url).href,Ce=""+new URL("../images/lang-Koz5IXIg.svg",import.meta.url).href,Ee={id:"lan",class:"text-black"},Le=t("img",{class:"w-8 h-8",src:Ce,alt:""},null,-1),$e=[Le],Be={class:"w-[150px] mt-20 ml-auto bg-[#f9f9f9] rounded-xl box-1 px-4"},Me=["onClick"],De=z({setup(i){const{langs:r,currentLocale:p,changeLocale:C}=fe(),[f,F]=oe(!1),E=a=>{ge(a),C(a),F(!1)};return(a,s)=>{const g=x("van-icon"),e=x("VanPopup");return y(),w("div",Ee,[t("div",{onClick:s[0]||(s[0]=c=>o(F)(!o(f)))},$e),v(e,{show:o(f),"onUpdate:show":s[1]||(s[1]=c=>ce(f)?f.value=c:null),position:"top",style:{background:"transparent",width:"80%","min-width":"300px","max-width":"335px"}},{default:S(()=>[t("div",Be,[(y(!0),w(R,null,K(o(r),c=>(y(),w("div",{key:c.key,class:le(["font-Silom py-1 leading-10 border-b border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":o(p)===c.key}]),onClick:L=>E(c.key)},[T(l(c.text)+" ",1),o(p)===c.key?(y(),H(g,{key:0,name:"success",alt:""})):J("",!0)],10,Me))),128))])]),_:1},8,["show"])])}}}),Ve=()=>{const i=he(),r=i==null?void 0:i.cns,p=i==null?void 0:i.address;return{buy:async a=>{try{const s=await r.estimateGas.buy(d(a)),e=await(await r.buy(d(a),{gasLimit:B(s,1e3),...$})).wait();return M(e)}catch(s){return D(s),V(s,p,"buy",{coin:d(a)})}},donate:async a=>{try{const s=await r.estimateGas.donate(d(a)),e=await(await r.donate(d(a),{gasLimit:B(s,1e3),...$})).wait();return M(e)}catch(s){return D(s),V(s,p,"donate",{amount:d(a)})}},sell:async a=>{try{const s=await r.estimateGas.sell(d(a)),e=await(await r.sell(d(a),{gasLimit:B(s,1e3),...$})).wait();return M(e)}catch(s){return D(s),V(s,p,"sell",{coin:d(a)})}},reduceCoin:async a=>{try{const s=await r.estimateGas.reduceCoin(d(a)),e=await(await r.reduceCoin(d(a),{gasLimit:B(s,1e3),...$})).wait();return M(e)}catch(s){return D(s),V(s,p,"reduceCoin",{coin:d(a)})}}}},Se=i=>(me("data-v-8f0ba03e"),i=i(),_e(),i),Ie={class:"w-full h-full container-bg"},Te={class:"sticky top-0 z-10 flex items-center justify-between px-3 pt-3 mb-6 text-lg text-white"},Pe={class:"text-xl font-semibold text-[#2E2008]"},Ge={class:"flex"},Ne={class:"px-3"},Ae={class:"px-3 pt-3 rounded-xl bg-[#FFFDF8]"},Ue={class:"rounded-md bg-[#FFF8EC] px-4 pt-5"},je={class:"text-shadow mb-7"},ze={class:"flex justify-between mb-5"},Re={class:"text-sm font-semibold"},Ke={class:"text-[#928D84]"},He={class:"flex justify-between pb-6"},Je={class:"text-sm font-semibold"},We={class:"text-[#928D84]"},Xe={class:"px-4 pt-5"},Ze={class:"flex justify-between mb-5"},Oe={class:"text-sm font-semibold"},Qe={class:"text-[#928D84]"},Ye={class:"flex justify-between pb-5"},qe={class:"text-sm font-semibold"},et={class:"text-[#928D84]"},tt={class:"rounded-xl bg-[#FFFDF8] px-3 mt-5"},st={class:"text-[#2E2008] text-sm font-semibold mt-5"},at={class:"mt-4 px-4 py-5 bg-[#FFF8EC] rounded-xl"},nt={class:"py-5 text-center"},ot={key:0,class:"flex justify-center text-xs text-[#483535] pb-5"},lt=Se(()=>t("img",{class:"w-4 h-4",src:ke,alt:""},null,-1)),ct=z({setup(i){const{coinPool:r,tokenPrice:p,tokenPool:C,payToken:f,userList:F}=Fe(),{buy:E,donate:a,sell:s,reduceCoin:g}=Ve(),{t:e}=re(),{loadingToggle:c}=be(),L=k("0"),u=k(null),P=k("0"),G=k("0"),b=k(1),W=I(()=>({1:e("common.buy"),2:e("admin.sell"),3:e("nft.donate energy"),4:e("nft.donate MC")})),X=I(()=>m.systemMc*.8/+L.value||0),Z=I(()=>[{label:e("nft.purchase energy"),type:1,coin:null,title:e("admin.purchase-energy-input"),placeholder:e("admin.purchase-energy-placeholder",{num:parseFloat(X.value.toFixed(2))})},{label:e("nft.sell energy"),type:2,coin:null,title:e("admin.sell-energy-input"),placeholder:e("admin.sell-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate energy"),type:3,coin:null,title:e("admin.donate-energy-input"),placeholder:e("admin.donate-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate MC"),type:4,coin:null,title:e("admin.donate-MC-input"),placeholder:e("admin.donate-MC-placeholder",{num:parseFloat(m.systemMc.toFixed(2))})}]),m=de({systemEnergy:0,systemMc:0}),O=async()=>{c(!0);let n;if(u.value&&u.value>0)switch(b.value){case 1:n=await E(u.value);break;case 2:n=await s(u.value);break;case 3:n=await g(u.value);break;case 4:n=await a(u.value);break}else return;c(!1),n.success&&(pe(e("admin.Successful-operation")),N())},Q=n=>{ye(()=>{u.value=n>=0?n:0})},Y=async()=>{const{success:n,result:_}=await F(0,A.gold);n&&(m.systemEnergy=+ve(_.coin))},q=async()=>{const{balanceOf:n}=xe(await f()),_=await n(A.gold);m.systemMc=+_},N=async()=>{u.value=null,c(!0),L.value=await p(),P.value=await r(),G.value=await C(),Y(),q(),c(!1)};return ue(async()=>{N()}),(n,_)=>{const ee=x("van-field"),te=x("van-tab"),se=x("van-tabs"),ae=x("VanButton");return y(),w("div",Ie,[t("div",Te,[t("div",Pe,l(o(e)("admin.title")),1),t("div",Ge,[v(De,{class:"mr-2.5"}),v(we)])]),t("div",Ne,[t("div",Ae,[t("div",Ue,[t("div",je,l(o(U)(L.value||0))+" MC",1),t("div",ze,[t("span",Re,l(n.$t("nft.Total Supply")),1),t("span",Ke,l(o(j)(o(U)(P.value,6))),1)]),t("div",He,[t("span",Je,l(n.$t("nft.Pool Balance")),1),t("span",We,l(o(j)(+G.value))+" Â Mcoin",1)])]),t("div",Xe,[t("div",Ze,[t("span",Oe,l(n.$t("nft.system energy value")),1),t("span",Qe,l(parseFloat(o(m).systemEnergy.toFixed(2))),1)]),t("div",Ye,[t("span",qe,l(n.$t("nft.system mc balance")),1),t("span",et,l(parseFloat(o(m).systemMc.toFixed(2))),1)])])]),t("div",tt,[v(se,{active:b.value,"onUpdate:active":_[1]||(_[1]=h=>b.value=h),"title-active-color":"#2E2008","title-inactive-color":"#ADA9A2","line-width":"3.6rem",background:"#FFFDF8",ellipsis:!1,swipeable:""},{default:S(()=>[(y(!0),w(R,null,K(o(Z),h=>(y(),H(te,{"title-style":"font-weight: 600",title:h.label,name:h.type,key:h.label},{default:S(()=>[t("div",st,l(h.title),1),t("div",at,[v(ee,{"onUpdate:modelValue":[Q,_[0]||(_[0]=ne=>u.value=ne)],modelValue:u.value,type:"number",min:0,placeholder:h.placeholder,style:{"background-color":"#fff8ec"}},null,8,["modelValue","placeholder"])])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"]),t("div",nt,[v(ae,{disabled:!u.value,class:"w-1/2 font-semibold text-white btn-bg rounded-xl",onClick:O},{default:S(()=>[T(l(o(W)[b.value]||o(e)("common.buy")),1)]),_:1},8,["disabled"])]),b.value==1||b.value==2?(y(),w("div",ot,[lt,T(" "+l(n.$t("nft.Executededuction")),1)])):J("",!0)])])])}}}),pt=ie(ct,[["__scopeId","data-v-8f0ba03e"]]);export{pt as default};
