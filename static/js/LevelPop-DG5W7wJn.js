import{_ as le,z as K,y as k,F as x,Z as r,H as o,$ as f,I as e,P as _,a4 as S,Q as n,O as t,bs as he,a0 as ie,X as ce,Y as ue,r as p,a2 as M,D as de,E as re,G as i,n as xe,x as we,U as oe,N as ne,J as ge,T as ye}from"./vendor-Dr_RpJ_Y.js";import{u as $e,a2 as ee,f as te,h as ke,a as pe,l as Ce,q as Ve,e as J,g as Z,c as me,k as ae,a3 as Le}from"./index-CU2nzZe6.js";import{l as Be,u as Pe}from"./level-ClFCeKwe.js";const je="/static/images/invite_pop-DaLtpu1W.png",Ie=a=>(ce("data-v-865ecc06"),a=a(),ue(),a),Me={class:"text-b6 border-[0.5px] border-b6 rounded-full w-8 h-8 flex items-center justify-center ml-auto mr-1"},Se={class:"w-[335px] h-[452px] relative font-Puhui"},Fe=Ie(()=>e("img",{src:je,class:"w-full h-full absolute top-0 left-0"},null,-1)),Te={class:"p-2.5 pt-[83px] relative"},Ae={class:"bg-b6 rounded-[20px] mt-4 py-4 px-[26px]"},ze={class:"text-default opacity-60 mt-2 text-center text-xs"},Ne={class:"font-semibold"},Oe=K({props:{show:{type:Boolean}},emits:["close"],setup(a,{emit:u}){const{show:w}=a,{getCurrentAccount:C}=$e(),g=k(()=>window.location.origin+"/#/home?invite="+C());return(y,d)=>{const F=x("van-icon"),$=x("VanButton"),m=x("VanPopup");return o(),r(m,{show:a.show,"onUpdate:show":d[2]||(d[2]=h=>ie(w)?w.value=h:null),style:{background:"transparent"},onClickOverlay:d[3]||(d[3]=()=>u("close")),class:"invite-pop"},{default:f(()=>[e("div",{onClick:d[0]||(d[0]=h=>u("close"))},[e("div",Me,[_(F,{name:"cross",size:"20"})])]),e("div",Se,[Fe,e("div",Te,[_(ee,null,{default:f(()=>[S(n(y.$t("home.inviteRegister")),1)]),_:1}),e("div",Ae,[_(he,{value:t(g),size:180,level:"H",class:"mx-auto"},null,8,["value"]),e("div",ze,[e("span",Ne,n(y.$t("home.inviteLink")),1),e("span",null,n(t(te)(t(g),"...",15,4)),1)]),_($,{class:"btn-yellow w-full h-[46px] rounded-full text-b1 font-semibold text-base mt-6",onClick:d[1]||(d[1]=h=>t(ke)(t(g)))},{default:f(()=>[S(n(y.$t("home.copy_invite_url")),1)]),_:1})])])])]),_:1},8,["show"])}}}),qt=le(Oe,[["__scopeId","data-v-865ecc06"]]),De="/static/images/level_tip-F88vD8MD.svg",ve="/static/images/yes-CRT7BetE.svg",fe="/static/images/no-0V3kjjck.svg",Ue="/static/images/level_open-DzJFNE4Q.png",be=a=>(ce("data-v-49604687"),a=a(),ue(),a),Re={class:"w-[335px] h-[356px] relative font-Puhui"},Ee=be(()=>e("img",{src:Ue,class:"w-full h-full absolute top-0 left-0"},null,-1)),Qe={class:"p-2.5 pb-0 pt-[104px] relative"},qe={class:"bg-b6 rounded-[20px] mt-[15px] p-4"},He={class:"h-auto"},Je={class:"w-[255px] text-base flex items-center justify-between mx-auto mb-4"},We={class:"text-b3 font-normal"},Ge={key:1,class:"text-b1 font-semibold"},Xe={class:"w-[255px] text-base flex items-center justify-between mx-auto"},Ye=be(()=>e("div",{class:"text-b3 font-normal"},"MCOIN",-1)),Ze={key:1,class:"text-b1 font-semibold"},Ke={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},et={class:"text-b3 font-normal"},tt={key:1,class:"text-b1 font-semibold"},st={key:0,class:"flex items-center justify-center mt-6"},ot={class:"whitespace-nowrap"},nt={key:1,class:"flex items-center justify-center mt-6"},at={class:"whitespace-nowrap"},lt={key:0},it={key:1},ct=K({props:{openFee:null,buyMember:null},emits:["close","openVipSuccess","addParent"],setup(a,{emit:u}){const w=a,{accountStore:C}=pe(),g=Ce(),{pointBalances:y,findParents:d}=me(),{getOneBalance:F}=Ve(),$=p(""),m=p(!0),h=p(""),[Q,T]=M(!0),v=k(()=>+$.value+ +h.value),A=p(0),[V,b]=M(!1),[L,B]=M(!1),z=k(()=>A.value>=w.openFee);de(()=>C.registerPopVisible,()=>{setTimeout(()=>{R()},1e3)},{immediate:!1,deep:!0});const q=async()=>{B(!0);const c=await(await g).allowance(Z.flashMall);B(!1),A.value=c.result},N=async()=>{Z.MCOIN&&($.value=await F("MCOIN"),m.value=!1)},W=async()=>{h.value=await y(),T(!1)},O=p(!1),D=p(""),[U,H]=M(!0),R=async()=>{console.log("getParent"),H(!0);const c=await d();H(!1),c.success&&c.result?(D.value=c.result||"",O.value=!0):O.value=!1},G=async()=>{B(!0),(await(await g).approve(Z.flashMall)).success&&await q(),B(!1)},P=async()=>{b(!0);const c=await w.buyMember();b(!1),c.success&&u("openVipSuccess")},j=()=>{xe(()=>{C.openRegisterPop()})},X=()=>{N(),W(),q(),R()};return re(()=>{X()}),(c,s)=>{const l=x("VanLoading"),E=x("VanButton");return o(),i("div",Re,[Ee,e("div",Qe,[_(ee,null,{default:f(()=>[S(n(c.$t("home.openVip")),1)]),_:1}),e("div",qe,[e("div",He,[e("div",Je,[e("div",We,n(c.$t("assets.myParent")),1),t(U)?(o(),r(l,{key:0,size:"20"})):(o(),i("div",Ge,n(t(te)(D.value,"...",4,4)||"-"),1))]),e("div",Xe,[Ye,m.value?(o(),r(l,{key:0,size:"14"})):(o(),i("div",Ze,n(t(J)($.value,3)),1))]),e("div",Ke,[e("div",et,n(c.$t("assets.canWithdraw")),1),t(Q)?(o(),r(l,{key:0,size:"14"})):(o(),i("div",tt,n(t(J)(h.value,3)),1))])]),O.value?(o(),i("div",st,[t(z)?(o(),r(E,{key:0,class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",loading:t(V),disabled:+t(v)<+a.openFee,onClick:P},{default:f(()=>[e("span",ot,n(c.$t("home.toOpenVip",{fee:a.openFee||"-"})),1)]),_:1},8,["loading","disabled"])):(o(),r(E,{key:1,class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",loading:t(L),disabled:t(z),onClick:G},{default:f(()=>[S(n(c.$t("assets.auth")),1)]),_:1},8,["loading","disabled"]))])):(o(),i("div",nt,[_(E,{class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",onClick:j},{default:f(()=>[e("span",at,[t(U)?(o(),i("span",lt,[_(l,{size:"14"})])):(o(),i("span",it," 请添加邀请人 "))])]),_:1})]))])])])}}}),ut=le(ct,[["__scopeId","data-v-49604687"]]),dt={class:"text-b6 border-[0.5px] border-b6 rounded-full w-8 h-8 flex items-center justify-center ml-auto mr-1 -mb-2"},rt=["src"],pt={class:"p-2.5 pt-[95px] relative"},mt={class:"mx-[5px]"},vt=e("img",{class:"w-4 h-4",src:De,alt:""},null,-1),ft={class:"bg-b6 rounded-[20px] mt-[15px] p-4 min-h-[162px]"},bt={class:"w-[255px] text-base flex items-center justify-between mx-auto mb-4"},_t={class:"text-b3 font-normal"},ht={key:1,class:"text-b1 font-semibold"},xt={class:"w-[255px] text-base flex items-center justify-between mx-auto"},wt={class:"text-b3 font-normal"},gt={key:1,class:"text-b1 font-semibold"},yt={key:0,class:"w-[255px] overflow-x-hidden text-base flex items-center justify-between mx-auto mt-4"},$t={class:"text-b3 font-normal min-w-fit flex-1"},kt={class:"text-b1 font-semibold min-w-fit overflow-x-auto"},Ct={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Vt={class:"text-b3 font-normal"},Lt={key:1,class:"text-b1 font-semibold"},Bt={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Pt={class:"text-b3 font-normal"},jt={class:"text-b1 font-semibold"},It={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Mt={class:"text-b3 font-normal"},St={class:"text-b1 font-semibold w-5 min-w-fit"},Ft={key:0,src:ve,class:"w-5 h-5 object-cover",alt:""},Tt={key:1,src:fe,class:"w-5 h-5 object-cover",alt:""},At={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},zt={class:"text-b3 font-normal"},Nt={class:"text-b1 font-semibold min-w-fit w-5"},Ot={key:0,src:ve,class:"w-5 h-5 object-cover",alt:""},Dt={key:1,src:fe,class:"w-5 h-5 object-cover",alt:""},Ut={class:"px-[11px] mt-4 flex justify-center items-center gap-3"},Ht=K({props:{show:{type:Boolean},userInfo:null,userInfoLoading:{type:Boolean}},emits:["close","invite","handleTo","openVipSuccess"],setup(a,{emit:u}){const w=a,{t:C}=we(),{members:g,memberPrice:y,buyMember:d,memberLevels:F,findParents:$}=me(),{contributesStore:m}=pe(),[h,Q]=M(!1),T=p(!1),v=p(0),A=p(0),V=p([]),b=k(()=>P.value?null:V.value[v.value-1]?V.value[v.value-1]:null),L=p({address:"",agentAmount:.001,majorAmount:.002}),B=k(()=>{var s,l;return!P.value&&b.value&&+m.contributes>=+((s=b.value)==null?void 0:s.one)&&+w.userInfo.totalContribute>=+((l=b.value)==null?void 0:l.two)}),z=async()=>{T.value=await g(),T.value||q()},q=async()=>{A.value=+await y()},N=async()=>{v.value=await F()},W=async()=>{const s=await Be();!s.success||!s.data||(V.value=s.data||[],O())},O=()=>{v.value<=0},D=async()=>{const s=await Pe();s.success&&(L.value=s.data)},U=p(""),[H,R]=M(!0),G=async()=>{R(!0);const s=await $();R(!1),s.success&&(U.value=s.result||"")},P=k(()=>{const s=V.value.length||8;return(v.value||0)>=s+1}),j=k(()=>P.value||+v.value<=0),X=async()=>{if(!L.value.address)return;Q(!0);const s=await Le(L.value.address,L.value.agentAmount.toString());Q(!1),s.success&&(ye(C("home.upgradeTips")),setTimeout(()=>{u("close")},1500))},c=()=>{z(),D(),N(),m.fetchContributes(),u("openVipSuccess")};return de(()=>w.show,s=>{s&&(N(),G())}),re(async()=>{z(),D(),await N(),W(),m.fetchContributes()}),(s,l)=>{const E=x("van-icon"),Y=x("VanLoading"),se=x("VanButton"),_e=x("VanPopup");return a.show?(o(),r(_e,{key:0,show:a.show,"onUpdate:show":l[4]||(l[4]=I=>ie(show)?show.value=I:null),round:"",onClose:l[5]||(l[5]=I=>u("close")),style:{"background-color":"transparent"}},{default:f(()=>[e("div",{onClick:l[0]||(l[0]=I=>u("close"))},[e("div",dt,[_(E,{name:"cross",size:"20"})])]),T.value?(o(),i("div",{key:0,class:ne(["w-[335px] font-Puhui relative",t(j)?"h-[340px]":"h-[454px]"])},[e("img",{src:t(j)?t(ae)("images/level/level_max.png"):t(ae)("images/level/level_bg.png"),class:"w-full h-full absolute top-0 left-0"},null,8,rt),e("div",pt,[_(ee,null,{default:f(()=>[e("div",{onClick:l[1]||(l[1]=I=>u("handleTo","/levelPointsDetail")),class:"justify-center flex items-center font-bold"},[e("span",null,n(s.$t("home.level")),1),e("span",mt,"V"+n(v.value||0),1),vt])]),_:1}),e("div",ft,[e("div",{class:ne(["overflow-y-auto",t(j)?"h-[100px]":"h-[215px]"])},[e("div",bt,[e("div",_t,n(s.$t("assets.myParent")),1),t(H)?(o(),r(Y,{key:0,size:"20"})):(o(),i("div",ht,n(t(te)(U.value,"...",4,4)||"-"),1))]),e("div",xt,[e("div",wt,n(s.$t("home.score")),1),t(m).loading?(o(),r(Y,{key:0,size:"20"})):(o(),i("div",gt,n(t(J)(t(m).contributes||0,3)),1))]),t(j)?(o(),i("div",yt,[e("div",$t,n(s.$t("home.nextLevel")),1),e("div",kt,n(t(P)?s.$t("home.level_max"):`V${+v.value+1}`),1)])):(o(),i(ge,{key:1},[e("div",Ct,[e("div",Vt,n(s.$t("home.deductScore")),1),a.userInfoLoading?(o(),r(Y,{key:0,size:"20"})):(o(),i("div",Lt,n(t(J)(a.userInfo.totalContribute||0,3)),1))]),e("div",Bt,[e("div",Pt,n(s.$t("home.nextLevel")),1),e("div",jt," V"+n((v.value||0)+1),1)]),e("div",It,[e("div",Mt,n(s.$t("home.keepScore",{num:t(b).one||0})),1),e("div",St,[(+t(m).contributes||0)>=+t(b).one?(o(),i("img",Ft)):(o(),i("img",Tt))])]),e("div",At,[e("div",zt,n(s.$t("home.deductScore",{num:t(b).two||0})),1),e("div",Nt,[(+a.userInfo.totalContribute||0)>=+t(b).two?(o(),i("img",Ot)):(o(),i("img",Dt))])])],64))],2),e("div",Ut,[t(B)?(o(),r(se,{key:0,class:"bg-b6 !border !border-solid !border-b4 text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px]",loading:t(h),onClick:X},{default:f(()=>[S(n(s.$t("home.upgrade")),1)]),_:1},8,["loading"])):oe("",!0),_(se,{class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",round:"",onClick:l[2]||(l[2]=I=>u("invite"))},{default:f(()=>[S(n(s.$t("home.inviteRegister")),1)]),_:1})])])])],2)):(o(),r(ut,{key:1,openFee:A.value,buyMember:t(d),onClose:l[3]||(l[3]=I=>u("close")),onOpenVipSuccess:c},null,8,["openFee","buyMember"]))]),_:1},8,["show"])):oe("",!0)}}});export{qt as I,Ue as _,je as a,Ht as b};
