import{_ as A}from"./member-CkdtKF8y.js";import{_ as X}from"./info-CcC__Mfc.js";import{_ as N,z as j,a2 as Y,x as K,r as x,E as W,F as p,G as c,H as d,P as h,$ as v,I as e,O as i,Q as s,a4 as y,a0 as Z,J as P,T as S,X as E,Y as U,U as I,a1 as F,a3 as B}from"./vendor-Dr_RpJ_Y.js";import{k as L,f as G,e as b,y as ee}from"./index-CU2nzZe6.js";import{v as te,b as se,q as oe}from"./ranking-TxwU5hfl.js";import{_ as ne}from"./auth-icon-Bx5iOxx7.js";const ae="/static/images/shop-icon-C9yiUs3N.png",g=t=>(E("data-v-7e509c92"),t=t(),U(),t),ie={class:"relative m-auto font-normal"},le=["src"],ce={class:"absolute bottom-[-10px] left-0 right-0 w-[40px] border-[1px] border-solid border-white flex-center bg-[#FAE89C] rounded-3xl mx-auto my-1"},de=g(()=>e("img",{src:A,class:"w-3 h-3"},null,-1)),re={class:"bg-linear px-7 -mt-[50px] pt-[70px] rounded-xl mx-auto text-center"},me={class:"max-h-[70vh] overflow-y-auto"},ue={class:"font-bold line-clamp-1"},he={class:"font-normal opacity-60"},fe=g(()=>e("img",{src:ae,class:"w-5 h-5 ml-2.5"},null,-1)),xe={class:"mb-5 flex-center"},ve={class:"opacity-60 font-normal mr-1.5"},ge={class:"gap-4 flex-center-bw"},ke={class:"bg-[#F4F4F4] rounded-lg text-center px-5 py-2.5 flex-1"},pe={class:"text-xs opacity-60 mb-1.5"},be={class:"text-lg font-bold"},ye={class:"bg-[#F4F4F4] rounded-lg text-center px-5 py-2.5 flex-1"},we=g(()=>e("div",{class:"text-xs opacity-60 mb-1.5"},"MAI",-1)),$e={class:"text-lg font-bold"},_e={class:"bg-[#F4F4F4] rounded-lg text-center px-5 py-2.5 flex-1 mt-3"},Ie=g(()=>e("div",{class:"text-xs opacity-60 mb-1.5"},"LP",-1)),Fe={class:"text-lg font-bold"},Te={key:0,class:"border-t border-solid border-[#f2f2f2] pt-5 mt-5"},Ce={class:"opacity-60"},Ve=g(()=>e("img",{class:"w-3 h-63",src:X},null,-1)),Re={key:1,class:"pt-6"},ze={class:"flex item-start"},Me={class:"flex-shrink-0 font-normal opacity-60"},Se=["innerHTML"],Be={class:"flex flex-col items-center justify-center px-3 pt-8 pb-2 text-black/80"},Le={class:"mb-6 text-base text-center"},Ae=j({props:{show:{type:Boolean},info:null,type:null},emits:["close","changeType","init","handleTo"],setup(t,{emit:r}){const f=t,[C,k]=Y(!1),{t:w}=K(),l=x(0),a=x(!1),m=()=>{r("close")},V=async()=>{if(!Number(l.value)){S({message:"请输入投票数",duration:2e3});return}a.value=!0;const{success:o}=await te({rankingId:f.info.id,ticketQuantity:l.value});a.value=!1,o&&(S({icon:L("images/sucess_icon.png"),duration:3e3,message:w("ranking.success")}),r("init"),r("close"))},$=x({}),H=async()=>{const{success:o,data:n}=await se({type:f.info.type});o&&($.value=n)},R=x(0),z=x(0),q=async()=>{const{success:o,data:n}=await oe({type:f.info.type});o&&(R.value=+n,z.value=Math.round(+n))},M=()=>{var o;(o=f.info)!=null&&o.shopId&&(r("handleTo",`/category?shopId=${f.info.shopId}&deliveryType=1`),m())},O=o=>{setTimeout(()=>{var n;(n=o==null?void 0:o.target)==null||n.scrollIntoView({block:"center",behavior:"smooth"})},400)};return W(()=>{H(),q()}),(o,n)=>{const Q=p("van-icon"),D=p("VanField"),_=p("VanButton"),J=p("VanPopup");return d(),c(P,null,[h(J,{"z-index":"999",show:t.show,"onUpdate:show":n[3]||(n[3]=u=>Z(show)?show.value=u:null),onClickOverlay:m,onClose:m,teleport:"body",round:"",class:"w-[90%] bg-transparent"},{default:v(()=>[e("div",ie,[h(Q,{name:"cross",onClick:m,class:"absolute z-20 text-lg font-bold top-12 right-3"}),e("div",{class:"relative w-[90px] mx-auto",onClick:M},[e("img",{src:t.info&&t.info.avatar&&t.info.avatar.split()[0]||i(L)("images/ranking/noPosition.png"),class:"border-[2px] border-solid border-white w-[90px] h-[90px] rounded-full object-cover z-50 mx-auto"},null,8,le),e("div",ce,[de,e("span",null,"V"+s(t.info.memberLevel),1)])]),e("div",re,[e("div",me,[e("div",{class:"flex items-center justify-center text-lg text-center",onClick:M},[e("span",ue,s(t.info.nickname),1),e("span",he," ("+s(i(G)(t.info.address,"",0,4))+")",1),fe]),e("div",xe,[e("div",ve,s(o.$t("ranking.hot"))+s(t.info.heat),1)]),e("div",ge,[e("div",ke,[e("div",pe,s(o.$t("common.credit")),1),e("div",be,s(i(b)(t.info.authorizeAddress?t.info.authorizeContribute:t.info.authorizeShop?0:t.info.contribute,0)),1)]),e("div",ye,[we,e("div",$e,s(i(b)(t.info.authorizeAddress?t.info.authorizeMai:t.info.authorizeShop?0:t.info.mai,0)),1)])]),e("div",_e,[Ie,e("div",Fe,s(i(b)(t.info.authorizeAddress?t.info.authorizeLp:t.info.authorizeShop?0:t.info.lp)),1)]),t.type?(d(),c("div",Re,[e("div",ze,[e("div",Me,s(o.$t("ranking.Good at")),1),e("div",{class:"break-words text-left whitespace-pre-line max-h-[28vh] overflow-auto",innerHTML:t.info.introduction},null,8,Se)]),h(_,{loading:a.value,class:"btn-linear rounded-3xl w-[130px] h-[36px] mb-6 mt-11",onClick:n[2]||(n[2]=u=>r("changeType"))},{default:v(()=>[y(s(o.$t("ranking.Give him a list")),1)]),_:1},8,["loading"])])):(d(),c("div",Te,[h(D,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=u=>l.value=u),type:"digit",min:0,max:99999999,disabled:l.value<0,class:"bg-[#F3F3F3] rounded-md w-full h-[50px] flex-center text-lg font-bold",placeholder:"0",onFocus:O},null,8,["modelValue","disabled"]),e("div",{onClick:n[1]||(n[1]=u=>i(k)(!0)),class:"flex items-center justify-center text-xs mt-1.5 mb-3.5"},[e("div",Ce,s(o.$t("ranking.Number of votes remaining"))+" "+s($.value.remTicket||0)+"（ "+s(o.$t("ranking.Refresh every 7 days"))+"） ",1),Ve]),h(_,{disabled:l.value>$.value.remTicket,loading:a.value,class:"btn-orange rounded-3xl w-[150px] h-[40px] text-white mb-3",onClick:V},{default:v(()=>[y(s(o.$t("ranking.Makealist")),1)]),_:1},8,["disabled","loading"])]))])])])]),_:1},8,["show"]),h(ee,{class:"font-normal text-[#000]/40",width:"90%",show:i(C),name:o.$t("ranking.Pledge instructions"),onClose:n[5]||(n[5]=u=>i(k)(!1))},{default:v(()=>[e("div",Be,[e("div",Le,s(o.$t("ranking.pledgeTips",{num:i(b)(R.value,1)||0,formatNum:z.value||0})),1),h(_,{class:"btn-orange text-white min-w-[120px] h-[40px]",onClick:n[4]||(n[4]=u=>i(k)(!1))},{default:v(()=>[y(s(o.$t("common.I_see")),1)]),_:1})])]),_:1},8,["show","name"])],64)}}}),rt=N(Ae,[["__scopeId","data-v-7e509c92"]]),T=t=>(E("data-v-2e907bc1"),t=t(),U(),t),Ne={key:1,class:"flex-start"},je={key:0,class:"w-[10%] mr-5 font-bold text-lg"},Pe={class:"flex-shrink-0 flex-start mr-1.5"},Ee=["src"],Ue={class:"flex-start mb-[2px] items-center"},Ge={class:"text-xs text-left line-clamp-1 max-w-[8rem]"},He={class:"text-sm opacity-40"},qe={class:"flex items-center mt-1"},Oe={class:"w-[30px] flex-center bg-[#FAE89C] rounded-3xl"},Qe=T(()=>e("img",{src:A,class:"w-2.5 h-2.5"},null,-1)),De={class:"text-xs"},Je={class:"flex items-center bg-[#FAE89C] rounded-xl py-[0.13rem] px-1.5"},Xe=T(()=>e("img",{src:ne,class:"inline-block w-2.5 h-2.5 mr-0.5"},null,-1)),Ye={class:"text-xxs text-default"},Ke={key:3,class:"w-[20%] flex flex-col items-end justify-center"},We={class:"text-xs flex-end"},Ze={class:"opacity-40 text-[0.625rem] mb-1 mr-1"},et=["onClick"],tt={key:0,class:"text-[0.625rem] opacity-40 mt-1.5 flex"},st=T(()=>e("div",{class:"w-[calc(10%+53px)]"},null,-1)),ot=j({props:{rankItem:null,index:null,showTip:{type:Boolean},noRank:{type:Boolean}},emits:["makeRanking","makeRankingInfo"],setup(t,{emit:r}){const{rankItem:f,index:C,showTip:k}=t,w=()=>{r("makeRanking")},l=a=>{r("makeRankingInfo",a)};return(a,m)=>(d(),c(P,null,[e("div",{class:"text-center flex-center-bw",onClick:l},[a.$slots.left?F(a.$slots,"left",{key:0},void 0,!0):(d(),c("div",Ne,[t.noRank?I("",!0):(d(),c("div",je,s((+t.rankItem.myRanking==0||t.rankItem.showFlag!==void 0&&t.rankItem.showFlag!=1?"-":t.rankItem.myRanking)||+t.index+4),1)),e("div",Pe,[e("img",{src:t.rankItem.logo||t.rankItem.avatar&&t.rankItem.avatar.split()[0],class:"w-[40px] h-[40px] mr-2 rounded-full object-cover"},null,8,Ee),e("div",null,[e("div",Ue,[e("span",Ge,s(t.rankItem.nickname),1),e("span",He," ("+s(i(G)(t.rankItem.address,"",0,4))+") ",1)]),e("div",qe,[e("div",Oe,[Qe,e("span",De,"v"+s(t.rankItem.memberLevel||0),1)]),t.rankItem.authorizeAddress?(d(),c("div",{key:0,onClick:m[0]||(m[0]=B(V=>l(99),["stop"])),class:"inline-block ml-1.5 flex-shrink-0"},[e("div",Je,[Xe,e("span",Ye,s(a.$t("ecology.authorized")),1)])])):I("",!0)])])])])),a.$slots.right?F(a.$slots,"right",{key:2},void 0,!0):(d(),c("div",Ke,[e("div",We,[e("span",Ze,s(a.$t("ranking.hot"))+s(t.rankItem.heat),1)]),e("div",{class:"btn-linear rounded-3xl w-[60px] py-1 text-xs",onClick:B(w,["stop"])},s(a.$t("ranking.Makealist")),9,et)]))]),t.showTip?(d(),c("div",tt,[st,y(" "+s(a.$t("ranking.shopRankingTips")),1)])):I("",!0),F(a.$slots,"bottom",{},void 0,!0)],64))}}),mt=N(ot,[["__scopeId","data-v-2e907bc1"]]);export{mt as I,rt as M};
