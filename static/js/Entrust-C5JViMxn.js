import{_ as T,z as j,r as o,o as z,y as G,G as u,H as i,I as t,P as y,Q as k,$ as R,F as q,X as A,Y as H,J,K,Z as M,O}from"./vendor-Dr_RpJ_Y.js";import{E as Q}from"./Item-BfyZwjC5.js";import{B as U}from"./BackIcon-CDrGaEPo.js";import{o as b}from"./OTCContract-DCoK5NsH.js";import{o as X}from"./OtcAgent-WX8C7zOx.js";import{a as Y,G as p,g as w}from"./index-CU2nzZe6.js";const l=d=>(A("data-v-79373992"),d=d(),H(),d),Z={class:"relative w-full h-full px-2.5 safe-bottom-page"},W={class:"sticky top-0 left-0 right-0 pt-3 bg-[#FFF1D9] z-10"},ee={class:"flex items-center justify-start mb-1"},te={class:"flex justify-between flex-1"},se={class:"flex-center"},oe={class:"mr-1"},ae={key:0},ne=l(()=>t("div",{class:"triangle-up mb-0.5"},null,-1)),ie=l(()=>t("div",{class:"triangle-down"},null,-1)),le=[ne,ie],ce={key:1},re=l(()=>t("div",{class:"triangle-up-black mb-0.5"},null,-1)),ue=l(()=>t("div",{class:"triangle-down"},null,-1)),de=[re,ue],ve={key:2},pe=l(()=>t("div",{class:"triangle-up mb-0.5"},null,-1)),_e=l(()=>t("div",{class:"triangle-down-black"},null,-1)),fe=[pe,_e],me=j({setup(d){const L=z(),{reloadStore:x}=Y(),{userPendingList:f,priceList:C}=b(),c=o(!1),m=o(!1),$=o(0),v=L.query.key,B=async()=>{P.value=0,s.value=0,c.value=!0,$.value+=1,await S(),await E(),c.value=!1},I=G(()=>s.value===1?n.value.filter(e=>e.type===1):s.value===2?n.value.filter(e=>e.type===2):n.value),F=o(20),h=o(0),S=async()=>{const e=await C(F.value);h.value=+p(e.result.buyPriceList[0])},g=o([]),n=o([]),E=async()=>{const e=v?await f(w[`otc${v}`]):await f();c.value=!1,m.value=!0,e.success&&(g.value=e.result.prices_,g.value.forEach(async(a,_)=>{n.value.push({type:+p(a)<=h.value?1:2,price:p(a),amount:p(e.result.sums_[_]),loading:!1}),n.value=n.value.reverse()}))},P=o(0),V=async e=>{e.loading=!0;const a=v?await X(w[`otc${v}`]).revoke(e.price):await b().revoke(e.price);e.loading=!1,a.success&&x.reload()},s=o(0),D=()=>{switch(s.value){case 0:s.value=1;break;case 1:s.value=2;break;case 2:s.value=0;break}};return(e,a)=>{const _=q("VanList");return i(),u("div",Z,[t("header",W,[t("div",ee,[y(U),t("div",te,[t("div",null,k(e.$t("common.current entrust")),1),t("div",se,[t("div",{class:"mr-3 flex-center",onClick:D},[t("div",oe,k(e.$t("common.direction")),1),s.value===0?(i(),u("div",ae,le)):s.value===1?(i(),u("div",ce,de)):(i(),u("div",ve,fe))])])])])]),y(_,{loading:c.value,"onUpdate:loading":a[0]||(a[0]=r=>c.value=r),finished:m.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:B},{default:R(()=>[(i(!0),u(J,null,K(O(I),(r,N)=>(i(),M(Q,{key:N,info:r,listType:1,onCancel:he=>V(r),btnLoading:r.loading},null,8,["info","onCancel","btnLoading"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])}}}),xe=T(me,[["__scopeId","data-v-79373992"]]);export{xe as default};
