import{_ as se,y as de,bd as ie,r as V,bc as k,x as re,D as ce,F as m,G as s,H as t,O as r,Q as i,P as a,E as A,N as Y,K as p,a2 as F,a0 as y,$ as me,T as I,Y as ye,Z as _e}from"./vendor-D6JO6WHW.js";import{_ as ve}from"./LinkAddress-C9mga4qi.js";import{p as xe}from"./piggyBank-B4bzeMdw.js";import{b as pe}from"./beiExtRewardContract-M7NPmlv1.js";import{bo as w,bp as f,a5 as b,aB as Fe,a6 as we}from"./index-koYZVdtr.js";const _=B=>(ye("data-v-5f770138"),B=B(),_e(),B),fe={class:"w-full h-full container-bg"},be={class:"flex items-center justify-between p-3 mb-2 text-lg text-white relative"},Me={class:"text-xl font-semibold text-[#2E2008]"},he={class:"flex fixed top-3 right-3 z-10"},Ee={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},Ae=_(()=>t("div",{class:"mb-2.5"},"兑换比例数值",-1)),Be={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},Re=_(()=>t("div",{class:"mb-2.5"},"当前分红数值",-1)),ge={class:"py-2 mb-2 text-lg font-bold bg-white text-primary"},Ce=y("设置"),Te={class:"text-xl font-semibold text-[#2E2008] px-3"},Ve={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},ke=_(()=>t("div",{class:"mb-2.5"},"每日分红数值",-1)),De={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},qe={class:"mt-2.5 text-center"},Se=_(()=>t("div",{class:"mb-2.5"},"每月分红数值",-1)),Ye={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},Ie={class:"van-cell van-field"},Qe=_(()=>t("div",{class:"van-cell__title van-field__label"},"下次月分红时间",-1)),Ue={class:"van-field__body"},Ne={key:0,class:"van-field__control"},$e={key:1,class:"text-[#c8c9cc]"},je={class:"text-xs text-gray-300 text-left mt-2.5"},ze=y(" 下次月度分红时间："),Le={key:0},Pe={key:1},Oe={class:"m-2.5 text-center"},Ge=_(()=>t("div",{class:"mb-2.5"},"每季分红数值（MC）",-1)),Je={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},Ke={class:"mt-2.5 text-center"},He=_(()=>t("div",{class:"mb-2.5"},"每季分红数值（MAI）",-1)),We={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},Ze={class:"van-cell van-field"},Xe=_(()=>t("div",{class:"van-cell__title van-field__label"},"下次季分红时间",-1)),et={class:"van-field__body"},tt={key:0,class:"van-field__control"},at={key:1,class:"text-[#c8c9cc]"},lt={class:"text-xs text-gray-300 text-left mt-2.5"},ut=y(" 下次季度分红时间："),nt={key:0},ot={key:1},st={class:"mt-2.5 text-center"},dt=_(()=>t("div",{class:"mb-2.5"},"每年分红数值（MC）",-1)),it={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},rt={class:"mt-2.5 text-center"},ct=_(()=>t("div",{class:"mb-2.5"},"每年分红数值（MAI）",-1)),mt={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},yt={class:"van-cell van-field"},_t=_(()=>t("div",{class:"van-cell__title van-field__label"},"下次年分红时间",-1)),vt={class:"van-field__body"},xt={key:0,class:"van-field__control"},pt={key:1,class:"text-[#c8c9cc]"},Ft={class:"text-xs text-gray-300 text-left mt-2.5"},wt=y(" 下次年度年分红时间： "),ft={key:0},bt={key:1},Mt=y("设置"),ht=de({setup(B){const{today:J,DAY:K,fmRateFees:Q,nextFloatAwardAmount:U,setNextFloatAwardAmount:H}=xe(),{rewardAmountView:W,setDailyRewardAmount:Z}=pe(),X=new Date,d=ie({rateFees:[0,0],currentFloatAmount:0,nextFloatAmount:null}),c=V({dailyRewardMc:null,monthlyRewardMc:null,quarterlyRewardMc:null,quarterlyRewardMai:null,yearlyRewardMc:null,yearlyRewardMai:null,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null}),l=V({dailyRewardMc:null,monthlyRewardMc:null,quarterlyRewardMc:null,quarterlyRewardMai:null,yearlyRewardMc:null,yearlyRewardMai:null,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null}),[D,R]=k(!1),q=V("nextMonthTime"),g=V(null),S=o=>{q.value=o,l.value[o]?g.value=new Date(l.value[o]*1e3):g.value=new Date,R(!0)},ee=o=>{o&&q.value&&(l.value[q.value]=Fe(we(o))),R(!1)},[te,N]=k(!1),ae=async()=>{N(!0);const o=await H(d.nextFloatAmount);N(!1),o.success&&(d.currentFloatAmount=d.nextFloatAmount,I.success("设置成功"),d.nextFloatAmount=null,d.currentFloatAmount=+await U())},[le,$]=k(!1),ue=re(()=>{var o,e,n,M,v,C,T,h,E;return((o=l.value)==null?void 0:o.dailyRewardMc)&&((e=l.value)==null?void 0:e.monthlyRewardMc)&&((n=l.value)==null?void 0:n.nextMonthTime)&&((M=l.value)==null?void 0:M.quarterlyRewardMc)&&((v=l.value)==null?void 0:v.quarterlyRewardMai)&&((C=l.value)==null?void 0:C.nextQuarterTime)&&((T=l.value)==null?void 0:T.yearlyRewardMc)&&((h=l.value)==null?void 0:h.yearlyRewardMai)&&((E=l.value)==null?void 0:E.nextYearTime)}),ne=async()=>{var e;$(!0);const o=await Z(l.value);if($(!1),!o.success){I(((e=o.result)==null?void 0:e.reason.split(":")[1].split(":")[0])||"操作失败");return}I.success("设置成功"),z()},[x,j]=k(!0),z=async()=>{j(!0);const{success:o,result:e}=await W();if(!o)return;j(!1);const n={dailyRewardMc:0,monthlyRewardMc:0,quarterlyRewardMc:0,quarterlyRewardMai:0,yearlyRewardMc:0,yearlyRewardMai:0,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null};n.dailyRewardMc=+w(e==null?void 0:e.dailyRewardMc),n.monthlyRewardMc=+w(e==null?void 0:e.monthlyRewardMc),n.quarterlyRewardMc=+w(e==null?void 0:e.quarterlyRewardMc),n.quarterlyRewardMai=+w(e==null?void 0:e.quarterlyRewardMai),n.yearlyRewardMc=+w(e==null?void 0:e.yearlyRewardMc),n.yearlyRewardMai=+w(e==null?void 0:e.yearlyRewardMai),n.nextMonthTime=+(e==null?void 0:e.nextMonthTime),n.nextQuarterTime=+(e==null?void 0:e.nextQuarterTime),n.nextYearTime=+(e==null?void 0:e.nextYearTime),c.value=n,l.value=JSON.parse(JSON.stringify(n))},oe=async()=>{const o=+await J(),e=+await K();d.rateFees[0]=+await Q(o),d.rateFees[1]=+await Q(o-e),d.currentFloatAmount=+await U(),z()};return ce(()=>{oe()}),(o,e)=>{var h,E,L,P,O,G;const n=A("van-field"),M=A("VanButton"),v=A("VanLoading"),C=A("van-datetime-picker"),T=A("van-popup");return s(),m("div",fe,[t("div",be,[t("div",Me,i(o.$t("piggy.Lightning Yu’E Bao")),1),t("div",he,[r(ve)])]),t("div",Ee,[Ae,r(n,{modelValue:a(d).rateFees[0],"onUpdate:modelValue":e[0]||(e[0]=u=>a(d).rateFees[0]=u),label:"今日",placeholder:"0",readonly:""},null,8,["modelValue"]),r(n,{modelValue:a(d).rateFees[1],"onUpdate:modelValue":e[1]||(e[1]=u=>a(d).rateFees[1]=u),label:"昨日",placeholder:"0",readonly:""},null,8,["modelValue"])]),t("div",Be,[Re,t("div",ge,i(a(d).currentFloatAmount),1),r(n,{modelValue:a(d).nextFloatAmount,"onUpdate:modelValue":e[2]||(e[2]=u=>a(d).nextFloatAmount=u),label:"修改为",placeholder:"请输入"},null,8,["modelValue"]),r(M,{loading:a(te),disabled:a(d).nextFloatAmount<=0,class:"btn-bg rounded-xl w-1/2 font-semibold text-white mt-2.5",onClick:ae},{default:Y(()=>[Ce]),_:1},8,["loading","disabled"])]),t("div",Te,i(o.$t("ecology.flash Mai bao")),1),t("div",Ve,[ke,t("div",De,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((h=c.value)==null?void 0:h.dailyRewardMc))+"MC ",1)]),r(n,{modelValue:l.value.dailyRewardMc,"onUpdate:modelValue":e[3]||(e[3]=u=>l.value.dailyRewardMc=u),label:"修改为",placeholder:"请输入",type:"number"},null,8,["modelValue"]),t("div",qe,[Se,t("div",Ye,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((E=c.value)==null?void 0:E.monthlyRewardMc))+"MC ",1)]),r(n,{modelValue:l.value.monthlyRewardMc,"onUpdate:modelValue":e[4]||(e[4]=u=>l.value.monthlyRewardMc=u),label:"修改为",placeholder:"请输入",type:"number"},null,8,["modelValue"]),t("div",Ie,[Qe,t("div",{class:"van-cell__value van-field__value",onClick:e[5]||(e[5]=u=>S("nextMonthTime"))},[t("div",Ue,[l.value.nextMonthTime?(s(),m("span",Ne,i(a(b)(l.value.nextMonthTime*1e3)),1)):(s(),m("span",$e,"请选择"))])])]),t("div",je,[ze,c.value.nextMonthTime?(s(),m("span",Le,i(a(b)(c.value.nextMonthTime*1e3)),1)):(s(),m("span",Pe,"-"))])]),t("div",null,[t("div",Oe,[Ge,t("div",Je,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((L=c.value)==null?void 0:L.quarterlyRewardMc))+"MC ",1)]),r(n,{modelValue:l.value.quarterlyRewardMc,"onUpdate:modelValue":e[6]||(e[6]=u=>l.value.quarterlyRewardMc=u),label:"修改为",placeholder:"请输入季度MC分红总量",type:"number"},null,8,["modelValue"])]),t("div",Ke,[He,t("div",We,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((P=c.value)==null?void 0:P.quarterlyRewardMai))+"MAI ",1)]),r(n,{modelValue:l.value.quarterlyRewardMai,"onUpdate:modelValue":e[7]||(e[7]=u=>l.value.quarterlyRewardMai=u),label:"修改为",placeholder:"请输入季度MAI分红总量",type:"number"},null,8,["modelValue"]),t("div",Ze,[Xe,t("div",{class:"van-cell__value van-field__value",onClick:e[8]||(e[8]=u=>S("nextQuarterTime"))},[t("div",et,[l.value.nextQuarterTime?(s(),m("span",tt,i(a(b)(l.value.nextQuarterTime*1e3)),1)):(s(),m("span",at,"请选择"))])])]),t("div",lt,[ut,c.value.nextQuarterTime?(s(),m("span",nt,i(a(b)(c.value.nextQuarterTime*1e3)),1)):(s(),m("span",ot,"-"))])])]),t("div",null,[t("div",st,[dt,t("div",it,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((O=c.value)==null?void 0:O.yearlyRewardMc))+"MC ",1)]),r(n,{modelValue:l.value.yearlyRewardMc,"onUpdate:modelValue":e[9]||(e[9]=u=>l.value.yearlyRewardMc=u),label:"修改为",placeholder:"请输入年度MC分红总量",type:"number"},null,8,["modelValue"])]),t("div",rt,[ct,t("div",mt,[a(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),y(" "+i(a(f)((G=c.value)==null?void 0:G.yearlyRewardMai))+"MAI ",1)]),r(n,{modelValue:l.value.yearlyRewardMai,"onUpdate:modelValue":e[10]||(e[10]=u=>l.value.yearlyRewardMai=u),label:"修改为",placeholder:"请输入年度MAI分红总量",type:"number"},null,8,["modelValue"]),t("div",yt,[_t,t("div",{class:"van-cell__value van-field__value",onClick:e[11]||(e[11]=u=>S("nextYearTime"))},[t("div",vt,[l.value.nextYearTime?(s(),m("span",xt,i(a(b)(l.value.nextYearTime*1e3)),1)):(s(),m("span",pt,"请选择"))])])]),t("div",Ft,[wt,c.value.nextYearTime?(s(),m("span",ft,i(a(b)(c.value.nextYearTime*1e3)),1)):(s(),m("span",bt,"-"))])])]),r(M,{loading:a(le),disabled:!a(ue),class:"btn-bg rounded-xl w-1/2 font-semibold text-white mt-2.5",onClick:ne},{default:Y(()=>[Mt]),_:1},8,["loading","disabled"])]),r(T,{show:a(D),"onUpdate:show":e[14]||(e[14]=u=>me(D)?D.value=u:null),position:"bottom",round:"",style:{height:"50%"},onClickOverlay:e[15]||(e[15]=u=>a(R)(!1)),teleport:"body"},{default:Y(()=>[r(C,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=u=>g.value=u),type:"date",title:"选择分红时间","min-date":a(X),onCancel:e[13]||(e[13]=u=>a(R)(!1)),onConfirm:ee},null,8,["modelValue","min-date"])]),_:1},8,["show"])])}}}),Ct=se(ht,[["__scopeId","data-v-5f770138"]]);export{Ct as default};
