import{y as $,r as o,D as k,a1 as w,F as v,G as c,O as f,H as p,Q as F,N as x,E as C,l as I,I as q,J as B,K as V,X as z}from"./vendor-CjApaIpB.js";import{_ as D}from"./GoodsEvaluateItem-Dt06xRXP.js";import{_ as G}from"./EvalHeader-C_PCVdjb.js";import{k as N}from"./order-C6QNLrKu.js";import"./index-lKIcPnY0.js";import"./BackIcon-D2Vm_lyR.js";const R={class:"px-2.5 font-normal"},E={class:"bg-white rounded-xl p-2.5 min-h-[calc(100%-44px)]"},M={class:"mb-2 pb-2 border-b border-solid border-[#F6F6F5]"},X=$({setup(O){const r=w(),g=I(),n=o(!1),l=o(!1),s=o([]),u=o(0),h=o(10),d=o(0),_=async()=>{var i,a;const e={page:u.value,size:h.value,goodsId:m.value,commentDefaultGoodFlag:1};+((i=r.query)==null?void 0:i.commentLevel)&&(e.commentLevel=(a=r.query)==null?void 0:a.commentLevel);const t=await N(e);if(!t.success){l.value=!0;return}if(!t.data||!t.total){l.value=!0;return}d.value=t.total,s.value=u.value===1?t.data:s.value.concat(t.data),s.value.length>=d.value&&(l.value=!0)},y=async()=>{n.value=!0,u.value+=1,await _(),setTimeout(()=>{n.value=!1},1e3)},L=e=>{g.push(e)},m=o(null);return k(()=>{m.value=r.query.goodsId}),(e,t)=>{const i=C("VanList");return c(),v("div",R,[f(G,{title:e.$t("evaluate.Folded Reviews")},null,8,["title"]),p("div",E,[p("div",M,F(e.$t("evaluate.reviews without content",{num:d.value||"-"})),1),f(i,{class:"mt-4",loading:n.value,"onUpdate:loading":t[0]||(t[0]=a=>n.value=a),finished:l.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:y},{default:x(()=>[(c(!0),v(q,null,B(s.value,(a,b)=>(c(),V(D,{style:z(b===s.value.length-1?"margin-bottom: 0.5rem":""),onClick:S=>L(`/evaluate-detail?goodOrderId=${a.id}`),data:a,key:a.id},null,8,["style","onClick","data"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])])}}});export{X as default};
