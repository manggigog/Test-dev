import{s as y}from"./index-DBW_ANsl.js";import{y as b,r as u,x as i,z as g,D as B,E as w,K as C,G as s,N as h,F as d,P as p,Q as v,a3 as A,R as x}from"./vendor-CjApaIpB.js";const N={key:0},$={key:1},S=b({props:{contract:null,token:null,fallBack:null,loading:{type:Boolean},symbol:null,approveAmount:null,disabled:{type:Boolean},classes:null},setup(e){const a=e,o=u(!1),t=u(0),n=i(()=>Number(t.value)>0&&Number(t.value)>=Number(a.approveAmount??0)||a.approveAmount<=0),c=i(()=>y(a.token)),l=async()=>{o.value=!0,t.value=+await(await c.value.allowance(a.contract)).result,o.value=!1},m=async()=>{o.value=!0,await c.value.approve(a.contract),await l()},k=()=>{n.value?a==null||a.fallBack():m()};return g(()=>a.token,()=>{l()}),B(()=>{l()}),(r,z)=>{const f=w("VanButton");return s(),C(f,{loading:e.loading||o.value,disabled:p(n)&&e.disabled,class:x(`${e.classes??"text-red-600 px-4 py-2 bg-gray3"}`),onClick:k},{default:h(()=>[p(n)?(s(),d("div",$,[A(r.$slots,"default")])):(s(),d("div",N,v(r.$t("common.approve"))+v(e.symbol??null),1))]),_:3},8,["loading","disabled","class"])}}});export{S as _};
