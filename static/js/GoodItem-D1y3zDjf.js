import{F as d,G as r,Q as n,r as g,H as t,a4 as h,O as x,P as p,y,x as $,E as C}from"./vendor-BUT0HZ5j.js";import{_ as v,a as w}from"./collect-CqBtZyCF.js";import{u as b}from"./useCityMap-SBIl8UZu.js";import{av as k,aw as F,ax as N,ay as j}from"./index-DDhEkd_5.js";import{_ as B}from"./MCOIN-BcbOHmhy.js";import{_ as E}from"./ImgBoutiqueLable-BF5Xoxsv.js";const D="/Test-dev/static/images/store-icon-6hi-LzbB.svg",S={class:"text-sm font-normal text-[#FF8812]"},A={props:{text:{type:String,default:"商家入驻"}},setup(s){return(o,m)=>(r(),d("span",S,n(s.text),1))}},L={class:"flex items-start justify-start"},V=t("div",null,[t("img",{src:D,class:"w-[22px] h-[22px] min-w-[22px] min-h-[22px]",alt:"店铺的图标"})],-1),G={class:"ml-2 w-full"},P={class:"flex items-center justify-between"},M={class:"line-clamp-1 text-base font-b1 font-semibold"},O={key:0,src:v,alt:"收藏",class:"w-5 h-5"},T={key:1,src:w,alt:"取消",class:"w-5 h-5"},z={class:"mt-1 flex items-center"},H={class:"text-sm text-b3 font-normal"},Q={class:"text-xs leading-[18px] text-b3 font-normal mt-1 line-clamp-1 w-full flex items-center justify-start"},q={class:"line-clamp-1"},J={class:"ml-auto whitespace-nowrap pl-1"},xt={props:{store:{type:Object,default:()=>({})}},setup(s){const o=s,{distanceFormat:m}=b(),l=g(!1),u=async()=>{var e,a;if(l.value||!((e=o.store)!=null&&e.storeId))return;o.store.collectId=9999,l.value=!0;const c=await F({storeId:(a=o.store)==null?void 0:a.storeId});l.value=!1,c.success&&(o.store.collectId=c.data)},_=async()=>{var e;if(l.value||!((e=o.store)!=null&&e.storeId))return;let c=o.store.collectId;o.store.collectId=null,l.value=!0,await k({ids:[c]}),l.value=!1};return(c,e)=>{var a,i,f;return r(),d("div",L,[V,t("div",G,[t("div",P,[t("span",M,n(((a=s.store)==null?void 0:a.storeName)||"--"),1),t("div",{onClick:e[0]||(e[0]=h(I=>s.store.collectId?_():u(),["stop"]))},[s.store.collectId?(r(),d("img",O)):(r(),d("img",T))])]),t("div",z,[t("div",H,n((i=s.store)==null?void 0:i.goodsCategoryName1)+" "+n(s.store.areaName3),1),x(A,{class:"ml-1"})]),t("div",Q,[t("span",q,n(((f=s.store)==null?void 0:f.storeAddress)||"--"),1),t("span",J,n(p(m)(s.store.distance)),1)])])])}}},K=["data-store-name"],R={class:"shrink-0 offline-goods-img__wrap w-[70px] h-[70px] overflow-hidden relative"},U={class:"offline-goods-info__wrap ml-2 flex-1 flex flex-col justify-between min-h-[70px]",style:{width:"calc(100% - 70px - 8px)"}},W={class:"w-full flex flex-col items-start"},X={class:"w-full flex justify-between items-center"},Y={class:"font-semibold text-[#2E2008] text-base line-clamp-1"},Z={key:0,src:v,alt:"收藏",class:"w-5 h-5"},tt={key:1,src:w,alt:"取消",class:"w-5 h-5"},st={class:"w-full mt-1"},et={class:"font-normal text-[#999] text-sm line-clamp-1"},ot={class:"mt-1 w-full flex items-center justify-between"},lt=t("div",{class:"font-normal text-[#999] text-sm"},"共1件，合计",-1),ct={class:"flex items-center justify-start font-Puhui"},at={class:"flex items-center"},nt=t("img",{src:B,class:"w-[17px] h-[17px] mr-1"},null,-1),it={class:"text-b1 font-semibold text-sm"},gt=y({props:{goods:{default:{}},store:{default:{}}},setup(s){const o=s,m=$(()=>{var e;return(((e=o.goods.goodsIcons)==null?void 0:e.split(","))||[""])[0]}),l=g(!1),u=async()=>{var e,a,i;if(l.value||!((e=o.goods)!=null&&e.goodsId))return;o.goods.collectId=9999,l.value=!0;const c=await N({goodsId:(a=o.goods)==null?void 0:a.goodsId,storeId:(i=o.store)==null?void 0:i.storeId});l.value=!1,c.success&&(o.goods.collectId=c.data)},_=async()=>{var e;if(l.value||!((e=o.goods)!=null&&e.goodsId))return;let c=o.goods.collectId;o.goods.collectId=null,l.value=!0,await j({ids:[c]}),l.value=!1};return(c,e)=>{var i,f;const a=C("VanImage");return r(),d("section",{class:"flex items-start","data-store-name":s.goods.shopName},[t("div",R,[x(a,{src:p(m),class:"offline-goods-img w-[70px] h-[70px] rounded-lg overflow-hidden",alt:"商品主图",fit:"cover"},null,8,["src"]),x(E,{type:s.goods.goodsType||null},null,8,["type"])]),t("div",U,[t("div",W,[t("div",X,[t("div",Y,n(s.goods.goodsName||""),1),t("div",{onClick:e[0]||(e[0]=h(I=>s.goods.collectId?_():u(),["stop"]))},[s.goods.collectId?(r(),d("img",Z)):(r(),d("img",tt))])]),t("div",st,[t("div",et,n(((i=s.store)==null?void 0:i.storeName)||"")+" "+n(((f=s.store)==null?void 0:f.areaName3)||""),1)]),t("div",ot,[lt,t("div",ct,[t("div",at,[nt,t("div",it,n(s.goods.goodsPrice),1)])])])])])],8,K)}}});export{xt as _,gt as a};
