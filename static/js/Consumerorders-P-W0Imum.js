import{_ as q}from"./USDT-CNsbs3BR.js";import{_ as A}from"./MCOIN-BOqZVkND.js";import{_ as M,y as B,l as F,a1 as Y,w as z,r as S,x as H,bd as T,D as J,E as $,K,G as u,N as f,O as p,H as a,P as t,F as y,J as Q,I as w,Q as c,Y as W,Z}from"./vendor-D6JO6WHW.js";import{C as j}from"./CommonVanProvider-CI5dtYow.js";import{_ as X}from"./OfflineGoods-Qjmomi_h.js";import{_ as ss}from"./OfflineStore-07wrZPej.js";import{B as es}from"./BetweenTab-BjlQ6F6h.js";import{e as os,d as x,V as ts,bc as as}from"./index-CybuWkSo.js";import{a as O,O as rs}from"./offlineGoods-Biq4pIIG.js";import{u as ns}from"./usePaymentBalance-PXEabphN.js";import{P as ls}from"./order-B5BGKYED.js";import"./BackIcon-CPUEW9je.js";import"./ImgBoutiqueLable-Dod52ZXF.js";import"./shop-CeqcS6K2.js";import"./piggyBank-C5mmVwwX.js";const m=_=>(W("data-v-b15602b4"),_=_(),Z(),_),ds=["src"],is={class:"text-b3"},cs={class:"mx-3 py-3 safe-body overflow-y-auto"},us=["onClick"],fs={class:"text-b3"},ps={class:"flex items-center font-semibold"},ms=m(()=>a("img",{src:q,class:"w-4 h-4 mr-1"},null,-1)),_s=m(()=>a("span",{class:"text-b3 ml-1"},"(",-1)),hs=m(()=>a("img",{src:A,class:"w-4 h-4 mr-1"},null,-1)),gs={class:"text-b1"},ys=m(()=>a("span",{class:"text-b3"},")",-1)),bs=m(()=>a("img",{src:A,class:"w-4 h-4 mr-1"},null,-1)),vs={class:"text-b1"},Cs=B({name:"ConsumerOrders"});function Is(_){const{regionStore:b,accountStore:n}=os(),P=F(),k=Y(),{t:h}=z(),E=S(null),L=H(()=>[{label:h("order.To be confirmed"),value:O.PAYMENT_SUCCESS},{label:h("order.canceled"),value:O.CANCELLED},{label:h("order.completed"),value:O.COMPLETED},{label:h("common.all"),value:-1}]),{getPaymentBySource:N}=ns(S(!0)),e=T({status:-1,shopInfo:null,list:[],total:0,loading:!1,finished:!1}),i=T({shopId:null,orderCustomerAddress:n==null?void 0:n.account,page:0,size:20,orderStatus:-1,sortBy:"desc|create_time"}),R=o=>{e.status=o,P.replace({path:"offlineConsumerorders",query:{status:o}}),D()},V=o=>{var r;return(r=L.value.find(l=>+l.value==+o))==null?void 0:r.label},v=o=>{P.push(o)},D=async()=>{e.finished=!1,e.total=0,e.list=[],i.page=0,C()},C=async()=>{if(!(n!=null&&n.sign.address))return e.finished=!0;e.loading=!0,i.orderCustomerAddress=n==null?void 0:n.sign.address,i.page+=1,await G(),e.loading=!1},G=async()=>{e.status<0?delete i.orderStatus:i.orderStatus=e.status;const{success:o,data:r}=await as(i);if(e.loading=!1,!o){e.finished=!0;return}const{records:l,total:g,current:s,pages:d}=r;if(!g||!l||!(l!=null&&l.length)){e.finished=!0;return}e.total=g;const I=S([]);I.value=l.map(U=>({btnLoading:!1,...U})),e.list=i.page===1?I.value:e.list.concat(I.value),+s>=+d&&(e.finished=!0)};return J(async()=>{var o,r;(o=k.query)!=null&&o.status&&(e.status=Number((r=k.query)==null?void 0:r.status)),C()}),(o,r)=>{const l=$("VanList"),g=$("router-view");return u(),K(j,{title:o.$t("offline.main title"),class:"bg-gray1 font-Puhui font-normal relative shopGoodsPage","theme-vars":{"field-placeholder-text-color":"#A6A6A6"},ref:(s,d)=>{d.shopGoodsRef=s,E.value=s}},{right:f(()=>[a("img",{src:t(ts)(`mall/${t(b).country}-flag.svg`),class:"w-5 h-auto mr-1"},null,8,ds),a("span",is,c(o.$t(`country.${t(b).country}`))+c(t(b).country),1)]),default:f(()=>[p(es,{options:t(L),"label-key":"label","value-key":"value",modelValue:t(e).status,"onUpdate:modelValue":r[0]||(r[0]=s=>t(e).status=s),onChange:R},null,8,["options","modelValue"]),a("div",cs,[p(l,{loading:t(e).loading,"onUpdate:loading":r[1]||(r[1]=s=>t(e).loading=s),finished:t(e).finished,"immediate-check":!1,"finished-text":o.$t("common.noMore"),"loading-text":o.$t("common.loading"),onLoad:C},{default:f(()=>[(u(!0),y(w,null,Q(t(e).list,s=>(u(),y("div",{class:"offline-crad-box mb-3",key:s.orderId,onClick:d=>v(`/offlineConsumerDetail?id=${s.orderId}`)},[p(ss,{store:{images:s.shopPics,name:s.shopName},showOrderStatus:"",status:V(s.orderStatus)},null,8,["store","status"]),p(X,{"show-order-type":"",class:"mt-3",goods:{goodsName:s.relName,goodsIcons:s.relIcons,orderType:s.orderType},onImageClick:d=>s.orderType===t(rs).GOODS?v("/offlineConsumerorders/offlineGoodsDetail?goodsId="+s.relId):v("/shop?shopId="+s.relId)},{"bottom-left":f(()=>{var d;return[a("div",fs,c(o.$t((d=t(N)(s.orderPaySource))==null?void 0:d.name)),1)]}),"bottom-price":f(()=>[a("div",ps,[s.orderPaySource===t(ls).USDT_WALLET?(u(),y(w,{key:0},[ms,a("span",null,c(t(x)(s==null?void 0:s.orderRealUsdt)),1),_s,hs,a("span",gs,c(t(x)(s==null?void 0:s.orderRealAmount)),1),ys],64)):(u(),y(w,{key:1},[bs,a("span",vs,c(t(x)(s==null?void 0:s.orderRealAmount)),1)],64))])]),_:2},1032,["goods","onImageClick"])],8,us))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),p(g,{class:"child-view bg-gray1"})]),_:1},8,["title"])}}const Ss=B({...Cs,setup:Is}),Gs=M(Ss,[["__scopeId","data-v-b15602b4"]]);export{Gs as default};
