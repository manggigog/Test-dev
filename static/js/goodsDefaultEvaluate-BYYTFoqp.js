import{z as b,r as a,E as w,o as F,G as v,H as c,P as f,I as p,Q as k,$ as x,F as C,q,J as I,K as V,Z as z,V as B}from"./vendor-Dr_RpJ_Y.js";import{_ as G}from"./GoodsEvaluateItem-CRrPUtUS.js";import{_ as R}from"./EvalHeader-BnKRlnel.js";import{l as D}from"./order-BTAcEDew.js";import"./index-BckdT6oc.js";import"./BackIcon-CDrGaEPo.js";const E={class:"px-2.5 font-normal"},M={class:"bg-white rounded-xl p-2.5 min-h-[calc(100%-44px)]"},N={class:"mb-2 pb-2 border-b border-solid border-[#F6F6F5]"},U=b({setup(S){const r=F(),g=q(),n=a(!1),l=a(!1),s=a([]),u=a(0),h=a(10),d=a(0),_=async()=>{var i,o;const e={page:u.value,size:h.value,goodsId:m.value,commentDefaultGoodFlag:1};+((i=r.query)==null?void 0:i.commentLevel)&&(e.commentLevel=(o=r.query)==null?void 0:o.commentLevel);const t=await D(e);if(!t.success){l.value=!0;return}if(!t.data||!t.total){l.value=!0;return}d.value=t.total,s.value=u.value===1?t.data:s.value.concat(t.data),s.value.length>=d.value&&(l.value=!0)},y=async()=>{n.value=!0,u.value+=1,await _(),setTimeout(()=>{n.value=!1},1e3)},L=e=>{g.push(e)},m=a(null);return w(()=>{m.value=r.query.goodsId}),(e,t)=>{const i=C("VanList");return c(),v("div",E,[f(R,{title:e.$t("evaluate.Folded Reviews")},null,8,["title"]),p("div",M,[p("div",N,k(e.$t("evaluate.reviews without content",{num:d.value||"-"})),1),f(i,{class:"mt-4",loading:n.value,"onUpdate:loading":t[0]||(t[0]=o=>n.value=o),finished:l.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:y},{default:x(()=>[(c(!0),v(I,null,V(s.value,(o,$)=>(c(),z(G,{style:B($===s.value.length-1?"margin-bottom: 0.5rem":""),onClick:T=>L(`/evaluate-detail?goodOrderId=${o.id}`),data:o,key:o.id},null,8,["style","onClick","data"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])])}}});export{U as default};
