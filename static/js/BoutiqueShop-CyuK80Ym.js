import{z as S,G as o,H as l,Q as d,V as A,_ as H,q as E,r as v,y as M,D as G,E as K,F as q,I as s,J as b,K as g,U as u,P as C,Z as L,a3 as D,a4 as j,X as P,Y as V,x as U,N as Q,O as W,$ as I}from"./vendor-Dr_RpJ_Y.js";import{_ as O}from"./MCOIN-Bodfn-v1.js";import{_ as F}from"./ShopMaskTips-ClYuWX9C.js";import{B as X}from"./BackIcon-CDrGaEPo.js";import{d as Y}from"./mall-BRPa8DWq.js";import"./index-7OiUoGXy.js";const z=S({props:{label:null,bgColor:null,color:null},setup(r){return(y,i)=>(l(),o("div",{class:"whitespace-nowrap rounded bg-red-004 text-white px-1.5 py-0.5 text-xxs",style:A({backgroundColor:r.bgColor||null,color:r.color||null})},d(r.label),5))}}),J=r=>(P("data-v-66558c28"),r=r(),V(),r),Z={class:"gap-3 bg-transparent u-waterfall"},R=["onClick"],ee={class:"w-full h-full rounded-xl bg-white"},te={class:"relative w-full h-full pb-3 bg-white rounded-xl"},se={class:"w-full max-h-[250px] relative overflow-hidden"},le=["src"],oe={key:0,class:"mb-0.5 text-black-900 font-semibold opacity-80 text-sm mt-2.5 text-left line-clamp-2 pl-2.5 pr-2.5"},ae={key:1,class:"w-full mb-2"},ne={key:2,class:"flex items-center gap-2 mt-1.5 overflow-x-auto pl-2.5 pr-2.5"},ce={key:3,class:"mt-2.5 flex justify-start pl-2.5 pr-2.5"},re=["onClick"],ie={class:"w-full pt-[100%] rounded relative"},ue=["src"],de={key:0,class:"flex items-center justify-center flex-shrink-0 w-full text-xs line-clamp-1 text-primary"},pe=J(()=>s("div",{class:"mr-0.5",style:{flex:"0 0 1rem"}},[s("img",{class:"w-4 h-4",src:O})],-1)),he={class:"font-bold text-center truncate text-xxs"},ve={class:"text-xs font-semibold"},_e=j("Mcoin "),fe={key:1,class:"flex items-center justify-center w-full text-xs text-center truncate text-primary"},xe={class:"mr-1 font-normal text-xxs opacity-60"},me={class:"text-xxs text-primary"},ye={class:"text-xs"},be=["onClick"],ge={class:"w-full h-full rounded-xl bg-white"},ke={class:"relative w-full h-full pb-3 bg-white rounded-xl"},we={class:"w-full max-h-[250px] relative overflow-hidden"},$e=["src"],Ce={key:0,class:"mb-0.5 text-black-900 font-semibold opacity-80 text-sm mt-2.5 text-left line-clamp-2 pl-2.5 pr-2.5"},Te={key:1,class:"w-full mb-2"},Le={key:2,class:"flex items-center gap-2 mt-1.5 overflow-x-auto pl-2.5 pr-2.5"},Se={key:3,class:"mt-2.5 flex justify-start pl-2.5 pr-2.5"},Be=["onClick"],Ne={class:"w-full pt-[100%] rounded relative"},je=["src"],Ie={key:0,class:"flex items-center justify-center flex-shrink-0 w-full text-xs line-clamp-1 text-primary"},qe=J(()=>s("div",{class:"mr-0.5",style:{flex:"0 0 1rem"}},[s("img",{class:"w-4 h-4",src:O})],-1)),De={class:"font-bold text-center truncate text-xxs"},Fe={class:"text-xs font-semibold"},ze=j("Mcoin "),He={key:1,class:"flex items-center justify-center w-full text-xs text-center truncate text-primary"},Ee={class:"mr-1 font-normal text-xxs opacity-60"},Me={class:"text-xxs text-primary truncate"},Pe={class:"text-xxs"},Ve=S({props:{value:null,addTime:null,idKey:null},setup(r){const y=r,i=E(),k=v(null),x=v(null),p=v([]),n=v([]),h=v([]),B=c=>{c.stores.id&&i.push(`category?shopId=${c.stores.id}&deliveryType=1`)},w=c=>{c.id&&i.push(`goodsDetail?id=${c.id}`)},m=c=>JSON.parse(JSON.stringify(c)),N=M(()=>m(y.value)),$=async()=>{if(!h.value.length)return;let c=await x.value,f=await k.value,a=h.value[0];if(!a)return;let e=(c==null?void 0:c.clientHeight)||0,_=(f==null?void 0:f.clientHeight)||0;if(p.value.length===0&&n.value.length===0)p.value.push(a);else if(e<_)p.value.push(a);else if(e>_)n.value.push(a);else{let t=p.value.length,T=n.value.length;t<=T?p.value.push(a):n.value.push(a)}h.value.splice(0,1),h.value.length&&setTimeout(()=>{$()},y.addTime)};return G(()=>N,(c,f)=>{let a=Array.isArray(f)&&f.length>0?f.length:0;h.value=h.value.concat(m(c.value.slice(a))),$()},{deep:!0,immediate:!0}),K(()=>{h.value=m(N.value),$()}),(c,f)=>{const a=q("van-skeleton");return l(),o("div",Z,[s("div",{ref:(e,_)=>{_.leftColumn=e,x.value=e},class:"u-column"},[(l(!0),o(b,null,g(p.value,(e,_)=>(l(),o("div",{class:"mb-4 text-center",onClick:t=>B(e),key:e.id},[s("div",ee,[s("div",te,[s("div",se,[s("img",{src:e&&e.stores&&e.stores.logo,class:"object-cover w-full h-auto rounded-t-xl aspect-square"},null,8,le)]),e.stores.storeName?(l(),o("div",oe,[s("span",null,d(e.stores.storeName||"-"),1)])):u("",!0),e.stores.id?u("",!0):(l(),o("div",ae,[C(a,{row:_%2==0?1:2,class:"mx-2","row-width":["100%"]},null,8,["row"])])),e.subclasses&&e.subclasses.length>0?(l(),o("div",ne,[(l(!0),o(b,null,g(e.subclasses,t=>(l(),L(z,{label:t.name,key:t.id,bgColor:"#FFD81F",color:"#000"},null,8,["label"]))),128))])):u("",!0),e.goods?(l(),o("div",ce,[(l(!0),o(b,null,g(e.goods.slice(0,2),t=>(l(),o("div",{style:{flex:"0 0 48%"},class:"flex flex-col items-center gap-2 w-[48%] mr-1",onClick:D(T=>w(t),["stop"]),key:t.id},[s("div",ie,[(t.status!=1||!+t.stock)&&+t.goodsTypes!=2?(l(),L(F,{key:0,status:t.status,stock:t.stock},null,8,["status","stock"])):u("",!0),s("img",{src:t.icons&&t.icons.split(",")[0],class:"absolute top-0 left-0 w-full h-full rounded aspect-square object-cove"},null,8,ue)]),t.payType!==2?(l(),o("div",de,[pe,s("div",he,[s("span",ve,d(t.price||0),1),_e])])):u("",!0),t.payType===2?(l(),o("div",fe,[s("div",xe,d(c.$t("piggy.cardPrice")),1),s("div",me,[s("span",ye,d(t.cardPrice||0),1),j(" "+d(t.symbol||""),1)])])):u("",!0)],8,re))),128))])):u("",!0)])])],8,R))),128))],512),s("div",{ref:(e,_)=>{_.rightColumn=e,k.value=e},class:"u-column"},[(l(!0),o(b,null,g(n.value,(e,_)=>(l(),o("div",{class:"mb-4 text-center",onClick:t=>B(e),key:e.id},[s("div",ge,[s("div",ke,[s("div",we,[s("img",{src:e&&e.stores&&e.stores.logo,class:"object-cover w-full h-auto rounded-t-xl aspect-square"},null,8,$e)]),e.stores.storeName?(l(),o("div",Ce,[s("span",null,d(e.stores.storeName||"-"),1)])):u("",!0),e.stores.id?u("",!0):(l(),o("div",Te,[C(a,{row:_%2==0?1:2,class:"mx-2","row-width":["100%"]},null,8,["row"])])),e.subclasses&&e.subclasses.length>0?(l(),o("div",Le,[(l(!0),o(b,null,g(e.subclasses,t=>(l(),L(z,{label:t.name,key:t.id,bgColor:"#FFD81F",color:"#000"},null,8,["label"]))),128))])):u("",!0),e.goods?(l(),o("div",Se,[(l(!0),o(b,null,g(e.goods.slice(0,2),t=>(l(),o("div",{style:{flex:"0 0 48%"},class:"flex flex-col items-center gap-2 w-[48%] mr-1",onClick:D(T=>w(t),["stop"]),key:t.id},[s("div",Ne,[(t.status!=1||!+t.stock)&&+t.goodsTypes!=2?(l(),L(F,{key:0,status:t.status,stock:t.stock},null,8,["status","stock"])):u("",!0),s("img",{src:t.icons&&t.icons.split(",")[0],class:"absolute top-0 left-0 w-full h-full rounded aspect-square object-cove"},null,8,je)]),t.payType!==2?(l(),o("div",Ie,[qe,s("div",De,[s("span",Fe,d(t.price||0),1),ze])])):u("",!0),t.payType===2?(l(),o("div",He,[s("div",Ee,d(c.$t("piggy.cardPrice")),1),s("div",Me,[s("span",Pe,d(t.cardPrice||0),1),j(" "+d(t.symbol||""),1)])])):u("",!0)],8,Be))),128))])):u("",!0)])])],8,be))),128))],512)])}}}),Oe=H(Ve,[["__scopeId","data-v-66558c28"]]),Je=r=>(P("data-v-5a1be15e"),r=r(),V(),r),Ae={class:"flex h-[53px] bg-[#E2DBCD80] backdrop-blur-sm rounded-2xl p-1"},Ge=["onClick"],Ke={key:0,class:"hot-tag rounded-sm absolute right-[-0.2rem] top-1 z-20 text-center flex items-center justify-center"},Ue=Je(()=>s("span",{class:"text-white text-xxs"},"HOT",-1)),Qe=[Ue],We={class:"name flex items-center text-[18px] line-height-[35px] text-black font-medium z-10 text-nowrap"},Xe={class:"text-xxs text-gray-500 mt-1 text-nowrap"},Ye={key:1,class:"selected-bar w-12 h-2 bg-default absolute bottom-5"},Ze=S({props:{orderBy:null},emits:["change"],setup(r,{emit:y}){const{t:i}=U(),k=M(()=>[{name:i("common.recommend"),subName:i("activity.you may also like"),value:3},{name:i("activity.List"),subName:i("ranking.Ecological help shop"),value:10},{name:i("activity.Local hot spots"),subName:i("activity.Word of mouth hot sale"),value:1},{name:i("activity.Select new stores"),subName:i("activity.Tasting Experience"),value:11}]);return(x,p)=>(l(),o("div",Ae,[(l(!0),o(b,null,g(W(k),n=>(l(),o("div",{class:Q(["w-1/4 flex flex-col items-center p-1 cursor-pointer relative",{"bg-white rounded-xl":r.orderBy==n.value}]),key:n.value,onClick:h=>y("change",n.value)},[n.value===1?(l(),o("div",Ke,Qe)):u("",!0),s("div",We,d(n.name),1),s("div",Xe,d(n.subName),1),r.orderBy==n.value?(l(),o("div",Ye)):u("",!0)],10,Ge))),128))]))}}),Re=H(Ze,[["__scopeId","data-v-5a1be15e"]]),et={class:"overflow-y-auto"},tt={class:"bg-transparent"},st={class:"sticky top-0 flex font-normal justify-center text-sm items-center h-[44px] px-2.5 z-50 bg-origin5"},lt={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},ot=s("div",{class:"font-semibold"},null,-1),at={class:"min-h-[60vh]"},nt={class:"px-2.5"},ct=S({name:"BoutiqueShop"});function rt(r){const y=E(),i=v(3),k=a=>{a!==i.value&&(i.value=a,c())},x=v([]),p=v(!1),n=v(!1),h=v(0),B=v(10),w=v(0),m=v([]),N=async()=>{const a=await Y({page:h.value,size:B.value,sortType:i.value,orderBy:1,boutiqueFlag:!0});if(p.value=!1,!a.success){n.value=!0;return}if(!a.data||!a.total){n.value=!0;return}w.value=a.total,m.value=(a.data||[]).map(e=>({...e})),x.value=h.value===1?m.value:x.value.concat(m.value),x.value.length>=w.value&&(n.value=!0)},$=async()=>{p.value=!0,h.value+=1,await N(),setTimeout(()=>{p.value=!1},1e3)},c=()=>{m.value=[],x.value=[],h.value=0,w.value=0,n.value=!1,$()},f=a=>{y.push(a)};return(a,e)=>{const _=q("van-sticky"),t=q("VanList");return l(),o("div",et,[s("div",tt,[s("section",st,[s("div",lt,[C(X,null,{default:I(()=>[s("span",null,d(a.$t("mall.Boutique Shop")),1)]),_:1})]),ot]),s("section",at,[C(_,{"offset-top":43},{default:I(()=>[s("div",nt,[C(Re,{orderBy:i.value,onChange:k},null,8,["orderBy"])])]),_:1}),C(t,{class:"mt-4 px-2.5 bg-transparent",loading:p.value,"onUpdate:loading":e[0]||(e[0]=T=>p.value=T),finished:n.value,"finished-text":a.$t("common.noMore"),"loading-text":a.$t("common.loading"),onLoad:$},{default:I(()=>[x.value.length>0?(l(),L(Oe,{key:0,class:"bg-transparent",value:m.value,addTime:150,onHandleTo:f},null,8,["value"])):u("",!0)]),_:1},8,["loading","finished","finished-text","loading-text"])])])])}}const _t=S({...ct,setup:rt});export{_t as default};
