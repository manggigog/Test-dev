import{_ as xt}from"./MCOIN-BOqZVkND.js";import{_ as yt}from"./FMCP-yoa9RTPy.js";import{_ as nt,z as lt,R as Et,r as f,bp as Vt,a2 as M,y as wt,bl as bt,E as $t,ab as Rt,F as B,Z as p,H as a,$ as z,I as t,U as k,G as r,V as at,O as e,a4 as F,Q as o,J as Dt,a3 as kt,a0 as St,X as mt,Y as pt,a1 as Nt,x as Lt,P,bo as Pt,bV as zt,bX as Tt,bC as Ut,bL as Wt,ad as jt,N as Mt,q as Ot,T as Gt,B as ot,bY as _t}from"./vendor-Dr_RpJ_Y.js";import{ci as Xt,bN as Ht,g as ft,cj as qt,e as h,ck as Yt,b as Jt,r as Zt,G as ut,k as Qt,d as ht}from"./index-CU2nzZe6.js";import{_ as Kt}from"./close-Dwemq2UR.js";import{P as Q}from"./flashSale-DDyqLyYN.js";import{_ as te}from"./EmptyTipsPop-DC2OBzZY.js";import{p as ee}from"./piggyBank-ttfOTM2O.js";import{q as se}from"./piggyBank-0ChZtUOO.js";import{B as ae}from"./BackIcon-CDrGaEPo.js";const oe="/static/images/piggy-bank-bg-B2ZN3re_.png",ne="/static/images/arrow-forward-C8bwXPR5.svg",le="/static/images/X-GcBn2IkE.svg",ie="/static/images/expand-BxpD5R2x.webp",K=l=>(mt("data-v-5436a953"),l=l(),pt(),l),ce={key:0,class:"success-text"},re=K(()=>t("div",{class:"text-b6 text-xl mb-3"},"恭喜获得",-1)),de={class:"text-2xl text-b6"},ue={class:"text-[#FEA527] font-bold"},me=F("抵用券 "),pe=K(()=>t("div",{class:"text-b6 text-xl mb-3"},"开始膨胀",-1)),ge={class:"text-[#F15965] h-[52px] flex items-center justify-center gap-x-1"},ve=K(()=>t("span",{class:"text-[26px] font-black leading-[52px]"},"X",-1)),_e={class:"text-[44px] font-normal leading-[52px] font-BebasNeue"},fe=["src"],he={key:1,class:"center-card text-b1"},xe=K(()=>t("div",{class:"text-center text-xs text-[#FE7E66]"},"膨胀倍数",-1)),ye={class:"container relative"},we={id:"original",class:"center-text text-[#F15965] h-[52px] pt-1 flex items-center justify-center gap-x-1"},be=K(()=>t("span",{class:"text-[24px] font-[900]"},[t("img",{src:le,class:"h-5 w-auto"})],-1)),$e={class:"text-[40px] font-BebasNeue leading-[52px]"},ke=F(" 确定 "),Se=lt({props:{teleport:null},emits:["success"],setup(l,{expose:T,emit:A}){const{teleport:E}=l,{height:I}=Et(),g=f(null),{top:x,height:O}=Vt(g),U=f(null),[W,v]=M(!1),[d,j]=M(!1),[G,V]=M(!1),y=wt(()=>I.value>811?1:811/I.value),i=bt({grow:null,amount:null,duration:100,number:0,animationStyle:"",intervalId:null}),_=async()=>{V(!0),U.value=`${ie}?t=${Date.now()}`,await Xt(U.value),V(!1)};function X(R){return Math.random()*(R-1)+1}function tt(){i.number=X(2),i.grow?i.number=i.grow:setTimeout(()=>{tt(),S()},i.duration)}function et(){i.intervalId=setInterval(tt,i.duration)}function S(){i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null)}const it=async()=>{j(!0),await qt(500);const w=document.getElementById("original").cloneNode(!0);w.id="cloned-animation",w.classList.add("animated-div"),document.querySelector(".container").appendChild(w)},H=async R=>{if(R){i.grow=null,i.amount=null,i.number=1;try{v(!0),et();const w=await R.wait(),b=Ht(w.logs,ft.voucherGrow,ft.FMCP);i.grow=b==null?void 0:b.grow,i.amount=b==null?void 0:b.amount,S(),A("success"),it()}catch{v(!1)}}},m=()=>{v(!1),setTimeout(()=>{j(!1),_()},1e3),S()};return $t(()=>{_()}),Rt(()=>{v(!1),setTimeout(()=>{j(!1)},1e3),S()}),T({setAnimationShow:v,handleAnimation:H}),(R,w)=>{const b=B("VanLoading"),q=B("VanButton"),ct=B("VanPopup");return a(),p(ct,{show:e(W),"onUpdate:show":w[0]||(w[0]=D=>St(W)?W.value=D:null),teleport:l.teleport,class:"!bg-transparent font-Puhui !w-full !max-w-[375px]",onClickOverlay:m,onClick:m,"overlay-style":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},{default:z(()=>[t("div",{ref:(D,Y)=>{Y.wrapperRef=D},class:"!w-full overflow-hidden relative -mt-[25px]",style:at({height:`${e(I)}px`})},[t("div",{class:"w-full text-center absolute",style:at({top:`${e(x)-115}px`})},[e(d)?(a(),r("div",ce,[re,t("div",de,[t("span",ue,o(e(i).amount),1),me])])):(a(),r(Dt,{key:1},[pe,t("div",ge,[ve,t("span",_e,o(e(i).number.toFixed(3)),1)])],64))],4),t("div",{ref:(D,Y)=>{Y.imgWrapper=D,g.value=D},class:"center-card opacity-0",style:at({height:` ${e(I)*.26*e(y)}px`})},null,4),e(G)?(a(),p(b,{key:0,vertical:"",type:"spinner",color:"#FEA527",class:"center-card"})):k("",!0),t("img",{src:U.value,class:"w-full h-full object-cover relative z-[1]"},null,8,fe),e(d)?(a(),r("div",he,[xe,t("div",ye,[t("div",we,[be,t("span",$e,o(e(i).grow),1)])])])):k("",!0),e(d)?(a(),p(q,{key:2,class:"success-text confirm-btn !font-semibold",style:at({top:`${e(x)+e(O)+50}px`}),onClick:kt(m,["stop"])},{default:z(()=>[ke]),_:1},8,["style","onClick"])):k("",!0)],4)]),_:1},8,["show","teleport","overlay-style"])}}}),Ce=nt(Se,[["__scopeId","data-v-5436a953"]]),Be=l=>(mt("data-v-0c06cb3b"),l=l(),pt(),l),Ae={class:"flex-center-bw border-b-[0.5px] border-solid border-gray1 pb-5"},Ie={class:"flex-start"},Fe=Be(()=>t("img",{src:Kt,class:"w-[10px] h-[10px]",alt:""},null,-1)),Ee=[Fe],Ve=lt({emits:["click"],setup(l,{emit:T}){return(A,E)=>(a(),r("div",Ae,[t("div",Ie,[Nt(A.$slots,"default",{},void 0,!0)]),t("div",{onClick:E[0]||(E[0]=I=>T("click"))},Ee)]))}}),Re=nt(Ve,[["__scopeId","data-v-0c06cb3b"]]),De={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},Ne={class:"gap-1 mt-5 mb-3 text-xs flex-start"},Le={key:0,src:xt,class:"w-4",alt:""},Pe={key:1,src:yt,class:"w-4",alt:""},ze={class:"font-semibold"},Te={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},Ue=lt({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(l,{expose:T,emit:A}){const{show:E}=l,{t:I}=Lt(),g=f(null),x=f(Q.MC),O=wt(()=>[{text:"Mcoin",value:Q.MC},{text:I("voucher.voucher"),value:Q.VOUCHER}]),U=v=>{x.value=Number(v)},W=()=>{A("handleWithdraw",g.value,x.value===Q.VOUCHER)};return T({amount:g}),(v,d)=>{const j=B("van-dropdown-item"),G=B("van-dropdown-menu"),V=B("VanField"),y=B("VanButton"),i=B("VanPopup");return a(),p(i,{show:l.show,"onUpdate:show":d[4]||(d[4]=_=>St(E)?E.value=_:null),round:"","close-on-click-overlay":!0,onClickOverlay:d[5]||(d[5]=kt(()=>A("close"),["stop"]))},{default:z(()=>[t("div",De,[P(Re,{onClick:d[0]||(d[0]=_=>A("close"))},{default:z(()=>[t("span",null,o(v.$t("maiPledge.Income to be collected")),1)]),_:1}),t("div",Ne,[x.value===e(Q).MC?(a(),r("img",Le)):(a(),r("img",Pe)),P(G,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:z(()=>[P(j,{onChange:U,modelValue:x.value,"onUpdate:modelValue":d[1]||(d[1]=_=>x.value=_),options:e(O)},null,8,["modelValue","options"])]),_:1}),t("span",ze,o(e(h)(l.balance||0,4)),1)]),t("div",Te,[P(V,{type:"number",modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=_=>g.value=_),formatter:e(Yt),placeholder:e(h)(l.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),t("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:d[3]||(d[3]=()=>{g.value=e(h)(l.balance,4)})}," MAX ")]),P(y,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:l.loading,disabled:g.value<=0||+g.value>+l.balance,onClick:W},{default:z(()=>[F(o(v.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),We=nt(Ue,[["__scopeId","data-v-f83d25b2"]]),J=l=>(mt("data-v-3f6324d4"),l=l(),pt(),l),je={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2",id:"piggyBank"},Me=J(()=>t("img",{class:"absolute top-0 left-0 w-full",src:oe,alt:"",srcset:""},null,-1)),Oe={class:"relative z-20"},Ge={class:"gap-2 mt-2 flex-start"},Xe={class:"mt-4"},He={class:"bg-white p-4 rounded-xl text-[#2E2008]"},qe={class:"flex items-center justify-between"},Ye=["src"],Je={class:"text-oriange1"},Ze={class:"flex items-baseline"},Qe={key:0,class:"text-sm self-end mb-0.5"},Ke={key:1,class:"text-3xl font-bold"},ts={key:1},es={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},ss={key:3,class:"text-3xl font-bold"},as={class:"text-xs flex-center text-black-400"},os=J(()=>t("img",{class:"self-center w-4 h-4 ml-auto",src:ne,alt:"",srcset:""},null,-1)),ns={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},ls={class:"flex flex-col justify-center"},is={class:"gap-1 text-xs flex-start"},cs={class:"opacity-60"},rs={class:"mt-1.5 text-sm"},ds={key:1},us={class:"flex flex-col justify-center"},ms={class:"gap-1 text-xs flex-start"},ps={class:"opacity-60"},gs={class:"mt-1.5 text-sm"},vs={key:1},_s={class:"left"},fs={class:"gap-1 text-xs flex-start"},hs={class:"opacity-60"},xs=J(()=>t("img",{src:xt,class:"w-4 h-4"},null,-1)),ys=J(()=>t("img",{src:yt,class:"w-4 h-4"},null,-1)),ws={class:"text-[#E88F17] text-sm font-medium"},bs={key:1},$s={class:"flex mt-5 text-base font-medium text-center"},ks=J(()=>t("div",{class:"w-6"},null,-1)),Ss={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},Cs={class:"pl-2.5"},Bs={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},As={class:"flex items-center"},Is={class:"text-[#14D8A9] text-sm font-bold flex items-center"},Fs={key:1},Es=F("%"),Vs={key:1,class:"text-[#14D8A9] text-xs font-bold"},Rs={class:"pr-2.5 text-right"},Ds={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},Ns={class:"flex items-center"},Ls={key:1,class:"text-[#14D8A9] text-sm font-bold"},Ps={key:3,class:"text-[#14D8A9] text-xs font-bold"},zs={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},Ts={class:"flex items-center justify-between pr-4 mt-1.5"},Us=J(()=>t("div",{id:"line-echarts"},null,-1)),Ws=lt({setup(l){const{checkLoginAuth:T}=Jt();Pt(()=>{dt()},1e4);const A=Ot(),{userIds:E,pending:I,total:g,earnings:x,nextFloatAwardAmount:O,today:U,DAY:W,dayAwardAmounts:v,userRewardPending:d,userRewardWithdraw:j}=ee(),G=s=>{A.push(s)},V=f("0"),y=zt("showBalance",!1),i=()=>{y.value=!y.value},_=bt({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new Tt(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),X=f(null),tt=s=>{_.xAxis.data=s.dates.reverse(),_.series[0].data=s.values.reverse(),X.value.setOption(_),b(!1)},et=f(0),S=f("0"),it=async()=>{const s=await E();et.value=s;const n=await I(s.toString());let c=0;n.fixs.forEach(L=>{c+=+ut(L)||0});let N=0;n.floats.forEach(L=>{N+=+ut(L)||0});let u=0;n.records.forEach(L=>{u+=+ut(L.amount)||0});const $=await d(s.toString());V.value=u.toFixed(18),S.value=ot(N).plus(c).plus($).toFixed(18)},H=f(["0","0"]),m=f([0,0,0,0]),R=async()=>{se().then(n=>{if(!n.success)return Gt.clear();H.value[0]=n.data.allAmount||0}),m.value[0]=+await x(0),m.value[1]=+await O(),m.value[2]=+await g(),m.value[3]=+await x(7);const s=m.value[1]/m.value[2]+m.value[0];H.value[1]=h(ot(V.value||0).times(s).toFixed(18),2).toString()},[w,b]=M(!1),q=f([0,0]),ct=async()=>{b(!0);let s=localStorage.getItem("taday")||"",n=localStorage.getItem("echartData")||"";const c=+await U(),N=await W();let u={dates:[],values:[]};if(s&&+s==+c&&n){u=JSON.parse(n);let $=await v(c);$=h(ot($||0).times(100).times(365).times(m.value[3]).toFixed(18),2),u.values[0]=$}else{localStorage.setItem("taday",c.toString());for(let $=0;$<7;$++){let L=c-$*N,It=await v(L),vt=Zt((L-N)*1e3),Ft=h(ot(It||0).times(100).times(365).times(m.value[3]).toFixed(18),2);u.dates.push(vt.split(" ")[0].split("-")[1]+"-"+vt.split(" ")[0].split("-")[2]),u.values.push(Ft)}}localStorage.setItem("echartData",JSON.stringify(u)),q.value[1]=u.values[0],tt(u)},D=async()=>{const s=+await O(),n=+await g();q.value[0]=s/n*100},[Y,st]=M(!1),[Ct,Z]=M(!1),[Bt,rt]=M(!1),gt=f(null),At=async(s,n)=>{Z(!0);try{let c=await j(s,n);if(!c.success)return Z(!1);if(c=c.result,!n){try{await c.wait(),st(!1),dt(),rt(!0),setTimeout(()=>{rt(!1)},2e3);return}catch{Z(!1)}finally{Z(!1)}return}st(!1),gt.value.handleAnimation(c)}finally{Z(!1)}},C=f(!1),dt=async()=>{await it(),D()};return $t(async()=>{T(!0)&&(X.value=Ut(Wt(document.getElementById("line-echarts"))),C.value=!0,await Promise.all([dt(),await R(),ct()]),C.value=!1)}),jt(()=>{X.value&&X.value.dispose()}),(s,n)=>{const c=B("van-loading"),N=B("VanLoading");return a(),r("div",je,[Me,t("div",Oe,[t("div",Ge,[P(ae),t("div",null,o(s.$t("piggy.Yu_Bao_details")),1)]),t("div",Xe,[t("div",He,[t("div",qe,[t("div",{class:"flex items-center",onClick:i},[t("span",null,o(s.$t("piggy.lump_sum")),1),t("img",{class:"w-4 h-4 ml-1.5",src:e(Qt)(`images/ecology/${e(y)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,Ye)]),et.value?(a(),p(e(_t),{key:0,to:"/piggySettingAdmin"},{default:z(()=>[t("div",Je,o(s.$t("piggy.setting admin address")),1)]),_:1})):k("",!0)]),P(e(_t),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:z(()=>[t("div",Ze,[e(y)?(a(),r("span",Qe,"≈")):k("",!0),e(y)?(a(),r("span",Ke,[C.value?(a(),p(c,{key:0,size:"28px"})):(a(),r("span",ts,o(e(h)(V.value,2)),1))])):k("",!0),e(y)?(a(),r("span",es,"MCOIN")):k("",!0),e(y)?k("",!0):(a(),r("span",ss," ******"))]),t("div",as,[F(o(s.$t("piggy.detail_record"))+" ",1),os])]),_:1}),t("div",ns,[t("div",ls,[t("div",is,[t("span",cs,o(s.$t("piggy.Cumulative_income")),1)]),t("div",rs,[C.value?(a(),p(c,{key:0,size:"14px"})):(a(),r("span",ds,o(e(ht)(H.value[0])),1))])]),t("div",us,[t("div",ms,[t("span",ps,o(s.$t("piggy.tommor_earns")),1)]),t("div",gs,[C.value?(a(),p(c,{key:0,size:"14px"})):(a(),r("span",vs,o(e(ht)(H.value[1])),1))])]),t("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:n[0]||(n[0]=u=>+S.value>0?e(st)(!0):"")},[t("div",_s,[t("div",fs,[t("span",hs,o(s.$t("maiPledge.Income to be collected")),1),xs,t("span",null,o(s.$t("common.or")),1),ys]),t("div",ws,[C.value?(a(),p(c,{key:0,color:"#E88F17",size:"14px"})):(a(),r("span",bs,o(e(h)(S.value,2)),1))])]),t("div",{class:Mt(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!S.value}])},o(s.$t("common.claim")),3)])]),t("div",$s,[t("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:n[1]||(n[1]=u=>G("/piggyBank-transferOut"))},o(s.$t("piggy.transfer_out_principal")),1),ks,t("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:n[2]||(n[2]=u=>G("/piggyBank-transferIn"))},o(s.$t("piggy.transfer_in_principal")),1)])]),t("div",Ss,[t("div",Cs,[t("div",Bs,o(s.$t("piggy.todayannualizedRateReturn")),1),t("div",As,[t("span",Is,[C.value?(a(),p(c,{key:0,color:"#14D8A9",size:"14px"})):(a(),r("span",Fs,o(e(h)(m.value[0]*100*365,2)),1)),Es]),F(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),p(c,{key:0,color:"#14D8A9",size:"14px"})):(a(),r("span",Vs,o(e(h)(q.value[0]*365*m.value[3],2))+"%",1)),F(o(s.$t("piggy.float")),1)])]),t("div",Rs,[t("div",Ds,o(s.$t("piggy.yesannualizedRateReturn")),1),t("div",Ns,[C.value?(a(),p(c,{key:0,color:"#14D8A9",size:"14px"})):(a(),r("span",Ls,o(e(h)(m.value[0]*100*365,2))+"%",1)),F(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),p(c,{key:2,color:"#14D8A9",size:"14px"})):(a(),r("span",Ps,o(e(h)(q.value[1]))+"%",1)),F(o(s.$t("piggy.float")),1)])])]),t("div",zs,[t("div",Ts,[t("span",null,o(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),Us,e(w)?(a(),p(N,{key:0,color:"#674c37",class:"loading-box",vertical:""})):k("",!0)])])]),e(Y)?(a(),p(We,{key:0,show:e(Y),balance:S.value,loading:e(Ct),onClose:n[3]||(n[3]=u=>e(st)(!1)),onHandleWithdraw:At},null,8,["show","balance","loading"])):k("",!0),e(Bt)?(a(),p(te,{key:1,onClose:n[4]||(n[4]=u=>e(rt)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):k("",!0),P(Ce,{ref:(u,$)=>{$.voucherLottieRef=u,gt.value=u}},null,512)])}}}),Qs=nt(Ws,[["__scopeId","data-v-3f6324d4"]]);export{Qs as default};
