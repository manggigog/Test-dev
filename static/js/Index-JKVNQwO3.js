import{_ as b,z as E,r as f,E as x,ab as _,G as $,H as T,P as r,F as k,O as o,$ as L,o as M,I as n,Q as c,a3 as p}from"./vendor-Dr_RpJ_Y.js";import{a as j,C as a}from"./index-7OiUoGXy.js";import{u as I}from"./useCityMap-CJiyuUmB.js";const N={class:"router-view-container"},R={class:"-mb-6 font-Puhui"},S={class:"mb-6 text-sm font-semibold text-b1"},A={class:"flex flex-col items-center gap-3"},B=["onClick"],G={class:"text-base font-semibold text-b1"},P={class:"text-base font-normal text-b1"},V=E({setup(D){const y=M(),{cityMapStore:e}=j(),{getUserLocation:w}=I(),C=()=>{e.setCurrentCity(e.cityChangeTips.gpsCity,"manual"),e.hideCityChangeTips()},d=f(!1),g=f(""),h=async()=>{try{d.value=!0,g.value="",await w()}catch{}finally{d.value=!1}},l=async()=>{if(y.path.indexOf("/city/")===-1){window.removeEventListener("visibilitychange",l);return}document.hidden?console.log("cityMap hidden"):(console.log("cityMap show"),await h())};return x(async()=>{await h(),window.addEventListener("visibilitychange",l)}),_(()=>{window.removeEventListener("visibilitychange",l)}),(t,s)=>{const v=k("router-view");return T(),$("div",N,[r(v),r(a,{show:o(e).locationError.show,title:t.$t("city.Location acquisition failed"),content:o(e).locationError.message,showConfirm:!0,showReject:!1,key:t.$t("common.I_see"),noClose:"",onConfirm:s[0]||(s[0]=i=>o(e).hideLocationError())},null,8,["show","title","content"]),r(a,{show:o(e).noAuthError.show,title:t.$t("city.Turn on location services and discover great shops nearby"),content:t.$t("city.You need to enable the application location permission to access your current geolocation"),showConfirm:!0,showReject:!1,key:t.$t("common.I_see"),noClose:"",onConfirm:s[1]||(s[1]=i=>o(e).hideNoAuthError())},null,8,["show","title","content"]),r(a,{show:o(e).msgError.show,title:o(e).msgError.title,content:o(e).msgError.message,showConfirm:!0,showReject:!1,key:t.$t("common.I_see"),noClose:"",onConfirm:s[2]||(s[2]=i=>o(e).hideMsgError())},null,8,["show","title","content"]),r(a,{show:o(e).cityChangeTips.show,showConfirm:!1,showReject:!1,noClose:"",noHeader:""},{default:L(()=>{var i,u,m;return[n("div",R,[n("div",S,c(t.$t("city.Your location shows you are in xx",{val:(i=o(e).cityChangeTips.gpsCity)==null?void 0:i.areaName})),1),n("div",A,[n("div",{class:"w-full h-[44px] rounded-full bg-[#FED73A] border border-solid border-transparent flex justify-center items-center",onClick:p(C,["stop"])},[n("span",G,c(t.$t("city.Switch to xx",{val:(u=o(e).cityChangeTips.gpsCity)==null?void 0:u.areaName})),1)],8,B),n("div",{class:"w-full h-[44px] rounded-full bg-[#fff] border border-solid border-b4 flex justify-center items-center",onClick:s[3]||(s[3]=p(F=>o(e).hideCityChangeTips(),["stop"]))},[n("span",P,c(t.$t("city.Continue browsing xx",{val:(m=o(e).cityChangeTips.saveCity)==null?void 0:m.areaName})),1)])])])]}),_:1},8,["show"])])}}}),Y=b(V,[["__scopeId","data-v-06b27bb8"]]);export{Y as default};
