import{_ as N,y as B,r as d,D as H,E as L,F as r,G as n,I as V,J as z,K as U,a2 as S,N as F,H as e,R as E,O as x,P as u,Q as I,Y as M,Z as G,l as K,bc as q,a0 as oe,X as ne,$ as le,z as J,x as Q,a4 as W,a3 as ae,bA as ce,bF as ie,bD as re,bB as ue,n as de,ba as pe,bb as fe,bf as ve}from"./vendor-D6JO6WHW.js";import{_ as he}from"./adpng-DqTFHGH_.js";import{r as me,b as _e,c as ge,d as ye,e as X}from"./mall-DnMZRkyz.js";import{v as ee,e as xe,V as we,g as te}from"./index-CybuWkSo.js";import{l as be,a as Z}from"./shop-CeqcS6K2.js";import{c as $e}from"./category-Q-WlNERW.js";import{R as ke}from"./Recommends-qN18G-rV.js";import{C as Ce}from"./ChangeRegionPop-30E9HTwm.js";import{a as Ie}from"./festivalActivities-BUKk1gCA.js";import{c as Le}from"./user-6913AfeQ.js";import{u as Se}from"./useShowActiveInfo-kywP6Pel.js";import"./GoodsList-B7XSsxhX.js";import"./buy-cart-DX6aL7m1.js";import"./goods-BVwS8oFG.js";import"./ShopMaskTips-wgA1ZEjb.js";import"./GoodsPrice-DAKFfGMp.js";import"./MCOIN-BOqZVkND.js";import"./cart-o5WHmNSV.js";import"./ImgBoutiqueLable-Dod52ZXF.js";import"./RatioBox-C9aLwz0w.js";import"./rangking-DQObfTIy.js";import"./useOrderStatus-DeHjEZ0k.js";const Re="/static/images/msg_icon_type_2-CRHOGGKj.png",Fe="/static/images/msg_icon_type_1-llTYHMvU.png",Be="/static/images/msg_close_dark-CMJSlgeW.png",Te=o=>(M("data-v-5bd0fdeb"),o=o(),G(),o),Ae={key:0,class:"notification-bg-2 w-full h-[30px] absolute -bottom-[4px] px-0 left-0"},De={key:0,src:Re,class:"w-3.5 h-auto flex-shrink-0"},Pe={key:1,src:Fe,class:"w-3.5 h-auto flex-shrink-0"},Oe={class:"flex-1 text-sm"},Ee=["onClick"],Ve=Te(()=>e("img",{src:Be,class:"w-4 h-auto"},null,-1)),ze=[Ve],Ue=B({setup(o,{expose:m}){const{currentLocale:c}=ee(),a=d([]),w=(f,v)=>{me({id:v.id}),a.value.splice(f,1)},l=()=>{_e(),a.value.length=0},s=async()=>{const f=await ge({page:1,size:999});f.success&&(a.value=f.data||[])};return H(()=>{s()}),m({_queryRemindList:s}),(f,v)=>{var R;const _=L("van-notice-bar"),g=L("van-swipe-cell");return n(),r("div",{class:E(["notification-container w-full font-normal",{"mb-1":((R=a.value)==null?void 0:R.length)>1}])},[(n(!0),r(V,null,z(a.value,(p,k)=>(n(),r("div",{key:p.id,class:"relative"},[k==0?(n(),U(g,{key:0,class:"h-[38px]"},{right:F(()=>[e("div",{class:E([{"bg-[#FED53D]":p.type===2,"bg-[#FFA123]":p.type===1},"h-[30px] flex items-center ml-1 px-4 rounded-[10px]"]),onClick:l},I(f.$t("mall.Clear")),3)]),default:F(()=>[a.value&&a.value.length>1?(n(),r("div",Ae,[e("div",{class:E(["h-full rounded-[10px] box-shadow",{"bg-[#FED53D]":p.type===1,"bg-[#FFA123]":p.type===2}])},null,2)])):S("",!0),e("div",{class:E([{"bg-[#FED53D]":p.type===2,"bg-[#FFA123]":p.type===1},"notification-bg box-shadow flex items-center gap-2 h-[30px] rounded-[10px] px-2 relative"])},[p.type===2?(n(),r("img",De)):p.type===1?(n(),r("img",Pe)):S("",!0),e("div",Oe,[x(_,{scrollable:"",color:p.type===2?"#222221":"#ffffff",background:"rgba(0,0,0,0)",text:p[`content${u(be)[u(c)]||"En"}`]},null,8,["color","text"])]),e("div",{class:"flex-shrink-0 w-5 ml-auto",onClick:A=>w(k,p)},ze,8,Ee)],2)]),_:2},1024)):S("",!0)]))),128))],2)}}}),Ne=N(Ue,[["__scopeId","data-v-5bd0fdeb"]]),je={key:0,class:"px-4 mt-2.5 py-4 bg-white rounded-xl category-box"},qe={class:"container flex overflow-x-auto"},He=["onClick"],Me={class:"text-sm text-[#2e2008] opacity-60 text-center whitespace-nowrap mt-1"},Ge=B({setup(o){const{currentLocale:m}=ee(),c=K(),a=d([]),w=async()=>{const s=await $e();s.success&&(a.value=s.data||[])},l=s=>{c.push(`/search?classId=${s.id}&className=${s[`${Z[m.value]||"en"}Name`]}`)};return H(()=>{w()}),(s,f)=>{const v=L("VanImage");return a.value.length?(n(),r("div",je,[e("div",qe,[(n(!0),r(V,null,z(a.value,_=>(n(),r("div",{style:{flex:"0 0 18.18%"},class:"flex flex-col",key:_.name,onClick:g=>l(_)},[x(v,{src:_.logo,class:"mx-auto aspect-square w-11 h-11",alt:""},null,8,["src"]),e("span",Me,I(_[`${u(Z)[u(m)]||"en"}Name`]),1)],8,He))),128))])])):S("",!0)}}}),Ke=N(Ge,[["__scopeId","data-v-3e00afd0"]]),Ye="/static/images/hot-2BuvZhRT.png",Je="/static/images/triangle-BeVcU1o4.png",Qe=o=>(M("data-v-7a74119a"),o=o(),G(),o),Xe={class:"flex items-center gap-1 py-1 text-sm leading-normal"},Ze=["src"],We=Qe(()=>e("img",{src:Je,class:"w-2 h-auto ml-1.5"},null,-1)),et=["onClick"],tt={class:"flex items-center"},st=["src"],ot=B({props:{showIcon:{type:Boolean,default:!1},showOverlay:{type:Boolean,default:!0},showDownIcon:{type:Boolean,default:!0}},emits:["showPopRegin","showOverlay","showMallOverlay"],setup(o,{expose:m,emit:c}){const a=o,w=d(""),{regionStore:l}=xe(),[s,f]=q(!1),[v,_]=q(!1),g=()=>{f(!1),c("showOverlay",!1)},R=$=>{w.value=$,$!==l.country&&(_(!1),f(!0))},p=()=>{_(!1)},k=$=>{_($),c("showOverlay",$)};function A(){a.showDownIcon&&k(!0)}return m({closePop:p}),($,C)=>{const D=L("van-icon"),P=L("VanPopup");return n(),r("div",null,[e("div",{class:"change-region-tools flex items-center bg-[#F0F0F0] px-3 rounded-full",onClick:A},[e("div",Xe,[e("img",{src:u(we)(`mall/${u(l).country}-flag.svg`),class:"w-4 h-auto"},null,8,Ze),e("span",null,I(u(l).country),1)]),We]),u(v)?(n(),U(P,{key:0,teleport:"body",overlay:o.showOverlay,show:u(v),"onUpdate:show":C[0]||(C[0]=y=>le(v)?v.value=y:null),position:"top",style:ne([{background:"transparent",width:"100%","max-width":"375px",left:"50%",transform:"translateX(-50%)",display:"flex"},{justifyContent:o.showIcon?"flex-end":"flex-start"}]),onClickOverlay:C[1]||(C[1]=y=>k(!1)),onClick:C[2]||(C[2]=y=>k(!1))},{default:F(()=>[e("div",{class:E(["min-w-[150px] sm:mt-[40%] mt-20 bg-[#f9f9f9] rounded-xl box-1 px-4",o.showIcon?"mr-2.5":"ml-2.5"])},[(n(!0),r(V,null,z(u(l).countries,y=>(n(),r("div",{key:y.key,class:E(["font-Silom py-1 leading-10 border-b text-sm border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":u(l).country===y.key}]),onClick:j=>R(y.key)},[e("div",tt,[e("img",{class:"w-5 h-auto mr-1.5",src:y.icon,alt:""},null,8,st),oe(" "+I(y.text),1)]),u(l).country===y.key?(n(),U(D,{key:0,name:"success",alt:""})):S("",!0)],10,et))),128))],2)]),_:1},8,["overlay","show","style"])):S("",!0),x(Ce,{currentKey:w.value,show:u(s),onClose:g},null,8,["currentKey","show"])])}}}),nt=N(ot,[["__scopeId","data-v-7a74119a"]]),se=o=>(M("data-v-df20a652"),o=o(),G(),o),lt={class:"z-[889] overflow-visible relative min-h-[12rem] my-bg"},at={class:"search-tools-bar w-full pt-3.5 bg-white flex-center-bw"},ct={class:"search-input flex items-center justify-between w-full h-8 bg-[#F0F0F0] rounded-full relative z-[999]"},it={class:"flex items-center flex-1 gap-1 px-2 text-sm h-9 text-black/30"},rt={class:"line-clamp-1"},ut=["src"],dt={class:"search-tools-bar px-2.5 bg-white"},pt={class:"flex py-2.5 items-center gap-1.5 overflow-x-auto text-xs"},ft={class:"flex items-center flex-shrink-0 mr-[15px]"},vt=se(()=>e("img",{src:Ye,class:"w-2.5 h-auto mr-[2px]"},null,-1)),ht={class:"text-black font-normal ml-1"},mt=["onClick"],_t={class:"text-[#666]"},gt={class:"swiper-container px-2.5 mt-2.5 relative z-10"},yt={class:"swiper-slide-wrapper"},xt=["src"],wt=se(()=>e("div",{class:"swiper-pagination"},null,-1)),bt=B({props:{bannerList:{default:[]},expressList:{default:[]},hotList:{default:[]},hotListBottom:{default:[]}},setup(o,{expose:m}){const c=o,a=K(),w=t=>{a.push(t)},l=d(null);J(()=>c.bannerList,()=>{de(()=>{var t;l.value&&((t=l.value)==null||t.$el.swiper.autoplay.start())})}),Q(()=>c.bannerList[s.value]),Q(()=>g.value==="left"?s.value>=c.bannerList.length-1?c.bannerList[0].colorCode:c.bannerList[s.value+1].colorCode:g.value==="right"?s.value===0?c.bannerList[c.bannerList.length-1].colorCode:c.bannerList[s.value-1].colorCode:null);const s=d(0),f=()=>{var t,i;v.value=0,g.value=null,s.value!==((t=l.value)==null?void 0:t.$el.swiper.realIndex)&&(s.value=(i=l.value)==null?void 0:i.$el.swiper.realIndex)},v=d(0),_=d(-1),g=d(null),R=(t,i)=>{if((i===0||i===1)&&(v.value=0,g.value=null),g.value){_.value=i;return}if(v.value===0){v.value=i;return}_.value=i,_.value<v.value?g.value="right":g.value="left",v.value=i},[p,k]=q(!1),A=t=>{t&&window.open(t,"_self")},$=d(null),C=d(null),D=t=>{k(t)};J(()=>p.value,t=>{const i=document.getElementById("fm-page");t?i.style.overflow="hidden":i.style.overflow="auto"});const P=()=>{$.value.closePop()},y=()=>{P(),k(!1)},j=()=>{const t=C.value&&C.value.popShow?a.currentRoute.value.fullPath:"/search";a.push(t)};return m({closeRegionPop:P}),(t,i)=>{const Y=L("van-icon"),b=L("van-swipe-item"),T=L("van-swipe");return n(),r("div",lt,[u(p)?(n(),r("div",{key:0,class:"my-overlay",onClick:y,onTouchmove:i[0]||(i[0]=W(()=>{},["prevent"]))},null,32)):S("",!0),e("div",at,[x(nt,{class:"relative z-[999] ml-2.5",ref:(h,O)=>{O.region=h,$.value=h},onShowOverlay:D,showOverlay:!1},null,512),e("div",{onClick:j,class:"relative ml-4 mr-2.5 flex-1"},[e("div",ct,[e("div",it,[x(Y,{size:"16",name:"search",class:"font-bold text-black/30"}),x(T,{vertical:"",class:"leading-9 h-9",autoplay:5e3,touchable:!1,"show-indicators":!1},{default:F(()=>[(n(!0),r(V,null,z(o.hotList,h=>(n(),U(b,{key:h.id},{default:F(()=>[e("div",rt,[h.iconUrl?(n(),r("img",{key:0,class:"inline-block w-auto h-5 mr-1 align-middle",src:h.iconUrl},null,8,ut)):S("",!0),e("span",null,I(h.keyword),1)])]),_:2},1024))),128))]),_:1})])])])]),e("div",dt,[e("div",pt,[e("div",ft,[vt,e("span",ht,I(t.$t("mall.hotSearch")),1)]),(n(!0),r(V,null,z(o.hotListBottom,h=>(n(),r("div",{class:"hot-search-keyword bg-[#F5F5F5] px-2.5 py-0.5 rounded-xl flex-shrink-0",key:h.id,onClick:O=>w("/search?keyword="+h.keyword)},[e("span",_t,I(h.keyword),1)],8,mt))),128))])]),e("div",gt,[ae(t.$slots,"default",{},void 0,!0),o.bannerList&&o.bannerList.length>0?(n(),U(u(ue),{key:0,ref:(h,O)=>{O.swiperRef=h,l.value=h},modules:[u(ie),u(re)],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,onSlideChange:f,onProgress:R,class:"swiper-container"},{default:F(()=>[(n(!0),r(V,null,z(o.bannerList,(h,O)=>(n(),U(u(ce),{key:h.id,virtualIndex:O,onClick:Xt=>A(h.linkUrl)},{default:F(()=>[e("div",yt,[e("img",{class:"w-full h-full rounded-md object-cover",src:h.imageUrl||u(te)("images/mall/mall_banner.png")},null,8,xt)])]),_:2},1032,["virtualIndex","onClick"]))),128)),wt]),_:1},8,["modules"])):S("",!0)])])}}}),$t=N(bt,[["__scopeId","data-v-df20a652"]]),kt="/static/images/new-text-DlOd6omk.png",Ct="/static/images/gift-icon-ChLUyQdL.png",It="/static/images/activity-text-fIwfO6KT.png",Lt="/static/images/active-icon-C76y8UVY.png",St={class:"flex gap-3 my-3"},Rt={class:"flex flex-col justify-between h-14"},Ft=e("img",{src:kt,class:"w-8"},null,-1),Bt={class:"text-[#999] text-xxs"},Tt={class:"text-xs text-primary"},At=e("div",{class:"h-full flex flex-col justify-end"},[e("img",{src:Ct,class:"h-auto w-9"})],-1),Dt={class:"flex flex-col justify-between h-14"},Pt=e("img",{src:It,class:"w-8"},null,-1),Ot={class:"text-[#999] text-xxs"},Et={class:"text-xs text-primary"},Vt=e("img",{src:Lt,class:"w-[75px] h-[72px]"},null,-1),zt=B({emits:["handleTo"],setup(o,{expose:m,emit:c}){K();const a=d({fmGeneralActivity:{name:"",startTime:"",endTime:""}});return(async()=>{const l={generalActivityId:1};try{const s=await Ie(l);s.code===1&&(a.value=s.data)}catch(s){console.error("获取活动信息失败:",s)}})(),m({actInfo:a}),(l,s)=>(n(),r("div",St,[e("div",{onClick:s[0]||(s[0]=f=>c("handleTo","/activity-goods?type=1")),class:"flex items-center justify-between flex-1 px-4 py-3 bg-white rounded-xl"},[e("div",Rt,[Ft,e("div",Bt,I(l.$t("mall.New Arrivals")),1),e("div",Tt,I(l.$t("avtivity.check")),1)]),At]),e("div",{onClick:s[1]||(s[1]=f=>c("handleTo","/activity-goods?type=2")),class:"flex items-center justify-between flex-1 px-4 pr-[6px] py-[3px] bg-white rounded-xl"},[e("div",Dt,[Pt,e("div",Ot,I(l.$t("mall.Hot sale products")),1),e("div",Et,I(l.$t("avtivity.check")),1)]),Vt])]))}}),Ut=B({props:{limit:null},setup(o){const m=d(0),c=()=>{document.getElementById("fm-page").scrollTo({top:0,left:0,behavior:"smooth"})};return H(()=>{document.getElementById("fm-page").addEventListener("scroll",()=>{m.value=document.getElementById("fm-page").scrollTop})}),(a,w)=>{const l=L("van-icon");return pe((n(),r("div",{ref:(s,f)=>{f.toTop=s},onClick:c,class:"fixed flex shadow-1 items-center justify-center z-50 w-8 h-8 bg-white rounded-full right-2.5 bottom-[20%]"},[x(l,{name:"back-top",class:"text-xl"})],512)),[[fe,m.value>(o.limit||200)]])}}}),Nt=o=>(M("data-v-61592da5"),o=o(),G(),o),jt={class:"w-full bg-fixed bg-[#F8F8F8] linear-mall h-full overflow-y-scroll"},qt={class:"relative px-2.5 overflow-hidden"},Ht={class:"ad-img-container"},Mt=["onClick"],Gt=Nt(()=>e("img",{src:he,alt:"广告"},null,-1)),Kt=[Gt],Yt=B({name:"Mall"});function Jt(o){const m=d(null),c=d(null),a=d(!1),w=K(),[l,s]=q(!1),{showActiveInfo:f,getShowActiveInfo:v}=Se(),_=async()=>{var t,i;a.value=!0,await((t=m.value)==null?void 0:t.onRefresh()),(i=c.value)==null||i._queryRemindList(),a.value=!1},g=d(null),R=d([{id:1,imageUrl:te("images/mall/mall_banner.png"),linkUrl:null}]),p=async()=>{const t=await ye({locationType:1});t.success&&(R.value=t.data)},k=()=>{console.log("scroll")},A=d([]),$=d([]),C=async()=>{const t=await X({page:1,size:50,type:2});t.success&&($.value=t.data||[])},D=d([]),P=async()=>{const t=await X({page:1,size:50,type:1});t.success&&(D.value=t.data||[])},y=t=>{w.push(t)},j=()=>{s(!1),w.push("/520-home")};return H(()=>{p(),C(),P(),v()}),ve(()=>{var t;Le(),(t=c.value)==null||t._queryRemindList()}),(t,i)=>{const Y=L("van-pull-refresh");return n(),r("div",jt,[x($t,{bannerList:R.value,expressList:A.value,hotList:$.value,hotListBottom:D.value},{default:F(()=>[x(Ne,{ref:(b,T)=>{T.noticeRef=b,c.value=b}},null,512)]),_:1},8,["bannerList","expressList","hotList","hotListBottom"]),e("div",qt,[x(Ke),x(zt,{onHandleTo:y,ref:(b,T)=>{T.activeHandleRef=b,g.value=b}},null,512),x(Y,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=b=>a.value=b),onRefresh:_,class:"min-h-screen"},{default:F(()=>[x(ke,{isSearchPage:!1,ref:(b,T)=>{T.listRef=b,m.value=b},onScroll:k,activeInfo:u(f)},null,8,["activeInfo"])]),_:1},8,["modelValue"])]),x(Ut),u(l)?(n(),r("div",{key:0,class:"overlay",onClick:i[1]||(i[1]=b=>u(s)(!1)),"z-index":"9999"},[e("div",Ht,[e("div",{onClick:W(j,["stop"])},Kt,8,Mt)])])):S("",!0)])}}const Qt=B({...Yt,setup:Jt}),xs=N(Qt,[["__scopeId","data-v-61592da5"]]);export{xs as default};
