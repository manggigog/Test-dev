import{_ as S}from"./upload-DmsmBb9j.js";import{_ as B,z as $,x as F,r as u,a2 as U,F as c,Z as P,H as R,$ as _,I as a,P as r,Q as i,a4 as T,T as g,X as z,Y as D}from"./vendor-Dr_RpJ_Y.js";import{e as E,b as N}from"./concat-CzA3QGh0.js";import{w as j,a7 as L,g as O}from"./index-LRhcxFAI.js";import{u as A}from"./upload-AP7UGkIr.js";const H=s=>(z("data-v-87db80a2"),s=s(),D(),s),Q={class:"px-4 py-4 mb-4"},X={class:"mb-4 text-base font-medium text-center"},Y={class:"mt-4 mb-6"},Z={class:"bg-[#F2F0EF] p-2.5 pt-[5px] rounded-xl w-[60px] h-[60px]"},q=H(()=>a("img",{class:"w-[24px] h-[24px] m-auto object-cover",src:S},null,-1)),G={class:"text-[#2E2008] opacity-30 text-xxs mt-[2px]"},J={class:"text-xxs text-[#2E2008] opacity-30 leading-none text-center w-full"},K={class:"text-center"},M=$({props:{show:{type:Boolean},id:{default:null}},emits:["close"],setup(s,{emit:p}){const m=s,{t:f}=F(),n=u(""),t=u([]),v=u(!1),{loadingToggle:d}=j(),[W,ee]=U(!1),b=u(3),h=async o=>{try{v.value=!0,d(!0,1);const e=await L(o,"feedback"),l=await A(e);if(!l.success)return t.value.length-=1;t.value[t.value.length-1]={url:O.imgUrl+l.data}}finally{d(!1),v.value=!1}},w=async()=>{if(v.value){g(f("common.uploading"));return}if(d(!0),!n.value){g(f("common.please input content"));return}const o=t.value.map(l=>l.url).join(",");let e={};m.id?e=await E({content:n.value,imageUrls:o,id:m.id}):e=await N({content:n.value,imageUrls:o}),d(!1),e.success&&(n.value="",t.value=[],p("close",1),g(f("common.success")))},k=()=>{n.value="",t.value=[]};return(o,e)=>{const l=c("van-icon"),y=c("van-field"),V=c("van-uploader"),C=c("VanButton"),I=c("VanPopup");return R(),P(I,{show:m.show,round:"",onOpen:k,position:"bottom",onClickOverlay:e[3]||(e[3]=()=>{p("close")})},{default:_(()=>[a("div",Q,[a("div",X,i(s.id?o.$t("user.Respond to feedback"):o.$t("common.comminicate")),1),r(l,{name:"cross",size:"22",class:"absolute top-4 right-2.5",onClick:e[0]||(e[0]=()=>{p("close")})}),r(y,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=x=>n.value=x),rows:"5",autosize:"",label:"",type:"textarea",maxlength:"200",placeholder:s.id?o.$t("user.Enter your response to this feedback"):o.$t("profile.feedbackDes"),"show-word-limit":""},null,8,["modelValue","placeholder"]),a("div",Y,[r(V,{modelValue:t.value,"onUpdate:modelValue":e[2]||(e[2]=x=>t.value=x),accept:"image/*","preview-size":"60","max-count":b.value,afterRead:h},{default:_(()=>[a("div",Z,[q,a("div",G,i(o.$t("common.add img")),1),a("div",J,i(t.value.length)+" / "+i(b.value),1)])]),_:1},8,["modelValue","max-count"])]),a("div",K,[r(C,{class:"font-semibold btn h-[38px] min-w-[160px] px-4 rounded-3xl text-base",onClick:w},{default:_(()=>[T(i(o.$t("common.submit")),1)]),_:1})])])]),_:1},8,["show"])}}}),le=B(M,[["__scopeId","data-v-87db80a2"]]);export{le as C};
