import{B as K}from"./BackIcon-CPUEW9je.js";import{C as M}from"./ConcatPop-D9StsrUD.js";import{d as Q,f as Y}from"./concat-VSbsUbH2.js";import{_ as Z,y as W,w as X,bc as ee,r as E,x as q,D as se,F as c,G as n,H as s,O as m,N as d,Q as i,P as l,a2 as b,a0 as y,E as k,I,J as C,a1 as te,T as F,l as oe,Y as ae,Z as ne,K as P,br as N}from"./vendor-D6JO6WHW.js";import{b as le,l as U,h as re}from"./index-Ds2hFbCb.js";import{u as ce}from"./user-B05itL1O.js";import"./upload-B7OBZe8E.js";import"./upload-EllNmkoq.js";const V="/Test-dev/static/images/avatarRing-CSeD8_ae.png",ie="/Test-dev/static/images/file-copy-line-Cy8D9UBs.png",A=_=>(ae("data-v-3f7fd656"),_=_(),ne(),_),de={class:"w-full bg-[#F2F0EF] pb-[80px] relative"},ue={class:"fixed top-0 left-0 w-full z-50 h-[44px] bg-[#FFFFFF]"},me={class:"absolute top-3 left-2.5 text-[#2E2008] flex items-center h-5"},pe={class:"font-medium"},_e={class:"pt-[44px]"},fe={class:"pt-3 text-center text-sm text-[#A6A6A6]"},he={class:"rounded-xl gap-3 flex items-start p-2.5"},ge=A(()=>s("img",{class:"w-8 h-8",src:V},null,-1)),ve={class:"bg-white w-[78%] rounded-r-lg p-3 rounded-bl-lg"},xe={class:"text-[#2E2008]/70 text-sm break-words"},we={key:0,class:"text-sm mt-3 bg-[#F5F5F5] rounded-lg px-2 py-1 flex items-center justify-between"},be=A(()=>s("img",{src:ie,class:"w-5 h-5"},null,-1)),ye=[be],ke={key:1,class:"w-full mt-2"},Ie={class:"container"},Ce=["src"],Fe={class:"pb-3 text-center text-sm text-[#A6A6A6]"},Ae={class:"flex items-start justify-end gap-3"},De={class:"bg-white w-[78%] rounded-l-lg p-3 rounded-br-lg"},Te={class:"text-[#2E2008]/70 text-sm break-words"},Be={key:0,class:"w-full pt-3 pb-2 text-right"},Se={class:"container"},Ee=["src"],qe=A(()=>s("img",{class:"w-8 h-8",src:V},null,-1)),Pe={class:"fixed bottom-0 left-0 w-full gap-4 px-3 py-2.5 text-center flex-center-bw linear-bg"},Ne=W({setup(_){const v=X().t,J=oe(),p=te(),[$,D]=ee(!1),o=E({}),T=async()=>{var t,r;if(!((t=p.query)!=null&&t.id))return;const e=await Q((r=p.query)==null?void 0:r.id);e.success&&(o.value=e.data)},L=q(()=>{var e,t,r;if((e=o.value)!=null&&e.replyJson)try{return((r=(t=o.value)==null?void 0:t.replyJson)==null?void 0:r.split("----")).map(g=>{const u=JSON.parse(g);return{...u,showImgs:u.imageUrls?u.imageUrls.split(","):[]}})}catch{return[]}return[]}),f=q(()=>{var e,t;return(e=o.value)!=null&&e.imageUrls?(t=o.value)==null?void 0:t.imageUrls.split(","):[]}),R=(e,t)=>{N({images:e,closeable:!0,showIndex:!0,startPosition:t})},j=e=>{N({images:f.value,closeable:!0,showIndex:!0,startPosition:e})},O=async()=>{var e,t;if(x.value.memberLevel>3){if(!((e=p.query)!=null&&e.id)||!(await Y({id:((t=p.query)==null?void 0:t.id)||""})).success)return;F(v("order.Delete success")),J.back();return}else{F(v("common.lv4 tips_del"));return}},z=()=>{if(x.value.memberLevel>3)D(!0);else{F(v("common.lv4 tips"));return}},G=e=>{e&&T(),D(!1)},x=E({}),H=async()=>{const e=await ce();!e.success||!e.data||(x.value=e.data)};return se(()=>{H(),T()}),(e,t)=>{var u;const r=k("van-grid-item"),h=k("van-grid"),g=k("VanButton");return n(),c("div",de,[s("header",ue,[s("div",me,[m(K,null,{default:d(()=>[s("span",pe,i(l(le)(o.value.address,"...",5,5))+"交流历史",1)]),_:1})])]),s("div",_e,[s("div",fe,i(o.value.createTime?l(U)(o.value.createTime):""),1),s("div",he,[ge,s("div",ve,[s("div",xe,i(o.value.content),1),o.value.fullAddress?(n(),c("div",we,[y(i(o.value.fullAddress)+" ",1),s("div",{onClick:t[0]||(t[0]=a=>l(re)(o.value.fullAddress))},ye)])):b("",!0),l(f)&&l(f).length>0?(n(),c("div",ke,[m(h,{square:"",border:!1,"column-num":3},{default:d(()=>[(n(!0),c(I,null,C(l(f),(a,w)=>(n(),P(r,{key:a,onClick:B=>j(w)},{default:d(()=>[s("div",Ie,[s("img",{src:a,class:"w-full h-full rounded-lg"},null,8,Ce)])]),_:2},1032,["onClick"]))),128))]),_:1})])):b("",!0)])]),(n(!0),c(I,null,C(l(L),(a,w)=>(n(),c("div",{key:w,class:"rounded-xl p-2.5"},[s("div",Fe,i(a.createTime?l(U)(a.createTime):""),1),s("div",Ae,[s("div",De,[s("div",Te,i(a.content),1),a.showImgs&&a.showImgs.length>0?(n(),c("div",Be,[m(h,{square:"",border:!1,"column-num":3},{default:d(()=>[(n(!0),c(I,null,C(a.showImgs,(B,S)=>(n(),P(r,{key:S,onClick:Ue=>R(a.showImgs,S)},{default:d(()=>[s("div",Se,[s("img",{src:B,class:"w-full rounded-lg"},null,8,Ee)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)])):b("",!0)]),qe])]))),128))]),s("div",Pe,[m(g,{style:{border:"1px solid #d9d9d9"},class:"font-semibold flex-1 h-[46px] min-w-[120px] bg-white px-4 rounded text-base",onClick:O},{default:d(()=>[y(i(e.$t("common.delete")),1)]),_:1}),m(g,{class:"font-semibold bg-[#FED73A] flex-1 btn h-[46px] min-w-[120px] px-4 rounded text-base",onClick:z},{default:d(()=>[y(i(e.$t("user.I want to reply")),1)]),_:1})]),m(M,{id:(u=l(p).query)==null?void 0:u.id,show:l($),onClose:G},null,8,["id","show"])])}}}),Ge=Z(Ne,[["__scopeId","data-v-3f7fd656"]]);export{Ge as default};
