import{_ as T,a as B,b as te,c as se}from"./recharge-DFjlsSoA.js";import{_ as E}from"./checked-CkJ-Z4or.js";import{_ as oe,z as ae,a2 as le,y as ne,r as f,bl as k,E as ce,G as i,H as r,I as e,P as h,Q as o,U as m,O as a,$ as D,F as y,o as ie,X as re,Y as de,a4 as ue}from"./vendor-Dr_RpJ_Y.js";import{B as me}from"./BackIcon-CDrGaEPo.js";import{g as M,w as _e,j as ve,k as C,e as x,b9 as pe}from"./index-CU2nzZe6.js";import{o as fe}from"./OTCContract-DCoK5NsH.js";import{o as he}from"./OtcAgent-WX8C7zOx.js";const _=g=>(re("data-v-12bfcdac"),g=g(),de(),g),ge={class:"relative w-full h-full linear-bg px-2.5 safe-bottom-page"},we={class:"flex items-center justify-between sticky top-0 z-50 bg-[#FFEFD6] py-2.5"},be={class:"flex flex-wrap items-center font-semibold"},ye={class:"ml-2 font-normal"},xe={class:"flex items-center px-4 py-5 bg-white rounded-xl"},Fe={class:"flex-1 text-sm text-[#2E2008]"},Ae={key:0,class:"flex items-center"},ke=_(()=>e("img",{class:"w-4 h-4",src:B},null,-1)),De={class:"ml-2 mr-4 text-[#8D8D8D]"},Me={key:1,class:"w-2.5 h-2.5 my-2",src:T},Ce={class:"flex items-center"},Ie=_(()=>e("img",{class:"w-4 h-4",src:te},null,-1)),$e={class:"ml-2 mr-4 text-[#8D8D8D]"},Se={key:2,class:"w-2.5 h-2.5 my-2",src:T},Te={key:3,class:"flex items-center"},Be=_(()=>e("img",{class:"w-4 h-4",src:B},null,-1)),Ee={class:"ml-2 mr-4 text-[#8D8D8D]"},Ue=_(()=>e("img",{class:"w-5 h-5",src:se},null,-1)),Ve=[Ue],Re={class:"bg-white rounded-xl p-4 pb-12 w-full mt-2.5"},Ne={class:"bg-[#FFF8EC] rounded-xl p-2.5 flex items-center w-full relative"},Oe=["src"],je={class:"w-full px-4 bg-white rounded-xl"},qe=["src"],Le=_(()=>e("span",null,"MAI",-1)),ze={key:0,class:"ml-auto w-3.5 h-3.5",src:E,alt:""},Pe=["src"],Xe=_(()=>e("span",null,"MUSD",-1)),Ge={key:0,class:"ml-auto w-3.5 h-3.5",src:E,alt:""},He={class:"mt-1.5 text-[0.65rem] text-[#2E2008] opacity-60"},Qe={key:0},We={key:1},Ye={class:"bg-[#FFF8EC] rounded-xl px-0.5 pr-2.5 pt-2.5 pb-3 mt-5 flex justify-between items-end w-full"},Je={class:"mt-1.5 text-[0.65rem] text-[#2E2008] opacity-60"},Ke={class:"flex flex-col items-center justify-center mt-28"},Ze=ae({setup(g){const{mai:U,musd:V,balances:R}=fe(),{withdraw:N,deposit:O}=he(M.otcAgentFreeFee),{loadingToggle:F}=_e(),I=ie(),[j,w]=le(!1),q=ne(()=>l.value===1?n.value>p[t.value]:n.value>v[t.value]),n=f(null),t=f("MAI"),L=f(null),$=f(null),S=s=>{t.value=s,$.value.toggle(),b()},l=f(1),z=()=>{l.value===1?l.value=2:l.value=1},d=k({MAI:"",MUSD:""}),v=k({MAI:0,MUSD:0}),p=k({MAI:0,MUSD:0}),P=async()=>{d.MUSD=await V(),d.MAI=await U()},X=async()=>{const s=await R(d[t.value],M.otcAgentFreeFee);v[t.value]=s},G=async()=>{const s=await(await ve(d[t.value])).balanceOf(M.otcAgentFreeFee);p[t.value]=+s},H=()=>{l.value===1?n.value=p[t.value]||0:n.value=v[t.value]||0},Q=async()=>{l.value===1?(w(!0),await O(d[t.value],n.value),b(),w(!1)):(w(!0),await N(d[t.value],n.value),b(),w(!1)),Y()},W=()=>{I.query.type&&(I.query.type==="buy"?t.value="MUSD":t.value="MAI")},Y=()=>{n.value=0},b=async()=>{F(!0),await Promise.all([X(),G()]),F(!1)};return ce(async()=>{F(!0),W(),await P(),b()}),(s,u)=>{const J=y("van-dropdown-item"),K=y("van-dropdown-menu"),Z=y("VanField"),ee=y("VanButton");return r(),i("div",ge,[e("header",we,[e("div",be,[h(me),e("div",ye,o(s.$t("otc.Recharge")),1)])]),e("div",xe,[e("div",Fe,[l.value==2?(r(),i("div",Ae,[ke,e("div",De,o(s.$t("otc.from")),1),e("div",null,o(s.$t("otc.OTCAccount")),1)])):m("",!0),l.value==2?(r(),i("img",Me)):m("",!0),e("div",Ce,[Ie,e("div",$e,o(l.value==1?s.$t("otc.from"):s.$t("otc.to")),1),e("div",null,o(s.$t("otc.walletaccount")),1)]),l.value==1?(r(),i("img",Se)):m("",!0),l.value==1?(r(),i("div",Te,[Be,e("div",Ee,o(s.$t("otc.to")),1),e("div",null,o(s.$t("otc.OTCAccount")),1)])):m("",!0)]),e("div",{onClick:z},Ve)]),e("div",Re,[e("div",Ne,[e("img",{class:"w-6 h-6 mr-1.5",src:a(C)(`images/tokens/${t.value}.png`),alt:"",srcset:""},null,8,Oe),h(K,{class:"w-full",ref:(c,A)=>{A.menuRef=c,L.value=c},"active-color":"#FEA021",overlay:!1},{default:D(()=>[h(J,{title:t.value,ref:(c,A)=>{A.itemRef=c,$.value=c}},{default:D(()=>[e("div",je,[e("div",{class:"py-5 flex items-center border-b-[1px] border-[#e5e5e5] border-solid",onClick:u[0]||(u[0]=c=>S("MAI"))},[e("img",{class:"w-6 h-6 mr-1.5",src:a(C)("images/tokens/MAI.png"),alt:"",srcset:""},null,8,qe),Le,t.value=="MAI"?(r(),i("img",ze)):m("",!0)]),e("div",{class:"flex items-center py-5",onClick:u[1]||(u[1]=c=>S("MUSD"))},[e("img",{class:"w-6 h-6 mr-1.5",src:a(C)("images/tokens/MUSD.png"),alt:"",srcset:""},null,8,Pe),Xe,t.value=="MUSD"?(r(),i("img",Ge)):m("",!0)])])]),_:1},8,["title"])]),_:1},512)]),e("div",He,[l.value===2?(r(),i("span",Qe,o(s.$t("otc.wallectblance"))+o(a(x)(a(p)[t.value]))+" "+o(t.value),1)):(r(),i("span",We,o(s.$t("common.balance",{token:"OTC"}))+"ï¼š"+o(a(x)(a(v)[t.value]))+" "+o(t.value),1))]),e("div",Ye,[h(Z,{class:"flex-1 bg-[#FFF8EC] text-3xl font-bold text-[#2E2008]",modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=c=>n.value=c),type:"number",placeholder:"0",formatter:a(pe)},null,8,["modelValue","formatter"]),e("div",{class:"px-1.5 py-1 border-[1px] border-[#FBA923] border-solid rounded text-xs text-[#FBA923] font-medium",onClick:H}," MAX ")]),e("div",Je,o(s.$t("otc.canuse"))+o(l.value===2?a(x)(a(v)[t.value]):a(x)(a(p)[t.value]))+" "+o(t.value),1),e("div",Ke,[h(ee,{loading:a(j),disabled:!n.value||+n.value<=0||a(q),class:"font-semibold btn h-[38px] min-w-[130px] px-4 rounded-3xl text-base",onClick:Q},{default:D(()=>[ue(o(s.$t("common.submit")),1)]),_:1},8,["loading","disabled"])])])])}}}),ct=oe(Ze,[["__scopeId","data-v-12bfcdac"]]);export{ct as default};
