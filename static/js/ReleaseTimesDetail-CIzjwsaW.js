import{z as H,x as Q,r as p,y as B,a2 as N,E as W,G as x,H as u,I as e,P as m,a4 as z,Q as l,O as t,J as O,U as G,an as ce,_ as pe,q as me,o as de,bl as ve,F as S,Z as J,$ as C,a0 as X,K as Z,N as xe,V as K,X as fe,Y as he}from"./vendor-Dr_RpJ_Y.js";import{a as _e,N as ge,O as ye,r as M,k as Te,P as be}from"./index-7OiUoGXy.js";import{D as we}from"./DescriptionPop-D_TtZTeT.js";import{_ as $e}from"./date-picker-CsyBoWhh.js";import{_ as ke}from"./arrow-bottom-D85vJawE.js";import{_ as Ce}from"./DefaultPage-BbbCICPU.js";import{B as Fe}from"./BackIcon-CDrGaEPo.js";const De=""+new URL("../images/tips-orange-ZP3zHPJX.svg",import.meta.url).href,Se={class:"releaseStatistics w-full h-fit p-[0.75rem] pr-[0.25rem] bg-[#FFF] rounded-[12px]"},Pe=e("img",{class:"w-[15px] h-[15px] ml-[4px] text-[#A6A6A6]",src:De},null,-1),Ae={class:"mt-[1px] flex items-end"},Re={class:"text-[#000] font-BebasNeue text-[20px] font-normal leading-[24px]"},Ve={class:"ml-[5px] mb-[3px] text-[#000] font-Puhui text-[10px] font-normal leading-[14px]"},ze={key:0,class:"text-[#A6A6A6] font-Puhui text-[12px] font-normal leading-[18px] flex flex-wrap"},Be={class:"mx-[4px] text-[#FF8812]"},Ie={class:"mx-[4px] text-[#FF8812]"},Le={key:1,class:"mt-[6px]"},Me=H({setup(b){const{contributesStore:i}=_e(),{t:n}=Q(),w=p(!1),f=B(()=>i.releaseData||{remainTotal:0,remainTemp:0}),[F,_]=N(!1),g=B(()=>[{url:"help/release/title",text:n("releaseTime.Free release times"),subText:n("releaseTime.Free release times tips")},{url:"help/release/step1",text:`1.${n("releaseTime.Monthly Gift")}`,subText:n("releaseTime.Monthly Gift tips")},{url:"help/release/step2",text:`2.${n("releaseTime.Shopping Order")}`,subText:n("releaseTime.Shopping Order tips")},{url:"help/release/step3",text:`3.${n("releaseTime.confirm the receipt of goods")}`,subText:n("releaseTime.confirm the receipt of goods tips")},{url:"help/release/step4",text:`4.${n("releaseTime.Consumer Reviews")}`,subText:n("releaseTime.Consumer Reviews tips")},{url:"help/release/step5",text:`5.${n("releaseTime.Gift points")}`,subText:n("releaseTime.Gift points tips")},{url:"help/release/step6",text:`6.${n("releaseTime.Offline payment")}`,subText:n("releaseTime.Offline payment tips")}]),y=async()=>{w.value=!0,await i.getNaturalReleaseTimes(),w.value=!1},$=B(()=>{let r=new Date,h=r.getFullYear(),k=r.getMonth();return ge(new Date(h,k+1,1).getTime()-1e3,"MM-DD HH:mm:ss")});return W(()=>{y()}),(r,h)=>(u(),x("div",Se,[e("div",{class:"w-fit text-[#A6A6A6] font-Puhui text-[12px] font-normal leading-[18px] flex items-center",onClick:h[0]||(h[0]=k=>t(_)(!0))},[z(l(r.$t("home.currentFreeTimes"))+" ",1),Pe]),w.value?(u(),x("div",Le,[m(t(ce),{size:"24"})])):(u(),x(O,{key:0},[e("div",Ae,[e("div",Re,l(t(f).remainTotal||0),1),e("div",Ve,l(r.$t("common.times")),1)]),t(f).remainTemp&&t(f).remainTemp>0?(u(),x("div",ze,[z(l(r.$t("home.among"))+" ",1),e("span",Be,l(t(f).remainTemp||0),1),z(" "+l(r.$t("home.releaseTimesWill"))+" ",1),e("span",Ie,l(t($)),1),z(" "+l(r.$t("common.expire")),1)])):G("",!0)],64)),m(we,{show:t(F),list:t(g),onClose:h[1]||(h[1]=k=>t(_)(!1))},null,8,["show","list"])]))}}),ee=b=>(fe("data-v-fb8e8816"),b=b(),he(),b),Ne={class:"p-[0.75rem] flex justify-between items-center z-10 transition-all"},Oe={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},Ge=ee(()=>e("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:$e,alt:"",srcset:""},null,-1)),He={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},Ee=ee(()=>e("div",null,[e("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:ke,alt:"",srcset:""})],-1)),Ue={class:"flex flex-col justify-between"},je={class:"font-semibold text-base text-center px-4 pt-[18px] pb-4"},qe={class:"overflow-y-auto flex-1 px-4 pb-4"},Ye={class:"text-sm font-semibold"},Je={class:"flex items-center justify-start gap-3 mt-3 flex-wrap"},Xe=["onClick"],Ze={class:"flex-center-bw flex justify-between gap-3 bg-white px-3 py-4"},Ke={class:"text-base font-normal"},Qe={class:"text-base font-semibold"},We={class:"px-[0.75rem]"},et={class:"bg-white rounded-xl p-[12px]"},tt={class:"rounded-lg border border-solid border-b4"},st={class:"bg-[#FFF8EC] p-[8px] rounded-t-lg text-xs grid grid-cols-[3fr_2fr_1fr] gap-3 text-b1 font-semibold"},lt={class:"text-left"},at={class:"flex-1"},ot={class:"text-right"},nt={class:"text-left"},it={class:"flex-1"},rt={class:"text-right"},ut=H({setup(b){const{t:i}=Q(),n=me(),w=de(),[f,F]=N(!1),[_,g]=N(!1),y=p(!1),$=p(!1),r=p(0),h=p(10),k=p(0),d=p([]),te=p(new Date),v=p(null),P=p(new Date),T=ve({type:{text:i("order.All types"),value:null}}),c=p({text:i("order.All types"),value:null}),I=B(()=>[{text:i("releaseTime.payOrder"),value:20},{text:i("releaseTime.confirmGoods"),value:30},{text:i("releaseTime.consumerReviews"),value:40},{text:i("releaseTime.offlinePayment"),value:50},{text:i("releaseTime.giftPoints"),value:60},{text:i("releaseTime.naturalRelease"),value:100},{text:i("releaseTime.expired"),value:110},{text:i("releaseTime.onlineSystemGift"),value:10}]),se=async()=>{var R,V,D;const s=c.value.value,o=await be({page:r.value,size:h.value,type:c.value.value,begin:v.value?M(new Date(v.value.getFullYear(),v.value.getMonth(),1).getTime()):null,end:v.value?M(new Date(v.value.getFullYear(),v.value.getMonth()+1,0).getTime()):null});s==c.value.value&&(k.value=(R=o.data)==null?void 0:R.total,d.value=r.value===1?(V=o.data)==null?void 0:V.records:d.value.concat(((D=o.data)==null?void 0:D.records)||[]),d.value&&d.value.length>=k.value?$.value=!0:d.value||(d.value=[],$.value=!0))},le=s=>{v.value=s,P.value=s,F(!1),A()},ae=()=>{v.value=null,P.value=null,F(!1),A()},oe=()=>{T.type=c.value,g(!0)},ne=()=>{n.replace({path:"/releaseTimeDetail",query:{type:T.type.value}}),c.value=T.type,A(),g(!1)},ie=()=>{n.replace({path:"/releaseTimeDetail"}),c.value={text:i("order.All types"),value:null},T.type={...c.value},A(),g(!1)},E=()=>{const s=document.querySelector(".releaseStatistics");return(s==null?void 0:s.clientHeight)||0},L=async()=>{y.value=!0,r.value+=1,await se(),y.value=!1},A=()=>{r.value=0,$.value=!1,d.value=[],L()};return W(()=>{var s;c.value.value=w.query.type||null,c.value.text=(s=I.value.find(o=>o.value==w.query.type))==null?void 0:s.text,T.type={...c.value},L()}),(s,o)=>{var j;const R=S("van-sticky"),V=S("van-datetime-picker"),D=S("VanPopup"),U=S("VanButton"),re=S("van-list");return u(),x("div",{style:K(`min-height: calc(100vh - 50px - ${E()}px);`)},[m(R,null,{default:C(()=>[e("div",Ne,[e("div",{class:"flex items-center",onClick:o[0]||(o[0]=a=>t(F)(!0))},[e("div",Oe,l(v.value?t(ye)(v.value):s.$t("order.All time")),1),Ge]),e("div",{class:"flex items-center",onClick:oe},[e("div",He,l(c.value.text||s.$t("order.All types")),1),Ee])])]),_:1}),m(D,{round:"",show:t(f),"onUpdate:show":o[2]||(o[2]=a=>X(f)?f.value=a:null),position:"bottom",style:{height:"40vh"}},{default:C(()=>[m(V,{modelValue:P.value,"onUpdate:modelValue":o[1]||(o[1]=a=>P.value=a),type:"year-month",title:"",onConfirm:le,onCancel:ae,"cancel-button-text":t(i)("common.reset"),"max-date":te.value},null,8,["modelValue","cancel-button-text","max-date"])]),_:1},8,["show"]),t(_)?(u(),J(D,{key:0,show:t(_),"onUpdate:show":o[3]||(o[3]=a=>X(_)?_.value=a:null),round:"",position:"bottom",closeable:"",class:"sm:w-[375px]",style:{"max-height":"75vh","min-width":"280px",left:"50%",transform:"translate3d(-50%, 0, 0)"},"close-on-click-overlay":"",onClickOverlay:o[4]||(o[4]=a=>t(g)(!1)),onClickCloseIcon:o[5]||(o[5]=a=>t(g)(!1))},{default:C(()=>[e("div",Ue,[e("div",je,l(s.$t("common.filter")),1),e("div",qe,[e("div",null,[e("div",Ye,l(s.$t("common.category")),1),e("div",Je,[(u(!0),x(O,null,Z(t(I),a=>(u(),x("div",{class:xe(["type-cell min-w-min whitespace-nowrap border-none px-2.5",{"cell-active":t(T).type.value==a.value}]),key:a.value,onClick:q=>t(T).type=a},l(a.text),11,Xe))),128))])])]),e("div",Ze,[m(U,{round:"",class:"!border !border-solid !border-b4 text-b1 flex-1 h-[46px]",onClick:ie},{default:C(()=>[e("span",Ke,l(s.$t("common.reset")),1)]),_:1}),m(U,{round:"",class:"btn-yellow flex-1 h-[46px] border-0",onClick:ne},{default:C(()=>[e("span",Qe,l(s.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])):G("",!0),e("div",We,[e("div",et,[e("div",tt,[e("div",st,[e("div",lt,l(s.$t("releaseTime.time")),1),e("div",at,l(s.$t("releaseTime.type")),1),e("div",ot,l(s.$t("releaseTime.change")),1)]),e("div",{class:"overflow-y-scroll",style:K(`max-height: calc(100vh - 50px - ${E()}px - 100px - 16px);`)},[m(re,{loading:y.value,"onUpdate:loading":o[6]||(o[6]=a=>y.value=a),"loading-text":s.$t("common.loading"),finished:$.value,"immediate-check":!1,"finished-text":"",onLoad:L},{default:C(()=>[(u(!0),x(O,null,Z(d.value,(a,q)=>{var Y;return u(),x("div",{key:q,class:"p-2 grid grid-cols-[3fr_2fr_1fr] gap-3 text-xs leading-[18px] text-b2 border-t border-solid border-b4"},[e("div",nt,l(a.createTime?t(M)(a.createTime):"-"),1),e("div",it,l(((Y=t(I).find(ue=>ue.value==a.type))==null?void 0:Y.text)||""),1),e("div",rt,l(a.times.toString().includes("-")?"":"+")+l(a.times),1)])}),128))]),_:1},8,["loading","loading-text","finished"]),!y.value&&((j=d.value)==null?void 0:j.length)<=0?(u(),J(Ce,{key:0,class:"pb-6",needTextTop:!0,url:t(Te)("images/evaluate_empty.png"),title:s.$t("common.No data yet"),top:"2rem",iconSize:"145px"},null,8,["url","title"])):G("",!0)],4)])])])],4)}}}),ct=pe(ut,[["__scopeId","data-v-fb8e8816"]]),pt={class:"font-Puhui bg-gradient-to-b from-[#FED73A] from-0% to-[#F2F0EF] to-50%"},mt={class:"sticky top-0 sm:top-0 z-50 w-full h-[50px] px-[1rem] bg-[#FED73A] flex items-center"},dt={class:"relative w-full"},vt={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] flex justify-center items-center"},xt={class:"text-[#2E2008] text-[18px] not-italic font-bold leading-[26px] text-center"},ft={class:"px-[0.75rem]"},$t=H({setup(b){return(i,n)=>(u(),x("div",pt,[e("div",mt,[e("div",dt,[m(Fe),e("div",vt,[e("span",xt,l(i.$t("home.releaseTimesDetail")),1)])])]),e("div",ft,[m(Me)]),e("div",null,[m(ct)])]))}});export{$t as default};
