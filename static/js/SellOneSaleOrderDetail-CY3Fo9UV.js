import{y as $,F as d,G as a,H as e,Q as s,a2 as h,P as u,a0 as b,x as P,_ as L,w as M,be as q,a1 as J,r as A,D as Q,O as p,K as Y,N as Z,l as z,E as W,Y as X,Z as ee,T as te}from"./vendor-BUT0HZ5j.js";import{_ as se,a as G}from"./buyer-cSg0YNjj.js";import{_ as H}from"./copy-DlqB7kPH.js";import{h as _,b as K,l as oe,R as ae,e as re,ba as de,a3 as ie}from"./index-hbwLMIYO.js";import{_ as ne}from"./GoodsItem-BGpXBRz9.js";import{B as ce}from"./BackIcon-biFt6cm7.js";import{l as le}from"./luckyShopContract-BakCQr-p.js";const ue="/Test-dev/static/images/goods-info-Dp-60OiU.svg",me={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl text-default font-Sans"},he={class:"gap-1 flex-start"},ve=e("img",{src:se,class:"w-4 h-4",alt:""},null,-1),fe={class:"font-semibold"},pe={class:"flex justify-between mt-2"},ye={class:"opacity-60"},_e={class:"font-semibold"},$e={key:0},ge={key:1},xe={key:2},be={key:3},we={key:4},ke=$({props:{status:null},setup(t){const{status:i}=t;return(o,n)=>(a(),d("div",me,[e("div",he,[ve,e("div",fe,s(o.$t("order.orderStatus")),1)]),e("div",pe,[e("div",ye,s(o.$t("order.currentStatus")),1),e("div",_e,[t.status===30?(a(),d("span",$e,s(o.$t("order.status1")),1)):t.status===40?(a(),d("span",ge,s(o.$t("order.status2")),1)):t.status===200?(a(),d("span",xe,s(o.$t("order.status3")),1)):t.status===300?(a(),d("span",be,s(o.$t("refund.refunded")),1)):t.status===50?(a(),d("span",we,s(o.$t("order.status4")),1)):h("",!0)])])]))}}),Ce={class:"px-5 py-4 mt-2 text-sm text-right bg-white rounded-xl text-default font-Sans"},Se={class:"gap-1 flex-start"},Ie=e("img",{src:G,class:"w-4 h-4",alt:""},null,-1),Te={class:"font-semibold"},De={class:"mt-2 flex-center-bw"},Ne={class:"opacity-60"},Be={key:0,src:H,class:"w-4 h-4 ml-2",alt:""},Oe={class:"mt-2 flex-center-bw"},Pe={class:"opacity-60"},Ae=e("img",{src:H,class:"w-4 h-4 ml-2",alt:""},null,-1),Ke={class:"flex justify-between mt-2"},Ge={class:"opacity-60"},He={class:"whitespace-normal"},Re={key:0,class:"mt-2 flex-center-bw"},Ve={class:"opacity-60"},je={key:1,class:"mt-2 flex-center-bw"},Ee={class:"opacity-60"},Fe={class:"flex-center"},Ue=$({props:{order:null},setup(t){const{order:i}=t;return(o,n)=>(a(),d("div",Ce,[e("div",Se,[Ie,e("div",Te,s(o.$t("order.orderInfo")),1)]),e("div",De,[e("div",Ne,s(o.$t("order.txHash")),1),e("div",{class:"flex items-center",onClick:n[0]||(n[0]=m=>u(_)(t.order.hash))},[b(s(u(K)(t.order.hash,"***",9,5)||"-")+" ",1),t.order.hash?(a(),d("img",Be)):h("",!0)])]),e("div",Oe,[e("div",Pe,s(o.$t("order.payAddress")),1),e("div",{class:"flex items-center",onClick:n[1]||(n[1]=m=>u(_)(t.order.address))},[b(s(u(K)(t.order.address,"...",5,5))+" ",1),Ae])]),e("div",Ke,[e("div",Ge,s(o.$t("order.payTime")),1),e("div",He,s(u(oe)(t.order.createTime)),1)]),t.order.expressCompany?(a(),d("div",Re,[e("div",Ve,s(o.$t("order.deliveryCompany")),1),e("div",null,s(t.order.expressCompany),1)])):h("",!0),t.order.expressNo?(a(),d("div",je,[e("div",Ee,s(o.$t("order.deliveryId")),1),e("div",Fe,[e("div",null,s(t.order.expressNo),1),e("div",{class:"py-1 pl-2 rounded text-oriange1",onClick:n[2]||(n[2]=m=>u(_)(t.order.expressNo))},s(o.$t("common.copy")),1)])])):h("",!0)]))}}),Le={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl text-default font-Sans"},Me={class:"gap-1 flex-start"},qe=e("img",{src:G,class:"w-4 h-4",alt:""},null,-1),Je={class:"font-semibold"},Qe={class:"flex justify-between gap-2 mt-2"},Ye={class:"opacity-60 whitespace-nowrap"},Ze={class:"text-right break-all"},ze={class:"flex justify-between mt-2"},We={class:"opacity-60"},Xe={class:"max-w-[180px] whitespace-normal text-right"},et={class:"text-right break-all"},tt={key:0,class:"text-right break-all"},st={key:1,class:"text-right break-all"},ot=$({props:{order:null},setup(t){const{order:i}=t,o=P(()=>i?(i.receiverProvince??"")+(i.receiverCity??"")+(i.receiverCounty??"")+(i.receiverDetailInfo??""):"-"),n=P(()=>i?`${o.value}  ${i.receiver}  ${i.receiverPhone}`:"-");return(m,y)=>(a(),d("div",Le,[e("div",Me,[qe,e("div",Je,s(m.$t("order.buyerInfo")),1)]),e("div",Qe,[e("div",Ye,s(m.$t("order.buyerRemark")),1),e("div",Ze,s(t.order.postscript||"-"),1)]),e("div",ze,[e("div",We,s(m.$t("order.getInfo")),1),e("div",Xe,[e("div",et,s(u(o)),1),t.order.receiverPhone?(a(),d("div",tt,s(t.order.receiverPhone),1)):h("",!0),t.order.receiver?(a(),d("div",st,s(t.order.receiver),1)):h("",!0),e("div",{class:"px-2 py-1 rounded text-oriange1",onClick:y[0]||(y[0]=g=>u(_)(u(n)))},s(m.$t("common.copy")),1)])])]))}}),at=t=>(X("data-v-46050ed6"),t=t(),ee(),t),rt={key:0,class:"px-3 text-default bg-[#f2f0ef]"},dt={class:"gap-2 mt-2 flex-start"},it={class:"px-5 py-4 mt-2 text-sm bg-white rounded-xl"},nt={class:"gap-1 flex-start"},ct=at(()=>e("img",{src:ue,class:"w-4 h-4",alt:""},null,-1)),lt={class:"font-semibold"},ut={class:"mt-5 mb-3 flex-center"},mt=$({setup(t){const{t:i}=M(),[o,n]=q(!1),{commodities:m,merchantForceReceived:y}=le(),{getMerchantDhKey:g,decryptAddressKey:R,decryptKey:w}=ae(),{orderGoodsStore:k}=re(),V=J(),j=z(),E=V.query.id,c=A(null),C=async()=>{var T,D,N,B;const l=k.orderGood.id||E,r=await de({id:l}),x=["receiverCity","receiverCounty","receiverDetailInfo","receiverProvince","receiverPhone","receiver","postscript"];if((T=r.data)!=null&&T.submitHash){const v=await g((D=r.data)==null?void 0:D.address,(N=r.data)==null?void 0:N.submitUserPubKey);v&&(r.data=R(r.data,v,x))}if(r.data.shippingHash){const v=await g(r.data.address,(B=r.data)==null?void 0:B.shippingUserPubKey);if(v){const O=w(r.data.expressNo,v);O.hash===r.data.shippingHash&&(r.data.expressNo=O.decrypt,r.data.expressCompany=w(r.data.expressCompany,v).decrypt)}}c.value=r.data;const f=await m(c.value.odGoodsId);c.value.commitStatus=f.status,I.value=await ie()>f.nextActionTime},S=l=>{j.push(l)},F=async()=>{n(!0);const l=await y(c.value.odGoodsId);n(!1),l.success&&(te(i("common.success")),setTimeout(()=>{C()},1500))},I=A(!1),U=()=>{S("/oneSaleOrderDelivery"),k.changeOrderGoodAction(JSON.stringify(c.value))};return Q(async()=>{await C()}),(l,r)=>{var f;const x=W("VanButton");return c.value?(a(),d("div",rt,[e("div",dt,[p(ce),e("div",null,s(l.$t("order.orderDetail")),1)]),p(ke,{status:((f=c.value)==null?void 0:f.commitStatus)||-1},null,8,["status"]),p(ot,{order:c.value},null,8,["order"]),e("div",it,[e("div",nt,[ct,e("div",lt,s(l.$t("order.goodsInfo")),1)]),p(ne,{onHandleTo:S,goods:c.value},null,8,["goods"])]),p(Ue,{order:c.value},null,8,["order"]),e("div",ut,[c.value.commitStatus===30?(a(),d("button",{key:0,class:"btn-orange py-3 px-[70px] text-white text-sm font-semibold",onClick:U},s(l.$t("order.Ship")),1)):h("",!0),I.value&&c.value.commitStatus===40?(a(),Y(x,{key:1,round:"",class:"btn text-white bg-[#FEA021] px-6 h-9 font-semibold",onClick:F,loading:u(o)},{default:Z(()=>[b(s(l.$t("order.forced receipt")),1)]),_:1},8,["loading"])):h("",!0)])])):h("",!0)}}}),gt=L(mt,[["__scopeId","data-v-46050ed6"]]);export{gt as default};
