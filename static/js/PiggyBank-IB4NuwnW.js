import{_ as mt}from"./MCOIN-BcbOHmhy.js";import{_ as pt}from"./FMCP-CFalj3L2.js";import{_ as at,y as ot,U as Ct,r as b,bc as U,bd as vt,a9 as Ft,E,F as i,G as a,O as A,N as V,H as t,a2 as I,K as x,P as e,a0 as R,Q as o,I as It,X as ct,$ as ft,Y as _t,Z as gt,w as Et,x as Rt,a4 as Vt,be as Dt,bK as Nt,bQ as Pt,D as Tt,bv as Lt,bw as zt,bh as Wt,R as Ot,l as Ut,T as jt,B as K,S as rt}from"./vendor-CjApaIpB.js";import{_ as Mt}from"./Lottie-ni5dUCha.js";import{bl as dt,d as $,bm as Ht,l as Xt,B as st,g as Gt,c as ut}from"./index-DBW_ANsl.js";import{P as qt}from"./PopHeader-RH2zyPSz.js";import{P as G}from"./flashSale-DDyqLyYN.js";import{_ as Yt}from"./EmptyTipsPop-C0Qo2Er1.js";import{p as Jt}from"./piggyBank-1Ov3R2eU.js";import{q as Kt}from"./piggyBank-DtQOV63A.js";import{B as Qt}from"./BackIcon-D2Vm_lyR.js";import"./close-DLkDHnDK.js";const Zt="/Test-dev/static/images/piggy-bank-bg-B2ZN3re_.png",te="/Test-dev/static/images/arrow-forward-C8bwXPR5.svg",q=c=>(_t("data-v-1bdf5ee8"),c=c(),gt(),c),ee={class:"relative"},se={class:"w-full text-center absolute top-[20%]"},ae={key:0,class:"success-text"},oe=q(()=>t("div",{class:"text-b6 text-xl mb-3"},"恭喜获得",-1)),ne={class:"text-2xl text-b6"},le={class:"text-[#FEA527]"},ie=R("抵用券 "),ce=q(()=>t("div",{class:"text-b6 text-xl mb-3"},"开始膨胀",-1)),re={class:"text-[#F15965] h-[52px] flex items-center justify-center gap-x-1"},de=q(()=>t("span",{class:"text-[26px] font-black leading-[52px]"},"X",-1)),ue={class:"text-[44px] font-normal leading-[52px] font-BebasNeue"},me={key:0,class:"center-card text-b1"},pe=q(()=>t("div",{class:"text-center text-xs text-[#FE7E66]"},"膨胀倍数",-1)),ve={class:"container relative"},fe={class:"center-text text-[#F15965] h-[52px] pt-1 flex items-center justify-center gap-x-1",id:"original"},_e=q(()=>t("span",{class:"text-[24px] font-[900]"},"X",-1)),ge={class:"text-[40px] font-BebasNeue leading-[52px]"},he=R(" 确定 "),xe=ot({emits:["success"],setup(c,{expose:M,emit:N}){const{height:P}=Ct(),y=b(null),[f,_]=U(!1),[T,L]=U(!1),l=vt({grow:null,amount:null,duration:100,number:0,animationStyle:"",intervalId:null});function D(u){return Math.random()*(u-1)+1}function r(){l.number=D(2),l.grow?l.number=l.grow:setTimeout(()=>{r(),S()},l.duration)}function O(){l.intervalId=setInterval(r,l.duration)}function S(){l.intervalId&&(clearInterval(l.intervalId),l.intervalId=null)}const k=()=>{setTimeout(()=>{var u;(u=y.value)==null||u.lottieAnimation.play()},300)},H=async()=>{L(!0),await dt(500);const m=document.getElementById("original").cloneNode(!0);m.id="cloned-animation",m.classList.add("animated-div"),document.querySelector(".container").appendChild(m)},z=async u=>{l.grow=null,l.amount=null,l.number=1,_(!0);try{k(),O(),await dt(6e3),l.grow=1.567,l.amount=100,S(),N("success"),H()}catch{_(!1)}},g=()=>{var u;_(!1),L(!1),S(),(u=y.value)!=null&&u.lottieAnimation&&(y.value.lottieAnimation.stop(),y.value.lottieAnimation.goToAndStop(0,!0))};return Ft(()=>{var u,m;S(),L(!1),(u=y.value)!=null&&u.lottieAnimation&&((m=y.value)==null||m.lottieAnimation.destroy())}),M({setAnimationShow:_,handleAnimation:z}),(u,m)=>{const W=E("VanButton"),Q=E("VanPopup");return a(),i("div",null,[A(Q,{show:e(f),"onUpdate:show":m[1]||(m[1]=B=>ft(f)?f.value=B:null),position:"top",onClickOverlay:g,onClick:g,class:"bg-transparent position-center font-Puhui",style:{width:"100%","max-width":"375px"}},{default:V(()=>[t("div",{class:"w-full overflow-hidden relative",style:ct({height:`${e(P)}px`})},[t("div",ee,[t("div",se,[e(T)?(a(),i("div",ae,[oe,t("div",ne,[t("span",le,o(e(l).amount),1),ie])])):(a(),i(It,{key:1},[ce,t("div",re,[de,t("span",ue,o(e(l).number.toFixed(3)),1)])],64))]),A(Mt,{path:"lottie/expand.json",renderer:"svg",loop:!1,autoplay:!1,class:"w-full",style:ct({height:`${e(P)}px`}),ref:(B,h)=>{h.lottieRef=B,y.value=B}},null,8,["style"]),e(T)?(a(),i("div",me,[pe,t("div",ve,[t("div",fe,[_e,t("span",ge,o(e(l).grow),1)])])])):I("",!0),e(T)?(a(),x(W,{key:1,class:"success-text confirm-btn",onClick:m[0]||(m[0]=B=>e(_)(!1))},{default:V(()=>[he]),_:1})):I("",!0)])],4)]),_:1},8,["show"])])}}}),ye=at(xe,[["__scopeId","data-v-1bdf5ee8"]]),we={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},be={class:"gap-1 mt-5 mb-3 text-xs flex-start"},$e={key:0,src:mt,class:"w-4",alt:""},ke={key:1,src:pt,class:"w-4",alt:""},Ae={class:"font-semibold"},Se={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},Be=ot({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(c,{expose:M,emit:N}){const{show:P}=c,{t:y}=Et(),f=b(null),_=b(G.MC),T=Rt(()=>[{text:"Mcoin",value:G.MC},{text:y("voucher.voucher"),value:G.VOUCHER}]),L=D=>{_.value=Number(D)},l=()=>{N("handleWithdraw",f.value,_.value===G.VOUCHER)};return M({amount:f}),(D,r)=>{const O=E("van-dropdown-item"),S=E("van-dropdown-menu"),k=E("VanField"),H=E("VanButton"),z=E("VanPopup");return a(),x(z,{show:c.show,"onUpdate:show":r[4]||(r[4]=g=>ft(P)?P.value=g:null),round:"","close-on-click-overlay":!0,onClickOverlay:r[5]||(r[5]=Vt(()=>N("close"),["stop"]))},{default:V(()=>[t("div",we,[A(qt,{onClick:r[0]||(r[0]=g=>N("close"))},{default:V(()=>[t("span",null,o(D.$t("maiPledge.Income to be collected")),1)]),_:1}),t("div",be,[_.value===e(G).MC?(a(),i("img",$e)):(a(),i("img",ke)),A(S,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:V(()=>[A(O,{onChange:L,modelValue:_.value,"onUpdate:modelValue":r[1]||(r[1]=g=>_.value=g),options:e(T)},null,8,["modelValue","options"])]),_:1}),t("span",Ae,o(e($)(c.balance||0,4)),1)]),t("div",Se,[A(k,{type:"number",modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=g=>f.value=g),formatter:e(Ht),placeholder:e($)(c.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),t("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:r[3]||(r[3]=()=>{f.value=e($)(c.balance,4)})}," MAX ")]),A(H,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:c.loading,disabled:f.value<=0||+f.value>+c.balance,onClick:l},{default:V(()=>[R(o(D.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),Ce=at(Be,[["__scopeId","data-v-f83d25b2"]]),j=c=>(_t("data-v-24f07996"),c=c(),gt(),c),Fe={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2"},Ie=j(()=>t("img",{class:"absolute top-0 left-0 w-full",src:Zt,alt:"",srcset:""},null,-1)),Ee={class:"relative z-20"},Re={class:"gap-2 mt-2 flex-start"},Ve=R("膨胀动画"),De={class:"mt-4"},Ne={class:"bg-white p-4 rounded-xl text-[#2E2008]"},Pe={class:"flex items-center justify-between"},Te=["src"],Le={class:"text-oriange1"},ze={class:"flex items-baseline"},We={key:0,class:"text-sm self-end mb-0.5"},Oe={key:1,class:"text-3xl font-bold"},Ue={key:1},je={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},Me={key:3,class:"text-3xl font-bold"},He={class:"text-xs flex-center text-black-400"},Xe=j(()=>t("img",{class:"self-center w-4 h-4 ml-auto",src:te,alt:"",srcset:""},null,-1)),Ge={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},qe={class:"flex flex-col justify-center"},Ye={class:"gap-1 text-xs flex-start"},Je={class:"opacity-60"},Ke={class:"mt-1.5 text-sm"},Qe={key:1},Ze={class:"flex flex-col justify-center"},ts={class:"gap-1 text-xs flex-start"},es={class:"opacity-60"},ss={class:"mt-1.5 text-sm"},as={key:1},os={class:"left"},ns={class:"gap-1 text-xs flex-start"},ls={class:"opacity-60"},is=j(()=>t("img",{src:mt,class:"w-4 h-4"},null,-1)),cs=j(()=>t("img",{src:pt,class:"w-4 h-4"},null,-1)),rs={class:"text-[#E88F17] text-sm font-medium"},ds={key:1},us={class:"flex mt-5 text-base font-medium text-center"},ms=j(()=>t("div",{class:"w-6"},null,-1)),ps={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},vs={class:"pl-2.5"},fs={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},_s={class:"flex items-center"},gs={class:"text-[#14D8A9] text-sm font-bold flex items-center"},hs={key:1},xs=R("%"),ys={key:1,class:"text-[#14D8A9] text-xs font-bold"},ws={class:"pr-2.5 text-right"},bs={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},$s={class:"flex items-center"},ks={key:1,class:"text-[#14D8A9] text-sm font-bold"},As={key:3,class:"text-[#14D8A9] text-xs font-bold"},Ss={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},Bs={class:"flex items-center justify-between pr-4 mt-1.5"},Cs=j(()=>t("div",{id:"line-echarts"},null,-1)),Fs=ot({setup(c){Dt(()=>{et()},1e4);const M=Ut(),{userIds:N,pending:P,total:y,earnings:f,nextFloatAwardAmount:_,today:T,DAY:L,dayAwardAmounts:l,userRewardPending:D,userRewardWithdraw:r}=Jt(),O=s=>{M.push(s)},S=b("0"),k=Nt("showBalance",!1),H=()=>{k.value=!k.value},z=vt({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new Pt(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),g=b(null),u=s=>{z.xAxis.data=s.dates.reverse(),z.series[0].data=s.values.reverse(),g.value.setOption(z),nt(!1)},m=b(0),W=b("0"),Q=async()=>{const s=await N();m.value=s;const n=await P(s.toString());let p=0;n.fixs.forEach(F=>{p+=+st(F)||0});let v=0;n.floats.forEach(F=>{v+=+st(F)||0});let w=0;n.records.forEach(F=>{w+=+st(F.amount)||0});const d=await D(s.toString());S.value=w.toFixed(18),W.value=K(v).plus(p).plus(d).toFixed(18)},B=b(["0","0"]),h=b([0,0,0,0]),ht=async()=>{Kt().then(n=>{if(!n.success)return jt.clear();B.value[0]=n.data.allAmount||0}),h.value[0]=+await f(0),h.value[1]=+await _(),h.value[2]=+await y(),h.value[3]=+await f(7);const s=h.value[1]/h.value[2]+h.value[0];B.value[1]=$(K(S.value||0).times(s).toFixed(18),2).toString()},[xt,nt]=U(!1),Y=b([0,0]),yt=async()=>{nt(!0);let s=localStorage.getItem("taday")||"",n=localStorage.getItem("echartData")||"";const p=+await T(),v=await L();let w={dates:[],values:[]};if(s&&+s==+p&&n){w=JSON.parse(n);let d=await l(p);d=$(K(d||0).times(100).times(365).times(h.value[3]).toFixed(18),2),w.values[0]=d}else{localStorage.setItem("taday",p.toString());for(let d=0;d<7;d++){let F=p-d*v,St=await l(F),it=Xt((F-v)*1e3),Bt=$(K(St||0).times(100).times(365).times(h.value[3]).toFixed(18),2);w.dates.push(it.split(" ")[0].split("-")[1]+"-"+it.split(" ")[0].split("-")[2]),w.values.push(Bt)}}localStorage.setItem("echartData",JSON.stringify(w)),Y.value[1]=w.values[0],u(w)},wt=async()=>{const s=+await _(),n=+await y();Y.value[0]=s/n*100},[lt,J]=U(!1),[bt,X]=U(!1),[$t,Z]=U(!1),tt=b(null),kt=async(s,n)=>{X(!0);try{let p=await r(s,n);if(!p.success)return X(!1);if(p=p.result,!n){try{await p.wait(),J(!1),et(),Z(!0),setTimeout(()=>{Z(!1)},2e3);return}catch{X(!1)}finally{X(!1)}return}J(!1),tt.value.handleAnimation(p)}finally{X(!1)}},C=b(!1),At=()=>{tt.value.handleAnimation()},et=async()=>{await Q(),wt()};return Tt(async()=>{g.value=Lt(zt(document.getElementById("line-echarts"))),C.value=!0,await Promise.all([et(),await ht(),yt()]),C.value=!1}),Wt(()=>{g.value&&g.value.dispose()}),(s,n)=>{const p=E("VanButton"),v=E("van-loading"),w=E("VanLoading");return a(),i("div",Fe,[Ie,t("div",Ee,[t("div",Re,[A(Qt),t("div",null,o(s.$t("piggy.Yu_Bao_details")),1),A(p,{onClick:At},{default:V(()=>[Ve]),_:1})]),t("div",De,[t("div",Ne,[t("div",Pe,[t("div",{class:"flex items-center",onClick:H},[t("span",null,o(s.$t("piggy.lump_sum")),1),t("img",{class:"w-4 h-4 ml-1.5",src:e(Gt)(`images/ecology/${e(k)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,Te)]),m.value?(a(),x(e(rt),{key:0,to:"/piggySettingAdmin"},{default:V(()=>[t("div",Le,o(s.$t("piggy.setting admin address")),1)]),_:1})):I("",!0)]),A(e(rt),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:V(()=>[t("div",ze,[e(k)?(a(),i("span",We,"≈")):I("",!0),e(k)?(a(),i("span",Oe,[C.value?(a(),x(v,{key:0,size:"28px"})):(a(),i("span",Ue,o(e($)(S.value,2)),1))])):I("",!0),e(k)?(a(),i("span",je,"MCOIN")):I("",!0),e(k)?I("",!0):(a(),i("span",Me," ******"))]),t("div",He,[R(o(s.$t("piggy.detail_record"))+" ",1),Xe])]),_:1}),t("div",Ge,[t("div",qe,[t("div",Ye,[t("span",Je,o(s.$t("piggy.Cumulative_income")),1)]),t("div",Ke,[C.value?(a(),x(v,{key:0,size:"14px"})):(a(),i("span",Qe,o(e(ut)(B.value[0])),1))])]),t("div",Ze,[t("div",ts,[t("span",es,o(s.$t("piggy.tommor_earns")),1)]),t("div",ss,[C.value?(a(),x(v,{key:0,size:"14px"})):(a(),i("span",as,o(e(ut)(B.value[1])),1))])]),t("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:n[0]||(n[0]=d=>+W.value>0?e(J)(!0):"")},[t("div",os,[t("div",ns,[t("span",ls,o(s.$t("maiPledge.Income to be collected")),1),is,t("span",null,o(s.$t("common.or")),1),cs]),t("div",rs,[C.value?(a(),x(v,{key:0,color:"#E88F17",size:"14px"})):(a(),i("span",ds,o(e($)(W.value,2)),1))])]),t("div",{class:Ot(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!W.value}])},o(s.$t("common.claim")),3)])]),t("div",us,[t("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:n[1]||(n[1]=d=>O("/piggyBank-transferOut"))},o(s.$t("piggy.transfer_out_principal")),1),ms,t("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:n[2]||(n[2]=d=>O("/piggyBank-transferIn"))},o(s.$t("piggy.transfer_in_principal")),1)])]),t("div",ps,[t("div",vs,[t("div",fs,o(s.$t("piggy.todayannualizedRateReturn")),1),t("div",_s,[t("span",gs,[C.value?(a(),x(v,{key:0,color:"#14D8A9",size:"14px"})):(a(),i("span",hs,o(e($)(h.value[0]*100*365,2)),1)),xs]),R(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),x(v,{key:0,color:"#14D8A9",size:"14px"})):(a(),i("span",ys,o(e($)(Y.value[0]*365*h.value[3],2))+"%",1)),R(o(s.$t("piggy.float")),1)])]),t("div",ws,[t("div",bs,o(s.$t("piggy.yesannualizedRateReturn")),1),t("div",$s,[C.value?(a(),x(v,{key:0,color:"#14D8A9",size:"14px"})):(a(),i("span",ks,o(e($)(h.value[0]*100*365,2))+"%",1)),R(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),x(v,{key:2,color:"#14D8A9",size:"14px"})):(a(),i("span",As,o(e($)(Y.value[1]))+"%",1)),R(o(s.$t("piggy.float")),1)])])]),t("div",Ss,[t("div",Bs,[t("span",null,o(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),Cs,e(xt)?(a(),x(w,{key:0,color:"#674c37",class:"loading-box",vertical:""})):I("",!0)])])]),e(lt)?(a(),x(Ce,{key:0,show:e(lt),balance:W.value,loading:e(bt),onClose:n[3]||(n[3]=d=>e(J)(!1)),onHandleWithdraw:kt},null,8,["show","balance","loading"])):I("",!0),e($t)?(a(),x(Yt,{key:1,onClose:n[4]||(n[4]=d=>e(Z)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):I("",!0),A(ye,{ref:(d,F)=>{F.voucherLottieRef=d,tt.value=d}},null,512)])}}}),Us=at(Fs,[["__scopeId","data-v-24f07996"]]);export{Us as default};
