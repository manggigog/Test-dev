import{_ as C,y as E,U as B,r,z as F,E as b,K as S,G as D,N as V,H as o,O as I,bc as O,X as m,P as f,bd as $,a4 as k,$ as L,a0 as w,Y as N,Z as P}from"./vendor-BUT0HZ5j.js";import{_ as R}from"./Lottie-DS9vA_OS.js";import{bW as T}from"./index-BvL8wS8a.js";const j=t=>(N("data-v-d60e6d4e"),t=t(),P(),t),z={class:"center-card text-b1 font-semibold"},A=j(()=>o("div",{class:"container relative"},[o("div",{class:"center-text",id:"original"},[o("div",null,"完成充电投票"),o("div",null,[w("获得 "),o("span",{class:"text-newOrigin"},"1"),w(" 张抵用券")])])],-1)),H=[A],M=E({props:{show:{type:Boolean},shopId:null,teleport:null},emits:["close"],setup(t,{emit:g}){const{show:c,teleport:U}=t,{height:u}=B(),l=r(null),s=r(null),d=r(!1),p=async()=>{d.value=!0,await T(500);const a=document.getElementById("original").cloneNode(!0);a.id="cloned-animation",a.classList.add("animated-div"),document.querySelector(".container").appendChild(a)},i=()=>{g("close")},v=38;function h(e){console.log(`当前帧: ${e.currentTime}`),Math.round(e.currentTime)===v&&(console.log(`到达目标帧: ${v}`),p(),s.value.removeEventListener("enterFrame",h))}const x=()=>{console.log("lottieObject:",s.value),s.value||(s.value=l.value.getLottieAnimation());try{s.value.addEventListener("enterFrame",h)}catch(e){console.log("无法监听：",e),setTimeout(()=>{p()},1300)}};return F(()=>l.value,e=>{e&&(s.value=l.value.getLottieAnimation(),console.log("lottieRef:",l.value),x())}),(e,a)=>{const y=b("VanPopup");return D(),S(y,{show:t.show,"onUpdate:show":a[0]||(a[0]=n=>L(c)?c.value=n:null),teleport:t.teleport,onClickOverlay:k(i,["stop"]),onClose:i,round:"",class:"bg-transparent position-center",sty:"",style:{width:"100%","max-width":"375px"}},{default:V(()=>[o("div",{class:"w-full overflow-hidden relative",style:m({height:`${f(u)}px`}),onClick:i},[I(R,{path:"lottie/expand.json",renderer:"svg",loop:!1,class:"w-full",style:m({height:`${f(u)}px`}),ref:(n,_)=>{_.lottieRef=n,l.value=n}},null,8,["style"]),O(o("div",z,H,512),[[$,d.value]])],4)]),_:1},8,["show","teleport","onClickOverlay"])}}}),K=C(M,[["__scopeId","data-v-d60e6d4e"]]);export{K as V};
