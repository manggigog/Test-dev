import{y as R,r as i,o as s,x as T,E as C,F as d,G as f,H as p,O as S,Q as $,N as I,P as E,T as A}from"./vendor-BUT0HZ5j.js";const O="/Test-dev/static/images/calendar--RsEN3cI.svg",b={class:"mt-4"},N={class:"text-sm text-default flex justify-start items-center font-semibold"},P={key:0},V={key:1},j=p("img",{class:"w-4 h-4 ml-1",src:O},null,-1),H=R({props:{allowReverse:{type:Boolean,default:!1},completeTime:{type:Boolean,default:!0}},emits:["change"],setup(h,{emit:Y}){const m=h,l=i(!1),r=i(!0),n=i([]),a=i(""),g={values:Array.from({length:s().year()-2019},(e,t)=>2020+t),defaultIndex:s().year()-2020,formatter:e=>`${e}年`},_={values:Array.from({length:12},(e,t)=>t+1),defaultIndex:s().month(),formatter:e=>`${e.toString().padStart(2,"0")}月`},k=()=>{r.value=!0,l.value=!0},w=()=>{l.value=!1,r.value=!0,a.value="",n.value=[],Y("change",[])},x=e=>{const t=e[0],u=e[1].toString().padStart(2,"0"),o=`${t}-${u}`;if(r.value)a.value=o,r.value=!1,l.value=!1,setTimeout(()=>{l.value=!0},300);else{if(!m.allowReverse&&s(o).isBefore(a.value)){A("结束时间不能早于开始时间");return}m.allowReverse&&s(o).isBefore(a.value)?n.value=[o,a.value]:n.value=[a.value,o];const c=s(n.value[0],"YYYY-MM"),v=s(n.value[1],"YYYY-MM");let M=[...n.value];if(m.completeTime){const D=c.startOf("month").format("YYYY-MM-DD 00:00:00"),F=v.endOf("month").format("YYYY-MM-DD 23:59:59");M=[D,F]}Y("change",M),l.value=!1,r.value=!0,a.value=""}},y=T(()=>{if(!a.value)return g;const[e]=a.value.split("-");return{values:Array.from({length:s().year()-+e+1},(t,u)=>+e+u),defaultIndex:0,formatter:t=>`${t}年`}}),B=T(()=>{if(!a.value)return _;const[e,t]=a.value.split("-");s().year();const u=y.value.values[0];let o=0;return u===+e&&(o=+t-1),{values:Array.from({length:12-o},(c,v)=>o+v+1),defaultIndex:0,formatter:c=>`${c.toString().padStart(2,"0")}月`}});return(e,t)=>{const u=C("van-picker"),o=C("van-popup");return f(),d("div",b,[p("div",{class:"time-selector",onClick:k},[p("span",N,[n.value[0]&&n.value[1]?(f(),d("span",P,$(`${n.value[0]} / ${n.value[1]}`),1)):(f(),d("span",V,$(e.$t("order.All time")),1)),j])]),S(o,{show:l.value,"onUpdate:show":t[0]||(t[0]=c=>l.value=c),position:"bottom",round:""},{default:I(()=>[S(u,{"cancel-button-text":e.$t("common.cancel"),title:r.value?e.$t("goods.selectStartTime"):e.$t("goods.selectEndTime"),columns:r.value||h.allowReverse?[g,_]:[E(y),E(B)],onConfirm:x,onCancel:w},null,8,["cancel-button-text","title","columns"])]),_:1},8,["show"])])}}});export{H as _};
