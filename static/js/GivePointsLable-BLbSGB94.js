import{z as T,F as V,G as l,H as n,I as S,U as P,Q as y,J as A,K as L,bj as q,Z as M,N,bk as U,_ as z,r as c,D as W,R as J,y as I,P as D,$ as F,V as C,O as u,bF as Z,bG as K,by as Q,bH as R,bI as G,x as X,B as x,E as Y}from"./vendor-Dr_RpJ_Y.js";import{k as ee,e as _,c as te}from"./index-LRhcxFAI.js";import{P as se}from"./flashSale-DDyqLyYN.js";import{S as E}from"./shop-CeqcS6K2.js";const be=""+new URL("../images/back-qlZFCCJ2.svg",import.meta.url).href,ae={class:"bg-white mt-2"},oe={class:"px-4 py-3 text-base text-b1 font-semibold text-left"},ne={key:0,class:"flex flex-col"},xe=T({props:{text:null,imgs:null},setup(t){return(e,s)=>{const d=V("VanImage");return n(),l("div",ae,[S("div",oe,y(e.$t("goods.product details")),1),t.imgs.length>0?(n(),l("div",ne,[(n(!0),l(A,null,L(t.imgs,a=>q((n(),M(d,{key:a,src:a,class:"w-full h-auto",fit:"cover"},null,8,["src"])),[[U,a]])),128))])):P("",!0),t.text?(n(),l("div",{key:1,class:N(["px-4 whitespace-pre-wrap break-all text-b1",t.imgs.length?"py-3":"pb-3"])},y(t.text),3)):P("",!0)])}}}),_e=""+new URL("../images/kefu-CkPD4F0e.svg",import.meta.url).href,ie={class:"relative"},le={key:0,class:"absolute top-0 left-0 w-full h-full bg-black/50 z-[2]"},re={class:"w-full h-full flex items-center justify-center"},ce={class:"text-white text-2xl font-bold"},ue=T({props:{imgs:null,indicatorColor:{default:"#fba923"},bgColor:{default:"#FFE3BD"},stock:{default:1},goodsTypes:{default:""}},setup(t,{expose:e}){const s=t,d=c(!1),a=c(300),f=c(!1);W(()=>s.imgs,i=>{if(i&&i.length){if(d.value)return;const h=new Image;h.src=i[0],h.onload=()=>{const B=document.getElementById("app");a.value=B.clientWidth/h.naturalWidth*h.naturalHeight,f.value=!0},d.value=!0}},{immediate:!0,deep:!0});const p=i=>{s.imgs.length===1&&!s.imgs[0]||Q({images:s.imgs,closeable:!0,showIndex:!0,startPosition:i})},k=c(),m=c([R,G]),$={clickable:!0},o={delay:3e3,disableOnInteraction:!0,pauseOnMouseEnter:!0},{height:g}=J(),v=I(()=>g.value/4*3),r=c(null),H=i=>{r.value=i},O=()=>{m.value=[R]},j=()=>{m.value=[R,G]};return e({pauseSwiper:()=>{r.value&&r.value.autoplay.stop()},resumeSwiper:()=>{r.value&&r.value.autoplay.start()}}),(i,h)=>{const B=V("VanImage");return n(),l("div",ie,[t.stock===0&&t.goodsTypes!=2?(n(),l("div",le,[S("div",re,[S("div",ce," ·"+y(i.$t("goods.Sold Out"))+"· ",1)])])):P("",!0),D(u(K),{ref:(w,b)=>{b.swiperGoodsRef=w,k.value=w},class:"w-full","auto-height":!0,modules:m.value,pagination:$,autoplay:o,onSwiper:H,onMouseenter:O,onMouseleave:j,style:C(`${f.value?"":`height: ${a.value}px;`}`)},{default:F(()=>[(n(!0),l(A,null,L(t.imgs,(w,b)=>(n(),M(u(Z),{onClick:fe=>p(b),key:b},{default:F(()=>[S("div",{class:"w-full object-contain overflow-hidden",style:C(`max-height: ${u(v)}px;`)},[D(B,{src:w||u(ee)("images/activity/boutique/squre_empty.png"),class:"object-cover w-full",fit:"contain",style:C(`${f.value?"":`height: ${a.value}px;`}`)},null,8,["src","style"])],4)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules","style"])])}}}),Se=z(ue,[["__scopeId","data-v-2e3a40ed"]]),de={class:"ship-type-tag text-[#ff8812] leading-normal"},pe=T({props:{deliveryType:null},setup(t){return(e,s)=>(n(),l("div",de,y(t.deliveryType===1?e.$t("common.send"):e.$t("goods.Buying agent")),1))}}),Ie=z(pe,[["__scopeId","data-v-4d64d943"]]),Te=T({props:{goods:{default:{}},activityGoods:{default:{}},showType:{default:"all"}},setup(t){const e=t,{t:s}=X(),{tradeContributeSelfRate:d}=te(),a=c(0),f=async()=>{a.value=await d()},p=I(()=>{var r;if(e.goods.payType===2)return 0;const o=((r=e==null?void 0:e.activityGoods)==null?void 0:r.activityPrice)||0,g=+new x(new x(e.goods.discountRatio).div(100)).times(o||e.goods.price).times(a.value),v=+new x(new x(e.goods.balanceDiscountRatio).div(100)).times(o||e.goods.price).times(a.value);return e.showType==="balance"?g:e.showType==="points"?v:e.showType==="all"?e.goods.type===E.SD?g:Math.max(g,v):0}),k=I(()=>{var o;return e.showType==="balance"?s("mall.Givepoints",{num:_(p.value,2)}):e.showType==="points"?s("mall.Balance payment gift",{num:_(p.value,2)}):e.showType==="all"?e.goods.type!==E.SD&&+e.goods.balanceDiscountRatio>+((o=e.goods)==null?void 0:o.discountRatio)?s("mall.Balance payment gift",{num:_(p.value,2)}):s("mall.Givepoints",{num:_(p.value,2)}):""}),m=I(()=>{var o;return e.showType==="balance"?!1:e.showType==="points"?!0:e.showType==="all"?!(!e.goods.boutiqueFlag&&e.goods.payType!==se.POINTS_AVAILABLE||+e.goods.discountRatio>+((o=e.goods)==null?void 0:o.balanceDiscountRatio)):!1}),$=async()=>{f()};return Y(()=>{$()}),(o,g)=>(n(),l("div",{class:N([{"bg-red-002":u(m),"bg-primary ":!u(m)},"px-1 leading-normal text-white rounded text-xxs whitespace-nowrap"])},y(u(k)),3))}});export{Se as G,Ie as S,xe as _,be as a,_e as b,Te as c};
