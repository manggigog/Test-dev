import{u as v}from"./useKeyboard-DcWqtm11.js";import{_ as w,z as m,F as k,G as u,H as p,P as C,$ as B,a4 as $,Q as b,N as g,O as x,x as P,y as H,J as L,K as O,o as T,q as I,r as f}from"./vendor-Dr_RpJ_Y.js";import{P as c}from"./payHelp-BuwJxNdC.js";import{o as R}from"./payHelp-4QfbsOqx.js";import{W as E}from"./index-BckdT6oc.js";const q=m({props:{payLink:null,btnLoading:{type:Boolean}},emits:["onClick"],setup(s,{emit:l}){const{isKeyboardVisible:n}=v();return(a,e)=>{const y=k("VanButton");return p(),u("div",{class:g(["fixed bottom-0 sm:left-1/2 sm:-translate-x-2/4 left-0 z-20 sm:w-[375px] w-full px-3 py-4 safe-btn-bottom bg-[#F2F0EF]",x(n)?"!hidden":"!fixed"])},[C(y,{type:"primary",round:"",class:"w-full h-[46px] bg-yellow !border-none text-b1 text-base font-semibold",loading:s.btnLoading,onClick:e[0]||(e[0]=r=>l("onClick"))},{default:B(()=>[$(b(s.payLink?a.$t("payhelp.share_payHelp"):a.$t("payhelp.launch_payHelp")),1)]),_:1},8,["loading"])],2)}}}),D=w(q,[["__scopeId","data-v-fd143c44"]]),F={class:"flex-center-bw bg-b6/80 rounded-full p-0.5 h-10"},N=["onClick"],J=m({props:{tab:null},emits:["changeTab"],setup(s,{emit:l}){const{t:n}=P(),a=H(()=>[{id:c.OWNER,text:n("payhelp.pay_owner")},{id:c.OTHER,text:n("payhelp.pay_other")}]);return(e,y)=>(p(),u("div",F,[(p(!0),u(L,null,O(x(a),r=>(p(),u("div",{key:r.id,class:g(["flex-1 flex-center rounded-full h-full text-b3",{"bg-b1 text-b6 font-semibold":+s.tab==+r.id}]),onClick:_=>l("changeTab",r.id)},b(r.text),11,N))),128))]))}}),h={1:"/payHelpGoods",2:"/payHelpOffline"};function Q(){const s=T(),l=I(),n=f(+s.query.payBy||c.OWNER),a=f(null),e=f(null);return{payBy:n,payLink:a,payHelpRef:e,changeBy:t=>{n.value!==t&&(n.value=t,l.replace({path:s.path,query:{...s.query,payBy:t}}))},generatePayLink:async t=>{var i;const{success:d,data:o}=await R(t);!d||!o||(a.value=`${window.location.origin}/#${h[1]}?payId=${o}`,e.value&&((i=e.value)==null||i.setShow(!0)))},generateOfflinePayLink:async t=>{var i;const{success:d,data:o}=await E(t);!d||!(o!=null&&o.orderId)||(a.value=`${window.location.origin}/#${h[2]}?payId=${o==null?void 0:o.orderId}`,e.value&&((i=e.value)==null||i.setShow(!0)))},showChangeTip:()=>{var t;return a.value&&n.value===c.OTHER?(e.value&&((t=e.value)==null||t.setTipShow(!0)),!1):!0}}}export{D as P,J as _,Q as u};
