import{_ as S}from"./avatarRing-CLGxkH-F.js";import{z as x,x as k,o as E,r as m,y as F,E as V,F as h,Z as A,H as c,$ as B,I as e,P as u,Q as a,G as v,U as I,O as i,J as P,K as D,T as p,by as $}from"./vendor-Dr_RpJ_Y.js";import{C as N}from"./CommonVanProvider-KZuKVOde.js";import{b as T,f as R,r as j,c9 as z}from"./index-7OiUoGXy.js";import"./BackIcon-CDrGaEPo.js";const L={class:"content__wrap px-3 pb-20 flex flex-col gap-3 overflow-y-auto"},U={class:"w-full rounded-xl bg-white"},G={class:"p-2.5 bg-white rounded-xl font-normal flex"},q={class:"flex-1 mx-2.5 flex flex-col min-h-[5rem] justify-between"},H={class:"text-sm leading-[1.57rem]"},J={class:"font-bold text-black line-clamp-1"},K={class:"flex items-center text-sm text-black-400"},M={class:"mr-1"},O={class:"flex items-center mt-2 text-sm text-black-400"},Q={class:"mr-1"},Z={class:"w-full min-h-[140px] p-3 rounded-xl bg-white"},W={class:"flex items-center justify-between"},X={class:"flex items-center"},Y=e("div",{class:"w-[30px] h-[30px]"},[e("img",{src:S,class:"w-full h-full rounded-md",alt:"",fit:"cover"})],-1),ee={class:"ml-1"},te={class:"text-b1"},se={class:"text-b3 text-xs"},oe={class:"mt-3"},ae={class:"w-full p-2 rounded-lg text-sm font-normal text-b1"},le={key:0,class:"mt-3"},ne={class:"flex flex-wrap gap-2"},re=["src","onClick"],ce=x({name:"EvaluateDetail"});function ie(de){const{t:_}=k(),g=E(),{checkLoginAuth:w}=T();m(!1);const n=m(null),s=m({commentStar:0,commentShopStar:0,commentContent:"",commentPics:""}),b=async()=>{if(n.value)try{const t=await z({id:n.value});t.success&&t.data?s.value=t.data||{}:p(_("common.load_failed"))}catch(t){console.error("获取评价详情失败:",t),p(_("common.load_failed"))}},d=F(()=>{const t=s.value.commentPics||"";return t?t.split(",")||[]:[]}),C=t=>{$({images:d.value,closeable:!0,showIndex:!0,startPosition:t})};return V(()=>{var t;w(!0)&&(n.value=(t=g.query)==null?void 0:t.id,n.value&&b())}),(t,l)=>{const y=h("VanImage"),f=h("van-rate");return c(),A(N,{title:t.$t("evaluate.Evaluation details"),class:"bg-[#F2F0EF] font-Puhui font-normal relative app-container","theme-vars":{"field-placeholder-text-color":"#A6A6A6",navBarBackgroundColor:"#F2F0EF"},ref:(o,r)=>{r.EvaluateDetailRef=o}},{default:B(()=>[e("section",L,[e("div",U,[e("div",G,[u(y,{src:(s.value.relIcons||"").split(",")[0],class:"w-20 h-20 overflow-hidden rounded-xl",fit:"cover"},null,8,["src"]),e("div",q,[e("div",H,[e("div",J,a(s.value.relName||s.value.shopName||""),1)]),e("div",null,[e("div",K,[e("span",M,a(t.$t("evaluate.service Rating")),1),u(f,{readonly:"","allow-half":"",modelValue:s.value.commentStar,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.commentStar=o),size:20,color:"#FEA021"},null,8,["modelValue"])]),e("div",O,[e("span",Q,a(t.$t("evaluate.Store Rating")),1),u(f,{readonly:"","allow-half":"",modelValue:s.value.commentShopStar,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.commentShopStar=o),size:20,color:"#FEA021"},null,8,["modelValue"])])])])])]),e("div",Z,[e("div",W,[e("div",X,[Y,e("div",ee,[e("div",te,a(i(R)(s.value.orderCustomerAddress,"...",5,5)),1),e("div",se,a(i(j)(s.value.commentTime))+" "+a(t.$t("evaluate.evaluate")),1)])])]),e("div",oe,[e("div",ae,a(s.value.commentContent||t.$t("evaluate.The user has not filled in the text")),1)]),i(d).length>0?(c(),v("div",le,[e("div",ne,[(c(!0),v(P,null,D(i(d),(o,r)=>(c(),v("img",{key:r,src:o,alt:"eva img",class:"w-full object-cover",onClick:me=>C(r)},null,8,re))),128))])])):I("",!0)])])]),_:1},8,["title"])}}const pe=x({...ce,setup:ie});export{pe as default};
