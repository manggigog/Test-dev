import{_ as Xe}from"./MCOIN-BcbOHmhy.js";import{_ as Wt}from"./FMCP-CFalj3L2.js";import{y as $e,_ as Gt,w as Mt,bn as Z,l as Ht,r as g,x as X,a1 as Ut,B as u,bf as Kt,D as jt,E as ee,F,a2 as $,P as s,G as S,H as r,O as b,K as te,N as M,Q as h,I as Pe,J as Je,a0 as fe,R as qt,$ as zt,Y as Jt,Z as Yt,T as H}from"./vendor-CjApaIpB.js";import{_ as Qt}from"./AddressInfo-C21RjxfH.js";import{_ as Ye}from"./EmptyTipsPop-C0Qo2Er1.js";import{_ as Zt}from"./OrderGoodsCartBox-H-6aKJv8.js";import{P as Xt}from"./PaySwitchPop-0GITZ9NH.js";import{u as eo,P as to,_ as oo}from"./useKeyboard-DVXELqG2.js";import{_ as so}from"./DividingLine-DVrrU6zb.js";import{_ as Be}from"./SubmitApprove-Bu6oVbU1.js";import{B as ao}from"./BackIcon-D2Vm_lyR.js";import{c as no,q as ro}from"./address-Cw9CH5iz.js";import{R as lo,o as uo,i as co,f as Qe,d as U,q as D,r as io,a1 as po,b1 as mo,s as Ce,B as fo}from"./index-B3VH42pz.js";import{m as Ze,t as yo,u as vo,r as ho}from"./order-Ch3HoLCn.js";import{u as go}from"./useSelectAddress-CgNt0r_o.js";import{c as bo}from"./cart-BIjmsZJP.js";import{P as Ne}from"./flashSale-DDyqLyYN.js";import{P as x}from"./order-B5BGKYED.js";import{G as K}from"./goods-BVwS8oFG.js";import{p as wo}from"./piggyBank-BNQLp3cC.js";import{S as ce}from"./shop-CeqcS6K2.js";import"./mall-BNNzTN-n.js";import"./OrderGoods-BUF7kuE5.js";import"./BoutiqueLable-BYJxmIGq.js";import"./ShopMaskTips-DfjY93ZI.js";import"./useShipTemplate-DGyxlJb1.js";import"./enums-DlE-aiss.js";import"./point-arrow-BVnEJLj4.js";import"./USDT-BFPkoPAz.js";import"./usePointRelase-BsW95jUE.js";const Ao=$e({props:{num:{type:Number,default:0},amount:{type:Number,default:0},fee:{type:Number,default:0}},setup(oe){return(Ee,Le)=>null}}),ie=oe=>(Jt("data-v-25cbeb6b"),oe=oe(),Yt(),oe),_o={key:0,class:"p-3 pb-[50px] font-Puhui"},So={class:"text-lg font-semibold"},ko={class:"mt-3 flex items-center justify-between gap-2 pb-3 border-b border-[#f5f5f5] border-solid"},To={class:"flex-1 text-b3"},xo=["onClick"],Ro={key:0},Po={class:"bg-white overflow-hidden py-3 border-b border-b5 border-solid"},Bo={class:"text-b3"},Co={class:"bg-white myinput overflow-hidden py-3 border-b border-b5 border-solid"},No={class:"text-b3"},$o={class:"bg-white mt-3 rounded-xl"},Eo={class:"flex items-baseline justify-between mt-1"},Lo={class:"text-b3"},Oo={class:"text-right"},Fo={class:"text-base font-semibold"},Do={key:0},Io={class:"text-b3 mt-1"},Vo={class:"bg-white mt-2.5 rounded-xl p-2.5"},Wo={class:"text-sm font-bold"},Go={class:"flex items-baseline justify-between mt-1"},Mo={class:"break-keep"},Ho={class:"text-right"};const Uo={key:1,class:"flex flex-wrap items-center justify-end text-base font-semibold text-primary"},Ko={key:0,class:"justify-end flex-center"},jo=ie(()=>r("img",{src:Xe,class:"w-4 h-4 mr-1"},null,-1)),qo={class:"opacity-60"},zo=ie(()=>r("div",{class:"h-10"},null,-1)),Jo={class:"text-left text-sm text-b3"},Yo={class:"flex-center gap-2.5"},Qo={class:"flex-end gap-1 font-bold text-base"},Zo=ie(()=>r("img",{src:Xe,class:"w-4 h-4"},null,-1)),Xo=ie(()=>r("span",null,"+",-1)),es=ie(()=>r("img",{src:Wt,class:"w-4 h-4"},null,-1)),ts={class:"relative"},os={class:"p-3 pb-10 remark"},ss={class:"relative text-center text-lg font-bold mb-3"},as=$e({name:"SubmitOrderBoutiqueCart"});function ns(oe){const{isKeyboardVisible:Ee}=eo(),{getUserDhKey:Le,encryptAddressKey:Oe,formatAddressData:ye,generateKey:Fe,decryptAddressKey:et}=lo(),{t:E}=Mt(),[De,se]=Z(!1),{loadingToggle:de}=io(),{getAddress:Ie,setAddress:tt}=go(),{submit:ot}=uo(),st=co(1),{tradeContributeSelfRate:at,mcoinRate:nt}=Qe(),[rt,ve]=Z(!1),j=Ht(),[lt,Ve]=Z(!1),[he,ge]=Z(!1),[ut,ct]=Z(!0),[q,L]=Z(!1),be=g([]),w=g(),k=g([]),it=g(0),ae=g({remark:""}),dt=X(()=>[{value:0,text:E("common.no")},{value:1,text:E("common.yes")}]),We=async()=>{if(Ie()){w.value=Ie(),tt(null);return}const e=j.currentRoute.value.path,t=await ro();if(!t.success)return;be.value=t.data;const o=be.value.find(l=>l.isDefault===1)||be.value[0],a=await Fe("user",e);if(o!=null&&o.encryptFlag&&a){w.value=et(o,a);return}w.value=o},pt=async()=>{const e=await(await st).allowance(D.order);it.value=e.result},I=Ut(),d=X(()=>Te()),Ge=g([]),we=async()=>{var a,l;let e=[];k.value.forEach(y=>{y.ordersInfos.forEach(m=>{m.goods.forEach(T=>{e.push({goodsId:T.goodsId,num:T.number,payType:Ne.MC,paySource:y.paySource})})})});const t={type:((a=I==null?void 0:I.query)==null?void 0:a.type)??2,addressId:(l=w.value)==null?void 0:l.id,detailList:e,genOrder:!1,voucherAmount:0},o=await Ze(t);o.success&&(Ge.value=o.data.goodsList||[])},Me=async()=>{var o;const e=await ho({type:((o=I==null?void 0:I.query)==null?void 0:o.type)??2});if(!e.success){setTimeout(()=>{j.back()},1500);return}const t=k.value.map(a=>a.paySource);k.value=(e.data.ordersInfos||[]).map((a,l)=>{let y=Ne.MC;return{...a,goods:a.orderGoods,totalAmount:0,integral:0,remark:"",payType:y,paySource:t[l]||x.WALLET}}),mt()},mt=()=>{const e=k.value.map(a=>a.paySource),t=k.value.reduce((a,l)=>(l.goods.forEach(y=>{a.push({...l,goods:y,storeId:l.stores.id,cardNo:"",isPortability:0})}),a),[]),o=yt(t);k.value=o.map((a,l)=>{var C;const y=(C=a[0])==null?void 0:C.goods,m=(y==null?void 0:y.goodsType)!==ce.SD,T=e[l]||(m?x.WITHDRAW_POINTS:x.WALLET),O=ft(a);return{goodsBoutiqueFlag:m,paySource:T,ordersInfos:O}})},ft=e=>e.reduce((t,o)=>{const a=t.findIndex(l=>l.storeId===o.storeId);return a!==-1?(t[a].goods.push(o.goods),+o.goods.goodsTypes===K.RECHARGE&&(t[a].goodTypes=K.RECHARGE)):t.push({...o,goods:[o.goods],goodTypes:+o.goods.goodsTypes===K.RECHARGE?K.RECHARGE:null}),t},[]),yt=e=>{let t={};for(;e.length;){let o=e.shift();const a=o.goods.goodsType?"true":"false";t[a]=t[a]||[],t[a].push(o)}return Object.keys(t).map(o=>t[o])},vt=async(e,t)=>{e.number=t,de(!0);const o=await bo({goodsId:e.goodsId,number:t});await we(),await Me(),de(!1),o.success},ht=async e=>{ae.value=e,ge(!0)},gt=()=>{k.value.forEach(e=>{e.ordersInfos.forEach(t=>{var o,a;t.storeId===((o=ae.value)==null?void 0:o.storeId)&&(t.remark=(a=ae.value)==null?void 0:a.remark)})})},bt=g(x.WITHDRAW_POINTS),wt=(e,t)=>{q.value||(t.paySource=e,t.boutiqueIntegral=Te([{ordersInfos:t.ordersInfos,paySource:t.paySource}]),we())};let V=g(!1);const At=async()=>{const e=k.value.reduce((t,o)=>{const a=t.findIndex(l=>l.storeId===o.paySource);return a!==-1?t[a].totalAmount+=o.totalAmount-o.voucherAmount:t.push({paySource:o.paySource,totalAmount:o.totalAmount-o.voucherAmount}),t},[]);for(let t=0;t<e.length;t++){const o=e[t],{totalAmount:a}=o,{paySource:l}=o;+l===x.WITHDRAW_POINTS?await kt(a):+l===x.PIGGY_BANK?await Rt(a):+l===x.WALLET?await Pt(a):+l===x.USDT_WALLET&&await _t(a)}},_t=async e=>{if(+Se.value<+e*Re.value)return V.value=!0,se(!0);V.value=!1},ls=X(()=>U(+new u(Te(k.value.filter(e=>e.goodsBoutiqueFlag)).totalAmount).div(.9))),pe=g(0),{pointBalances:St}=Qe(),Ae=async()=>{pe.value=+await St(),console.log("pointBalance:",pe.value)},kt=async e=>{if(await Ae(),+ +u(pe.value).times(.9)<+e)return V.value=!0,se(!0);V.value=!1},me=g([]),{userMerchantCashs:Tt,userTotalAmount:xt}=wo(),He=async()=>{const{success:e,result:t}=await Tt();if(!e)return;let o=0;const a=+await xt(),l=t.amounts.map(m=>fo(m));t.cashIds.map(m=>+m).forEach((m,T)=>{me.value[m]=l[T],m!==0&&(o=+u(o).plus(l[T]||0).toString())}),me.value[0]=+u(a).minus(o)},Ue=X(()=>me.value.length&&+me.value[0]||0),Rt=async e=>{if(+Ue.value<+e)return V.value=!0,se(!0);V.value=!1},_e=g(0),Ke=g(0),Se=g(0),je=async()=>{const{balanceOf:e}=Ce(D.MCOIN),t=await e();_e.value=+t,Ke.value=+await Ce(D.FMCP).balanceOf(),Se.value=+await Ce(D.USDT).balanceOf()},Pt=async e=>{if(+_e.value<+e)return V.value=!0,se(!0);V.value=!1},Bt=g(null),ne=g(0),Ct=async()=>{var m,T,O,C,W;if(!w.value)return H(E("order.setAddress"));if((m=w.value)!=null&&m.encryptFlag&&!((T=w.value)!=null&&T.success))return H(E("order.reconfirm the information"));if(!po(w.value.telNumber))return H(E("address.number was identified"));const e=j.currentRoute.value.path;if(L(!0),await je(),await He(),await At(),V.value){L(!1);return}if(De.value){L(!1);return}L(!0);let t=[],o=[],a=!1;if(k.value.forEach(R=>{R.ordersInfos.forEach(P=>{P.goodTypes===K.RECHARGE&&(+P.cardNo||(a=!0)),P.goods.forEach(f=>{if(f.number>f.stock&&+f.goodsTypes!=2){let c=f.goodsName;f.goodsName.length>10&&(c=f.goodsName.slice(0,10)+"..."),o.push(c)}t.push({goodsId:f.goodsId,num:f.number,payType:Ne.MC,paySource:R.paySource})})})}),a)return L(!1),H(E("order.Please fill in your phone number"));if(o.length>0)return L(!1),H(o.join()+"  "+E("order.Insufficient stock"));const l=await Fe("user",e);let y;l&&!w.value.encryptFlag&&(y=Oe(w.value,l),await no({...y,isDefault:w.value.isDefault?1:0}));try{let R=[];for(let z=0;z<k.value.length;z++){const le=k.value[z];for(let J=0;J<le.ordersInfos.length;J++){const n=le.ordersInfos[J];let Y=n.remark;if(+n.goodTypes===K.RECHARGE&&(Y=E("order.phoneNumber")+String(n.cardNo).concat(n.isPortability===1?` ${E("order.Number Portabilit")} `:"").concat("ï¼Œ").concat(n.remark)),R.findIndex(_=>_.storeId===n.storeId)===-1){let _={};if(n.encryption){const ue=await Le(n.stores.id,(O=n.encryption)==null?void 0:O.publicKey);ue?(_=ye(_,{...w.value,postscript:Y},1),_=Oe(_,ue),_.submitHash=_.hash):_=ye(_,{...w.value,postscript:Y},0)}else _=ye(_,{...w.value,postscript:Y},0);R.push({storeId:n.storeId,..._})}}}const P={type:((C=I==null?void 0:I.query)==null?void 0:C.type)??2,addressId:w.value.id,postscripts:R,detailList:t,genOrder:!0,voucherAmount:((W=d.value)==null?void 0:W.voucherAmount)||0},f=await Ze(P);if(!f.success){L(!1);return}const{allOrderId:c,merchants:p,discounts:i,amounts:B,sources:G}=f.data,A=await ot(c,p,i,B,G);if(!A.success){yo({allOrderId:c}),setTimeout(()=>{j.push({path:"/buyerOrderList",query:{active:0},replace:!0})},1e3);return}if(H.loading({message:E("order.wait block chain"),forbidClick:!0,duration:0}),await vo({allOrderId:c,hash:A.result.hash}),H.clear(),Bt.value=A.result.hash,!A.result.hash)return;let N;const re=async()=>{if(ne.value>=5){L(!1),Ve(!0),ne.value=0;return}if(N=await mo(A.result.hash),(N==null?void 0:N.status)===1){L(!1),ve(!0),ne.value=0,$t();return}setTimeout(async()=>{ne.value++,re()},5e3)};re()}catch{L(!1),ne.value=0}finally{k.value.forEach((R,P)=>{var f;qe.value[`paySwitch${P}`].setpayValue((f=R.paySource)==null?void 0:f.toString())})}},qe=g({}),Nt=(e,t)=>{e&&(qe.value[`paySwitch${t}`]=e)},$t=()=>{setTimeout(()=>{ve(!1),j.replace({path:"buyerOrderList",query:{active:1}})},1500)},ke=g(1),Et=async()=>{ke.value=await at()},Te=e=>{let t=0,o=0,a=0,l=0,y=0,m=0,T=0,O=0,C=0,W=0,R=Ke.value,P=0,f=null;return(e||k.value).forEach(c=>{c.totalAmount=0,c.integral=0,c.totalNum=0,c.voucherAmount=0,c.pointFee=0,c.ordersInfos.forEach(p=>{p.fmGeneralActivity&&!f&&(f=p.fmGeneralActivity),p.totalAmount=0,p.integral=0,p.totalNum=0,p.voucherAmount=0,p.pointFee=0,p.goods.forEach(i=>{T+=+i.number;const B=+new u(i.price).times(i.number),G=+new u(new u(i.price).times(i.number).minus(i.goodsActivityReduceAmount||0).times(c.paySource===x.WITHDRAW_POINTS&&i.balanceDiscountRatio||i.discountRatio)).div(100);P=new u(P).plus(i.goodsActivityReduceAmount||0).toNumber();const A=c.paySource===x.WITHDRAW_POINTS?Math.min(R,i.goodsType>0?+new u(G).times(.5):0):0,N=[ce.SL,ce.PR].indexOf(i.goodsType)!==-1&&Number(i.discountRatio)>(i.goodsType===ce.SL?9:19)||i.goodsType===ce.ST?u(B).times(.5):0;t=+new u(t).plus(B),c.paySource===x.USDT_WALLET?(a=+new u(a).plus(new u(B).times(Re.value)),o=+new u(o).plus(new u(B).minus(A||0).minus(i.goodsActivityReduceAmount||0).times(Re.value)),C=+new u(C).plus(A)):(c.paySource!==x.PIGGY_BANK&&c.paySource!==x.WITHDRAW_POINTS&&(y=+new u(l).plus(B)),l=+new u(l).plus(B)),p.totalAmount=+new u(p.totalAmount).plus(B),c.totalAmount=+new u(c.totalAmount).plus(B),m=+new u(m).plus(G),p.integral=+new u(p.integral).plus(G),c.integral=+new u(c.integral).plus(G),R-=A,O+=A,i.voucherAmount=A,p.voucherAmount=+new u(p.voucherAmount).plus(A),c.voucherAmount=+new u(c.voucherAmount).plus(A),W=+new u(W).plus(N),p.pointFee=+new u(p.pointFee).plus(N),c.pointFee=+new u(c.pointFee).plus(N),p.totalNum+=i.number,c.totalNum+=i.number})})}),{totalAmount:t,usdtAmount:o,originalUsdtAmount:a,mcAmount:l,integral:m,totalNum:T,voucherAmount:O,useVoucherAmount:C,pointFee:W,approveMcAmount:y,activityReduceAmount:P,fmGeneralActivity:f}},xe=g(null),Lt=async()=>{xe.value=await nt()},Re=X(()=>1/xe.value),Ot=X(()=>{const e=new u(d.value.totalAmount).minus(d.value.activityReduceAmount||0).minus(d.value.voucherAmount||0);return U(e)}),Ft=async()=>{de(!0),Me(),je(),Et(),He(),Ae(),await Lt(),await pt(),await We(),await we(),de(!1),ct(!1)};Kt(()=>{We()});const Dt=e=>{j.push(e)};return jt(()=>{Ft()}),(e,t)=>{var O,C,W,R,P,f,c,p,i,B,G,A,N,re,z,le,J;const o=ee("van-icon"),a=ee("van-field"),l=ee("van-dropdown-item"),y=ee("van-dropdown-menu"),m=ee("VanButton"),T=ee("van-popup");return s(ut)?$("",!0):(S(),F("div",_o,[r("header",So,[b(ao,null,{default:M(()=>[r("span",null,h(e.$t("order.submitOrder")),1)]),_:1})]),b(Qt,{class:"mt-3",defaultAddress:w.value,onClick:t[0]||(t[0]=n=>Dt("/userAddress"))},null,8,["defaultAddress"]),(S(!0),F(Pe,null,Je(k.value,(n,Y)=>{var _,ue,ze;return S(),F("div",{key:n.goodsBoutiqueFlag},[b(so,{goodsBoutiqueFlag:n.goodsBoutiqueFlag},null,8,["goodsBoutiqueFlag"]),(S(!0),F(Pe,null,Je(n.ordersInfos,(v,It)=>(S(),F("div",{key:It,class:"bg-white rounded-xl p-3 mt-3"},[b(Zt,{orderInfo:v,expressGoodsList:Ge.value,payType:v.payType,onChangeNumber:t[1]||(t[1]=(Q,Vt)=>vt(Q,Vt))},null,8,["orderInfo","expressGoodsList","payType"]),r("div",ko,[r("div",To,h(e.$t("order.remark")),1),r("div",{class:"flex-1 flex items-center justify-end",onClick:Q=>ht(v)},[r("div",null,h(v.remark?v.remark:e.$t("order.noRemark")),1),b(o,{name:"arrow"})],8,xo)]),+(v==null?void 0:v.goodTypes)===s(K).RECHARGE?(S(),F("div",Ro,[r("div",Po,[b(a,{style:{padding:"0 !important"},"input-align":"right",type:"digit",autocomplete:"off",modelValue:v.cardNo,"onUpdate:modelValue":Q=>v.cardNo=Q,placeholder:e.$t("shop.pleaseInput")},{label:M(()=>[r("div",Bo,h(`${e.$t("order.Phone number")}`),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),r("div",Co,[b(a,{style:{padding:"0 !important"},"input-align":"right",autocomplete:"off",label:`${e.$t("order.Whether to port your number")}`},{label:M(()=>[r("div",No,h(`${e.$t("order.Whether to port your number")}`),1)]),input:M(()=>[b(y,{"active-color":"#FEA021"},{default:M(()=>[b(l,{modelValue:v.isPortability,"onUpdate:modelValue":Q=>v.isPortability=Q,options:s(dt)},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)]),_:2},1032,["label"])])])):$("",!0),r("div",$o,[r("div",Eo,[r("div",Lo,h(e.$t("order.total")),1),r("div",Oo,[r("div",Fo,[v.totalAmount>0?(S(),F("span",Do,h(s(U)(v.totalAmount||0))+"Mcoin",1)):$("",!0)]),r("div",Io,h(e.$t("order.getContribution",{num:s(U)(+new s(u)(v.integral).times(ke.value||0))})),1)])])])]))),128)),r("div",Vo,[r("div",Wo,h(e.$t("order.priceDetail")),1),r("div",Go,[r("div",Mo,h(e.$t("order.sumtotal")),1),r("div",Ho,[(n.paySource,s(x).WITHDRAW_POINTS,S(),F("div",Uo,[(n==null?void 0:n.totalAmount)>0?(S(),F("div",Ko,[jo,fe(" "+h(s(U)((n==null?void 0:n.totalAmount)||0)),1)])):$("",!0)])),r("div",qo,h(e.$t("order.getContribution",{num:s(U)(+new s(u)(n==null?void 0:n.integral).times(ke.value||0))})),1)])]),n.paySource===s(x).WITHDRAW_POINTS&&((_=s(d))==null?void 0:_.pointFee)>0?(S(),te(Ao,{key:0,num:n==null?void 0:n.totalNum,amount:n==null?void 0:n.totalAmount,fee:(ue=s(d))==null?void 0:ue.pointFee},null,8,["num","amount","fee"])):$("",!0)]),b(to,{ref:v=>Nt(v,Y),boutique:n.goodsBoutiqueFlag,class:"bg-white mt-2.5 rounded-xl",checked:(ze=n.paySource)==null?void 0:ze.toString(),clickable:!s(q),"point-balance":pe.value,"wallet-balance":_e.value,piggyBalance:s(Ue),usdtBalance:Se.value,payAmount:n==null?void 0:n.totalAmount,usdtRate:xe.value,onOnChange:v=>wt(v,n),onGetPointBalance:Ae},null,8,["boutique","checked","clickable","point-balance","wallet-balance","piggyBalance","usdtBalance","payAmount","usdtRate","onOnChange"])])}),128)),b(oo,{totalPrice:(O=s(d))==null?void 0:O.mcAmount,"usdt-price":(C=s(d))==null?void 0:C.usdtAmount,"original-usdt-price":(W=s(d))==null?void 0:W.originalUsdtAmount,showTotalPrice:(R=s(d))==null?void 0:R.totalAmount,"voucher-price":(P=s(d))==null?void 0:P.voucherAmount,"use-voucher-amount":(f=s(d))==null?void 0:f.useVoucherAmount,"activity-reduce-amount":(c=s(d))==null?void 0:c.activityReduceAmount,"fm-general-activity":(p=s(d))==null?void 0:p.fmGeneralActivity,symbol:"Mcoin"},null,8,["totalPrice","usdt-price","original-usdt-price","showTotalPrice","voucher-price","use-voucher-amount","activity-reduce-amount","fm-general-activity"]),zo,r("div",{class:qt(["fixed bottom-0 sm:left-1/2 sm:-translate-x-2/4 left-0 z-20 sm:w-[375px] w-full bg-white box-shadow safe-bottom p-2.5 flex-center-bw",s(Ee)?"!hidden":"!fixed"])},[r("div",Jo,[r("div",null,h(e.$t("order.quantity",{number:(i=s(d))==null?void 0:i.totalNum})),1),r("div",null,h(e.$t("order.sumtotal")),1)]),r("div",Yo,[r("div",Qo,[Zo,r("span",null,h(s(Ot)),1),(B=s(d))!=null&&B.voucherAmount?(S(),F(Pe,{key:0},[Xo,es,r("span",null,h(s(U)((G=s(d))==null?void 0:G.voucherAmount)),1)],64)):$("",!0)]),r("div",ts,[(A=s(d))!=null&&A.usdtAmount?(S(),te(Be,{key:0,class:"absolute btn-orange btn-shadow w-[120px] h-[40px] text-white z-10",contract:s(D).order,token:s(D).USDT,symbol:"USDT",loading:s(q),approveAmount:Number((N=s(d))==null?void 0:N.usdtAmount)},null,8,["contract","token","loading","approveAmount"])):$("",!0),(re=s(d))!=null&&re.approveMcAmount?(S(),te(Be,{key:1,class:"absolute btn-orange btn-shadow w-[120px] h-[40px] text-white z-10",contract:s(D).order,token:s(D).MCOIN,symbol:"mcoin",loading:s(q),approveAmount:Number((z=s(d))==null?void 0:z.approveMcAmount)},null,8,["contract","token","loading","approveAmount"])):$("",!0),(le=s(d))!=null&&le.voucherAmount?(S(),te(Be,{key:2,class:"absolute btn-orange btn-shadow w-[120px] h-[40px] text-white z-10",contract:s(D).order,token:s(D).FMCP,symbol:e.$t("voucher.voucher"),loading:s(q),approveAmount:Number((J=s(d))==null?void 0:J.voucherAmount)},null,8,["contract","token","symbol","loading","approveAmount"])):$("",!0),b(m,{type:"primary",class:"btn-orange btn-shadow w-[120px] h-[40px] text-white text-red-600 px-4 py-2 bg-gray3",loading:s(q),onClick:Ct},{default:M(()=>[fe(h(e.$t("common.pay")),1)]),_:1},8,["loading"])])])],2),b(T,{onClose:gt,show:s(he),"onUpdate:show":t[5]||(t[5]=n=>zt(he)?he.value=n:null),position:"bottom",round:"",style:{"text-align":"center"}},{default:M(()=>[r("div",os,[r("div",ss,[fe(h(e.$t("order.submitOrder"))+" ",1),r("div",{class:"absolute right-0 bottom-[-2px]",onClick:t[2]||(t[2]=n=>s(ge)(!1))},[b(o,{name:"cross"})])]),b(a,{modelValue:ae.value.remark,"onUpdate:modelValue":t[3]||(t[3]=n=>ae.value.remark=n),rows:"4",autosize:"",type:"textarea",maxlength:"200",placeholder:e.$t("order.remarkDes"),"show-word-limit":""},null,8,["modelValue","placeholder"]),b(m,{class:"mt-4 bg-btnOrBg w-full h-[46px] text-b1 rounded-full text-base font-semibold",onClick:t[4]||(t[4]=n=>s(ge)(!1))},{default:M(()=>[fe(h(e.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show"]),s(rt)?(S(),te(Ye,{key:0,onClose:t[6]||(t[6]=n=>s(ve)(!1)),text:e.$t("common.pay success")},null,8,["text"])):$("",!0),s(lt)?(S(),te(Ye,{key:1,isError:!0,onClose:t[7]||(t[7]=n=>s(Ve)(!1)),text:e.$t("order.fail")},null,8,["text"])):$("",!0),b(Xt,{paySource:bt.value,show:s(De),onClose:t[8]||(t[8]=n=>s(se)(!1))},null,8,["paySource","show"])]))}}const rs=$e({...as,setup:ns}),Is=Gt(rs,[["__scopeId","data-v-25cbeb6b"]]);export{Is as default};
