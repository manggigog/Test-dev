import{b3 as S,H as u,I as E,J as i,K as w,L as s,b4 as R,G as T,a as x,F as d}from"./index-CU2nzZe6.js";const F=()=>{const y=S(),e=y==null?void 0:y.cns,n=y==null?void 0:y.address,g=async()=>{try{return await e.treasury()}catch(r){return r}},A=async()=>{try{return await e.USDT()}catch(r){return r}},m=async()=>{try{return await e.MUSD()}catch(r){return r}},l=async()=>{try{return(await e.getCollateralTokens())[0]}catch{return 0}},L=async r=>{try{const t=await(await e.deposit(d(r),u)).wait();return i(t)}catch(t){return w(t),s(t,n,"deposit",{amount:d(r),overrides:u})}},P=async r=>{try{const t=await(await e.withdraw(d(r),u)).wait();return i(t)}catch(t){return w(t),s(t,n,"withdraw",{amount:d(r),overrides:u})}},C=async()=>{try{const r=await e.poolLength();return i(r)}catch(r){return s(r,n,"poolLength",{})}},k=async r=>{try{const t=await e.poolInfo(r);return i(t)}catch(t){return s(t,n,"poolInfo",{pid:r})}},v=async()=>{try{const r=await e.ONE_DAY();return Number(r)}catch(r){return s(r,n,"ONE_DAY",{})}},f=async(r,t,a)=>{const c=a||await l();try{const o=await(await e.borrow(r,c,d(t),u)).wait();return i(o)}catch(o){return w(o),s(o,n,"borrow",{pid:r,tokenAdress:c,loanAmount:d(t),overrides:u})}},B=async r=>{const{accountStore:t}=x(),a=r||t.account;try{const c=await e.getLoanIds(a);return i(c)}catch(c){return s(c,n,"getLoanIds",{accountAddressSearch:a})}},q=async r=>{try{const t=await e.loans(r);return i(t)}catch(t){return s(t,n,"loans",{loanId:r})}},D=async r=>{try{const t=await(await e.repay(r,u)).wait();return i(t)}catch(t){return w(t),s(t,n,"repay",{loanId:r,overrides:u})}},I=async r=>{try{const t=await(await e.rollover(r,u)).wait();return i(t)}catch(t){return w(t),s(t,n,"rollover",{loanId:r,overrides:u})}},N=async()=>{try{return await e.priceOracle()}catch(r){return s(r,n,"priceOracle",{})}};return{treasuryAddress:g,usdtAddress:A,musdAddress:m,maiAddress:l,deposit:L,withdraw:P,poolLength:C,poolInfo:k,ONE_DAY:v,borrow:f,getLoanIds:B,loans:q,repay:D,rollover:I,getPrice:async r=>{const t=await N(),a=R(t),c=a==null?void 0:a.cns,o=a==null?void 0:a.address,h=r||await l();try{const p=await c.getPrice(h);return i(T(p))}catch(p){return s(p,o,"getPrice",{tokenAdress:h})}},tokenCollateralRates:async r=>{const t=r||await l();try{return await e.tokenCollateralRates(t)/1e3}catch{return 2.572}},overdueTimes:async r=>{try{return await e.overdueTimes(r)}catch(t){return t}},getPenaltyAmount:async(r,t,a,c)=>{try{const o=await e.getPenaltyAmount(r,t,a,c);return i(o)}catch(o){return s(o,n,"getPenaltyAmount",{loanAmount:r,dueTime:t,timestamp:a,penaltyRate:c})}},liquidateBatch:async r=>{try{const t=await e.estimateGas.liquidateBatch(r),o=await(await e.liquidateBatch(r,{gasLimit:E(t,8e3),...u})).wait();return i(o)}catch(t){return w(t),s(t,n,"liquidateBatch",{ids:r})}}}};export{F as u};
