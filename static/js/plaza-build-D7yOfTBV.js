import{_ as E}from"./arrow-CiJHb_hL.js";import{a as j,q as W,e as f,k as P,o as q,g as h,x as G,j as z,b as J}from"./index-CU2nzZe6.js";import{z as M,y as v,r as _,D as K,E as Q,F as C,G as n,H as a,I as V,U as u,Z as L,O as o,N as y,Q as b,a3 as X,a4 as F,P as I,J as $,_ as Y,K as Z,X as ee,Y as ae}from"./vendor-Dr_RpJ_Y.js";const te={class:"flex items-center"},ne={class:"flex items-center"},se={key:0,class:"mr-1"},oe={key:0},le={key:0},ce={key:1,class:"mr-1","data-no-login":"true"},re={key:2,class:"text-[#FEA021] text-lg"},ie=M({props:{token:null,icon:{type:Boolean},tokenName:{type:Boolean},nameClass:null,balanceClass:null,unitConversion:{type:Boolean},addTokenIcon:{type:Boolean},isCountTo:{type:Boolean,default:!1}},setup(e,{expose:B}){const t=e,{accountStore:x}=j(),{addTokenBalance:N,balances:p,getOneBalance:w}=W(),m=v(()=>(p==null?void 0:p[t.token])||0),l=_(!0),s=v(()=>t.token==="BNB"?4:1),c=v(()=>{const r=Number(m.value||0);return t.unitConversion?r>1e6?Number(f(r/1e3,2)):Number(f(r,1)):Number(f(r,s.value))}),i=v(()=>t.unitConversion&&Number(m.value||0)>1e6?"k":""),T=v(()=>t.unitConversion?1:s.value),g=_(0);K(()=>m.value,(r,d)=>{if(d!=null){const k=Number(d||0);t.unitConversion?k>1e6?g.value=Number(f(k/1e3,4)):g.value=Number(f(k,4)):g.value=Number(f(k,s.value))}else g.value=c.value},{immediate:!0});const A=async()=>{h[t.token]&&(await w(t.token),l.value=!1)},D=async()=>{t.addTokenIcon&&G({address:h[t.token],symbol:(await z(h[t.token]).symbol()).result||t.token,decimals:await z(h[t.token]).decimals(),image:P(`images/tokens/${t.token}.png`)})},U=async()=>{l.value=!0,await A()},O=async()=>{await A()};return Q(()=>{U()}),B({refresh:O}),(r,d)=>{const k=C("VanImage"),S=C("van-icon"),H=C("VanLoading"),R=C("count-to");return a(),n("div",{class:"flex items-center",onClick:D},[V("div",te,[e.icon?(a(),L(k,{key:0,class:y(["w-[22px] h-auto mr-1",e.token==="LP"?"w-[40px]":""]),round:"",src:o(P)(`images/tokens/${e.token}.png`)},null,8,["class","src"])):u("",!0),e.tokenName&&e.token!=="LP"?(a(),n("span",{key:1,class:y(["mr-1",e.nameClass])},b(e.token),3)):u("",!0),e.tokenName&&e.token==="LP"?(a(),n("span",{key:2,class:y(["mr-1",e.nameClass])},"WMAI-MCOIN LP",2)):u("",!0)]),e.token==="LP"?(a(),n("div",{key:0,onClick:d[0]||(d[0]=X(()=>{o(q)("/lp-transfer-in")},["stop"])),class:"px-1.5 flex-shrink-0 mr-1 py-0.5 rounded flex items-center border border-solid border-[#FBA923] text-xs text-[#FBA923]"},[F(b(r.$t("assets.LP transfer"))+" ",1),I(S,{name:"arrow",class:"ml-0.5 font-bold text-xs"})])):u("",!0),V("div",ne,[o(x).isLogin?(a(),n("span",se,[l.value&&o(m)===0?(a(),L(H,{key:0,size:"14"})):(a(),n($,{key:1},[e.isCountTo?(a(),n("span",{key:0,class:y(e.balanceClass)},[I(R,{startVal:g.value,endVal:o(c),duration:1200,autoplay:!0,decimals:o(T),separator:""},null,8,["startVal","endVal","decimals"]),o(i)?(a(),n("span",oe,b(o(i)),1)):u("",!0)],2)):(a(),n("span",{key:1,class:y(e.balanceClass)},[F(b(o(c))+" ",1),o(i)?(a(),n("span",le,b(o(i)),1)):u("",!0)],2))],64))])):(a(),n("span",ce," 0 ")),e.addTokenIcon?(a(),n("div",re,[I(S,{name:"add-o"})])):u("",!0)])])}}}),ue=e=>(ee("data-v-b56ff20a"),e=e(),ae(),e),me=ue(()=>V("img",{class:"w-4 h-4",src:E},null,-1)),de=M({props:{tokens:{default:["MCOIN","MUSD","MAI"]},countTo:{type:Boolean,default:!1}},emits:["handleTo"],setup(e,{expose:B,emit:t}){const{checkLoginAuth:x}=J(),N=_([]),p=(l,s)=>{if(l){const c=typeof s=="number"?s:parseInt(String(s),10);isNaN(c)||(N.value[c]=l)}},w=async()=>{const l=N.value.filter(s=>s!==null&&typeof s.refresh=="function").map(s=>s.refresh());await Promise.all(l)},m=()=>{x(!0)&&t("handleTo","/userAssets")};return B({refreshTokenBalances:w}),(l,s)=>(a(),n("div",{class:"flex items-center justify-between h-7 px-1 text-sm bg-white rounded-full line-clamp-1 asset-bg overflow-x-auto",onClick:m},[(a(!0),n($,null,Z(e.tokens,(c,i)=>(a(),L(ie,{key:i,ref:T=>p(T,i),token:c,icon:!0,"unit-conversion":!0,class:"mr-1",nameClass:"line-clamp-1",isCountTo:e.countTo,id:c+"_ele_mark"},null,8,["token","isCountTo","id"]))),128)),me]))}}),ge=Y(de,[["__scopeId","data-v-b56ff20a"]]),ve="/static/images/cat-shadow-naI2hTWi.svg",ye="/static/images/arrow-slide-C-9mR8Cb.svg",be="/static/images/loading-eouHFNRU.webp",he="/static/images/plaza-bg-D8OyAHPS.webp",Ce="/static/images/plaza-build-BHm6pFl7.png";export{ge as U,ye as _,ve as a,be as b,Ce as c,he as p};
