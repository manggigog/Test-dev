import{z as b,G as l,H as o,a1 as O,a4 as $,Q as n,N as j,_ as q,q as A,r,x as D,F as T,I as s,U as c,P as v,$ as y,J as M,K as P,a3 as S,O as d,Z as G,X as H,Y as U}from"./vendor-Dr_RpJ_Y.js";import{B as J}from"./BackIcon-CDrGaEPo.js";import{E as f,F as m}from"./enums-DlE-aiss.js";import{a as Q,u as W,e as Y,bJ as K}from"./index-BckdT6oc.js";const X=""+new URL("../images/edit-Ry4iQgdA.svg",import.meta.url).href,Z=["bind"],ee=b({props:{text:{default:""},tailwindColor:{default:"oriange1"},tailwindTextSize:{default:"xxs"}},setup(a){const u=a;return(i,C)=>(o(),l("mark",{class:j(["h-[20px] border border-solid rounded-[4px] text-xxs px-[6px] text-center flex items-center justify-center bg-transparent",[a.tailwindColor?`border-${a.tailwindColor} text-${a.tailwindColor}`:"border-oriange1 text-oriange1",a.tailwindTextSize?`text-${a.tailwindTextSize}`:"text-xxs"]]),bind:i.$attrs},[O(i.$slots,"default",{},()=>[$(n(u.text),1)])],10,Z))}}),k=a=>(H("data-v-720c2020"),a=a(),U(),a),te={class:"header-bar sticky top-0 flex font-normal justify-center text-sm items-center h-[44px] px-2.5 z-50"},se={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},ae={class:"text-lg font-bold"},oe=k(()=>s("div",{class:"font-semibold"},null,-1)),ne={class:"h-[calc(100vh-44px-78px)] sticky top-[44px] px-3 pt-3 overflow-y-auto"},le=["onClick"],ie={class:"template-item__content w-full h-full flex justify-between items-center"},de={class:"template-item__content-left"},pe={class:"text-sm font-semibold text-b1 flex items-center gap-1"},re={class:"text-sm font-normal text-b3 mt-1"},ce={key:0},ue={key:1},he={key:2},fe={key:3},me={class:"template-item__content-right"},_e=["onClick"],xe=k(()=>s("img",{src:X,class:"w-5 h-5",alt:"Go edit",role:"button"},null,-1)),ge=[xe],ve={key:0,class:"btn-bg flex justify-end h-[78px] py-4 px-3"},ye=b({name:"ShippingTemplate"});function be(a){const u=A(),i=r(!1),{t:C}=D(),{accountStore:E}=Q(),{getCurrentStoreId:I}=W(),_=r(!1),x=r(0),V=r(20);r(0);const h=r([]),g=r([]),B=async()=>{var p;const e=await K({page:x.value,size:V.value,address:(p=await I())==null?void 0:p.merchant});if(!e.success||!e.data){_.value=!0,i.value=!1;return}h.value=e.data,g.value=x.value===1?h.value.length>0?h.value:[]:g.value.concat(h.value),_.value=!0},F=async()=>{i.value=!0,x.value+=1,await B(),setTimeout(()=>{i.value=!1},1e3)},L=()=>{u.push({path:"/shippingTemplateEditor",query:{mode:f.CREATE}})},w=(e,p=f.VIEW)=>{u.push({path:"/shippingTemplateEditor",query:{mode:p,id:e.id,address:e.address,name:e.name,defaultFlag:String(e.defaultFlag),type:e.type,threshold:e.threshold,cost:e.cost}})};return(e,p)=>{const z=T("VanList"),N=T("VanButton");return o(),l("div",null,[s("section",te,[s("div",se,[v(J,null,{default:y(()=>[s("span",ae,n(e.$t("shop.shippingTemplate.listTitle")),1)]),_:1})]),oe]),s("section",ne,[v(z,{class:"h-full",loading:i.value,"onUpdate:loading":p[0]||(p[0]=t=>i.value=t),finished:_.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:F},{default:y(()=>[(o(!0),l(M,null,P(g.value,(t,Te)=>(o(),l("div",{key:t.id,class:"template-item w-full h-[76px] bg-white rounded-xl mb-3 py-4 px-3",onClick:S(R=>w(t,d(f).VIEW),["stop"])},[s("div",ie,[s("div",de,[s("p",pe,[s("span",null,n(t.name),1),t.defaultFlag?(o(),G(ee,{key:0,text:e.$t("common.default")},null,8,["text"])):c("",!0)]),s("p",re,[t.type===d(m).FREE&&t.threshold?(o(),l("span",ce,n(e.$t("shop.shippingTemplate.actualPayment"))+n(d(Y)(t.threshold))+"MC"+n(e.$t("shop.shippingTemplate.freeShipping")),1)):c("",!0),t.type===d(m).FREE&&t.threshold===0?(o(),l("span",ue,n(e.$t("shop.shippingTemplate.freeShipping")),1)):c("",!0),t.type===d(m).NO_SHIPPING?(o(),l("span",he,n(e.$t("shop.shippingTemplate.noShipping")),1)):c("",!0),t.type===d(m).CASH_ON_DELIVERY?(o(),l("span",fe,n(e.$t("shop.shippingTemplate.cashOnDelivery")),1)):c("",!0)])]),s("div",me,[s("figure",{onClick:S(R=>w(t,d(f).EDIT),["stop"])},ge,8,_e)])])],8,le))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),d(E).isOnlyView?c("",!0):(o(),l("div",ve,[v(N,{class:"font-normal h-[46px] w-full px-4 rounded-3xl text-base bg-yellow",onClick:L},{default:y(()=>[$(n(e.$t("shop.shippingTemplate.addTemplate")),1)]),_:1})]))])}}const we=b({...ye,setup:be}),Ee=q(we,[["__scopeId","data-v-720c2020"]]);export{Ee as default};
