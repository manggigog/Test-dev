import{e as Z,d as q}from"./index-7OiUoGXy.js";import{o as J}from"./OTCContract-Cb1B50DA.js";import{e as K}from"./exchangeContract-DP98fDGp.js";import{_ as W,z as X,a2 as r,bl as w,r as d,E as Y,F as t,Z as m,H as o,$ as b,I as e,P as h,a4 as M,G as x,Q as n,O as a,a0 as ss}from"./vendor-Dr_RpJ_Y.js";const es={class:"flex items-center justify-between mb-4"},as={class:"flex font-semibold"},ts={key:1},os={class:"flex items-center justify-between mt-5"},ns={class:"opacity-80"},cs={class:"text-[#2E2008] font-semibold"},is={key:1},ls={class:"flex items-center justify-between mt-10"},rs=X({props:{show:{type:Boolean}},emits:["close","success"],setup(B,{emit:A}){const{lastPrice:C}=K(),{burnMAI:k,balances:u,musd:I,mai:P,system:L}=J(),[V]=r(!1),[S,p]=r(!1),[D,_]=r(!1),f=w({musdBalance:null,maiBalance:null,maiPrice:null}),y=()=>{A("close")},c=w({MAI:"",MUSD:""}),i=d(0),U=d(0),z=async()=>{c.MUSD=await I(),c.MAI=await P()},N=async()=>{const s=await u(c.MAI,l.value);i.value=+s},l=d(""),$=async()=>{const s=await L();l.value=s},j=async()=>{const s=await u(c.MUSD,l.value);U.value=+s},E=async()=>{_(!0);const s=await k();_(!1),s.success&&g()},T=async()=>{p(!0),f.maiPrice=+await C(),p(!1)},g=async()=>{T(),await $(),await z(),N(),j()};return Y(async()=>{await g()}),(s,v)=>{const F=t("van-loading"),G=t("van-icon"),H=t("VanLoading"),O=t("VanButton"),Q=t("van-popup");return o(),m(Q,{show:B.show,"onUpdate:show":v[0]||(v[0]=R=>ss(show)?show.value=R:null),round:"",style:{padding:"20px"},onClose:y},{default:b(()=>[e("div",es,[e("div",as,[M(n(s.$t("ecology.price"))+": ",1),a(S)?(o(),m(F,{key:0,size:"18px"})):(o(),x("span",ts,n(a(Z)(a(f).maiPrice,6))+" MUSD",1))]),h(G,{name:"cross",size:"18px",onClick:y})]),e("div",os,[e("div",ns,"MAI "+n(s.$t("ecology.canBurn")),1),e("div",cs,[a(V)?(o(),m(H,{key:0,size:"18"})):(o(),x("span",is,n(a(q)(i.value||0)),1))])]),e("div",ls,[h(O,{class:"btn h-[35px] min-w-[240px] px-4 text-white font-semibold",loading:a(D),disabled:i.value<=0,onClick:E},{default:b(()=>[M(n(s.$t("ecology.burn",{token:"MAI"})),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),_s=W(rs,[["__scopeId","data-v-6b439e56"]]);export{_s as C};
