import{y as N,l as $,r as B,x as S,B as d,D,E as F,F as o,G as n,H as r,a3 as E,a4 as A,P as i,Q as s,I as g,J as L,a2 as f,O as M,a0 as O}from"./vendor-BUT0HZ5j.js";import{u as V,p as I}from"./useOrderStatus-BSCfQVBG.js";import{P as U}from"./order-H59PKTFP.js";import{d as l,f as G}from"./index-BvL8wS8a.js";import{u as q}from"./useRefundStatus-DsYoZX36.js";import{P as h}from"./flashSale-DDyqLyYN.js";import{u as H}from"./useShipTemplate-SAWfRcmZ.js";import{d as J}from"./default-avatar-C3GeIXRh.js";const Q={class:"p-3 mt-3 bg-white rounded-xl font-Puhui"},W={class:"flex justify-between"},z={class:"flex items-center overflow-hidden"},K=["src"],X={class:"text-base font-semibold text-b1 line-clamp-1 ml-1"},Y={class:"font-semibold text-[#FF8812] text-sm line-clamp-1"},Z={key:0},ee={key:1},te={key:2},se={class:"flex w-full gap-3"},oe={class:"w-[calc(100%-40px-60px)] flex-1 flex flex-col min-h-[5rem] justify-between"},ne={class:"flex items-baseline justify-between font-semibold"},re={class:"text-base text-b1 font-semibold line-clamp-1 text-ellipsis"},ae={class:"text-sm text-b3 line-clamp-1 min-w-fit font-normal"},ie={key:0},ce={key:1},de={class:"text-sm text-b3 font-normal mt-1"},le={key:0,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},ue={key:1,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},me={key:2,class:"flex justify-end opacity-60 text-[#FD5520] text-sm"},fe={key:0,class:"mt-1 flex-center-bw"},ye={class:"text-sm font-normal text-b3 line-clamp-1"},he={class:"flex items-center text-sm font-normal text-b3 line-clamp-1"},pe={key:0,class:"flex justify-between mt-2"},xe={class:"text-sm font-normal text-b3 line-clamp-1"},ve={key:0},be={key:1},we={class:"text-[#FF8812] text-sm font-normal font-Puhui"},ke={key:0},Se={key:0},Ae={key:1},Pe={key:1},Te={key:0},Ce={key:1},ge=N({props:{order:null,isList:{type:Boolean},showPrice:{type:Boolean,default:!0},showShippingTemplate:{type:Boolean,default:!1}},setup(t){const u=t,P=$(),T=V(u.order.refundStatus,u.order.payType),p=B(null),y=S(()=>1/p.value),C=async()=>{const{mcoinRate:e}=G();p.value=await e()};S(()=>{var e;return!((e=u.order)!=null&&e.totalAmount)||!y.value?0:new d(u.order.totalAmount).times(y.value).toNumber()});const x=e=>{P.push(e)},{getExpressTypeText:R}=H(),_=e=>{const c=new d(e.price).minus(new d(e.goodsActivityReduceAmount||0).div(e.number)).plus(new d(e.goodsAdjustChangeAmount||0).div(e.number)).toNumber();return l(c||0)},v=e=>{const c=new d(e.price).times(e.number).minus(e.goodsActivityReduceAmount||0).plus(e.goodsAdjustChangeAmount||0).toNumber();return l(c||0)},j=e=>{const c=new d(e.price).times(e.number).minus(e.goodsActivityReduceAmount||0).plus(e.goodsAdjustChangeAmount||0).times(y.value).toNumber();return l(c||0)};return D(async()=>{await C()}),(e,c)=>{const m=F("VanImage");return n(),o("div",Q,[r("div",W,[r("div",{class:"flex-start",onClick:c[0]||(c[0]=A(a=>x(`/category?deliveryType=1&shopId=${t.order.stores.id}`),["stop"]))},[r("div",z,[r("img",{src:t.order.stores.logo||i(J),class:"flex-shrink-0 w-[30px] h-[30px] rounded-full object-cover"},null,8,K),r("div",X,s(t.order.stores.storeName||"--"),1)])]),r("div",Y,[t.order.status==-1?(n(),o("span",Z,s(e.$t("order.canceled")),1)):t.order.status===0&&t.order.hash?(n(),o("span",ee,s(e.$t("order.wait block chain")),1)):(n(),o("span",te,s(i(T)[t.order.status+""]),1))])]),(n(!0),o(g,null,L(t.order.orderGoods,a=>{var b,w,k;return n(),o("div",{class:"mt-4",key:a.goodsName},[r("div",null,[r("div",se,[M(m,{onClick:A(Re=>x(`/buyerOrderList/detail?id=${a.goodsId}`),["stop"]),src:(a.icons||"").split(",")[0],class:"shrink-0 w-20 h-20 overflow-hidden rounded-[8px]",alt:"",fit:"cover"},null,8,["onClick","src"]),r("div",oe,[r("div",null,[r("div",ne,[r("div",re,s(a.goodsName),1),r("div",ae,[t.order.payType===i(h).STORE_CARD?(n(),o("span",ie,s(a.cardPrice||0)+s((b=t.order.fmStoredCard)==null?void 0:b.symbol),1)):(n(),o("span",ce,s(_(a))+" Mcoin",1))])]),r("div",de,s(e.$t("order.quantity",{number:a.number||0})),1)]),(t.order.status===5||t.order.refundStatus===3)&&t.order.refundStatus<10?(n(),o("div",le,s(e.$t("refund.refund success tips")),1)):t.order.refundStatus!=null&&t.order.status===1&&t.order.refundStatus===4?(n(),o("div",ue,s(e.$t("refund.refund reject")),1)):f("",!0),t.order.refundStatus!=null?(n(),o("div",me,s(i(q)(t.order.refundStatus)),1)):f("",!0)])]),t.showShippingTemplate&&a.shippingTemplateType?(n(),o("div",fe,[r("div",ye,s(e.$t("order.expressPrice")),1),r("div",he,s(i(R)(a)),1)])):f("",!0)]),t.showPrice?(n(),o("div",pe,[r("span",xe,[t.order.paySource?(n(),o("span",ve,s(i(I)(+t.order.paySource)),1)):(n(),o("span",be,s(e.$t("order.payAmount"))+" :",1))]),r("div",we,[+t.order.paySource!==i(U).USDT_WALLET?(n(),o("div",ke,[t.order.payType===i(h).STORE_CARD?(n(),o("span",Se,s(i(l)(+new i(d)(a.cardPrice).times(a.number??1)||0))+" "+s((w=t.order.fmStoredCard)==null?void 0:w.symbol),1)):(n(),o("span",Ae,s(v(a))+" Mcoin",1))])):(n(),o("div",Pe,[O(s(j(a))+"USDT ",1),t.order.payType===i(h).STORE_CARD?(n(),o("span",Te," ("+s(i(l)(+new i(d)(a.cardPrice)||0))+" "+s((k=t.order.fmStoredCard)==null?void 0:k.symbol)+") ",1)):(n(),o("span",Ce,"("+s(v(a))+" Mcoin)",1))]))])])):f("",!0)])}),128)),E(e.$slots,"default")])}}});export{ge as _};
