import{ar as W,x as H,g as K,d as D}from"./index-CbIwihlz.js";import{_ as S,y as T,r as $,x as q,E as b,F as h,G as u,H as a,K as P,Q as v,P as w,I as B,J as E,R as F,n as G,O as A,X as J,N as L,Y as z,Z as Y,w as X,bd as ee,bc as te,D as se,a2 as oe,a0 as M,$ as ae,bw as N,bv as ne}from"./vendor-D6JO6WHW.js";import{g as le}from"./otc-BGNmkId2.js";const Te="/static/images/Preview-icon-BAYfYu2U.png",Be="/static/images/top-up-CvoSjQbt.png",ie={class:"text-[#2E2008]"},ce={class:"flex justify-between text-xs opacity-60"},re=["onClick"],pe=T({props:{type:null,list:null},emits:["onClick"],setup(n,{expose:y,emit:_}){const i=n,c=$(null),x=()=>{G(()=>{c.value.scrollTop=c.value.scrollHeight})},C=q(()=>(i.list.slice(0,30)||[]).sort((r,g)=>g.price-r.price)),t=r=>{_("onClick",r)};return y({scrollToBottom:x}),(r,g)=>{const f=b("van-skeleton");return u(),h("div",ie,[a("div",ce,[a("span",null,v(r.$t("mall.price")),1),a("span",null,v(r.$t("ecology.quantity")),1)]),w(W)||!(w(C)||[]).length?(u(),P(f,{key:0,class:"mt-3",row:5})):(u(),h("div",{key:1,ref:(l,o)=>{o.scrollContainer=l,c.value=l},class:"mt-1 w-full overflow-auto list-box min-h-[8rem] max-h-[8rem]"},[(u(!0),h(B,null,E(w(C),l=>(u(),h("div",{class:"flex justify-between mb-1 text-xs",key:l.price,onClick:o=>t(l)},[a("span",{class:F({"text-[#FF507A]":n.type=="sell","text-[#14D8A9]":n.type=="buy"})},v(l.price),3),a("span",null,v(w(H)(l.amount)),1)],8,re))),128))],512))])}}}),Ee=S(pe,[["__scopeId","data-v-7d981700"]]),Fe="/static/images/left-active-CvQBxcYP.svg",Oe="/static/images/right-TgmWZf45.svg",Ve="/static/images/left-CSppCxIr.svg",De="/static/images/right-active-B_cYrZYT.svg",Me="/static/images/add-wallet-D8_1TaQ3.svg",ue=n=>(z("data-v-559fd3e0"),n=n(),Y(),n),de={class:"relative"},me=["onClick"],ve=ue(()=>a("div",{class:"relative z-50 custom-button"},null,-1)),xe=T({emits:["change"],setup(n,{expose:y,emit:_}){const i=$(0),c=t=>{_("change",t)},x=t=>{i.value=t*25,_("change",i.value)};return y({resetValue:()=>{i.value=0}}),(t,r)=>{const g=b("van-slider");return u(),h("div",de,[(u(),h(B,null,E(5,(f,l)=>a("div",{class:F(["breakpoint",{"breakpoint-avtive":i.value>=l*25}]),key:f,style:J(`left: ${l*25}%`),onClick:o=>x(l)},null,14,me)),64)),A(g,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=f=>i.value=f),onChange:c,"active-color":"#FEA021"},{button:L(()=>[ve]),_:1},8,["modelValue"])])}}}),Ne=S(xe,[["__scopeId","data-v-559fd3e0"]]),j=n=>(z("data-v-b58f191e"),n=n(),Y(),n),he={class:"flex items-center justify-between mb-4 px-[15px]"},_e={class:"flex items-end"},ge=["src"],fe={class:"text-[#2E2008]"},ye=j(()=>a("div",{class:"text-lg"},"MAI/MUSD",-1)),be={class:"text-[0.65rem] opacity-60"},we=j(()=>a("div",{id:"line-echarts"},null,-1)),Ce={class:"my-2.5 flex pl-[15px]"},ke=["onClick"],Ie={class:"px-[20px] flex text-white pt-4 border-top"},$e=T({props:{show:{type:Boolean},lastPrice:null},emits:["close","success","setOtcType"],setup(n,{emit:y}){const _=s=>{y("setOtcType",s),i()},i=()=>{y("close")},{t:c}=X(),x=$(5),C=$([{label:"1d",type:5},{label:"3d",type:6},{label:"7d",type:7}]),t=$([]),r="rgba(20, 216, 169, 1)",g="rgba(255, 80, 122, 1)",f="rgba(20, 216, 169, .4)",l="rgba(255, 80, 122, .4)",o=ee({option:{tooltip:{trigger:"axis",axisPointer:{type:"cross"},position:function(s,p,k,I,d){const m={top:10};return m[["left","right"][+(s[0]<d.viewSize[0]/2)]]=30,m}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},grid:[{left:"5%",right:"10%",top:10,height:"80%"},{left:"5%",right:"10%",top:"66%",height:"35%"}],xAxis:[{type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}},{gridIndex:1,type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],yAxis:[{scale:!0,type:"value",smooth:!0,position:"right",max:null,min:null,splitLine:{show:!1},axisLabel:{show:!0},axisLine:{lineStyle:{color:"rgba(46, 32, 8, .4)"}},axisPointer:{lineStyle:{color:"#FFD81F"},label:{color:"#2E2008",backgroundColor:"#FFD81F"}}},{gridIndex:1,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100,height:"20px"}],series:[{name:c("nft.trend"),type:"candlestick",data:[],itemStyle:{color:r,color0:g,borderColor:r,borderColor0:g},dimensions:["-",c("nft.openPrice"),c("nft.closePrice"),c("nft.lowestPrice"),c("nft.highestPrice")],encode:{x:0,y:[1,2,3,4],tooltip:[1,2,3,4]},barWidth:"90%"},{name:c("common.Trading volume"),type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:s=>{if(s.data[2]===1)return l;if(s.data[2]===-1)return f}},barWidth:"90%"}]},myChart:null}),U=async()=>{V(!0);const s=await le(x.value);if(V(!1),!s.success)return;t.value=s.data.reverse();const p=[],k=[],I=[];let d=null,m=null;for(let e=0;e<t.value.length;e++)p.push(t.value[e].createTime),m=m?Math.max(m,Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),d=d?Math.min(d,Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),k.push([t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max]),I.push([e,t.value[e].total||0,t.value[e].open>t.value[e].close?1:-1]);o.option.yAxis[0].max=D((m*100+.1*100)/100,1),o.option.yAxis[0].min=D(d-.1>0?(d*100-.1*100)/100:0,1),o.option.xAxis[0].data=p,o.option.xAxis[1].data=p,o.option.series[0].data=k,o.option.series[1].data=I},O=async()=>{await U();const s=document.getElementById("line-echarts");s&&(N(s).dispose(),o.myChart=ne(N(s)),o.myChart.setOption(o.option,!0))},Q=async()=>{o.option.xAxis[0].data=[],o.option.xAxis[1].data=[],o.option.series[0].data=[],await O(),o.myChart.setOption(o.option,!0)},[R,V]=te(!1),Z=s=>{x.value!==s.type&&(x.value=s.type,Q())};return se(()=>{O()}),(s,p)=>{const k=b("van-loading"),I=b("van-icon"),d=b("VanButton"),m=b("van-popup");return u(),P(m,{show:n.show,"onUpdate:show":p[2]||(p[2]=e=>ae(show)?show.value=e:null),position:"bottom",round:"",style:{padding:"15px 0 25px"},onClose:i},{default:L(()=>[w(R)?(u(),P(k,{key:0,class:"opacity-60 absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]",size:"32px"})):oe("",!0),a("div",he,[a("div",_e,[a("img",{class:"w-8 h-8 mr-2.5 mb-1",src:w(K)("images/tokens/MCOIN.png"),alt:"",srcset:""},null,8,ge),a("div",fe,[ye,a("div",be,v(s.$t("otc.latestprice"))+" "+v(n.lastPrice),1)])]),A(I,{name:"cross",size:"22px",onClick:i})]),we,a("div",Ce,[(u(!0),h(B,null,E(C.value,e=>(u(),h("div",{class:"py-1.5 px-2.5 mr-2.5 bg-[#ECECEC] text-[#2E2008] rounded",key:e.type,onClick:Ae=>Z(e)},[a("span",{class:F({"opacity-30":x.value!==e.type})},v(e.label),3)],8,ke))),128))]),a("div",Ie,[A(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base mr-4",style:{"background-color":"#14d8a9"},onClick:p[0]||(p[0]=e=>_("buy"))},{default:L(()=>[M(v(s.$t("otc.buyIn")),1)]),_:1}),A(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base ml-4",style:{"background-color":"#ff507a"},onClick:p[1]||(p[1]=e=>_("sell"))},{default:L(()=>[M(v(s.$t("otc.sellOut")),1)]),_:1})])]),_:1},8,["show"])}}}),ze=S($e,[["__scopeId","data-v-b58f191e"]]);export{ze as C,Ne as O,Fe as _,Oe as a,Ve as b,De as c,Me as d,Ee as e,Te as f,Be as g};
