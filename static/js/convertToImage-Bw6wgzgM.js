import{bt as p,t as c,T as l}from"./vendor-CjApaIpB.js";import{b as d}from"./browser-DFlSdkZC.js";import{u as g}from"./upload-g92hiEmD.js";import{q as b}from"./index-lKIcPnY0.js";const R=(e,t={})=>{const i=e.offsetWidth,n=e.offsetHeight;let{width:a,height:r}=t;a=a||i,r=r||n;var o=e.getBoundingClientRect();const u={scale:1.5,width:a,height:r,useCORS:!0,allowTaint:!1,x:o.x,y:o.y,...t};return p(e,u).then(m=>new Promise(function(f){m.toBlob(function(h){f(h)})}))},L=e=>{let t=URL.createObjectURL(e);const s=document.createElement("a");return s.href=t,!!s.href},T=(e,t)=>{var a;if(console.log("tp.isConnected",c.isConnected()),c.isConnected()&&d.versions.android){let r=new File([e],`shareImg${new Date().getTime()}.png`,{type:"image/png"});var s=new FormData;return s.append("file",r),w(s)}else if(c.isConnected()&&d.versions.ios)return l("请长按图片保存"),setTimeout(()=>{let r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=`${t}.png`,document.body.appendChild(o),o.click(),document.body.removeChild(o)},1500),!1;if((a=window.ethereum)!=null&&a.isMetaKey){l("请截图保存");return}let i=URL.createObjectURL(e),n=document.createElement("a");return n.href=i,n.download=`${t}.png`,document.body.appendChild(n),n.click(),document.body.removeChild(n),!0},w=async e=>{const t=await g(e);if(t.success)return c.saveImage({url:b.imgUrl+t.data}),!0};export{R as c,L as i,T as s};
