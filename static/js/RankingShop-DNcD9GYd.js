import{_ as vo,y as io,a1 as _o,l as bo,x as wo,r as v,bc as _,bS as xo,D as ko,E as to,K as k,G as a,N as I,H as s,F as b,a2 as d,O as r,P as l,Q as n,a4 as Io,R as yo,a0 as So,Y as Co,Z as Vo,T as $o}from"./vendor-D6JO6WHW.js";import{_ as zo}from"./member-BMygrgIC.js";import{a as Do,S as To}from"./ShopVotePop-ByM1n5g-.js";import{S as Ao}from"./SkewCard-CGstOBqH.js";import{V as Go}from"./VoteRewardPop-DzQ7QKHW.js";import{C as Po}from"./CommonVanProvider-CI5dtYow.js";import{H as no}from"./HomeGoodsItem-Cbj_tplK.js";import{_ as Bo}from"./ApproveInfo-BHIgScrw.js";import{r as Ro,g as lo,b as No,d as y,l as Lo}from"./index-Ds2hFbCb.js";import{d as qo,q as Eo}from"./beiRanking-yYYiCmLG.js";import"./shop-CeqcS6K2.js";import"./beiExtRewardContract-DtOdv1Av.js";import"./beiConstContract--9OOQL--.js";import"./BackIcon-CPUEW9je.js";import"./MCOIN-BcbOHmhy.js";import"./RatioBox-OiqLR9-W.js";import"./ImgBoutiqueLable-Dod52ZXF.js";const Mo="/Test-dev/static/images/auth-BiC43gt4.svg",w=c=>(Co("data-v-602ff713"),c=c(),Vo(),c),Fo={class:"relative z-10 p-3"},Ho={class:"flex items-center gap-x-1"},Oo={class:"relative"},Ko={class:"absolute bottom-[-10px] left-0 right-0 w-[40px] border-[1px] border-solid border-white flex-center bg-yellow rounded-3xl mx-auto my-1"},Qo=w(()=>s("img",{src:zo,class:"w-4 h-4"},null,-1)),Yo={class:"flex flex-col gap-1"},Zo={class:"text-base font-semibold line-clamp-1"},jo={class:"text-b3 flex items-center"},Jo=w(()=>s("img",{src:Mo,class:"inline-block w-4 h-4 mr-0.5"},null,-1)),Uo={class:"text-newOrigin"},Wo={class:"bg-b5 py-3 grid grid-cols-3 rounded-lg mt-[17px]"},Xo={class:"text-center"},os={class:"text-center"},ss=w(()=>s("p",null,"LP",-1)),es={class:"text-center"},ts=w(()=>s("p",null,"MAI",-1)),ns={class:"card"},ls={class:"text-b1 font-semibold"},is=["innerHTML"],as={class:"card"},rs={class:"text-b1 font-semibold"},ds={class:"flex-center-bw text-b1 mt-3"},us={class:"text-b3"},cs={class:"flex-center-bw text-b1 mt-3"},ps={class:"text-b3"},fs={class:"flex-center-bw text-b1 mt-3"},hs={class:"text-b3"},gs={class:"flex-center-bw text-b1 mt-3"},ms={class:"text-b3"},vs={key:0,class:"card"},_s={class:"text-b1 font-semibold"},bs={key:1,class:"card"},ws={class:"text-b1 font-semibold"},xs={key:0,class:"relative py-4"},ks=io({name:"RankingShop"});function Is(c){const x=_o(),S=bo(),{loadingToggle:C}=Ro(),p=wo(()=>{var e;return(e=x==null?void 0:x.query)==null?void 0:e.shopId}),t=v(null),f=v(null),h=v(null),[V,$]=_(!1),[z,D]=_(!1),[T,ao]=_(!1),[ro,A]=_(!1),G=v(null),{width:P}=xo(G),uo=async()=>{if(!p.value)return;const{success:e,data:o}=await Eo({shopId:p.value,month:1e4});!e||!o||(t.value=o,o!=null&&o.goodsId&&(f.value={goodsId:o==null?void 0:o.goodsId,goodsName:o==null?void 0:o.goodsName,goodsPrice:o==null?void 0:o.price,goodsDesc:o==null?void 0:o.goodsDesc,goodsIcons:o==null?void 0:o.icons,goodsDiscountRatio:o==null?void 0:o.discountRatio,goodsType:o==null?void 0:o.goodsType}),o!=null&&o.offlineGoodsId&&(h.value={goodsId:o==null?void 0:o.offlineGoodsId,goodsName:o==null?void 0:o.offlineGoodsName,goodsPrice:o==null?void 0:o.offlineGoodsPrice,goodsDesc:o==null?void 0:o.offlineGoodsDesc,goodsIcons:o==null?void 0:o.offlineGoodsIcons,goodsDiscountRatio:o==null?void 0:o.offlineGoodsDiscountRatio,goodsType:o==null?void 0:o.offlineGoodsType}))},co=async()=>{if(!p.value)return;const{success:e,data:o}=await qo(p.value);e&&ao(o)},po=()=>{var e;S.push({path:"/goodsDetail",query:{id:(e=f.value)==null?void 0:e.goodsId}})},fo=()=>{var e;S.push({path:"/offlineGoodsDetail",query:{goodsId:(e=h.value)==null?void 0:e.goodsId}})},ho=async(e,o=!1)=>{o?A(o):$o({icon:lo("images/sucess_icon.png"),duration:3e3,message:+(e==null?void 0:e.direct)==400?"放电成功":"充电成功"})};return ko(async()=>{C(!0),co(),await uo(),C(!1)}),(e,o)=>{const go=to("VanImage"),mo=to("VanButton");return a(),k(Po,{id:"rangkingShop",class:"h-full font-Puhui font-normal relative px-3",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:e.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"},ref:(u,g)=>{g.shopEl=u,G.value=u}},{default:I(()=>{var u,g,B,R,N,L,q,E;return[s("div",{class:yo(["safe-page-body overflow-y-auto w-full",{"safe-page-allow":l(T)}])},[r(Ao,{class:"mb-3",width:(l(P)*.74).toFixed(),right:"27"},{default:I(()=>{var i,m,M,F,H,O,K,Q,Y,Z,j,J,U,W,X,oo,so,eo;return[r(Do,{class:"absolute right-1.5 top-1.5 -z-20",type:(i=t.value)==null?void 0:i.type,width:(l(P)*.356).toFixed()},null,8,["type","width"]),s("div",Fo,[s("div",Ho,[s("div",Oo,[r(go,{round:"",src:(((m=t.value)==null?void 0:m.logo)||"").split(",")[0],errorIcon:l(lo)("images/ranking/noPosition.png"),fit:"cover",width:"46px",height:"46px"},null,8,["src","errorIcon"]),s("div",Ko,[Qo,s("span",null,"V"+n((M=t.value)==null?void 0:M.memberLevel),1)])]),s("div",Yo,[s("div",Zo,n((F=t.value)==null?void 0:F.storeName),1),s("div",jo,[s("div",null,n(l(No)((H=t.value)==null?void 0:H.shopAddress,"****",4,4)),1),(O=t.value)!=null&&O.authorizeAddress?(a(),b("div",{key:0,onClick:o[0]||(o[0]=Io(()=>{l(D)(!0)},["stop"])),class:"inline-block ml-1 lex-shrink-0 align-text-bottom"},[Jo,s("span",Uo,n(e.$t("ecology.authorized")),1)])):d("",!0)])])]),s("div",Wo,[s("div",Xo,[s("p",null,n(e.$t("common.credit")),1),s("p",null,n(l(y)((K=t.value)!=null&&K.authorizeAddress?(Q=t.value)==null?void 0:Q.authorizeContribute:(Y=t.value)!=null&&Y.authorizeShop?0:(Z=t.value)==null?void 0:Z.contribute,0)),1)]),s("div",os,[ss,s("p",null,n(l(y)((j=t.value)!=null&&j.authorizeAddress?(J=t.value)==null?void 0:J.authorizeLp:(U=t.value)!=null&&U.authorizeShop?0:(W=t.value)==null?void 0:W.lp)),1)]),s("div",es,[ts,s("p",null,n(l(y)((X=t.value)!=null&&X.authorizeAddress?(oo=t.value)==null?void 0:oo.authorizeMai:(so=t.value)!=null&&so.authorizeShop?0:(eo=t.value)==null?void 0:eo.mai,0)),1)])])])]}),_:1},8,["width"]),s("div",ns,[s("p",ls,n(e.$t("ranking.shop introduction")),1),s("div",{class:"mt-3 min-h-10 text-b2 whitespace-pre-wrap",innerHTML:(u=t.value)==null?void 0:u.introduction},null,8,is)]),s("div",as,[s("p",rs,n(e.$t("ranking.business_data")),1),s("div",ds,[s("div",us,n(e.$t("shop.Opening hours")),1),s("div",null,n(l(Lo)((g=t.value)==null?void 0:g.shopCreateTime)),1)]),s("div",cs,[s("div",ps,n(e.$t("ranking.visitors")),1),s("div",null,n(((B=t.value)==null?void 0:B.lookCount)||0),1)]),s("div",fs,[s("div",hs,n(e.$t("ranking.listing_goods")),1),s("div",null,n(((R=t.value)==null?void 0:R.goodsCount)||0),1)]),s("div",gs,[s("div",ms,n(e.$t("ranking.listing_offline_goods")),1),s("div",null,n(((N=t.value)==null?void 0:N.offlineListGoodsCount)||0),1)])]),(L=f.value)!=null&&L.goodsId?(a(),b("div",vs,[s("p",_s,n(e.$t("ranking.hot_goods")),1),r(no,{goods:f.value,class:"mt-3",onClick:po},null,8,["goods"])])):d("",!0),(q=h.value)!=null&&q.goodsId?(a(),b("div",bs,[s("p",ws,n(e.$t("ranking.hot_offline")),1),r(no,{goods:h.value,class:"mt-3",onClick:fo},null,8,["goods"])])):d("",!0)],2),l(T)?(a(),b("div",xs,[r(mo,{class:"btn-yellow w-full h-[46px] rounded-full border-none text-base font-semibold",onClick:o[1]||(o[1]=i=>l($)(!0))},{default:I(()=>[So(n(e.$t("ranking.power")),1)]),_:1})])):d("",!0),l(z)&&t.value.authorizeAddress?(a(),k(Bo,{key:1,show:l(z),info:t.value,onClose:o[2]||(o[2]=i=>l(D)(!1))},null,8,["show","info"])):d("",!0),l(V)?(a(),k(To,{key:2,show:l(V),shopId:(E=t.value)==null?void 0:E.shopId,teleport:"#rangkingShop",onClose:o[3]||(o[3]=i=>l($)(!1)),onVoteSuccess:o[4]||(o[4]=(i,m)=>ho(i,m))},null,8,["show","shopId"])):d("",!0),r(Go,{show:l(ro),onClose:o[5]||(o[5]=i=>l(A)(!1))},null,8,["show"])]}),_:1},8,["title"])}}const ys=io({...ks,setup:Is}),Fs=vo(ys,[["__scopeId","data-v-602ff713"]]);export{Fs as default};
