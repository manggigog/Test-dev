import{y as b,E as D,F as u,G as o,H as c,a2 as B,Q as r,a4 as h,O as f,_ as I,r as L,x as E,D as O,a0 as w,P as V,I as R,J as q,N as F,l as H,K as _}from"./vendor-D6JO6WHW.js";import{B as K}from"./BackIcon-CPUEW9je.js";import{q as P,a as T,b as z}from"./address-CGZ_MCw2.js";import{R as J,a0 as M,r as U}from"./index-CybuWkSo.js";import{u as j}from"./useSelectAddress-CgNt0r_o.js";import{C as G}from"./ChangeRegion-mv6XnMIE.js";import"./ChangeRegionPop-30E9HTwm.js";const Q="/static/images/privacy-B_bPa56U.svg",W={class:"text-left max-w-[78%] overflow-hidden"},X={class:"flex items-center w-full"},Y={key:0,src:Q,class:"w-6 mr-1"},Z={class:"w-full text-lg truncate"},ee={key:1,class:"absolute top-2.5 right-[20px] text-xs bg-primary rounded-full text-white px-1 py-0.5 ml-1"},se={class:"mt-1.5 truncate"},te={class:"flex-center"},ae=b({props:{address:null},emits:["handleDel","handleEdit","handleSetDefault","select"],setup(e,{emit:l}){const{address:g}=e;return(d,t)=>{const m=D("van-icon");return o(),u("div",{class:"bg-white py-2.5 pl-3 pr-5 rounded-lg flex justify-between items-end relative",onClick:t[3]||(t[3]=h(()=>l("select",e.address),["stop"]))},[c("div",W,[c("div",X,[e.address.encryptFlag&&e.address.success?(o(),u("img",Y)):B("",!0),c("div",Z,r(e.address.userName)+"Â "+r(e.address.telNumber),1),e.address.isDefault===1?(o(),u("div",ee,r(d.$t("common.default")),1)):(o(),u("div",{key:2,type:"primary",class:"absolute top-2.5 right-[20px] text-xs border border-solid border-primary rounded-full text-primary px-1 py-0.5 ml-1",onClick:t[0]||(t[0]=h(()=>l("handleSetDefault",e.address),["stop"]))},r(d.$t("common.setDefault")),1))]),c("div",se,r(`${e.address.provinceName??""}${e.address.cityName??""}${e.address.countyName??""}${e.address.detailInfo??""}`),1)]),c("div",te,[f(m,{name:"edit",class:"text-xl",onClick:t[1]||(t[1]=h(()=>l("handleEdit",e.address),["stop"]))}),f(m,{name:"delete",class:"ml-3 text-xl text-red-400",onClick:t[2]||(t[2]=h(()=>l("handleDel",e.address),["stop"]))})])])}}}),de={class:"p-2.5 relative text-center"},ne={class:"flex-start"},re=b({setup(e){const{decryptAddressKey:l,generateKey:g}=J(),d=H(),{setAddress:t}=j(),{loadingToggle:m}=U(),p=L([]),a=M(d),k=E(()=>!(a!=null&&a.includes("submitOrder")||a!=null&&a.includes("redeemPrize"))),A=s=>{a.indexOf("redeemPrize")>=0&&(t(s),d.push(a)),a.indexOf("submitOrder")>=0&&(t(s),d.back())},y=async()=>{const s=d.currentRoute.value.path,n=await P();if(p.value=n.data||[],!n.success)return;const x=await g("user",s);x?p.value=n.data.map(i=>i.encryptFlag?l(i,x):i):p.value=n.data},v=s=>{d.push(s)},S=()=>{sessionStorage.removeItem("editAddress"),v("/editAddress")},C=s=>{sessionStorage.setItem("editAddress",JSON.stringify(s)),v("/editAddress")},N=async s=>{(await T(s.id)).success&&y()},$=async s=>{(await z(s.id)).success&&y()};return O(async()=>{m(!0),await y(),m(!1)}),(s,n)=>{const x=D("VanButton");return o(),u("div",de,[c("header",ne,[f(K),w(" "+r(s.$t("common.address"))+" ",1),f(G,{showIcon:!0,showDownIcon:V(k),class:"ml-auto bg-white px-2 rounded-[20px]",style:{"box-shadow":"5px 5px 10px 0px rgba(254, 160, 33, 0.1)"}},null,8,["showDownIcon"])]),(o(!0),u(R,null,q(p.value,i=>(o(),_(ae,{address:i,key:i.id,class:"mt-2",onHandleDel:N,onHandleEdit:C,onHandleSetDefault:$,onSelect:A},null,8,["address"]))),128)),f(x,{class:"px-20 mt-20 btn-orange btn-shadow",onClick:S},{default:F(()=>[w(r(s.$t("address.addAddress")),1)]),_:1})])}}}),pe=I(re,[["__scopeId","data-v-6db1cf39"]]);export{pe as default};
