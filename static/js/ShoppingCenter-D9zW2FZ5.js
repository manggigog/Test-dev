import{_ as b,y as w,l as S,E as k,F as i,G as l,H as t,K as I,Q as c,O as g,N as C,a0 as D,I as A,J as B,P as n,X as G,T as L,be as T,bf as F,r as P,D as N}from"./vendor-BUT0HZ5j.js";import{W as O}from"./WehdrawPart-EXmSYDtK.js";import{e as V,g as y,V as j,u as z,bc as E}from"./index-k1FFr-1T.js";import{l as M}from"./luckyShopContract-ChIWWG1n.js";import{B as U}from"./BackIcon-biFt6cm7.js";const q={class:"px-4 pt-4 pb-6 bg-white rounded-2xl contianer-bg"},R={class:"flex justify-between"},J={class:"text-[#2E2008] font-semibold"},W={key:1,class:"flex flex-wrap w-full"},H=["onClick"],K={class:"goods-item"},Q=["src"],X={class:"flex justify-center items-center mt-1.5"},Y=["src"],Z={class:"text-[#666666] text-xs"},tt={class:"mt-5 add-box"},st=["src"],et=w({props:{list:null,loading:{type:Boolean}},emits:["toDetail"],setup(r,{emit:d}){const{accountStore:u}=V(),p=S(),m=s=>{p.push(s)};return(s,a)=>{const h=k("van-icon"),_=k("van-loading");return l(),i("div",q,[t("div",R,[t("div",J,c(s.$t("flashSale.oneYuanGoods")),1),t("div",{class:"flex items-center text-xs opacity-50",onClick:a[0]||(a[0]=()=>{d("toDetail")})},[t("span",null,c(s.$t("flashSale.ParticipationRecord")),1),g(h,{name:"arrow"})])]),r.loading?(l(),I(_,{key:0,class:"mt-6 text-center",size:"12px"},{default:C(()=>[D(c(s.$t("common.loading")),1)]),_:1})):(l(),i("div",W,[(l(!0),i(A,null,B(r.list,e=>(l(),i("div",{key:e.id,class:"mt-5 mr-4 goods",onClick:x=>m(`/saleGoodDetail?id=${e.id??""}`)},[t("div",K,[t("img",{class:"object-cover rounded-lg",src:e.mainImageUrls||n(y)("images/goods/defaultImg.png"),alt:"",srcset:""},null,8,Q)]),t("div",X,[t("img",{class:"mr-1 w-3.5 h-3.5",src:n(y)("images/tokens/MCOIN.png"),alt:"",srcset:""},null,8,Y),t("span",Z,c(e.totalPrice),1)])],8,H))),128)),t("div",tt,[t("div",{style:G(r.list.length%4==0?"width: 4.375rem;height: 4.375rem":""),class:"flex justify-center items-center rounded-lg bg-[#F4F6F8]",onClick:a[1]||(a[1]=e=>n(u).isOnlyView?n(L)(s.$t("order.Requires merchant account operation")):m("/editFlashSaleGoods"))},[t("img",{class:"w-5 h-5",src:n(j)("flashSale/add-icon.svg"),alt:"",srcset:""},null,8,st)],4)])]))])}}}),ot=b(et,[["__scopeId","data-v-18622034"]]),at={class:"w-full bg-[#f9f5f7] min-h-screen"},nt={class:"relative -z-0"},lt={class:"absolute top-3 left-2.5 text-[#2E2008] flex items-center h-5"},it={class:"font-medium"},ct={class:"px-2.5 mt-12"},pt=w({setup(r){const{getCurrentStoreId:d}=z(),u=S(),{ensureLocks:p}=M(),[m,s]=T(!0),a=F({lockAmount:null}),h=()=>{u.push("/sellerOneSaleOrder?type=3&active=0")},_=()=>{u.push("/ParticipationDetail")},e=P([]),x=async()=>{var f;s(!0);const o=await E({page:1,size:9999},{status:2,shopId:(f=await d())==null?void 0:f.id});o.data=o.data.map(v=>({...v,mainImageUrls:v.mainImageUrls?v.mainImageUrls.split(",")[0]:""})),s(!1),e.value=o.data||[]};async function $(){var o;a.lockAmount=await p((o=await d())==null?void 0:o.merchant)}return N(()=>{x(),$()}),(o,f)=>(l(),i("div",at,[t("header",nt,[t("div",lt,[g(U),t("span",it,c(o.$t("flashSale.ShoppingCenter")),1)])]),t("div",ct,[g(O,{type:1,lockAmount:n(a).lockAmount,onToDetail:h},null,8,["lockAmount"]),g(ot,{loading:n(m),list:e.value,class:"mt-4",onToDetail:_},null,8,["loading","list"])])]))}});export{pt as default};
