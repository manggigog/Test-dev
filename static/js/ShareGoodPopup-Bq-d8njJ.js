import{y as L,G as n,H as o,I as t,U as c,N as H,O as l,Q as i,a3 as q,_ as k,z as _,bl as ee,D as te,F as N,P as g,a4 as I,X as O,Y as A,a2 as J,x as se,r as U,E as Q,ab as oe,$ as T,Z as $,J as le,T as D,a1 as ne,B as Y,bj as ae,bk as ie,bs as ce}from"./vendor-Dr_RpJ_Y.js";import{_ as de}from"./avatarRing-CLGxkH-F.js";import{f as re,k as me,b as ue,Y as P,aM as pe,aN as he,e as E,c as fe,w as ge}from"./index-LRhcxFAI.js";import{_ as xe}from"./shop-arrow-right-BMae5SG7.js";import{B as ve}from"./BoutiqueLabelInLogo-6zoXLJ5H.js";import{R as X}from"./RatioBox-n6itzF1h.js";import{b as ye,S as be,c as we}from"./GivePointsLable-BLbSGB94.js";import{c as _e}from"./goods-BRNynB6s.js";import{D as j}from"./goods-BVwS8oFG.js";import{_ as $e}from"./ServiceIcon-CKD37cB-.js";import{_ as K}from"./MCOIN-Bodfn-v1.js";import{S as w}from"./shop-CeqcS6K2.js";import{F as R}from"./enums-DlE-aiss.js";import{_ as ke}from"./logo-D1FnEJzd.js";import{c as Te,i as Ie,s as Se}from"./convertToImage-CeT_XVfz.js";const hs=""+new URL("../images/share-BeKzdeAF.svg",import.meta.url).href,fs=""+new URL("../images/all-comment-6aSJsIbE.svg",import.meta.url).href,Be={class:"flex"},Ce={class:"flex items-center mb-1"},Fe=t("div",{class:"w-[20px] h-[20px] rounded-full overflow-hidden mr-1 flex-shrink-0"},[t("img",{src:de,class:"w-full h-full object-cover",alt:"用户头像"})],-1),De={class:"flex-1"},Pe={class:"text-b3 text-sm font-normal"},Re={class:"overflow-hidden text-sm font-normal text-b2 line-clamp-2"},je=["src"],Le={key:0,class:"absolute bottom-0 right-0 rounded-br-md text-xs leading-4 px-1.5 bg-black/50 text-white"},gs={props:{data:Object,isOffline:{type:Boolean,default:!1}},emits:["click","imgPre"],setup(e,{emit:a}){const s=e,r=L(()=>s.isOffline?s.data.commentPics&&s.data.commentPics.split(",")[0]:s.data.commentImages&&s.data.commentImages.split(",")[0]),p=L(()=>s.isOffline?s.data.commentPics&&s.data.commentPics.split(",").length:s.data.commentImages&&s.data.commentImages.split(",").length);return(x,m)=>(o(),n("div",{class:"bg-transparent rounded-lg",onClick:m[1]||(m[1]=h=>a("click"))},[t("div",Be,[t("div",{class:H(l(r)?"flex-1":"w-full")},[t("div",Ce,[Fe,t("div",De,[t("div",Pe,i(l(re)(e.data.address||e.data.orderCustomerAddress,"***",4,4)),1)])]),t("div",Re,i(e.data.commentStar?e.data.commentContent||x.$t("evaluate.The user has not filled in the text")+"...":""),1)],2),l(r)?(o(),n("div",{key:0,onClick:m[0]||(m[0]=q(h=>a("imgPre",l(r)),["stop"])),class:"w-[64px] h-[64px] ml-2 flex-shrink-0 relative"},[t("img",{class:"object-cover w-full h-full rounded-md aspect-square",src:l(r)},null,8,je),l(p)>1?(o(),n("div",Le,i(l(p)),1)):c("",!0)])):c("",!0)])]))}},Ne=e=>(O("data-v-34bb0674"),e=e(),A(),e),Ee={class:"w-full flex justify-start items-center"},Oe={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Ae=["src"],Ve={class:"absolute right-0 top-0"},Ue={class:"ml-1 h-10 flex flex-col justify-between items-start"},He={class:"text-base font-semibold text-b1 line-clamp-1 max-w-max leading-[22px] flex items-center"},qe=Ne(()=>t("img",{src:xe,class:"shrink-0 w-4 h-4 object-cover"},null,-1)),ze={class:"flex items-center text-xs text-primary"},Ge={class:"ml-1"},Me={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},Ye=_({props:{shop:null},emits:["handleTo"],setup(e,{emit:a}){const s=e;return ee({}),te(()=>s.shop.id,()=>{},{immediate:!0}),(r,p)=>{const x=N("van-rate");return o(),n("div",{class:"px-4 py-3 mt-2 bg-white text-base",onClick:p[1]||(p[1]=m=>a("handleTo",`/shop?shopId=${e.shop.id}`))},[t("div",Ee,[t("div",Oe,[t("img",{src:e.shop.logo||e.shop.scenery&&e.shop.scenery.split(",")[0]||l(me)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Ae),t("div",Ve,[g(ve,{type:e.shop.type},null,8,["type"])])]),t("div",Ue,[t("div",He,[I(i(e.shop.storeName)+" ",1),qe]),t("div",ze,[g(x,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.shop.star,"onUpdate:modelValue":p[0]||(p[0]=m=>e.shop.star=m),size:14,gutter:"1",color:"#FEA021"},null,8,["modelValue"]),t("span",Ge,i(e.shop.star),1)])]),t("div",Me,[g(X,{tag:r.$t("common.rebate"),ratio:e.shop.discountRatio||0},null,8,["tag","ratio"])])])])}}}),xs=k(Ye,[["__scopeId","data-v-34bb0674"]]),Z=""+new URL("../images/collect_b-kiXhnb3F.svg",import.meta.url).href,W=""+new URL("../images/collect_gray-BYsbfCdJ.svg",import.meta.url).href,Je=e=>(O("data-v-0e0e2d8a"),e=e(),A(),e),Qe={class:"w-full flex items-center justify-between bg-white rounded-full sm:w-[355px]"},Xe={class:"flex justify-end gap-6"},Ke=Je(()=>t("img",{src:ye,class:"shrink-0 w-6 h-6 mb-0.5"},null,-1)),Ze={class:"shrink-0 text-[#999] text-xs"},We={key:0,src:Z,class:"shrink-0 w-6 h-6 mb-0.5"},et={key:1,src:W,class:"shrink-0 w-6 h-6 mb-0.5"},tt={class:"shrink-0 text-[#999] text-xs"},st={key:0,src:Z,class:"shrink-0 w-6 h-6 mb-0.5"},ot={key:1,src:W,class:"shrink-0 w-6 h-6 mb-0.5"},lt={class:"shrink-0 text-[#999] text-xs"},nt={class:"flex flex-1 justify-end ml-6"},at=_({props:{isFollow:{type:Boolean},goodsId:null,goods:null,systemTime:null,payType:null,boutiqueFlag:{type:Boolean},deliveryType:null,shop:null,stock:null,goodsTypes:null},emits:["handleConnect","handleBuy","handleAddCart","handleOffline"],setup(e,{emit:a}){const s=e,{checkLoginAuth:r,checkRegisterAuth:p}=ue(),[x,m]=J(!1),{t:h}=se(),y=U(!1),B=()=>{r(!0)&&(d.value||(d.value=!0,_e({goodsIds:[s.goodsId],type:y.value?2:1,collectType:1}).then(u=>{u.success&&(y.value?D({message:h("common.cancel collect"),icon:P("toast-success.svg")}):D({message:h("common.collect success"),icon:P("toast-success.svg")}),y.value=!y.value)}).finally(()=>{d.value=!1})))},d=U(!1),b=async()=>{var v,F,z,G,M;if(!r(!0)||d.value||!((v=s.goods)!=null&&v.goodsId))return;let u={};(F=s.goods)!=null&&F.goodsId&&(u.goodsId=(z=s.goods)==null?void 0:z.goodsId),(G=s.goods)!=null&&G.storeId&&(u.storeId=(M=s.goods)==null?void 0:M.storeId),d.value=!0;const f=await pe(u);d.value=!1,f.success&&(s.goods.collectId=f.data,D({message:h("common.collect success"),icon:P("toast-success.svg")}))},C=async()=>{var v;if(d.value||!((v=s.goods)!=null&&v.collectId))return;let u={ids:[s.goods.collectId]};d.value=!0;const f=await he(u);d.value=!1,f.success&&(s.goods.collectId=null,D({message:h("common.cancel collect"),icon:P("toast-success.svg")}))},V=async()=>{r(!0)&&await p(!0)&&a("handleOffline")};return Q(()=>{y.value=s.isFollow}),oe(()=>{}),(u,f)=>{const v=N("VanButton");return o(),n("div",{class:H(["fixed bottom-0 sm:left-1/2 sm:-translate-x-2/4 left-0 sm:w-[375px] w-full bg-white flex-center py-4 px-3 font-Puhui font-normal",l(x)?"z-[2003]":"z-20"])},[t("div",Qe,[t("div",Xe,[g($e,{shop:e.shop,showClerk:""},{default:T(()=>[Ke,t("div",Ze,i(u.$t("common.service")),1)]),_:1},8,["shop"]),e.deliveryType===l(j).online?(o(),n("div",{key:0,class:"text-xs text-center flex flex-col items-center",onClick:B},[y.value?(o(),n("img",We)):(o(),n("img",et)),t("div",tt,i(u.$t("common.collect")),1)])):c("",!0),e.deliveryType===l(j).offeline?(o(),n("div",{key:1,class:"text-xs text-center flex flex-col items-center",onClick:f[0]||(f[0]=F=>e.goods.collectId?C():b())},[e.goods.collectId?(o(),n("img",st)):(o(),n("img",ot)),t("div",lt,i(u.$t("common.collect")),1)])):c("",!0)]),t("div",nt,[e.deliveryType===l(j).online?(o(),n(le,{key:0},[g(v,{class:"w-full px-6 text-sm text-newOrigin rounded-r-none bg-newOrigin/20 rounded-l-3xl font-semibold",disabled:e.stock===0&&e.goodsTypes!=2,onClick:f[1]||(f[1]=q(F=>a("handleAddCart"),["stop"]))},{default:T(()=>[I(i(u.$t("common.addCart")),1)]),_:1},8,["disabled"]),e.payType||e.boutiqueFlag?(o(),$(v,{key:0,class:"w-full px-6 text-sm text-b1 rounded-l-none rounded-r-3xl bg-btnOrBg font-semibold",onClick:f[2]||(f[2]=()=>a("handleBuy","payType=1")),disabled:e.stock===0&&e.goodsTypes!=2},{default:T(()=>[I(i(u.$t("common.Buy it now")),1)]),_:1},8,["disabled"])):c("",!0)],64)):(o(),$(v,{key:1,class:"w-full text-sm text-b1 font-semibold text-center bg-btnOrBg rounded-3xl",onClick:V,text:u.$t("common.payBill")},null,8,["text"]))])])],2)}}}),vs=k(at,[["__scopeId","data-v-0e0e2d8a"]]),it=_({props:{type:{default:0}},setup(e){return(a,s)=>(o(),n("div",null,[e.type!==l(w).SD?(o(),n("span",{key:0,class:H([{"bg-[#FF4444] text-b6":e.type===l(w).SL,"bg-[#FF8812] text-b6":e.type===l(w).PR,"bg-[#FED73A] text-b1":e.type===l(w).ST},"tag__wrap px-1 text-sm font-semibold rounded-[4px] whitespace-nowrap mr-1 relative top-[-1.5px]"])},i(e.type===l(w).SL?a.$t("common.boutique"):e.type===l(w).PR?a.$t("mall.Best"):a.$t("shop.Star Selection")),3)):c("",!0),ne(a.$slots,"default")]))}}),ct={class:"ship-template-label"},dt={key:0},rt={key:1},mt={key:2},ut={key:3},pt=_({props:{shippingTemplate:{default:()=>({})}},setup(e){return(a,s)=>(o(),n("div",ct,[e.shippingTemplate.type===l(R).FREE&&e.shippingTemplate.threshold?(o(),n("span",dt,i(a.$t("shop.shippingTemplate.actualPayment"))+i(l(E)(e.shippingTemplate.threshold))+i(a.$t("shop.shippingTemplate.freeShipping")),1)):c("",!0),e.shippingTemplate.type===l(R).FREE&&e.shippingTemplate.threshold===0?(o(),n("span",rt,i(a.$t("shop.shippingTemplate.freeShipping")),1)):c("",!0),e.shippingTemplate.type===l(R).NO_SHIPPING?(o(),n("span",mt,i(a.$t("shop.shippingTemplate.noShipping")),1)):c("",!0),e.shippingTemplate.type===l(R).CASH_ON_DELIVERY?(o(),n("span",ut,i(a.$t("shop.shippingTemplate.cashOnDelivery")),1)):c("",!0)]))}}),ht=k(pt,[["__scopeId","data-v-aaafc9da"]]),ft={class:"balance-template-label"},gt={key:0},xt=_({props:{type:{default:0}},setup(e){return(a,s)=>(o(),n("div",ft,[e.type!==l(w).SD?(o(),n("span",gt," 支持余额支付 ")):c("",!0)]))}}),vt=k(xt,[["__scopeId","data-v-ef7b501a"]]),yt=e=>(O("data-v-f7cba2c4"),e=e(),A(),e),bt={class:"px-4 py-3 rounded-t-xl -translate-y-3 bg-white relative font-Puhui"},wt={class:"main-price__wrap flex justify-between items-center"},_t={class:"price__block flex flex-row justify-start items-center h-[26px] leading-[26px]"},$t=yt(()=>t("img",{class:"w-4 h-4 flex-shrink-0",src:K},null,-1)),kt={class:"text-[26px] font-normal font-BebasNeue text-b1 ml-1 h-[26px] leading-[26px] translate-y-[2px]"},Tt={class:"goods-info__wrap mt-3"},It={class:"goods-name flex flex-wrap text-lg font-bold text-b1 leading-[26px] whitespace-pre-wrap font-Puhui"},St={class:"text-lg font-bold text-b1 leading-[26px] whitespace-pre-wrap font-Puhui"},Bt={key:1,class:"text-lg font-bold text-b1 leading-[26px] whitespace-pre-wrap font-Puhui"},Ct={key:0,class:"goods-description mt-1 text-sm text-b3 font-normal leading-5 line-clamp-2 font-Puhui"},Ft={class:"mt-1 flex flex-row justify-start items-center gap-2"},Dt=_({props:{tokenRate:null,shop:null,goods:null,discountRatio:null,isSale:{type:Boolean,default:!1},card:null,shippingTemplate:{default:()=>({})}},setup(e){const a=e,{tradeContributeSelfRate:s}=fe(),r=U(0);L(()=>{const m=+new Y(new Y(a.goods.goodsDiscountRatio).div(100)).times(a.goods.price).times(r.value);return E(m,2)});const p=async()=>{r.value=await s()},x=async()=>{p()};return Q(()=>{x()}),(m,h)=>(o(),n("div",bt,[t("div",wt,[t("div",_t,[$t,t("span",kt,i(l(E)(e.goods.price||0)),1)]),t("div",null,[g(X,{tag:m.$t("common.rebate"),ratio:e.discountRatio||0},null,8,["tag","ratio"])])]),t("div",Tt,[t("div",It,[e.goods.type?(o(),$(it,{key:0,type:e.goods.type},{default:T(()=>[t("span",St,i(e.goods.goodsName),1)]),_:1},8,["type"])):(o(),n("span",Bt,i(e.goods.goodsName),1))]),e.goods.goodsDesc?(o(),n("div",Ct,i(e.goods.goodsDesc),1)):c("",!0),t("div",Ft,[e.goods.deliveryType==2?(o(),$(be,{key:0,deliveryType:e.goods.deliveryType},null,8,["deliveryType"])):c("",!0),e.goods.deliveryType==1&&e.shippingTemplate.id?(o(),$(ht,{key:1,shippingTemplate:e.shippingTemplate},null,8,["shippingTemplate"])):c("",!0),e.goods.type?(o(),$(vt,{key:2,type:e.goods.type},null,8,["type"])):c("",!0)])])]))}}),ys=k(Dt,[["__scopeId","data-v-f7cba2c4"]]),S=e=>(O("data-v-0f761592"),e=e(),A(),e),Pt={class:"w-[335px] relative",id:"saveHtml"},Rt={class:"img-box"},jt=["src"],Lt={key:0,class:"fixed left-0 w-full px-2.5 flex-center-bw top-1.5"},Nt=S(()=>t("div",null,null,-1)),Et={class:"px-2.5 py-2"},Ot={class:"flex items-center justify-start text-primary"},At=S(()=>t("div",{class:"mr-1.5 w-6 flex-shrink-0"},[t("img",{class:"w-6 h-6",src:K})],-1)),Vt={class:"text-[#FEA021] text-3xl font-medium mr-1"},Ut=S(()=>t("span",{class:"text-base"},"Mcoin",-1)),Ht={class:"self-center ml-4"},qt={class:"mt-1 text-sm font-semibold text-left text-default"},zt={class:"flex items-center justify-between pt-8"},Gt={class:"flex items-center"},Mt={class:"border border-solid border-black/20 p-0.5"},Yt={class:"ml-3 text-sm text-black-800 opacity-80"},Jt=S(()=>t("br",null,null,-1)),Qt=S(()=>t("img",{src:ke,class:"w-[60px] h-[60px] object-contain"},null,-1)),Xt={key:1,class:"fixed w-fit px-2.5 left-1/2 bottom-9 transform -translate-x-1/2"},Kt={class:"ml-1 text-sm font-normal"},Zt=_({props:{show:{type:Boolean},goods:null,codeUrl:null},emits:["close","onSuceess"],setup(e,{emit:a}){const s=e,{loadingToggle:r}=ge(),p=L(()=>s.codeUrl||window.location.origin+"/#/goodsDetail?id="+s.goods.id),[x,m]=J(!1),h=()=>{a("close")},y=()=>{m(!0),r(!0),document.getElementById("saveHtml")?setTimeout(()=>{B()},200):setTimeout(()=>{B()},3e3)},B=async()=>{let d=document.getElementById("saveHtml");d.style.display="block";const b=await Te(d);await Ie(b)&&Se(b,s.goods.goodsName||s.goods.title||"")&&setTimeout(()=>{h(),m(!1),r(!1),a("onSuceess")},3e3)};return(d,b)=>{const C=N("van-icon"),V=N("VanButton");return s.show?(o(),n("div",{key:0,class:"popup-overlay",onClick:h},[t("div",{class:"popup-content",onClick:b[0]||(b[0]=q(()=>{},["stop"]))},[t("div",Pt,[t("div",Rt,[t("img",{src:(s.goods.icons||s.goods.mainImageUrls||"").split(",")[0]+"?"+new Date().getTime(),alt:"",crossOrigin:"anonymous"},null,8,jt)]),l(x)?c("",!0):(o(),n("div",Lt,[Nt,t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:h},[g(C,{name:"cross"})])])),t("div",Et,[t("div",Ot,[At,t("div",null,[t("span",Vt,i(l(E)(s.goods.price||0)),1),Ut]),ae(t("div",Ht,[g(we,{goods:e.goods},null,8,["goods"])],512),[[ie,e.goods.deliveryType===l(j).online]])]),t("div",qt,i(s.goods.goodsName||s.goods.title||""),1),t("div",zt,[t("div",Gt,[t("div",Mt,[g(ce,{value:l(p),size:60,level:"H"},null,8,["value"])]),t("div",Yt,[I(i(d.$t("common.new found")),1),Jt,I(i(d.$t("common.share you")),1)])]),Qt])]),l(x)?c("",!0):(o(),n("div",Xt,[g(V,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:y},{default:T(()=>[g(C,{name:"back-top",class:"rotate-180",size:"14"}),t("span",Kt,i(d.$t("common.save img")),1)]),_:1})]))])])])):c("",!0)}}}),bs=k(Zt,[["__scopeId","data-v-0f761592"]]);export{ys as G,xs as S,gs as _,fs as a,vs as b,bs as c,hs as d};
