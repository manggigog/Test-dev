import{_ as D,y as N,r as n,z as E,D as L,F as v,G as c,H as t,O as h,Q as a,K as b,a2 as m,N as R,E as V,l as I,I as S,J as z,P as j}from"./vendor-D6JO6WHW.js";import{R as q,D as A,a as F}from"./RankingTab-D5MxKrXx.js";import{B as M}from"./BackIcon-CPUEW9je.js";import{f as O}from"./ranking-DPmlYDrw.js";import{bq as P}from"./index-Ds2hFbCb.js";import"./calendar-yellow-CXVdbyCS.js";const W={class:"relative"},G={class:"flex flex-col w-full h-auto bg-[#f8f8f8] parent-view"},H={class:"shrink-0 w-full flex-start h-[44px] flex items-center pl-2.5 bg-white"},J={class:"pl-2.5"},K={class:"flex items-center justify-center pt-4"},Q={key:2,class:"w-2.5"},Y={class:"px-2.5"},U={class:"flex bg-[#E6E6E6] items-center justify-between p-2.5 mt-4 text-sm font-semibold text-center opacity-80 text-[#2E2008]/80 rounded-t-xl"},X={class:"w-[120px]"},Z={class:"flex-1"},ee={class:"w-[90px]"},te={class:"bg-white rounded-b-xl"},se={class:"flex items-center justify-center border-b border-[#D9D9D9] text-sm font-normal text-center py-4"},ae={class:"w-[120px]"},oe=["onClick"],ne={class:"w-[90px]"},le=N({setup(ie){const _=I(),s=n(1),f=n({}),r=n(0),w=n(10),y=n(0),i=n([]),g=e=>{f.value={years:e.years,cycle:e.cycle},x()},T=e=>{e&&_.push(`/category?shopId=${e}&deliveryType=1`)},C=e=>{s.value!==+e.value&&(f.value={},s.value=+e.value,s.value==3&&x())},p=n(!1),u=n(!1),$=async()=>{var d;const e=s.value,l=await O({page:r.value,size:w.value,cycleType:s.value,...f.value});if(!l.success||!l.data.list){u.value=!0;return}for(let o=0;o<((d=l.data.list)==null?void 0:d.length);o++)if(e!==s.value)return;y.value=l.total,i.value=r.value===1?l.data.list:i.value.concat(l.data.list),i.value&&i.value.length>=y.value&&(u.value=!0)},k=async()=>{p.value=!0,r.value+=1,await $(),p.value=!1},x=()=>{r.value=0,u.value=!1,i.value=[],k()};return E(()=>_.currentRoute.value.query.cycleType,e=>{s.value!==+e&&(s.value=+e||1)},{immediate:!0,deep:!0}),L(()=>{}),(e,l)=>{const d=V("VanList");return c(),v("div",W,[t("div",G,[t("div",H,[h(M),t("div",J,a(e.$t("ranking.assistRecords")),1)]),t("div",K,[s.value==2?(c(),b(A,{key:0,class:"flex-shrink-0",pageType:"record",onOnConfirm:g})):m("",!0),s.value==1?(c(),b(F,{key:1,class:"flex-shrink-0",pageType:"record",onChangeTime:g})):m("",!0),h(q,{style:{background:"white"},class:"flex-1",onChangeTab:C,isAssist:!0}),s.value!==3?(c(),v("div",Q)):m("",!0)]),t("div",Y,[t("div",U,[t("div",X,a(e.$t("ranking.period")),1),t("div",Z,a(e.$t("ranking.storeName")),1),t("div",ee,a(e.$t("ranking.ticketNum")),1)]),t("div",te,[h(d,{loading:p.value,finished:u.value,onLoad:k,"finished-text":e.$t("common.noMore"),class:"px-2.5 min-h-[40vh] pb-0.5 relative z-10 bg-transparent"},{default:R(()=>[(c(!0),v(S,null,z(i.value,(o,B)=>(c(),v("div",{key:B},[t("div",se,[t("div",ae,a(j(P)(o.years))+"年第"+a(o.weeks)+"周 ",1),t("div",{class:"flex-1 line-clamp-1 text-[#FBA923]",onClick:ce=>T(o.shopId)},a(o.storeName||e.$t("common.migrate")),9,oe),t("div",ne,a(o.ticketNum)+a(e.$t("ranking.ticket")),1)])]))),128))]),_:1},8,["loading","finished","finished-text"])])])])])}}}),he=D(le,[["__scopeId","data-v-8ab92474"]]);export{he as default};
