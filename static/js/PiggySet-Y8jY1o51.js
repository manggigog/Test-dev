import{_ as ne,y as oe,bf as se,r as T,be as V,x as de,D as ie,F as m,G as s,H as t,O as r,Q as i,P as u,E,N as S,K as p,a2 as F,a0 as _,$ as re,T as Y,Y as ce,Z as me}from"./vendor-BUT0HZ5j.js";import{_ as _e}from"./LinkAddress-CM4YYA7z.js";import{p as ye}from"./piggyBank-DIfLFOiI.js";import{b as ve}from"./beiExtRewardContract-fse9Uuj3.js";import{bU as w,a7 as f,b5 as xe,a8 as pe}from"./index-hbwLMIYO.js";const y=A=>(ce("data-v-39a7cda6"),A=A(),me(),A),Fe={class:"w-full h-full container-bg"},we={class:"flex items-center justify-between p-3 mb-2 text-lg text-white relative"},fe={class:"text-xl font-semibold text-[#2E2008]"},be={class:"flex fixed top-3 right-3 z-10"},Me={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},he=y(()=>t("div",{class:"mb-2.5"},"兑换比例数值",-1)),Ee={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},Ae=y(()=>t("div",{class:"mb-2.5"},"当前分红数值",-1)),Re={class:"py-2 mb-2 text-lg font-bold bg-white text-primary"},Be=_("设置"),ge={class:"text-xl font-semibold text-[#2E2008] px-3"},Ce={class:"border border-solid border-gray2 p-3 m-2.5 text-center"},Te=y(()=>t("div",{class:"mb-2.5"},"每日分红数值",-1)),Ve={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},ke={class:"mt-2.5 text-center"},qe=y(()=>t("div",{class:"mb-2.5"},"每月分红数值",-1)),De={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},Se={class:"van-cell van-field"},Ye=y(()=>t("div",{class:"van-cell__title van-field__label"},"下次月分红时间",-1)),Ie={class:"van-field__body"},Qe={key:0,class:"van-field__control"},Ue={key:1,class:"text-[#c8c9cc]"},Ne={class:"text-xs text-gray-300 text-left mt-2.5"},$e=_(" 下次月度分红时间："),je={key:0},ze={key:1},Le={class:"m-2.5 text-center"},Pe=y(()=>t("div",{class:"mb-2.5"},"每季分红数值（MC）",-1)),Oe={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},Ge={class:"mt-2.5 text-center"},Je=y(()=>t("div",{class:"mb-2.5"},"每季分红数值（MAI）",-1)),Ke={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},He={class:"van-cell van-field"},We=y(()=>t("div",{class:"van-cell__title van-field__label"},"下次季分红时间",-1)),Ze={class:"van-field__body"},Xe={key:0,class:"van-field__control"},et={key:1,class:"text-[#c8c9cc]"},tt={class:"text-xs text-gray-300 text-left mt-2.5"},at=_(" 下次季度分红时间："),lt={key:0},ut={key:1},nt={class:"mt-2.5 text-center"},ot=y(()=>t("div",{class:"mb-2.5"},"每年分红数值（MC）",-1)),st={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},dt={class:"mt-2.5 text-center"},it=y(()=>t("div",{class:"mb-2.5"},"每年分红数值（MAI）",-1)),rt={class:"py-2 mb-2 text-lg font-bold bg-white text-primary flex items-center justify-center"},ct={class:"van-cell van-field"},mt=y(()=>t("div",{class:"van-cell__title van-field__label"},"下次年分红时间",-1)),_t={class:"van-field__body"},yt={key:0,class:"van-field__control"},vt={key:1,class:"text-[#c8c9cc]"},xt={class:"text-xs text-gray-300 text-left mt-2.5"},pt=_(" 下次年度年分红时间： "),Ft={key:0},wt={key:1},ft=_("设置"),bt=oe({setup(A){const{today:G,DAY:J,fmRateFees:I,nextFloatAwardAmount:Q,setNextFloatAwardAmount:K}=ye(),{rewardAmountView:H,setDailyRewardAmount:W}=ve(),d=se({rateFees:[0,0],currentFloatAmount:0,nextFloatAmount:null}),c=T({dailyRewardMc:null,monthlyRewardMc:null,quarterlyRewardMc:null,quarterlyRewardMai:null,yearlyRewardMc:null,yearlyRewardMai:null,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null}),a=T({dailyRewardMc:null,monthlyRewardMc:null,quarterlyRewardMc:null,quarterlyRewardMai:null,yearlyRewardMc:null,yearlyRewardMai:null,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null}),[k,R]=V(!1),q=T("nextMonthTime"),B=T(null),D=o=>{q.value=o,a.value[o]?B.value=new Date(a.value[o]*1e3):B.value=new Date,R(!0)},Z=o=>{o&&q.value&&(a.value[q.value]=xe(pe(o))),R(!1)},[X,U]=V(!1),ee=async()=>{U(!0);const o=await K(d.nextFloatAmount);U(!1),o.success&&(d.currentFloatAmount=d.nextFloatAmount,Y.success("设置成功"),d.nextFloatAmount=null,d.currentFloatAmount=+await Q())},[te,N]=V(!1),ae=de(()=>{var o,e,n,b,v,g,C,M,h;return((o=a.value)==null?void 0:o.dailyRewardMc)&&((e=a.value)==null?void 0:e.monthlyRewardMc)&&((n=a.value)==null?void 0:n.nextMonthTime)&&((b=a.value)==null?void 0:b.quarterlyRewardMc)&&((v=a.value)==null?void 0:v.quarterlyRewardMai)&&((g=a.value)==null?void 0:g.nextQuarterTime)&&((C=a.value)==null?void 0:C.yearlyRewardMc)&&((M=a.value)==null?void 0:M.yearlyRewardMai)&&((h=a.value)==null?void 0:h.nextYearTime)}),le=async()=>{var e;N(!0);const o=await W(a.value);if(N(!1),!o.success){Y(((e=o.result)==null?void 0:e.reason.split(":")[1].split(":")[0])||"操作失败");return}Y.success("设置成功"),j()},[x,$]=V(!0),j=async()=>{$(!0);const{success:o,result:e}=await H();if(!o)return;$(!1);const n={dailyRewardMc:0,monthlyRewardMc:0,quarterlyRewardMc:0,quarterlyRewardMai:0,yearlyRewardMc:0,yearlyRewardMai:0,nextMonthTime:null,nextQuarterTime:null,nextYearTime:null};n.dailyRewardMc=+w(e==null?void 0:e.dailyRewardMc),n.monthlyRewardMc=+w(e==null?void 0:e.monthlyRewardMc),n.quarterlyRewardMc=+w(e==null?void 0:e.quarterlyRewardMc),n.quarterlyRewardMai=+w(e==null?void 0:e.quarterlyRewardMai),n.yearlyRewardMc=+w(e==null?void 0:e.yearlyRewardMc),n.yearlyRewardMai=+w(e==null?void 0:e.yearlyRewardMai),n.nextMonthTime=+(e==null?void 0:e.nextMonthTime),n.nextQuarterTime=+(e==null?void 0:e.nextQuarterTime),n.nextYearTime=+(e==null?void 0:e.nextYearTime),c.value=n,a.value=JSON.parse(JSON.stringify(n))},ue=async()=>{const o=+await G(),e=+await J();d.rateFees[0]=+await I(o),d.rateFees[1]=+await I(o-e),d.currentFloatAmount=+await Q(),j()};return ie(()=>{ue()}),(o,e)=>{var M,h,z,L,P,O;const n=E("van-field"),b=E("VanButton"),v=E("VanLoading"),g=E("van-datetime-picker"),C=E("van-popup");return s(),m("div",Fe,[t("div",we,[t("div",fe,i(o.$t("piggy.Lightning Yu’E Bao")),1),t("div",be,[r(_e)])]),t("div",Me,[he,r(n,{modelValue:u(d).rateFees[0],"onUpdate:modelValue":e[0]||(e[0]=l=>u(d).rateFees[0]=l),label:"今日",placeholder:"0",readonly:""},null,8,["modelValue"]),r(n,{modelValue:u(d).rateFees[1],"onUpdate:modelValue":e[1]||(e[1]=l=>u(d).rateFees[1]=l),label:"昨日",placeholder:"0",readonly:""},null,8,["modelValue"])]),t("div",Ee,[Ae,t("div",Re,i(u(d).currentFloatAmount),1),r(n,{modelValue:u(d).nextFloatAmount,"onUpdate:modelValue":e[2]||(e[2]=l=>u(d).nextFloatAmount=l),label:"修改为",placeholder:"请输入"},null,8,["modelValue"]),r(b,{loading:u(X),disabled:u(d).nextFloatAmount<=0,class:"btn-bg rounded-xl w-1/2 font-semibold text-white mt-2.5",onClick:ee},{default:S(()=>[Be]),_:1},8,["loading","disabled"])]),t("div",ge,i(o.$t("ecology.flash Mai bao")),1),t("div",Ce,[Te,t("div",Ve,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((M=c.value)==null?void 0:M.dailyRewardMc)+"MC ",1)]),r(n,{modelValue:a.value.dailyRewardMc,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.dailyRewardMc=l),label:"修改为",placeholder:"请输入",type:"number"},null,8,["modelValue"]),t("div",ke,[qe,t("div",De,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((h=c.value)==null?void 0:h.monthlyRewardMc)+"MC ",1)]),r(n,{modelValue:a.value.monthlyRewardMc,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.monthlyRewardMc=l),label:"修改为",placeholder:"请输入",type:"number"},null,8,["modelValue"]),t("div",Se,[Ye,t("div",{class:"van-cell__value van-field__value",onClick:e[5]||(e[5]=l=>D("nextMonthTime"))},[t("div",Ie,[a.value.nextMonthTime?(s(),m("span",Qe,i(u(f)(a.value.nextMonthTime*1e3)),1)):(s(),m("span",Ue,"请选择"))])])]),t("div",Ne,[$e,c.value.nextMonthTime?(s(),m("span",je,i(u(f)(c.value.nextMonthTime*1e3)),1)):(s(),m("span",ze,"-"))])]),t("div",null,[t("div",Le,[Pe,t("div",Oe,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((z=c.value)==null?void 0:z.quarterlyRewardMc)+"MC ",1)]),r(n,{modelValue:a.value.quarterlyRewardMc,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.quarterlyRewardMc=l),label:"修改为",placeholder:"请输入季度MC分红总量",type:"number"},null,8,["modelValue"])]),t("div",Ge,[Je,t("div",Ke,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((L=c.value)==null?void 0:L.quarterlyRewardMai)+"MAI ",1)]),r(n,{modelValue:a.value.quarterlyRewardMai,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.quarterlyRewardMai=l),label:"修改为",placeholder:"请输入季度MAI分红总量",type:"number"},null,8,["modelValue"]),t("div",He,[We,t("div",{class:"van-cell__value van-field__value",onClick:e[8]||(e[8]=l=>D("nextQuarterTime"))},[t("div",Ze,[a.value.nextQuarterTime?(s(),m("span",Xe,i(u(f)(a.value.nextQuarterTime*1e3)),1)):(s(),m("span",et,"请选择"))])])]),t("div",tt,[at,c.value.nextQuarterTime?(s(),m("span",lt,i(u(f)(c.value.nextQuarterTime*1e3)),1)):(s(),m("span",ut,"-"))])])]),t("div",null,[t("div",nt,[ot,t("div",st,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((P=c.value)==null?void 0:P.yearlyRewardMc)+"MC ",1)]),r(n,{modelValue:a.value.yearlyRewardMc,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.yearlyRewardMc=l),label:"修改为",placeholder:"请输入年度MC分红总量",type:"number"},null,8,["modelValue"])]),t("div",dt,[it,t("div",rt,[u(x)?(s(),p(v,{key:0,size:"18"})):F("",!0),_(" "+i((O=c.value)==null?void 0:O.yearlyRewardMai)+"MAI ",1)]),r(n,{modelValue:a.value.yearlyRewardMai,"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.yearlyRewardMai=l),label:"修改为",placeholder:"请输入年度MAI分红总量",type:"number"},null,8,["modelValue"]),t("div",ct,[mt,t("div",{class:"van-cell__value van-field__value",onClick:e[11]||(e[11]=l=>D("nextYearTime"))},[t("div",_t,[a.value.nextYearTime?(s(),m("span",yt,i(u(f)(a.value.nextYearTime*1e3)),1)):(s(),m("span",vt,"请选择"))])])]),t("div",xt,[pt,c.value.nextYearTime?(s(),m("span",Ft,i(u(f)(c.value.nextYearTime*1e3)),1)):(s(),m("span",wt,"-"))])])]),r(b,{loading:u(te),disabled:!u(ae),class:"btn-bg rounded-xl w-1/2 font-semibold text-white mt-2.5",onClick:le},{default:S(()=>[ft]),_:1},8,["loading","disabled"])]),r(C,{show:u(k),"onUpdate:show":e[14]||(e[14]=l=>re(k)?k.value=l:null),position:"bottom",round:"",style:{height:"50%"},onClickOverlay:e[15]||(e[15]=l=>u(R)(!1)),teleport:"body"},{default:S(()=>[r(g,{modelValue:B.value,"onUpdate:modelValue":e[12]||(e[12]=l=>B.value=l),type:"date",title:"选择分红时间",onCancel:e[13]||(e[13]=l=>u(R)(!1)),onConfirm:Z},null,8,["modelValue"])]),_:1},8,["show"])])}}}),Bt=ne(bt,[["__scopeId","data-v-39a7cda6"]]);export{Bt as default};
