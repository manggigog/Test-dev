import{b,j as g}from"./index-7OiUoGXy.js";import{z as B,r as i,y as d,D as h,E as w,F as C,Z as A,U as N,O as s,H as c,$,G as m,Q as p,a1 as x,N as S}from"./vendor-Dr_RpJ_Y.js";const V={key:0},z={key:1},_=B({props:{contract:null,token:null,fallBack:null,loading:{type:Boolean},symbol:null,approveAmount:null,disabled:{type:Boolean},classes:null},setup(a){const e=a,{checkLoginAuth:v}=b(),t=i(!1),n=i(0),o=d(()=>Number(n.value)>0&&Number(n.value)>=Number(e.approveAmount??0)),r=d(()=>g(e.token)),l=async()=>{t.value=!0,n.value=+await(await r.value.allowance(e.contract)).result,t.value=!1},k=async()=>{v(!0)&&(t.value=!0,await r.value.approve(e.contract),await l())},f=()=>{o.value?e==null||e.fallBack():k()};return h(()=>e.token,()=>{l()}),w(()=>{l()}),(u,D)=>{const y=C("VanButton");return s(o)?N("",!0):(c(),A(y,{key:0,loading:a.loading||t.value,disabled:s(o)&&a.disabled,class:S(`${a.classes??"text-red-600 px-4 py-2 bg-gray3"}`),onClick:f},{default:$(()=>[s(o)?(c(),m("div",z,[x(u.$slots,"default")])):(c(),m("div",V,p(u.$t("common.approve"))+p(a.symbol??null),1))]),_:3},8,["loading","disabled","class"]))}}});export{_};
