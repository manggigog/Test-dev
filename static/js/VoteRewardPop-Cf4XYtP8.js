import{_ as F,y as B,U as V,r as p,z as k,E as S,K as A,G as m,N as E,H as a,O as I,F as N,a2 as P,X as v,P as h,a4 as $,$ as b,a0 as f,Y as D,Z as O}from"./vendor-CjApaIpB.js";import{_ as R}from"./Lottie-ni5dUCha.js";import{bq as w}from"./index-B3VH42pz.js";const z=o=>(D("data-v-397785c2"),o=o(),O(),o),L={key:0,class:"center-card text-b1 font-semibold"},T=z(()=>a("div",{class:"container relative"},[a("div",{class:"center-text",id:"original"},[a("div",null,"完成充电投票"),a("div",null,[f("获得 "),a("span",{class:"text-newOrigin"},"1"),f(" 张抵用券")])])],-1)),q=[T],H=B({props:{show:{type:Boolean},shopId:null,teleport:null},emits:["close"],setup(o,{emit:y}){const{show:r,teleport:M}=o,{height:c}=V(),n=p(null),d=p(!1),u=async()=>{d.value=!0,await w(500);const t=document.getElementById("original").cloneNode(!0);t.id="cloned-animation",t.classList.add("animated-div"),document.querySelector(".container").appendChild(t)},l=()=>{var e,t;y("close"),(e=n.value)!=null&&e.lottieAnimation&&((t=n.value)==null||t.lottieAnimation.destroy())},x=38;function i(e){var t;console.log("当前时间：",e.currentTime),Math.round(e.currentTime)===x&&(u(),(t=n.value)==null||t.lottieAnimation.removeEventListener("enterFrame",i))}const g=async()=>{var e;try{(e=n.value)==null||e.lottieAnimation.addEventListener("enterFrame",i)}catch{await w(1300),u()}};return k(()=>{var e;return(e=n.value)==null?void 0:e.lottieAnimation},e=>{e&&g()}),(e,t)=>{const _=S("VanPopup");return m(),A(_,{show:o.show,"onUpdate:show":t[1]||(t[1]=s=>b(r)?r.value=s:null),teleport:o.teleport,onClickOverlay:$(l,["stop"]),onClose:l,round:"",class:"bg-transparent position-center",sty:"",style:{width:"100%","max-width":"375px"}},{default:E(()=>[a("div",{class:"w-full overflow-hidden relative",style:v({height:`${h(c)}px`}),onClick:l},[I(R,{path:"lottie/expand.json",renderer:"svg",loop:!1,class:"w-full",style:v({height:`${h(c)}px`}),ref:(s,C)=>{C.lottieRef=s,n.value=s},onEnterFrame:t[0]||(t[0]=s=>i())},null,8,["style"]),d.value?(m(),N("div",L,q)):P("",!0)],4)]),_:1},8,["show","teleport","onClickOverlay"])}}}),K=F(H,[["__scopeId","data-v-397785c2"]]);export{K as V};
