import{_ as be}from"./level-BMr8jGFx.js";import{f as we,b as ye,e as te,V as _,_ as ae,u as ie,ah as X,t as re,ai as ke,R as Ce,r as _e,aj as $e,ak as Oe,S as ne}from"./index-koYZVdtr.js";import{_ as W,y as j,r as F,D as le,F as l,G as a,H as s,a2 as g,Q as u,P as n,R as q,I as E,J as D,Y as de,Z as ce,w as ue,a1 as pe,x as T,a4 as Ne,a0 as I,E as oe,K as G,N as A,O as P,bc as ee,l as fe,X as Se}from"./vendor-D6JO6WHW.js";import{a as K}from"./offlineGoods-Biq4pIIG.js";import{T as k,P as U}from"./profileEnum-CXsMKuND.js";import{U as Te}from"./UpgradeStorePop-CBbh3SN_.js";import{q as Fe,d as Pe,e as Ie}from"./order-BuzAm67M.js";const Le="/Test-dev/static/images/avatarRing2-BMN147Et.png",he=e=>(de("data-v-050ccd17"),e=e(),ce(),e),Ee={class:"relative px-[12px] pt-[24px] overflow-hidden"},Ae={class:"flex items-center justify-between"},Re={class:"relative flex items-center sm-flex"},Be=he(()=>s("img",{src:Le,class:"w-[44px] h-[44px] mr-[8px]"},null,-1)),Me={class:"mb-[4px] font-size-[14px] font-semibold font-Puhui leading-[16.5px]"},qe=he(()=>s("img",{class:"w-[16px] h-[16px]",src:be},null,-1)),De={class:"ml-[2px] text-[12px] font-normal font-Audiowide leading-[16px]"},je={key:0,class:"shrink-0 w-fit min-w-[135px] h-[32px] p-[0.125rem] bg-[#FFF] rounded-[32px] flex justify-between items-center"},He={class:"w-full h-full relative"},Ve={class:"absolute w-full h-full flex items-center justify-center left-0 top-0"},Ue=["onClick"],We=j({props:{info:null,active:null,tabList:{default:[]}},emits:["changeTab","setLevelShow","showMallOverlay"],setup(e,{expose:v,emit:i}){const{memberLevels:t}=we(),x=F(0),w=async()=>{x.value=await t()};return v({memberLevel:x}),le(()=>{w()}),($,O)=>(a(),l("div",Ee,[s("div",Ae,[s("div",Re,[Be,s("div",null,[s("div",Me,u(n(ye)(e.info.address||"","...",5,4)),1),s("div",{class:"w-fit bg-white rounded-[10px] px-[5px] py-[2px] flex items-center relative",onClick:O[0]||(O[0]=y=>i("setLevelShow"))},[qe,s("span",De,"V"+u(x.value||0),1)])])]),e.tabList.length?(a(),l("div",je,[s("div",He,[s("div",{class:q(["absolute w-[50%] h-full bg-[#2E2008] rounded-[48px] left-0 transition-all duration-300",`w-[${100/e.tabList.length}%] left-${e.tabList.findIndex(y=>y.id===e.active)||0}/${e.tabList.length}`])},null,2),s("div",Ve,[(a(!0),l(E,null,D(e.tabList,y=>(a(),l("div",{class:"w-[50%] h-full flex items-center justify-center overflow-hidden",onClick:m=>i("changeTab",y),key:y.id},[s("span",{class:q(["text-[14px] font-Puhui leading-[20px] text-center line-clamp-1 transition-all duration-300",[e.active===y.id?"text-[#FFF] font-semibold":"text-[#999] font-normal"]])},u(y.name),3)],8,Ue))),128))])])])):g("",!0)])]))}}),ko=W(We,[["__scopeId","data-v-050ccd17"]]),Y="/Test-dev/static/images/chamfer-yZWAckQP.svg",ze="/Test-dev/static/images/arrow-right-DzQRo7f8.svg",J=e=>(de("data-v-aa4531e8"),e=e(),ce(),e),Ge={key:0,class:"mb-4 h-fit bg-[rgba(255,255,255,0.5)] border-[1px] border-[#FFFFFF] outline-solid rounded-[12px] text-sm font-normal"},Je={class:"flex"},Qe=["onClick"],Ke={class:"relative"},Xe={key:0,class:"absolute top-[-1px] right-0 translate-x-1/2 w-[8px] h-[8px] bg-[#F44] rounded-[8px] border-[1px] border-solid border-white box-content"},Ye=J(()=>s("img",{class:"absolute left-0 -bottom-[8px] w-[8px] h-[8px] transform rotate-90",src:Y,alt:""},null,-1)),Ze=J(()=>s("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Y,alt:""},null,-1)),et=J(()=>s("img",{class:"absolute -left-[8px] bottom-0 w-[8px] h-[8px] transform -rotate-90",src:Y,alt:""},null,-1)),tt=J(()=>s("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Y,alt:""},null,-1)),ot={class:"pr-[11px] flex items-center"},st={class:"text-[#585654] text-[14px] font-normal font-Puhui leading-[20px]"},nt=J(()=>s("img",{class:"ml-[2px] w-[12px] h-[12px]",src:ze,alt:""},null,-1)),at={key:0,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},it={class:"flex items-center font-normal text-center text-default"},rt=["onClick"],lt={class:"relative"},dt=["src"],ct={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},ut={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},pt={class:"flex items-center font-normal text-center text-default"},ft=["onClick"],ht={class:"relative"},xt=["src"],mt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},gt={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},vt={key:1,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},bt={class:"h-[48px] flex items-center font-normal text-center text-default"},wt=["onClick"],yt={class:"relative"},kt=["src"],Ct={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},_t={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},$t={class:"h-[48px] flex items-center font-normal text-center text-default"},Ot=["onClick"],Nt={class:"relative"},St=["src"],Tt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},Ft={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},Pt=j({props:{activeTab:null,orderCount:null,offlineOrderCount:null,orderNumber:null,serviceNumber:null,isClerk:{type:Boolean},Permissions:null},emits:["handleTo","handleReplace","updateOrderData"],setup(e,{emit:v}){const i=e,{t}=ue(),x=pe();te();const w=r=>r===0?0:r>99?"99+":r,$=T(()=>!!(!i.isClerk||i.isClerk&&i.Permissions.findIndex(r=>r==="allOrder")>-1)),O=T(()=>!!(!i.isClerk||!i.isClerk||i.isClerk&&i.Permissions.findIndex(r=>r==="offlineOrder")>-1)),y=T(()=>{let r=[{id:k.ONLINE,name:t("user.online")},{id:k.OFFLINE,name:t("user.offline")}],f=[];return $.value&&f.push(r[0]),O.value&&f.push(r[1]),f}),m=T(()=>{var r,f;return((r=x.query)==null?void 0:r.tab)===k.ONLINE&&$.value?k.ONLINE:((f=x.query)==null?void 0:f.tab)===k.OFFLINE&&O.value?k.OFFLINE:y.value[0].id}),B=T(()=>{var r,f,o,S,H;return[{id:"0",name:t("order.waitPay"),badge:(r=i.orderCount)==null?void 0:r.toBePaid,img:_("order/icon-paid.svg"),clickFun:()=>p("/buyerOrderList?active=0")},{id:"1",name:t("order.wait"),badge:(f=i.orderCount)==null?void 0:f.toBeDelivered,img:_("order/icon-0.svg"),clickFun:()=>p("/buyerOrderList?active=1")},{id:"2",name:t("order.waitRceived"),badge:(o=i.orderCount)==null?void 0:o.waitingForReceipt,img:_("order/icon-1.svg"),clickFun:()=>p("/buyerOrderList?active=2")},{id:"comment",name:t("evaluate.Be evaluated"),badge:(S=i.orderCount)==null?void 0:S.beEvaluatedCount,img:_("order/icon-3.svg"),clickFun:()=>p("/evaluate-my")},{id:"refund",name:t("order.Refund/After-sale"),badge:(H=i.orderCount)==null?void 0:H.afterSales,img:_("order/icon-4.svg"),clickFun:()=>p("/refundList")}]}),L=T(()=>{var r,f,o;return[{id:"11",name:t("order.To be confirmed"),badge:(r=i.offlineOrderCount)==null?void 0:r.daiqueren,img:_("order/icon-confirm.svg"),clickFun:()=>p("/offlineConsumerorders?status="+K.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(f=i.offlineOrderCount)==null?void 0:f.yiquxiao,img:_("order/icon-canceled.svg"),clickFun:()=>p("/offlineConsumerorders?status="+K.CANCELLED)},{id:"13",name:t("evaluate.Be evaluated"),badge:(o=i.offlineOrderCount)==null?void 0:o.waitCommentCount,img:_("order/icon-comment.svg"),clickFun:()=>p("/offlineEvaluate?status=0")}]}),R=T(()=>{var r,f,o,S;return[{id:"0",name:t("order.waitPay"),badge:(r=i.orderCount)==null?void 0:r.toBePaid,img:_("order/icon-paid.svg"),clickFun:()=>p("/sellerOrderList?active=0")},{id:"1",name:t("order.wait"),badge:(f=i.orderCount)==null?void 0:f.toBeDelivered,img:_("order/icon-0.svg"),clickFun:()=>p("/sellerOrderList?active=1")},{id:"2",name:t("order.already"),badge:(o=i.orderCount)==null?void 0:o.waitingForReceipt,img:_("order/icon-0-merchant.svg"),clickFun:()=>p("/sellerOrderList?active=2")},{id:"refund",name:t("order.Refund/After-sale"),badge:(S=i.orderCount)==null?void 0:S.afterSales,img:_("order/icon-4.svg"),clickFun:()=>p("/sellerOrderList?type=2")}]}),h=T(()=>{var r,f;return[{id:"11",name:t("order.wait"),badge:(r=i.offlineOrderCount)==null?void 0:r.waitShipCount,img:_("order/icon-0.svg"),clickFun:()=>p("/offlineMerchantOrders?status="+K.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(f=i.offlineOrderCount)==null?void 0:f.yiquxiao,img:_("order/icon-canceled.svg"),clickFun:()=>p("/offlineMerchantOrders?status="+K.CANCELLED)}]}),c=r=>{var o,S;if(r.id===m.value)return;let f={};(o=x.query)!=null&&o.path&&Reflect.set(f,"path",(S=x.query)==null?void 0:S.path),Reflect.set(f,"tab",r.id),v("updateOrderData",r.id),i.isClerk?M("/clerk/index",f):M("/profile",f)},N=()=>{m.value===k.ONLINE?i.activeTab===U.CONSUMER?p("/buyerOrderList?active=4"):p("/sellerOrderList?active=4"):i.activeTab===U.CONSUMER?p("/offlineConsumerorders"):p("/offlineMerchantOrders")},p=r=>{v("handleTo",r)},M=(r,f)=>{v("handleReplace",r,f)};return(r,f)=>n($)||n(O)?(a(),l("div",Ge,[s("div",{class:"flex justify-between items-center",onClick:N},[s("div",Je,[(a(!0),l(E,null,D(n(y),(o,S)=>(a(),l("div",{key:o.id,class:q(["relative h-[37px] px-[12px] rounded-[12px_12px_0_0] flex justify-center items-center font-Puhui",n(m)===o.id?"tab-active":"tab-normal"]),onClick:Ne(H=>c(o),["stop"])},[s("div",Ke,[I(u(o.name),1),e.activeTab===n(U).MERCHANT&&(o.id===n(k).ONLINE&&e.orderNumber>0||o.id===n(k).OFFLINE&&e.serviceNumber>0)?(a(),l("div",Xe)):g("",!0)]),S===0&&n(m)===o.id?(a(),l(E,{key:0},[Ye,Ze],64)):g("",!0),S>0&&n(m)===o.id?(a(),l(E,{key:1},[et,tt],64)):g("",!0)],10,Qe))),128))]),s("div",ot,[s("span",st,u(r.$t("common.all")+(n(m)===n(k).ONLINE?r.$t("user.online"):r.$t("user.offline"))),1),nt])]),e.activeTab===n(U).CONSUMER?(a(),l("div",at,[s("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":n(m)===n(k).ONLINE,"online-out-offline-in":n(m)===n(k).OFFLINE}])},[s("div",it,[(a(!0),l(E,null,D(n(B),o=>(a(),l("div",{class:"w-[20%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[s("div",lt,[s("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,dt),+o.badge>0?(a(),l("div",ct,u(w(o.badge)),1)):g("",!0)]),s("div",ut,u(o.name),1)],8,rt))),128))])],2),s("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-out-offline-in":n(m)===n(k).OFFLINE,"online-in-offline-out":n(m)===n(k).ONLINE}])},[s("div",pt,[(a(!0),l(E,null,D(n(L),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[s("div",ht,[s("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,xt),+o.badge>0?(a(),l("div",mt,u(w(o.badge)),1)):g("",!0)]),s("div",gt,u(o.name),1)],8,ft))),128))])],2)])):g("",!0),e.activeTab===n(U).MERCHANT?(a(),l("div",vt,[s("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":n(m)===n(k).ONLINE,"online-out-offline-in":n(m)===n(k).OFFLINE}])},[s("div",bt,[(a(!0),l(E,null,D(n(R),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[s("div",yt,[s("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,kt),+o.badge>0?(a(),l("div",Ct,u(w(o.badge)),1)):g("",!0)]),s("div",_t,u(o.name),1)],8,wt))),128))])],2),s("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":n(m)===n(k).ONLINE,"online-out-offline-in":n(m)===n(k).OFFLINE}])},[s("div",$t,[(a(!0),l(E,null,D(n(h),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[s("div",Nt,[s("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,St),+o.badge>0?(a(),l("div",Tt,u(w(o.badge)),1)):g("",!0)]),s("div",Ft,u(o.name),1)],8,Ot))),128))])],2)])):g("",!0)])):g("",!0)}}),It=W(Pt,[["__scopeId","data-v-aa4531e8"]]),Lt="/Test-dev/static/images/shopApply-DhWChvzV.png",Et="/Test-dev/static/images/shopAudit-DsJZJKRT.png",At="/Test-dev/static/images/shopBlack-DqRN7Sls.png",Rt={class:"py-8 text-base text-center text-black"},Bt={class:"flex"},Mt=j({props:{show:{type:Boolean},loading:{type:Boolean}},emits:["close","confirm"],setup(e,{emit:v}){return(i,t)=>{const x=oe("van-button");return a(),G(ae,{width:"90%",show:e.show,name:i.$t("common.tip"),teleport:"body",onClose:t[2]||(t[2]=()=>{v("close")})},{default:A(()=>[s("div",Rt,u(i.$t("profile.need to re-guarantee")),1),s("div",Bt,[P(x,{class:"plain-btn w-1/2 mx-2.5 text-[#FEA021] font-semibold",onClick:t[0]||(t[0]=()=>{v("close")})},{default:A(()=>[I(u(i.$t("common.cancel")),1)]),_:1}),P(x,{loading:e.loading,class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:t[1]||(t[1]=w=>v("confirm"))},{default:A(()=>[I(u(i.$t("profile.Withdraw modification")),1)]),_:1},8,["loading"])])]),_:1},8,["show","name"])}}}),qt=W(Mt,[["__scopeId","data-v-8d0707de"]]),Dt={key:0,class:"py-10 text-center"},jt={key:0,src:Lt,class:"w-[150px] mx-auto"},Ht={key:1,src:Et,class:"w-[150px] mx-auto"},Vt={key:2,src:At,class:"w-[200px] mx-auto"},Ut={class:"px-8 mt-4 leading-6 mb-14"},Wt={key:0},zt={key:1},Gt={key:2},Jt={key:3},Qt={key:4},Kt={key:3,class:"flex items-center justify-center gap-8 px-4"},Xt=j({props:{status:null},emits:["handleTo","init"],setup(e,{emit:v}){const i=e,{getCurrentStoreId:t,getCurrentAccount:x}=ie(),w=()=>{+i.status==4?v("handleTo","/concat"):v("handleTo","/editShopInfo")},$=()=>{re("/guarantee-progress")},[O,y]=ee(!1),m=F(!1),B=async()=>{var c;m.value=!0;const{success:h}=await ke({shopId:(c=await t())==null?void 0:c.id});m.value=!1,h&&(y(!1),v("init"))},L=F(null),R=T(()=>(console.log(L.value,x()),!L.value||!x()?!1:X(L.value)===X(x())));return le(async()=>{var h;L.value=(h=await t())==null?void 0:h.merchant}),(h,c)=>{const N=oe("VanButton");return e.status!==-2&&e.status!==1?(a(),l("div",Dt,[e.status===-1||e.status===2||e.status===3?(a(),l("img",jt)):g("",!0),e.status===0||e.status===10?(a(),l("img",Ht)):g("",!0),e.status===4?(a(),l("img",Vt)):g("",!0),s("div",Ut,[e.status===2?(a(),l("span",Wt,u(h.$t("shop.failShop")),1)):g("",!0),e.status===-1||e.status===3?(a(),l("span",zt,u(h.$t("shop.noShop")),1)):g("",!0),e.status===0?(a(),l("span",Gt,u(h.$t("profile.Waiting for confirmation from the guarantor")),1)):g("",!0),e.status===10?(a(),l("span",Jt,u(h.$t("profile.edit the store information again")),1)):g("",!0),e.status===4?(a(),l("div",Qt,u(h.$t("shop.balckStatus")),1)):g("",!0)]),e.status===0?(a(),l("div",Kt,[n(R)?(a(),G(N,{key:0,class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:c[0]||(c[0]=p=>n(y)(!0))},{default:A(()=>[I(u(h.$t("profile.Withdraw modification")),1)]),_:1})):g("",!0),P(N,{class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:$},{default:A(()=>[I(u(h.$t("profile.View Progress")),1)]),_:1})])):e.status===10?(a(),G(N,{key:4,class:"h-10 text-white btn-orange btn-shadow w-44",onClick:c[1]||(c[1]=p=>v("handleTo","/editShopInfo"))},{default:A(()=>[I(u(h.$t("shop.modify")),1)]),_:1})):(a(),G(N,{key:5,class:"h-10 mt-2 text-white btn-orange btn-shadow w-44",onClick:w},{default:A(()=>[I(u(e.status==4?h.$t("profile.Feedback"):h.$t("shop.applyShop")),1)]),_:1})),P(qt,{loading:m.value,show:n(O),onClose:c[2]||(c[2]=p=>n(y)(!1)),onConfirm:B},null,8,["loading","show"])])):g("",!0)}}}),Yt=W(Xt,[["__scopeId","data-v-921bb4f0"]]);var z=(e=>(e[e.INTERNL=0]="INTERNL",e[e.EXTERNAL=1]="EXTERNAL",e[e.OPTIONS=2]="OPTIONS",e[e.LP=3]="LP",e))(z||{});const Zt={key:0,class:"w-full h-fit py-[16px] px-[12px] bg-white rounded-[12px] flex flex-wrap font-Puhui"},eo=["onClick"],to={class:"relative"},oo=["src"],so={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},no={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px] text-center"},ao=j({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]}},emits:["handleClose"],setup(e,{emit:v}){var h;const i=e,{t}=ue(),{accountStore:x,clerkStore:w}=te(),$=F(""),O=F("");$.value=x.account,O.value=((h=x.store)==null?void 0:h.nickname)||"";const y=fe(),m=T(()=>{const c=[{name:t("profile.goodsManagement"),icon:"goods",key:"goods",to:"/shopGoods"},{name:t("profile.service"),icon:"service",key:"service",to:"/offlineGoods"},{name:t("profile.category"),icon:"category",key:"category",to:"/shopCategory"},{name:t("shop.shippingTemplate.listTitle"),icon:"shippingTemplate",key:"shippingTemplate",to:"/shippingTemplate"},{name:t("profile.sale"),icon:"sale",key:"sale",to:"/shoppingCenter"},{name:t("profile.onesale order"),icon:"falsh_sale",key:"saleOrder",to:"/sellerOneSaleOrder"},{name:t("profile.shopInfo"),icon:"shop",key:"shop",to:"/editShopInfo"},{name:t("home.receive"),icon:"cashierCollect",key:"cashierCollect",to:w.isClerk?`/collect?from=clerk&role=cashier&caddr=${$.value}&cnickname=${O.value}`:"/collect"},{name:t("profile.fund"),icon:"fund",key:"fund",to:"/sellerBill"},{name:t("storeClerk.Clerk Management"),icon:"store-clerk",key:"clerk",to:"/clerk/manage"},{name:t("credit.credit"),icon:"credit-pledge",key:"creditPledge",to:"/creditPledge",type:z.LP},{name:t("profile.delivery management"),icon:"encrypted-delivery",key:"encrypted",to:"/encryption?type=1"},{name:t("profile.close"),icon:"closeShop",key:"close",to:"",type:z.OPTIONS}];return B.value===1&&c.splice(9,0,{name:t("profile.Boutique"),icon:"boutique",to:"/boutiqueShopApply",key:"boutique"}),i.isClerk?c.filter(N=>i.Permissions.findIndex(p=>p===N.key)!==-1):c}),B=T(()=>{var c;return(c=x.store)==null?void 0:c.type}),L=c=>{c.type===z.LP?re(c.to):(c.key==="goods"&&localStorage.removeItem("shopGoods_scrollTop"),y.push(c.to))},R=c=>{if(c.type!==z.OPTIONS)L(c);else switch(c.key){case"close":v("handleClose")}};return(c,N)=>n(m).length?(a(),l("div",Zt,[(a(!0),l(E,null,D(n(m),(p,M)=>(a(),l("div",{key:M,class:"w-[25%] flex flex-col items-center",style:Se(M<Math.floor((n(m).length-1)/4)*4?"margin-bottom: 16px":""),onClick:r=>R(p)},[s("div",to,[s("img",{class:"w-[24px] h-[24px]",src:n(_)(`profile2/merchantOption/${p.icon}.svg`),alt:""},null,8,oo),p.key==="creditPledge"?(a(),l("div",so," NEW ")):g("",!0)]),s("div",no,u(p.name),1)],12,eo))),128))])):g("",!0)}}),io={class:"p-[4px]"},ro={class:"pb-6 text-[#2E2008] text-[14px] font-semibold text-center"},lo={class:"font-semibold"},co={class:"w-full flex items-center gap-[12px]"},uo=j({props:{show:{type:Boolean},shopName:null},emits:["close","confirm"],setup(e,{emit:v}){const i=()=>{v("confirm"),v("close")};return(t,x)=>{const w=oe("van-button");return a(),G(ae,{width:"90%",show:e.show,noClose:"",onClose:x[1]||(x[1]=()=>{v("close")})},{default:A(()=>[s("div",io,[s("div",ro,[I(u(t.$t("merchant.closeTip1"))+" ",1),s("span",lo,u(e.shopName??""),1),I(" "+u(t.$t("merchant.closeTip2")),1)]),s("div",co,[P(w,{class:"w-1/2 h-[46px] border-[1px] border-[#D9D9D9] border-solid rounded-[100px] text-[#2E2008] text-[16px] font-Puhui font-normal leading-[46px]",onClick:x[0]||(x[0]=()=>{v("close")})},{default:A(()=>[I(u(t.$t("common.cancel")),1)]),_:1}),P(w,{class:"w-1/2 h-[46px] bg-[#F44] border-none rounded-[100px] text-white text-[16px] font-Puhui font-semibold leading-[46px]",onClick:i},{default:A(()=>[I(u(t.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])}}}),po=W(uo,[["__scopeId","data-v-46305877"]]),fo={key:0},ho=j({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]}},emits:["handleTo","handleReplace","handleMenu"],setup(e,{expose:v,emit:i}){const{getCurrentStoreId:t}=ie(),{generateKey:x}=Ce(),{loadingToggle:w}=_e(),{accountStore:$}=te(),O=pe(),y=fe(),[m,B]=ee(!1),[L,R]=ee(!1),h=F(-1),c=F(""),N=F({type:0,upgradableType:0}),p=async()=>{var C,V;const b=y.currentRoute.value.path,d=await ne((C=$.store)==null?void 0:C.merchant);if(d.success)if(d.data){if(h.value=d.data.status,c.value=d.data.storeName,h.value===1){X(d.data.merchant)===X($.account)&&(d.data.upgradableType&&d.data.upgradableType<d.data.type||d.data.type===0&&d.data.upgradableType>0)&&(N.value.type=d.data.type,N.value.upgradableType=d.data.upgradableType,R(!0));const ve=((V=O.query)==null?void 0:V.tab)||"online";se(ve),x("merchant",b)}}else h.value=-1,c.value=""},M=async()=>{w(!0,1);const b=await $e(3);w(!1),b.success&&Q()},r=F({}),f=async()=>{var d;const b=await Fe({type:1,storeId:(d=await t())==null?void 0:d.id});b.success&&(r.value=b.data)},o=F({}),S=async()=>{var d;const b=await Ie({shopId:(d=await t())==null?void 0:d.id});b.success&&(o.value=b.data)},H=F(0),xe=T(()=>{const b=o.value;return!b||!Object.values(b).some(C=>!!C)?0:[b.waitShipCount].reduce((C,V)=>C+V)});async function me(){var d;if(h.value!==1)return;const b=await Pe({shopId:(d=await t())==null?void 0:d.id});b.success&&(H.value=b.data||0)}const Z=F(!1),ge=async b=>{Z.value=!0;const{success:d}=await Oe(b);if(Z.value=!1,d){const C=await ne($.account);await $.changeStore(C.data),Q()}R(!1)},se=b=>{b==="online"&&f(),me(),S()},Q=async()=>{console.log("merchant init"),w(!0,1),await p(),w(!1)};return v({init:Q}),(b,d)=>(a(),l(E,null,[h.value==1?(a(),l("div",fo,[P(It,{activeTab:n(U).MERCHANT,Permissions:e.Permissions,isClerk:e.isClerk,orderCount:r.value,offlineOrderCount:o.value,orderNumber:H.value,serviceNumber:n(xe),onHandleTo:d[0]||(d[0]=C=>i("handleTo",C)),onHandleReplace:d[1]||(d[1]=(C,V)=>i("handleReplace",C,V)),onUpdateOrderData:se},null,8,["activeTab","Permissions","isClerk","orderCount","offlineOrderCount","orderNumber","serviceNumber"]),P(ao,{Permissions:e.Permissions,isClerk:e.isClerk,onHandleClose:d[2]||(d[2]=C=>n(B)(!0))},null,8,["Permissions","isClerk"])])):g("",!0),P(Yt,{status:h.value,onHandleTo:d[3]||(d[3]=C=>i("handleTo",C)),onInit:Q},null,8,["status"]),P(po,{show:n(m),shopName:c.value,onClose:d[4]||(d[4]=()=>{n(B)(!1)}),onConfirm:M},null,8,["show","shopName"]),P(Te,{upgradeInfo:N.value,show:n(L),onClose:d[5]||(d[5]=C=>n(R)(!1)),onConfirm:ge,loading:Z.value},null,8,["upgradeInfo","show","loading"])],64))}}),Co=W(ho,[["__scopeId","data-v-7b9d2078"]]);export{It as M,z as U,ko as a,Co as b};
