import{_ as xt}from"./MCOIN-Bodfn-v1.js";import{_ as yt}from"./FMCP-f3k58DsE.js";import{_ as nt,z as lt,R as Et,r as _,bp as Rt,a2 as M,y as wt,bl as bt,E as $t,ab as Vt,F as B,Z as p,H as a,$ as U,I as t,U as k,G as c,V as at,O as e,a4 as F,Q as o,J as Lt,a3 as kt,a0 as St,X as mt,Y as pt,a1 as Dt,x as Nt,P,bo as Pt,bV as Ut,bX as zt,bC as Tt,bL as Wt,ad as jt,N as Mt,q as Ot,T as Gt,B as ot,bY as ft}from"./vendor-Dr_RpJ_Y.js";import{ci as Xt,bN as Ht,g as _t,cj as qt,e as h,ck as Yt,b as Jt,r as Zt,G as ut,k as Qt,d as ht}from"./index-LRhcxFAI.js";import{_ as Kt}from"./close-BkqxFSX4.js";import{P as Q}from"./flashSale-DDyqLyYN.js";import{_ as te}from"./EmptyTipsPop-DFfFg0cQ.js";import{p as ee}from"./piggyBank-CpEOuPx1.js";import{q as se}from"./piggyBank-tANrFqTw.js";import{B as ae}from"./BackIcon-CDrGaEPo.js";const oe=""+new URL("../images/piggy-bank-bg-B2ZN3re_.png",import.meta.url).href,ne=""+new URL("../images/arrow-forward-C8bwXPR5.svg",import.meta.url).href,le=""+new URL("../images/X-GcBn2IkE.svg",import.meta.url).href,ie=""+new URL("../images/expand-BxpD5R2x.webp",import.meta.url).href,K=l=>(mt("data-v-5436a953"),l=l(),pt(),l),re={key:0,class:"success-text"},ce=K(()=>t("div",{class:"text-b6 text-xl mb-3"},"恭喜获得",-1)),de={class:"text-2xl text-b6"},ue={class:"text-[#FEA527] font-bold"},me=F("抵用券 "),pe=K(()=>t("div",{class:"text-b6 text-xl mb-3"},"开始膨胀",-1)),ge={class:"text-[#F15965] h-[52px] flex items-center justify-center gap-x-1"},ve=K(()=>t("span",{class:"text-[26px] font-black leading-[52px]"},"X",-1)),fe={class:"text-[44px] font-normal leading-[52px] font-BebasNeue"},_e=["src"],he={key:1,class:"center-card text-b1"},xe=K(()=>t("div",{class:"text-center text-xs text-[#FE7E66]"},"膨胀倍数",-1)),ye={class:"container relative"},we={id:"original",class:"center-text text-[#F15965] h-[52px] pt-1 flex items-center justify-center gap-x-1"},be=K(()=>t("span",{class:"text-[24px] font-[900]"},[t("img",{src:le,class:"h-5 w-auto"})],-1)),$e={class:"text-[40px] font-BebasNeue leading-[52px]"},ke=F(" 确定 "),Se=lt({props:{teleport:null},emits:["success"],setup(l,{expose:z,emit:A}){const{teleport:E}=l,{height:I}=Et(),g=_(null),{top:x,height:O}=Rt(g),T=_(null),[W,v]=M(!1),[d,j]=M(!1),[G,R]=M(!1),y=wt(()=>I.value>811?1:811/I.value),i=bt({grow:null,amount:null,duration:100,number:0,animationStyle:"",intervalId:null}),f=async()=>{R(!0),T.value=`${ie}?t=${Date.now()}`,await Xt(T.value),R(!1)};function X(V){return Math.random()*(V-1)+1}function tt(){i.number=X(2),i.grow?i.number=i.grow:setTimeout(()=>{tt(),S()},i.duration)}function et(){i.intervalId=setInterval(tt,i.duration)}function S(){i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null)}const it=async()=>{j(!0),await qt(500);const w=document.getElementById("original").cloneNode(!0);w.id="cloned-animation",w.classList.add("animated-div"),document.querySelector(".container").appendChild(w)},H=async V=>{if(V){i.grow=null,i.amount=null,i.number=1;try{v(!0),et();const w=await V.wait(),b=Ht(w.logs,_t.voucherGrow,_t.FMCP);i.grow=b==null?void 0:b.grow,i.amount=b==null?void 0:b.amount,S(),A("success"),it()}catch{v(!1)}}},m=()=>{v(!1),setTimeout(()=>{j(!1),f()},1e3),S()};return $t(()=>{f()}),Vt(()=>{v(!1),setTimeout(()=>{j(!1)},1e3),S()}),z({setAnimationShow:v,handleAnimation:H}),(V,w)=>{const b=B("VanLoading"),q=B("VanButton"),rt=B("VanPopup");return a(),p(rt,{show:e(W),"onUpdate:show":w[0]||(w[0]=L=>St(W)?W.value=L:null),teleport:l.teleport,class:"!bg-transparent font-Puhui !w-full !max-w-[375px]",onClickOverlay:m,onClick:m,"overlay-style":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},{default:U(()=>[t("div",{ref:(L,Y)=>{Y.wrapperRef=L},class:"!w-full overflow-hidden relative -mt-[25px]",style:at({height:`${e(I)}px`})},[t("div",{class:"w-full text-center absolute",style:at({top:`${e(x)-115}px`})},[e(d)?(a(),c("div",re,[ce,t("div",de,[t("span",ue,o(e(i).amount),1),me])])):(a(),c(Lt,{key:1},[pe,t("div",ge,[ve,t("span",fe,o(e(i).number.toFixed(3)),1)])],64))],4),t("div",{ref:(L,Y)=>{Y.imgWrapper=L,g.value=L},class:"center-card opacity-0",style:at({height:` ${e(I)*.26*e(y)}px`})},null,4),e(G)?(a(),p(b,{key:0,vertical:"",type:"spinner",color:"#FEA527",class:"center-card"})):k("",!0),t("img",{src:T.value,class:"w-full h-full object-cover relative z-[1]"},null,8,_e),e(d)?(a(),c("div",he,[xe,t("div",ye,[t("div",we,[be,t("span",$e,o(e(i).grow),1)])])])):k("",!0),e(d)?(a(),p(q,{key:2,class:"success-text confirm-btn !font-semibold",style:at({top:`${e(x)+e(O)+50}px`}),onClick:kt(m,["stop"])},{default:U(()=>[ke]),_:1},8,["style","onClick"])):k("",!0)],4)]),_:1},8,["show","teleport","overlay-style"])}}}),Ce=nt(Se,[["__scopeId","data-v-5436a953"]]),Be=l=>(mt("data-v-0c06cb3b"),l=l(),pt(),l),Ae={class:"flex-center-bw border-b-[0.5px] border-solid border-gray1 pb-5"},Ie={class:"flex-start"},Fe=Be(()=>t("img",{src:Kt,class:"w-[10px] h-[10px]",alt:""},null,-1)),Ee=[Fe],Re=lt({emits:["click"],setup(l,{emit:z}){return(A,E)=>(a(),c("div",Ae,[t("div",Ie,[Dt(A.$slots,"default",{},void 0,!0)]),t("div",{onClick:E[0]||(E[0]=I=>z("click"))},Ee)]))}}),Ve=nt(Re,[["__scopeId","data-v-0c06cb3b"]]),Le={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},De={class:"gap-1 mt-5 mb-3 text-xs flex-start"},Ne={key:0,src:xt,class:"w-4",alt:""},Pe={key:1,src:yt,class:"w-4",alt:""},Ue={class:"font-semibold"},ze={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},Te=lt({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(l,{expose:z,emit:A}){const{show:E}=l,{t:I}=Nt(),g=_(null),x=_(Q.MC),O=wt(()=>[{text:"Mcoin",value:Q.MC},{text:I("voucher.voucher"),value:Q.VOUCHER}]),T=v=>{x.value=Number(v)},W=()=>{A("handleWithdraw",g.value,x.value===Q.VOUCHER)};return z({amount:g}),(v,d)=>{const j=B("van-dropdown-item"),G=B("van-dropdown-menu"),R=B("VanField"),y=B("VanButton"),i=B("VanPopup");return a(),p(i,{show:l.show,"onUpdate:show":d[4]||(d[4]=f=>St(E)?E.value=f:null),round:"","close-on-click-overlay":!0,onClickOverlay:d[5]||(d[5]=kt(()=>A("close"),["stop"]))},{default:U(()=>[t("div",Le,[P(Ve,{onClick:d[0]||(d[0]=f=>A("close"))},{default:U(()=>[t("span",null,o(v.$t("maiPledge.Income to be collected")),1)]),_:1}),t("div",De,[x.value===e(Q).MC?(a(),c("img",Ne)):(a(),c("img",Pe)),P(G,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:U(()=>[P(j,{onChange:T,modelValue:x.value,"onUpdate:modelValue":d[1]||(d[1]=f=>x.value=f),options:e(O)},null,8,["modelValue","options"])]),_:1}),t("span",Ue,o(e(h)(l.balance||0,4)),1)]),t("div",ze,[P(R,{type:"number",modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=f=>g.value=f),formatter:e(Yt),placeholder:e(h)(l.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),t("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:d[3]||(d[3]=()=>{g.value=e(h)(l.balance,4)})}," MAX ")]),P(y,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:l.loading,disabled:g.value<=0||+g.value>+l.balance,onClick:W},{default:U(()=>[F(o(v.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),We=nt(Te,[["__scopeId","data-v-f83d25b2"]]),J=l=>(mt("data-v-3f6324d4"),l=l(),pt(),l),je={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2",id:"piggyBank"},Me=J(()=>t("img",{class:"absolute top-0 left-0 w-full",src:oe,alt:"",srcset:""},null,-1)),Oe={class:"relative z-20"},Ge={class:"gap-2 mt-2 flex-start"},Xe={class:"mt-4"},He={class:"bg-white p-4 rounded-xl text-[#2E2008]"},qe={class:"flex items-center justify-between"},Ye=["src"],Je={class:"text-oriange1"},Ze={class:"flex items-baseline"},Qe={key:0,class:"text-sm self-end mb-0.5"},Ke={key:1,class:"text-3xl font-bold"},ts={key:1},es={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},ss={key:3,class:"text-3xl font-bold"},as={class:"text-xs flex-center text-black-400"},os=J(()=>t("img",{class:"self-center w-4 h-4 ml-auto",src:ne,alt:"",srcset:""},null,-1)),ns={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},ls={class:"flex flex-col justify-center"},is={class:"gap-1 text-xs flex-start"},rs={class:"opacity-60"},cs={class:"mt-1.5 text-sm"},ds={key:1},us={class:"flex flex-col justify-center"},ms={class:"gap-1 text-xs flex-start"},ps={class:"opacity-60"},gs={class:"mt-1.5 text-sm"},vs={key:1},fs={class:"left"},_s={class:"gap-1 text-xs flex-start"},hs={class:"opacity-60"},xs=J(()=>t("img",{src:xt,class:"w-4 h-4"},null,-1)),ys=J(()=>t("img",{src:yt,class:"w-4 h-4"},null,-1)),ws={class:"text-[#E88F17] text-sm font-medium"},bs={key:1},$s={class:"flex mt-5 text-base font-medium text-center"},ks=J(()=>t("div",{class:"w-6"},null,-1)),Ss={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},Cs={class:"pl-2.5"},Bs={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},As={class:"flex items-center"},Is={class:"text-[#14D8A9] text-sm font-bold flex items-center"},Fs={key:1},Es=F("%"),Rs={key:1,class:"text-[#14D8A9] text-xs font-bold"},Vs={class:"pr-2.5 text-right"},Ls={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},Ds={class:"flex items-center"},Ns={key:1,class:"text-[#14D8A9] text-sm font-bold"},Ps={key:3,class:"text-[#14D8A9] text-xs font-bold"},Us={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},zs={class:"flex items-center justify-between pr-4 mt-1.5"},Ts=J(()=>t("div",{id:"line-echarts"},null,-1)),Ws=lt({setup(l){const{checkLoginAuth:z}=Jt();Pt(()=>{dt()},1e4);const A=Ot(),{userIds:E,pending:I,total:g,earnings:x,nextFloatAwardAmount:O,today:T,DAY:W,dayAwardAmounts:v,userRewardPending:d,userRewardWithdraw:j}=ee(),G=s=>{A.push(s)},R=_("0"),y=Ut("showBalance",!1),i=()=>{y.value=!y.value},f=bt({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new zt(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),X=_(null),tt=s=>{f.xAxis.data=s.dates.reverse(),f.series[0].data=s.values.reverse(),X.value.setOption(f),b(!1)},et=_(0),S=_("0"),it=async()=>{const s=await E();et.value=s;const n=await I(s.toString());let r=0;n.fixs.forEach(N=>{r+=+ut(N)||0});let D=0;n.floats.forEach(N=>{D+=+ut(N)||0});let u=0;n.records.forEach(N=>{u+=+ut(N.amount)||0});const $=await d(s.toString());R.value=u.toFixed(18),S.value=ot(D).plus(r).plus($).toFixed(18)},H=_(["0","0"]),m=_([0,0,0,0]),V=async()=>{se().then(n=>{if(!n.success)return Gt.clear();H.value[0]=n.data.allAmount||0}),m.value[0]=+await x(0),m.value[1]=+await O(),m.value[2]=+await g(),m.value[3]=+await x(7);const s=m.value[1]/m.value[2]+m.value[0];H.value[1]=h(ot(R.value||0).times(s).toFixed(18),2).toString()},[w,b]=M(!1),q=_([0,0]),rt=async()=>{b(!0);let s=localStorage.getItem("taday")||"",n=localStorage.getItem("echartData")||"";const r=+await T(),D=await W();let u={dates:[],values:[]};if(s&&+s==+r&&n){u=JSON.parse(n);let $=await v(r);$=h(ot($||0).times(100).times(365).times(m.value[3]).toFixed(18),2),u.values[0]=$}else{localStorage.setItem("taday",r.toString());for(let $=0;$<7;$++){let N=r-$*D,It=await v(N),vt=Zt((N-D)*1e3),Ft=h(ot(It||0).times(100).times(365).times(m.value[3]).toFixed(18),2);u.dates.push(vt.split(" ")[0].split("-")[1]+"-"+vt.split(" ")[0].split("-")[2]),u.values.push(Ft)}}localStorage.setItem("echartData",JSON.stringify(u)),q.value[1]=u.values[0],tt(u)},L=async()=>{const s=+await O(),n=+await g();q.value[0]=s/n*100},[Y,st]=M(!1),[Ct,Z]=M(!1),[Bt,ct]=M(!1),gt=_(null),At=async(s,n)=>{Z(!0);try{let r=await j(s,n);if(!r.success)return Z(!1);if(r=r.result,!n){try{await r.wait(),st(!1),dt(),ct(!0),setTimeout(()=>{ct(!1)},2e3);return}catch{Z(!1)}finally{Z(!1)}return}st(!1),gt.value.handleAnimation(r)}finally{Z(!1)}},C=_(!1),dt=async()=>{await it(),L()};return $t(async()=>{z(!0)&&(X.value=Tt(Wt(document.getElementById("line-echarts"))),C.value=!0,await Promise.all([dt(),await V(),rt()]),C.value=!1)}),jt(()=>{X.value&&X.value.dispose()}),(s,n)=>{const r=B("van-loading"),D=B("VanLoading");return a(),c("div",je,[Me,t("div",Oe,[t("div",Ge,[P(ae),t("div",null,o(s.$t("piggy.Yu_Bao_details")),1)]),t("div",Xe,[t("div",He,[t("div",qe,[t("div",{class:"flex items-center",onClick:i},[t("span",null,o(s.$t("piggy.lump_sum")),1),t("img",{class:"w-4 h-4 ml-1.5",src:e(Qt)(`images/ecology/${e(y)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,Ye)]),et.value?(a(),p(e(ft),{key:0,to:"/piggySettingAdmin"},{default:U(()=>[t("div",Je,o(s.$t("piggy.setting admin address")),1)]),_:1})):k("",!0)]),P(e(ft),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:U(()=>[t("div",Ze,[e(y)?(a(),c("span",Qe,"≈")):k("",!0),e(y)?(a(),c("span",Ke,[C.value?(a(),p(r,{key:0,size:"28px"})):(a(),c("span",ts,o(e(h)(R.value,2)),1))])):k("",!0),e(y)?(a(),c("span",es,"MCOIN")):k("",!0),e(y)?k("",!0):(a(),c("span",ss," ******"))]),t("div",as,[F(o(s.$t("piggy.detail_record"))+" ",1),os])]),_:1}),t("div",ns,[t("div",ls,[t("div",is,[t("span",rs,o(s.$t("piggy.Cumulative_income")),1)]),t("div",cs,[C.value?(a(),p(r,{key:0,size:"14px"})):(a(),c("span",ds,o(e(ht)(H.value[0])),1))])]),t("div",us,[t("div",ms,[t("span",ps,o(s.$t("piggy.tommor_earns")),1)]),t("div",gs,[C.value?(a(),p(r,{key:0,size:"14px"})):(a(),c("span",vs,o(e(ht)(H.value[1])),1))])]),t("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:n[0]||(n[0]=u=>+S.value>0?e(st)(!0):"")},[t("div",fs,[t("div",_s,[t("span",hs,o(s.$t("maiPledge.Income to be collected")),1),xs,t("span",null,o(s.$t("common.or")),1),ys]),t("div",ws,[C.value?(a(),p(r,{key:0,color:"#E88F17",size:"14px"})):(a(),c("span",bs,o(e(h)(S.value,2)),1))])]),t("div",{class:Mt(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!S.value}])},o(s.$t("common.claim")),3)])]),t("div",$s,[t("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:n[1]||(n[1]=u=>G("/piggyBank-transferOut"))},o(s.$t("piggy.transfer_out_principal")),1),ks,t("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:n[2]||(n[2]=u=>G("/piggyBank-transferIn"))},o(s.$t("piggy.transfer_in_principal")),1)])]),t("div",Ss,[t("div",Cs,[t("div",Bs,o(s.$t("piggy.todayannualizedRateReturn")),1),t("div",As,[t("span",Is,[C.value?(a(),p(r,{key:0,color:"#14D8A9",size:"14px"})):(a(),c("span",Fs,o(e(h)(m.value[0]*100*365,2)),1)),Es]),F(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),p(r,{key:0,color:"#14D8A9",size:"14px"})):(a(),c("span",Rs,o(e(h)(q.value[0]*365*m.value[3],2))+"%",1)),F(o(s.$t("piggy.float")),1)])]),t("div",Vs,[t("div",Ls,o(s.$t("piggy.yesannualizedRateReturn")),1),t("div",Ds,[C.value?(a(),p(r,{key:0,color:"#14D8A9",size:"14px"})):(a(),c("span",Ns,o(e(h)(m.value[0]*100*365,2))+"%",1)),F(o(s.$t("piggy.base"))+" + ",1),C.value?(a(),p(r,{key:2,color:"#14D8A9",size:"14px"})):(a(),c("span",Ps,o(e(h)(q.value[1]))+"%",1)),F(o(s.$t("piggy.float")),1)])])]),t("div",Us,[t("div",zs,[t("span",null,o(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),Ts,e(w)?(a(),p(D,{key:0,color:"#674c37",class:"loading-box",vertical:""})):k("",!0)])])]),e(Y)?(a(),p(We,{key:0,show:e(Y),balance:S.value,loading:e(Ct),onClose:n[3]||(n[3]=u=>e(st)(!1)),onHandleWithdraw:At},null,8,["show","balance","loading"])):k("",!0),e(Bt)?(a(),p(te,{key:1,onClose:n[4]||(n[4]=u=>e(ct)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):k("",!0),P(Ce,{ref:(u,$)=>{$.voucherLottieRef=u,gt.value=u}},null,512)])}}}),Qs=nt(Ws,[["__scopeId","data-v-3f6324d4"]]);export{Qs as default};
