import{_ as wo,z as lo,o as bo,q as xo,y as ko,r as p,a2 as k,b_ as Io,E as yo,F as to,Z as I,H as a,$ as y,I as e,G as _,U as c,P as r,O as i,Q as n,a3 as So,N as Co,a4 as Vo,X as zo,Y as $o,T as Ro}from"./vendor-Dr_RpJ_Y.js";import{_ as Ao}from"./member-BZWba7V1.js";import{a as Do,S as To}from"./ShopVotePop-PbpHxtVT.js";import{S as Go}from"./SkewCard-DgRGn20p.js";import{V as Po}from"./VoteRewardPop-PJ4PtLSU.js";import{C as Bo}from"./CommonVanProvider-KZuKVOde.js";import{H as no}from"./HomeGoodsItem-D-S5e3PT.js";import{_ as No}from"./ApproveInfo-rWAGqfdh.js";import{b as Lo,w as qo,k as io,f as Eo,e as S,r as Mo,cj as Fo}from"./index-BckdT6oc.js";import{c as Ho,q as Oo}from"./beiRanking-CgdREoPr.js";import"./shop-CeqcS6K2.js";import"./beiExtRewardContract-C7XtXvNV.js";import"./beiConstContract-CxYXBNkI.js";import"./useKeyboard-DcWqtm11.js";import"./BackIcon-CDrGaEPo.js";import"./MCOIN-Bodfn-v1.js";import"./store-odfdGeH-.js";import"./useCityMap-VqEHfq08.js";import"./RatioBox-BcgP5qRZ.js";import"./ImgBoutiqueLable-B-2xCcw4.js";const Uo=""+new URL("../images/auth-BiC43gt4.svg",import.meta.url).href,w=f=>(zo("data-v-2923ac95"),f=f(),$o(),f),jo={class:"relative z-10 p-3"},Qo={class:"flex items-center gap-x-1"},Xo={class:"relative"},Yo={class:"absolute bottom-[-10px] left-0 right-0 w-[40px] border-[1px] border-solid border-white flex-center bg-yellow rounded-3xl mx-auto my-1"},Zo=w(()=>e("img",{src:Ao,class:"w-4 h-4"},null,-1)),Jo={class:"flex flex-col gap-1"},Ko={class:"text-base font-semibold line-clamp-1"},Wo={class:"text-b3 flex items-center"},oe=w(()=>e("img",{src:Uo,class:"inline-block w-4 h-4 mr-0.5"},null,-1)),ee={class:"text-newOrigin"},se={class:"bg-b5 py-3 grid grid-cols-3 rounded-lg mt-[17px]"},te={class:"text-center"},ne={class:"text-center"},ie=w(()=>e("p",null,"LP",-1)),le={class:"text-center"},ae=w(()=>e("p",null,"MAI",-1)),re={class:"card"},de={class:"text-b1 font-semibold"},ce=["innerHTML"],ue={class:"card"},pe={class:"text-b1 font-semibold"},fe={class:"flex-center-bw text-b1 mt-3"},he={class:"text-b3"},me={class:"flex-center-bw text-b1 mt-3"},ge={class:"text-b3"},ve={class:"flex-center-bw text-b1 mt-3"},_e={class:"text-b3"},we={class:"flex-center-bw text-b1 mt-3"},be={class:"text-b3"},xe={key:0,class:"card"},ke={class:"text-b1 font-semibold"},Ie={key:1,class:"card"},ye={class:"text-b1 font-semibold"},Se={key:0,class:"relative py-4"},Ce=lo({name:"RankingShop"});function Ve(f,{emit:ao}){const{checkLoginAuth:ro}=Lo(),b=bo(),C=xo(),{loadingToggle:V}=qo(),h=ko(()=>{var s;return(s=b==null?void 0:b.query)==null?void 0:s.shopId}),t=p(null),m=p(null),g=p(null),[z,$]=k(!1),[R,A]=k(!1),[D,co]=k(!1),x=p(null),T=p(null),{width:G}=Io(T),uo=async()=>{if(!h.value)return;const{success:s,data:o}=await Oo({shopId:h.value,month:1e4});!s||!o||(t.value=o,o!=null&&o.goodsId&&(m.value={goodsId:o==null?void 0:o.goodsId,goodsName:o==null?void 0:o.goodsName,goodsPrice:o==null?void 0:o.price,goodsDesc:o==null?void 0:o.goodsDesc,goodsIcons:o==null?void 0:o.icons,goodsDiscountRatio:o==null?void 0:o.discountRatio,goodsType:o==null?void 0:o.goodsType}),o!=null&&o.offlineGoodsId&&(g.value={goodsId:o==null?void 0:o.offlineGoodsId,goodsName:o==null?void 0:o.offlineGoodsName,goodsPrice:o==null?void 0:o.offlineGoodsPrice,goodsDesc:o==null?void 0:o.offlineGoodsDesc,goodsIcons:o==null?void 0:o.offlineGoodsIcons,goodsDiscountRatio:o==null?void 0:o.offlineGoodsDiscountRatio,goodsType:o==null?void 0:o.offlineGoodsType}))},po=async()=>{if(!h.value)return;const{success:s,data:o}=await Ho(h.value);s&&co(o)},fo=()=>{var s;C.push({path:"/goodsDetail",query:{id:(s=m.value)==null?void 0:s.goodsId}})},ho=()=>{var s;C.push({path:"/offlineGoodsDetail",query:{goodsId:(s=g.value)==null?void 0:s.goodsId}})},mo=async(s,o=!1)=>{o&&x.value?x.value.handleShowReward():Ro({icon:io("images/sucess_icon.png"),duration:3e3,message:+(s==null?void 0:s.direct)==400?"放电成功":"充电成功"}),await Fo(3e3),ao("voteSuccess")},go=()=>{ro(!0)&&$(!0)};return yo(async()=>{V(!0),po(),await uo(),V(!1)}),(s,o)=>{const vo=to("VanImage"),_o=to("VanButton");return a(),I(Bo,{id:"rangkingShop",class:"h-full font-Puhui font-normal relative px-3",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"},ref:(u,v)=>{v.shopEl=u,T.value=u}},{default:y(()=>{var u,v,P,B,N,L,q,E;return[e("div",{class:Co(["safe-page-body overflow-y-auto w-full",{"safe-page-allow":i(D)}])},[r(Go,{class:"mb-3",width:(i(G)*.74).toFixed(),right:"27"},{default:y(()=>{var l,d,M,F,H,O,U,j,Q,X,Y,Z,J,K,W,oo,eo,so;return[r(Do,{class:"absolute right-1.5 top-1.5 -z-20",type:(l=t.value)==null?void 0:l.type,width:(i(G)*.356).toFixed()},null,8,["type","width"]),e("div",jo,[e("div",Qo,[e("div",Xo,[r(vo,{round:"",src:(((d=t.value)==null?void 0:d.logo)||"").split(",")[0],errorIcon:i(io)("images/ranking/noPosition.png"),fit:"cover",width:"46px",height:"46px"},null,8,["src","errorIcon"]),e("div",Yo,[Zo,e("span",null,"V"+n((M=t.value)==null?void 0:M.memberLevel),1)])]),e("div",Jo,[e("div",Ko,n((F=t.value)==null?void 0:F.storeName),1),e("div",Wo,[e("div",null,n(i(Eo)((H=t.value)==null?void 0:H.shopAddress,"****",4,4)),1),(O=t.value)!=null&&O.authorizeAddress?(a(),_("div",{key:0,onClick:o[0]||(o[0]=So(()=>{i(A)(!0)},["stop"])),class:"inline-block ml-1 lex-shrink-0 align-text-bottom"},[oe,e("span",ee,n(s.$t("ecology.authorized")),1)])):c("",!0)])])]),e("div",se,[e("div",te,[e("p",null,n(s.$t("common.credit")),1),e("p",null,n(i(S)((U=t.value)!=null&&U.authorizeAddress?(j=t.value)==null?void 0:j.authorizeContribute:(Q=t.value)!=null&&Q.authorizeShop?0:(X=t.value)==null?void 0:X.contribute,0)),1)]),e("div",ne,[ie,e("p",null,n(i(S)((Y=t.value)!=null&&Y.authorizeAddress?(Z=t.value)==null?void 0:Z.authorizeLp:(J=t.value)!=null&&J.authorizeShop?0:(K=t.value)==null?void 0:K.lp)),1)]),e("div",le,[ae,e("p",null,n(i(S)((W=t.value)!=null&&W.authorizeAddress?(oo=t.value)==null?void 0:oo.authorizeMai:(eo=t.value)!=null&&eo.authorizeShop?0:(so=t.value)==null?void 0:so.mai,0)),1)])])])]}),_:1},8,["width"]),e("div",re,[e("p",de,n(s.$t("ranking.shop introduction")),1),e("div",{class:"mt-3 min-h-10 text-b2 whitespace-pre-wrap",innerHTML:(u=t.value)==null?void 0:u.introduction},null,8,ce)]),e("div",ue,[e("p",pe,n(s.$t("ranking.business_data")),1),e("div",fe,[e("div",he,n(s.$t("shop.Opening hours")),1),e("div",null,n(i(Mo)((v=t.value)==null?void 0:v.shopCreateTime)),1)]),e("div",me,[e("div",ge,n(s.$t("ranking.visitors")),1),e("div",null,n(((P=t.value)==null?void 0:P.lookCount)||0),1)]),e("div",ve,[e("div",_e,n(s.$t("ranking.listing_goods")),1),e("div",null,n(((B=t.value)==null?void 0:B.goodsCount)||0),1)]),e("div",we,[e("div",be,n(s.$t("ranking.listing_offline_goods")),1),e("div",null,n(((N=t.value)==null?void 0:N.offlineListGoodsCount)||0),1)])]),(L=m.value)!=null&&L.goodsId?(a(),_("div",xe,[e("p",ke,n(s.$t("ranking.hot_goods")),1),r(no,{goods:m.value,class:"mt-3",onClick:fo},null,8,["goods"])])):c("",!0),(q=g.value)!=null&&q.goodsId?(a(),_("div",Ie,[e("p",ye,n(s.$t("ranking.hot_offline")),1),r(no,{goods:g.value,class:"mt-3",onClick:ho},null,8,["goods"])])):c("",!0)],2),i(D)?(a(),_("div",Se,[r(_o,{class:"btn-yellow w-full h-[46px] rounded-full border-none text-base font-semibold",onClick:go},{default:y(()=>[Vo(n(s.$t("ranking.power")),1)]),_:1})])):c("",!0),i(R)&&t.value.authorizeAddress?(a(),I(No,{key:1,show:i(R),info:t.value,onClose:o[1]||(o[1]=l=>i(A)(!1))},null,8,["show","info"])):c("",!0),i(z)?(a(),I(To,{key:2,show:i(z),shopId:(E=t.value)==null?void 0:E.shopId,teleport:"#rangkingShop",onClose:o[2]||(o[2]=l=>i($)(!1)),onVoteSuccess:o[3]||(o[3]=(l,d)=>mo(l,d))},null,8,["show","shopId"])):c("",!0),r(Po,{ref:(l,d)=>{d.voteRewardRef=l,x.value=l}},null,512)]}),_:1},8,["title"])}}const ze=lo({...Ce,emits:["voteSuccess"],setup:Ve}),Ye=wo(ze,[["__scopeId","data-v-2923ac95"]]);export{Ye as default};
