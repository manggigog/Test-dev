import{B as K}from"./BackIcon-CDrGaEPo.js";import{C as M}from"./ConcatPop-DtZBOuhO.js";import{d as Q,f as X}from"./concat-CzA3QGh0.js";import{_ as Y,z as Z,x as W,a2 as ee,r as U,y as q,E as se,G as c,H as n,I as s,P as m,$ as d,Q as i,O as r,U as b,a4 as y,F as k,J as I,K as C,o as te,T as F,q as oe,X as ae,Y as ne,Z as E,by as P}from"./vendor-Dr_RpJ_Y.js";import{f as re,r as V,h as le}from"./index-LRhcxFAI.js";import{u as ce}from"./user-BBQX_0p5.js";import"./upload-DmsmBb9j.js";import"./upload-AP7UGkIr.js";const $=""+new URL("../images/avatarRing-CSeD8_ae.png",import.meta.url).href,ie=""+new URL("../images/file-copy-line-Cy8D9UBs.png",import.meta.url).href,A=_=>(ae("data-v-3f7fd656"),_=_(),ne(),_),de={class:"w-full bg-[#F2F0EF] pb-[80px] relative"},ue={class:"fixed top-0 left-0 w-full z-50 h-[44px] bg-[#FFFFFF]"},me={class:"absolute top-3 left-2.5 text-[#2E2008] flex items-center h-5"},pe={class:"font-medium"},_e={class:"pt-[44px]"},fe={class:"pt-3 text-center text-sm text-[#A6A6A6]"},he={class:"rounded-xl gap-3 flex items-start p-2.5"},ge=A(()=>s("img",{class:"w-8 h-8",src:$},null,-1)),ve={class:"bg-white w-[78%] rounded-r-lg p-3 rounded-bl-lg"},xe={class:"text-[#2E2008]/70 text-sm break-words"},we={key:0,class:"text-sm mt-3 bg-[#F5F5F5] rounded-lg px-2 py-1 flex items-center justify-between"},be=A(()=>s("img",{src:ie,class:"w-5 h-5"},null,-1)),ye=[be],ke={key:1,class:"w-full mt-2"},Ie={class:"container"},Ce=["src"],Fe={class:"pb-3 text-center text-sm text-[#A6A6A6]"},Ae={class:"flex items-start justify-end gap-3"},De={class:"bg-white w-[78%] rounded-l-lg p-3 rounded-br-lg"},Be={class:"text-[#2E2008]/70 text-sm break-words"},Se={key:0,class:"w-full pt-3 pb-2 text-right"},Te={class:"container"},Ue=["src"],qe=A(()=>s("img",{class:"w-8 h-8",src:$},null,-1)),Ee={class:"fixed bottom-0 left-0 w-full gap-4 px-3 py-2.5 text-center flex-center-bw linear-bg"},Pe=Z({setup(_){const v=W().t,J=oe(),p=te(),[L,D]=ee(!1),o=U({}),B=async()=>{var t,l;if(!((t=p.query)!=null&&t.id))return;const e=await Q((l=p.query)==null?void 0:l.id);e.success&&(o.value=e.data)},N=q(()=>{var e,t,l;if((e=o.value)!=null&&e.replyJson)try{return((l=(t=o.value)==null?void 0:t.replyJson)==null?void 0:l.split("----")).map(g=>{const u=JSON.parse(g);return{...u,showImgs:u.imageUrls?u.imageUrls.split(","):[]}})}catch{return[]}return[]}),f=q(()=>{var e,t;return(e=o.value)!=null&&e.imageUrls?(t=o.value)==null?void 0:t.imageUrls.split(","):[]}),R=(e,t)=>{P({images:e,closeable:!0,showIndex:!0,startPosition:t})},j=e=>{P({images:f.value,closeable:!0,showIndex:!0,startPosition:e})},z=async()=>{var e,t;if(x.value.memberLevel>3){if(!((e=p.query)!=null&&e.id)||!(await X({id:((t=p.query)==null?void 0:t.id)||""})).success)return;F(v("order.Delete success")),J.back();return}else{F(v("common.lv4 tips_del"));return}},O=()=>{if(x.value.memberLevel>3)D(!0);else{F(v("common.lv4 tips"));return}},G=e=>{e&&B(),D(!1)},x=U({}),H=async()=>{const e=await ce();!e.success||!e.data||(x.value=e.data)};return se(()=>{H(),B()}),(e,t)=>{var u;const l=k("van-grid-item"),h=k("van-grid"),g=k("VanButton");return n(),c("div",de,[s("header",ue,[s("div",me,[m(K,null,{default:d(()=>[s("span",pe,i(r(re)(o.value.address,"...",5,5))+"交流历史",1)]),_:1})])]),s("div",_e,[s("div",fe,i(o.value.createTime?r(V)(o.value.createTime):""),1),s("div",he,[ge,s("div",ve,[s("div",xe,i(o.value.content),1),o.value.fullAddress?(n(),c("div",we,[y(i(o.value.fullAddress)+" ",1),s("div",{onClick:t[0]||(t[0]=a=>r(le)(o.value.fullAddress))},ye)])):b("",!0),r(f)&&r(f).length>0?(n(),c("div",ke,[m(h,{square:"",border:!1,"column-num":3},{default:d(()=>[(n(!0),c(I,null,C(r(f),(a,w)=>(n(),E(l,{key:a,onClick:S=>j(w)},{default:d(()=>[s("div",Ie,[s("img",{src:a,class:"w-full h-full rounded-lg"},null,8,Ce)])]),_:2},1032,["onClick"]))),128))]),_:1})])):b("",!0)])]),(n(!0),c(I,null,C(r(N),(a,w)=>(n(),c("div",{key:w,class:"rounded-xl p-2.5"},[s("div",Fe,i(a.createTime?r(V)(a.createTime):""),1),s("div",Ae,[s("div",De,[s("div",Be,i(a.content),1),a.showImgs&&a.showImgs.length>0?(n(),c("div",Se,[m(h,{square:"",border:!1,"column-num":3},{default:d(()=>[(n(!0),c(I,null,C(a.showImgs,(S,T)=>(n(),E(l,{key:T,onClick:Ve=>R(a.showImgs,T)},{default:d(()=>[s("div",Te,[s("img",{src:S,class:"w-full rounded-lg"},null,8,Ue)])]),_:2},1032,["onClick"]))),128))]),_:2},1024)])):b("",!0)]),qe])]))),128))]),s("div",Ee,[m(g,{style:{border:"1px solid #d9d9d9"},class:"font-semibold flex-1 h-[46px] min-w-[120px] bg-white px-4 rounded text-base",onClick:z},{default:d(()=>[y(i(e.$t("common.delete")),1)]),_:1}),m(g,{class:"font-semibold bg-[#FED73A] flex-1 btn h-[46px] min-w-[120px] px-4 rounded text-base",onClick:O},{default:d(()=>[y(i(e.$t("user.I want to reply")),1)]),_:1})]),m(M,{id:(u=r(p).query)==null?void 0:u.id,show:r(L),onClose:G},null,8,["id","show"])])}}}),Ge=Y(Pe,[["__scopeId","data-v-3f7fd656"]]);export{Ge as default};
