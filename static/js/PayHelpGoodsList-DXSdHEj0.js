import{z as A,r as T,bp as S,y as L,F as x,G as g,H as c,I as i,P as h,U as I,O as e,J as G,a4 as O,Q as r,Z as V,$ as u,bj as z,V as F,N as M,bk as W,a3 as D,_ as U,q as j,o as J,x as K,bl as q,E as Q,K as Y}from"./vendor-Dr_RpJ_Y.js";import{_ as Z}from"./avatarRing2-DK_wiJ33.js";import{_ as X}from"./MCOIN-BOqZVkND.js";import{_ as tt}from"./PayHelpSelector-DdG7NhoI.js";import{f as et,e as ot,a as st,Y as nt}from"./index-CU2nzZe6.js";import{_ as at}from"./OfflineGoods-BLawRtTb.js";import{P as $}from"./payHelp-BuwJxNdC.js";import{_ as it}from"./HelpPayGuide-Bng7q4LO.js";import{C as lt}from"./CommonVanProvider-KZuKVOde.js";import{B as rt}from"./BetweenTab-nGcUWfRT.js";import{f as dt,g as ct}from"./payHelp-D1rfOFGG.js";import{P as mt}from"./bill-DDCezy34.js";import"./offlineGoods-DvT2Go6q.js";import"./ImgBoutiqueLable-B-2xCcw4.js";import"./shop-CeqcS6K2.js";import"./tips-gray-Cb5JVjvw.js";import"./DescriptionPop-BI53EHcZ.js";import"./BackIcon-CDrGaEPo.js";/* empty css                                                               */const ut={class:"flex items-center gap-x-1"},pt=i("div",{class:"w-[30px] h-[30px] bg-b5 rounded-full"},[i("img",{src:Z})],-1),ft={class:"text-b2 flex-1"},ht={class:"flex gap-x-0.5 text-newOrigin font-semibold"},yt={class:"text-b3"},gt={class:"flex items-center"},_t=i("img",{src:X,class:"w-4 h-4 mr-1.5"},null,-1),vt={class:"text-b1 font-normal"},bt={key:0,class:"absolute right-0 bottom-0 px-1 py-0.5 min-w-[22px] text-center rounded-tl-lg rounded-br-lg text-b6 text-xs",style:{background:"rgba(0, 0, 0, 0.6)"}},wt={key:0,class:"flex items-center justify-end mt-3"},xt=A({props:{info:null,type:null},emits:["removeItem"],setup(p,{emit:_}){var y;const d=p,v=T(null),b=T(null),{width:k}=S(v),{width:H}=S(b),t=L(()=>{var n,o;return(o=(n=d.info)==null?void 0:n.orderGoods)==null?void 0:o.length}),m=L(()=>{var n;return t.value>0&&((n=d.info)==null?void 0:n.orderGoods[0])}),R=+((y=d.info)==null?void 0:y.createTime)+15*60*1e3-+new Date().valueOf(),P=L(()=>{var n;return`${window.location.origin}/#/payHelpGoods?payId=${(n=d==null?void 0:d.info)==null?void 0:n.id}`}),w=T(null),B=()=>{var n;w.value&&((n=w.value)==null||n.setShow(!0))};return(n,o)=>{var C,N;const a=x("van-count-down"),f=x("VanButton");return c(),g("div",{class:"flex flex-col",ref:(s,l)=>{l.boxRef=s,v.value=s}},[i("div",ut,[pt,i("div",ft,[p.type===e($).OTHER?(c(),g(G,{key:0},[O(r(e(et)(p.info.address,"...",5,5))+r(n.$t("payhelp.launch_payHelp")),1)],64)):(c(),g(G,{key:1},[O(r(n.$t("payhelp.payment_I_initiated")),1)],64))]),i("div",ht,[R>0?(c(),V(a,{key:0,time:R,format:"mm:ss",onFinish:o[0]||(o[0]=s=>_("removeItem"))})):I("",!0),i("span",null,r(n.$t("payhelp.timeout")),1)])]),h(at,{class:"mt-3",goods:{goodsIcons:(C=e(m))==null?void 0:C.icons,...e(m)}},{"goods-name":u(()=>{var s;return[i("div",{class:M(["font-semibold overflow-hidden whitespace-nowrap",{"line-clamp-1 whitespace-normal":e(t)<=1}]),style:F({width:`${e(k)-24-80-12-e(H)}px`})},r(((s=e(m))==null?void 0:s.goodsName)||""),7),z(i("div",{class:"min-w-fit",ref:(l,E)=>{E.nameMore=l,b.value=l}},r(n.$t("payhelp.goodsNum",{number:e(t)})),513),[[W,e(t)>1]])]}),"bottom-left":u(()=>[i("div",yt,r(n.$t("payhelp.totalAmount"))+":",1)]),"bottom-price":u(()=>{var s;return[i("div",gt,[_t,i("div",vt,r(e(ot)(((s=p.info)==null?void 0:s.totalAmount)||0)),1)])]}),"img-icon":u(()=>[e(t)>1?(c(),g("div",bt,r(e(t)),1)):I("",!0)]),_:1},8,["goods"]),p.type===e($).OWNER?(c(),g("div",wt,[h(f,{class:"bg-yellow h-[32px] px-3 rounded-md text-b1 font-semibold",onClick:D(B,["stop"])},{default:u(()=>[O(r(n.$t("payhelp.share_link")),1)]),_:1},8,["onClick"])])):I("",!0),h(tt,{ref:(s,l)=>{l.payHelpRef=s,w.value=s},amount:(N=p.info)==null?void 0:N.totalAmount,link:e(P)},null,8,["amount","link"])],512)}}}),$t=["src"],kt={class:"text-b3"},Rt={class:"mx-3 py-3 safe-body overflow-y-auto"},Ct=A({name:"ConsumerOrders"});function Nt(p){const{regionStore:_,accountStore:d}=st(),v=j(),b=J(),{t:k}=K(),H=L(()=>[{label:k("payhelp.pay_for_other"),value:$.OTHER},{label:k("payhelp.pay_wait_other"),value:$.OWNER}]),t=q({status:$.OTHER,shopInfo:null,list:[],total:0,loading:!1,finished:!1,nowTime:null}),m=q({pageNum:0,pageSize:10}),R=o=>{t.status=o,v.replace({path:"payHelpGoodsList",query:{status:o}}),w()},P=o=>{v.push(o)},w=async()=>{t.finished=!1,t.total=0,t.list=[],m.pageNum=0,y()},B=o=>{o!=null&&o.id&&(t.list=t.list.filter(a=>a.id!==o.id))},y=async()=>{if(!(d!=null&&d.sign.address))return t.finished=!0;t.loading=!0,m.pageNum+=1,await n(),t.loading=!1},n=async()=>{const{success:o,data:a,total:f}=await(t.status?dt(m):ct(m));if(t.loading=!1,!o||!a||!f||f<=0){t.finished=!0;return}t.list=m.pageNum===1?a:t.list.concat(a),f<=t.list.length&&(t.finished=!0)};return Q(async()=>{var o,a;(o=b.query)!=null&&o.status&&(t.status=Number((a=b.query)==null?void 0:a.status)),y()}),(o,a)=>{const f=x("Empty"),C=x("VanList"),N=x("router-view");return c(),V(lt,{title:o.$t("payhelp.payList"),class:"bg-gray1 font-Puhui font-normal relative payHelpPage","theme-vars":{"field-placeholder-text-color":"#A6A6A6","count-down-text-color":"#FF8812","count-down-font-size":"16px"},ref:(s,l)=>{l.shopGoodsRef=s}},{right:u(()=>[i("img",{src:e(nt)(`mall/${e(_).country}-flag.svg`),class:"w-5 h-auto mr-1"},null,8,$t),i("span",kt,r(o.$t(`country.${e(_).country}`))+r(e(_).country),1)]),default:u(()=>[h(rt,{options:e(H),"label-key":"label","value-key":"value",modelValue:e(t).status,"onUpdate:modelValue":a[0]||(a[0]=s=>e(t).status=s),onChange:R},null,8,["options","modelValue"]),i("div",Rt,[h(C,{loading:e(t).loading,"onUpdate:loading":a[1]||(a[1]=s=>e(t).loading=s),finished:e(t).finished,"immediate-check":!1,"finished-text":"","loading-text":o.$t("common.loading"),onLoad:y},{default:u(()=>{var s;return[(c(!0),g(G,null,Y(e(t).list,l=>(c(),V(xt,{class:"offline-crad-box mb-3",key:l.id,info:l,type:e(t).status,onClick:E=>P(`/payHelpGoods?payId=${l.id}`),onRemoveItem:E=>B(l)},null,8,["info","type","onClick","onRemoveItem"]))),128)),!e(t).loading&&e(t).finished&&((s=e(t).list)==null?void 0:s.length)<=0?(c(),V(f,{key:0,name:" "})):I("",!0)]}),_:1},8,["loading","finished","loading-text"])]),h(it,{payChannel:e(mt).ONLINE},null,8,["payChannel"]),h(N,{class:"child-view bg-gray1"})]),_:1},8,["title"])}}const Lt=A({...Ct,setup:Nt}),Jt=U(Lt,[["__scopeId","data-v-2c89f92b"]]);export{Jt as default};
