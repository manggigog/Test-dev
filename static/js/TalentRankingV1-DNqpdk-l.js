import{_ as O,z as F,q as te,y as ee,r as y,E as le,G as i,H as t,P as $,bx as Te,$ as L,I as a,Q as g,a3 as D,O as c,N as q,J as ie,K as re,U as b,X as de,Y as ve,F as E,x as Ce,D as ae,Z as C,a4 as pe,a2 as j,n as Ie}from"./vendor-Dr_RpJ_Y.js";import{I as me,M as Fe}from"./Item-BrfA5qXW.js";import{u as Ae,$ as Le,c as Se,k as oe,f as Me,e as ze,y as Be,a as De,C as Ee}from"./index-CU2nzZe6.js";import{R as Ve,D as Ne,a as Qe}from"./RankingTab-DTjvXHYQ.js";import{_ as je}from"./member-CkdtKF8y.js";import{_ as qe}from"./auth-icon-Bx5iOxx7.js";import{B as Oe}from"./BackIcon-CDrGaEPo.js";import{N as He}from"./NoRanking-D6NZKsWK.js";import{g as Pe,e as Ge,m as We,a as Ue}from"./ranking-TxwU5hfl.js";import{_ as Xe}from"./ApproveInfo-8wQfAir7.js";import"./info-CcC__Mfc.js";import"./calendar-yellow-DuCGlPYa.js";const Ze="/static/images/talent-title-icon-DuZsBbh1.png",Je="/static/images/shop-title-icon-b3DgBOev.png",Ke="/static/images/community-title-icon-DkeFIdIb.png",Ye="/static/images/talent-title-icon-white-Dk8oenuU.png",et="/static/images/shop-title-icon-white-Cr-vaLO-.png",tt="/static/images/community-title-icon-white-DSopQM--.png",nt=["onClick"],st={class:"w-[20%]"},ot=["onClick"],at=F({props:{info:null,type:null,ownFunds:null,cycleType:null},emits:["toApply","toApplyShop","toQuit"],setup(o,{emit:p}){const n=o,d=Ae().getCurrentAccount(),_=te(),{memberLevels:l}=Se(),R=()=>{+n.type==2?f.value?p("toApply"):p("toApplyShop"):p("toApply")},e=ee(()=>{var k,h,S,M,w,P,G,W,N,z,A,U;return n.info?{mai:(k=n.ownFunds)==null?void 0:k.mai,lp:(h=n.ownFunds)==null?void 0:h.lp,authorizeMai:(S=n.ownFunds)==null?void 0:S.authorizeMai,authorizeLp:(M=n.ownFunds)==null?void 0:M.authorizeLp,memberLevel:v.value,contribute:(w=n.ownFunds)==null?void 0:w.contribute,authorizeContribute:(P=n.ownFunds)==null?void 0:P.authorizeContribute,myRanking:n.info&&n.info.myRanking,...n.info,address:d}:f.value?{...f.value,mai:(G=n.ownFunds)==null?void 0:G.mai,lp:(W=n.ownFunds)==null?void 0:W.lp,authorizeMai:(N=n.ownFunds)==null?void 0:N.authorizeMai,authorizeLp:(z=n.ownFunds)==null?void 0:z.authorizeLp,memberLevel:v.value,contribute:(A=n.ownFunds)==null?void 0:A.contribute,authorizeContribute:(U=n.ownFunds)==null?void 0:U.authorizeContribute,myRanking:0,address:d,avatar:f.value.logo,nickname:f.value.storeName}:{}}),v=y(0),m=async()=>{v.value=await l()},f=y(null),H=async()=>{const{success:k,data:h}=await Le();!k||(h==null?void 0:h.status)!==1||h&&(f.value=h)},ne=k=>{_.push(k)},V=async()=>{m()};return le(()=>{H(),V()}),(k,h)=>(t(),i("div",{class:q(["fixed bottom-0 w-full sm:w-[375px] p-5 mx-auto backdrop-blur-xl bg",{"py-2":+n.type==2?!!f.value:!1}]),onClick:D(R,["stop"])},[$(me,{rankItem:c(e),index:0,showTip:!o.info&&+n.type==2?!!f.value:!1},Te({right:L(()=>[a("div",null,[a("div",{onClick:h[0]||(h[0]=D(S=>ne(`assist-recordsV1?type=${o.type}&cycleType=${o.cycleType}`),["stop"])),class:"border border-solid text-[#fea223] border-[#fea223] text-xs rounded-3xl w-[75px] h-[25px] py-1 mb-2"},g(k.$t("ranking.assistRecords")),1),a("div",st,[o.info?(t(),i("div",{key:1,class:"btn-linear text-xs rounded-3xl w-[75px] py-1",onClick:h[1]||(h[1]=D(S=>p("toQuit"),["stop"]))},g(k.$t("ranking.Exit list")),1)):(t(),i("div",{key:0,class:"btn-linear text-xs rounded-3xl w-[75px] h-[25px] py-1",onClick:D(R,["stop"])},g(+n.type==2?f.value?k.$t("ranking.Go and apply"):k.$t("shop.applyShop"):k.$t("ranking.Go and apply")),9,ot))])])]),_:2},[(o.type===2?!o.info&&!f.value||f.value&&f.value.status!==1:!o.info)?{name:"left",fn:L(()=>[a("div",null,g(k.$t("ranking.Not listed yet")),1)])}:void 0]),1032,["rankItem","showTip"])],10,nt))}}),lt=O(at,[["__scopeId","data-v-75439235"]]),fe=o=>(de("data-v-e63a3d88"),o=o(),ve(),o),it={class:"flex items-end justify-center gap-2 mx-2 bg-transparent"},rt=["onClick"],ut=["src"],ct=["src"],pt={class:"relative mx-auto mb-2 border-2 border-white border-solid rounded-full avatar-img"},dt=["src"],vt={class:"flex items-center justify-center px-2 text-xs"},mt={class:"line-clamp-1"},ft={key:0,class:"font-normal"},kt={class:"flex items-center justify-center pt-1.5 gap-1.5"},gt={key:0,class:"inline-block align-text-bottom lex-shrink-0"},ht={class:"flex items-center bg-[#FAE89C] rounded-xl py-[0.20rem] px-1.5 text-xxs"},yt=fe(()=>a("img",{src:je,class:"inline-block w-3 h-3"},null,-1)),_t=["onClick"],xt={class:"flex items-center bg-[#FAE89C] rounded-xl py-[0.20rem] px-1.5"},wt=fe(()=>a("img",{src:qe,class:"inline-block w-3 h-3"},null,-1)),$t={class:"text-xxs text-default"},bt={key:0,class:"mt-2.5 text-xs font-bold text-center text-[#7D7D7D]"},Rt=["onClick"],Tt=F({props:{rankingTopList:null},emits:["makeRanking","makeRankingInfo"],setup(o,{emit:p}){const{rankingTopList:n}=o,d=l=>{p("makeRanking",l)},_=(l,R)=>{p("makeRankingInfo",l,R)};return(l,R)=>(t(),i("div",it,[(t(!0),i(ie,null,re(o.rankingTopList,(e,v)=>(t(),i("div",{key:v,class:q(["flex-1 rounded-xl py-2.5 min-h-[194px] relative",`bg-linear__${v==1?"one":v==0?"two":"three"}`]),onClick:m=>_(e,1)},[a("img",{src:c(oe)(`images/ranking/${v==1?"one":v==0?"two":"three"}.png`),class:"w-[13px] h-[20px] absolute top-2.5 right-2.5"},null,8,ut),a("img",{src:c(oe)(`images/ranking/${v==1?"one":v==0?"two":"three"}-bg.png`),class:"w-auto h-[22px] mx-auto mb-2"},null,8,ct),a("div",pt,[a("img",{src:e&&e.avatar&&e.avatar.split()[0]||c(oe)("images/ranking/noPosition.png"),class:"object-cover w-full h-full rounded-full"},null,8,dt)]),a("div",vt,[a("span",mt,g(e&&e.nickname||l.$t("ranking.Waiting for a vacant position")),1),e?(t(),i("span",ft," ("+g(e&&c(Me)(e.address,"",0,4))+")",1)):b("",!0)]),a("div",kt,[e?(t(),i("div",gt,[a("div",ht,[yt,a("span",null,"V"+g(e&&e.memberLevel||0),1)])])):b("",!0),e&&e.authorizeAddress?(t(),i("div",{key:1,onClick:D(m=>_(e,99),["stop"]),class:"inline-block align-text-bottom lex-shrink-0"},[a("div",xt,[wt,a("span",$t,g(l.$t("ecology.authorized")),1)])],8,_t)):b("",!0)]),e?(t(),i("div",bt,g(l.$t("ranking.hot"))+g(e&&c(ze)(e.heat)||0),1)):b("",!0),e?(t(),i("div",{key:1,class:q(["w-[60px] text-center py-1 mt-1 assist-bg rounded-3xl mx-auto text-xs",v===0?"text-[#80B0EB]":v===1?"text-[#E9AA5E]":"text-[#F2A592]"]),onClick:D(m=>d(e),["stop"])},g(l.$t("ranking.Makealist")),11,Rt)):b("",!0)],10,rt))),128))]))}}),Ct=O(Tt,[["__scopeId","data-v-e63a3d88"]]),It=F({props:{list:null},emits:["makeRanking","makeRankingInfo"],setup(o,{emit:p}){const{list:n}=o,d=l=>{p("makeRanking",l)},_=(l,R)=>{p("makeRankingInfo",l,R)};return le(()=>{}),(l,R)=>(t(!0),i(ie,null,re(o.list,(e,v)=>(t(),i("div",{key:e.id,class:"mb-5"},[$(me,{rankItem:e,index:v,onMakeRanking:m=>d(e),onMakeRankingInfo:m=>{_(e,m)}},null,8,["rankItem","index","onMakeRanking","onMakeRankingInfo"])]))),128))}}),Ft={class:"flex-1 h-4 line-clamp-1 line-clamp-ellipsis overflow-hidden text-xs text-[#2E2008] opacity-60"},At=F({setup(o){const p=te(),n=()=>{p.push("/postDetail-rank")};return(d,_)=>{const l=E("van-icon");return t(),i("div",{class:"w-full h-[25px] flex leading-8 bg-white rounded-3xl items-center px-2.5 mr-2.5",onClick:n},[a("div",Ft,g(d.$t("ranking.noticeContent_1")),1),$(l,{class:"ml-2.5",name:"arrow",color:"#B0AFAE"})])}}}),Lt={class:"pl-2.5 pt-2.5"},St={class:"w-full flex-start"},Mt=["onClick"],zt=F({emits:["changeHeader"],setup(o,{emit:p}){const{t:n}=Ce(),d=te(),_=ee(()=>[{title:n("ranking.Talent ranking"),type:1},{title:n("ranking.shop ranking"),type:2},{title:n("ranking.Community ranking"),type:3}]),l=y(null);ae(()=>d.currentRoute.value.query.type,e=>{l.value=+e||1},{immediate:!0,deep:!0});const R=e=>{e.type!==l.value&&(d.replace({path:"talentRankingV1",query:{type:e.type,cycleType:d.currentRoute.value.query.cycleType}}),l.value=e.type,p("changeHeader",e.type))};return(e,v)=>(t(),i("div",Lt,[a("div",St,[$(Oe),(t(!0),i(ie,null,re(c(_),m=>(t(),i("div",{key:m.type,onClick:f=>R(m),class:"w-full flex-center"},[a("div",{class:q(["",m.type===l.value?"font-bold text-xl":"opacity-60 font-normal text-lg"])},g(m.title),3)],8,Mt))),128))])]))}}),Bt={class:"py-8 text-base text-center text-black"},Dt={class:"mt-1.5 text-sm text-black-400"},Et={class:"flex"},Vt=F({props:{show:{type:Boolean},loading:{type:Boolean}},emits:["close","confirm"],setup(o,{emit:p}){const n=()=>{p("confirm")};return(d,_)=>{const l=E("van-button");return t(),C(Be,{width:"90%",show:o.show,name:d.$t("common.tip"),teleport:"body",onClose:_[1]||(_[1]=()=>{p("close")})},{default:L(()=>[a("div",Bt,[a("div",null,g(d.$t("ranking.Exit all lists")),1),a("div",Dt,g(d.$t("ranking.ExitTip")),1)]),a("div",Et,[$(l,{class:"plain-btn w-1/2 mx-2.5 text-[#FEA021] font-semibold",onClick:_[0]||(_[0]=()=>{p("close")})},{default:L(()=>[pe(g(d.$t("common.cancel")),1)]),_:1}),$(l,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:n,loading:o.loading},{default:L(()=>[pe(g(d.$t("common.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["show","name"])}}}),Nt=O(Vt,[["__scopeId","data-v-a5397e66"]]),Qt="/static/images/notOpen-C4u_k9Xa.png",jt={},qt=o=>(de("data-v-04ea101f"),o=o(),ve(),o),Ot={class:"flex flex-col items-center justify-centers min-h-[60vh] pt-[4.5625rem] text-center text-[#2E2008] bg-transparent rounded-t-2xl"},Ht=qt(()=>a("img",{class:"w-[7.0625rem] h-[5.75rem]",src:Qt},null,-1)),Pt={class:"font-semibold text-lg mt-6"},Gt={class:"text-sm mt-1 opacity-40"};function Wt(o,p){return t(),i("div",Ot,[Ht,a("div",Pt,g(o.$t("ranking.The community list is not yet open")),1),a("div",Gt,g(o.$t("ranking.Please look forward to it")),1)])}const Ut=O(jt,[["render",Wt],["__scopeId","data-v-04ea101f"]]),Xt={class:"relative"},Zt={class:"flex flex-col w-full h-auto bg-linear parent-view"},Jt={class:"relative my-2.5 mt-5"},Kt={key:0,class:"flex justify-center py-4"},Yt={key:0,src:Ze,class:"w-auto h-10"},en={key:1,src:Je,class:"w-auto h-10"},tn={key:2,src:Ke,class:"w-auto h-10"},nn={key:1,class:"flex justify-center py-4"},sn={key:0,src:Ye,class:"w-auto h-10"},on={key:1,src:et,class:"w-auto h-10"},an={key:2,src:tt,class:"w-auto h-10"},ln={class:"pb-2.5 flex items-center"},rn=F({name:"TalentRankingV1"});function un(o){const{reloadStore:p}=De(),n=te(),[d,_]=j(!1),[l,R]=j(!1),e=y({});y(null);const v=r=>{e.value={years:r.years,cycle:r.cycle},ce(),f()},m=y(null),f=async()=>{m.value=null;const{success:r,data:s}=await Pe({type:u.value,...e.value,cycleType:x.value});r&&(m.value=s,ne())},H=y({}),ne=async()=>{const{success:r,data:s}=await We({type:u.value,cycleType:x.value,...e.value});if(r){if(!m.value){H.value=s;return}m.value={...m.value,...s,myRanking:s.myRanking+1}}},V=y(!1),k=y(!1),h=y(0),S=y(9999),M=y(0),w=y([]),P=async()=>{var K;const r=u.value,s=x.value,I=await Ue({page:h.value,size:S.value,type:u.value,cycleType:x.value,...e.value});if(!I.success||!I.data){k.value=!0;return}for(let Y=0;Y<((K=I.data)==null?void 0:K.length);Y++)if(r!==u.value||s!==x.value)return;M.value=I.total,w.value=h.value===1?I.data:w.value.concat(I.data),w.value&&w.value.length>=M.value&&(k.value=!0),Ie(()=>{B&&B.scrollTo({top:J.value,behavior:"smooth"})})},G=ee(()=>w.value?w.value.slice(3):[]),W=ee(()=>[w.value[1],w.value[0],w.value[2]]),N=y(0),z=y({}),A=(r,s)=>{X(!0)},[U,X]=j(!1),ke=()=>{N.value=0},x=y(1),ge=r=>{x.value!==+r.value&&(e.value={},x.value=+r.value,J.value=0,x.value==3&&(Q(),f()))},u=y(1),he=r=>{u.value!==r&&(u.value=r,J.value=0,f(),Q())},[ye,se]=j(!1),[_e,ue]=j(!1),xe=async()=>{ue(!0);const{success:r}=await Ge();se(!1),r&&(Q(),f(),ue(!1))};ae(()=>n.currentRoute.value.query.type,r=>{if(u.value===+r)return;let s=1;n.currentRoute.value.path==="/talentRankingShop"&&(s=2),u.value=+r||s},{immediate:!0,deep:!0}),ae(()=>n.currentRoute.value.query.cycleType,r=>{x.value!==+r&&(x.value=+r||1)},{immediate:!0,deep:!0});const we=async()=>{V.value=!0,h.value+=1,await P(),V.value=!1},Q=()=>{h.value=0,k.value=!1,w.value=[],we()},ce=()=>{B&&(console.log(B.scrollTop),J.value=B.scrollTop),Q()},$e=()=>{X(!0)},Z=r=>{n.push(r)};let B=null;const J=y(0);return le(()=>{B=document.querySelector(".list__wrap"),x.value===3&&(Q(),f())}),(r,s)=>{const I=E("van-icon"),K=E("VanList"),Y=E("van-pull-refresh"),be=E("router-view");return t(),i("div",Xt,[a("div",Zt,[$(zt,{onChangeHeader:he}),a("div",Jt,[$(Ve,{onChangeTab:ge}),u.value===2?(t(),i("div",{key:0,class:"absolute right-2.5 top-1/2 -translate-y-1/2",onClick:s[0]||(s[0]=T=>Z(`/search-ranking?type=${u.value}&cycleType=${x.value}`))},[$(I,{name:"search",size:"20"})])):b("",!0)]),$(Y,{onRefresh:c(p).reload,class:"list__wrap flex-1 overflow-auto rounded-t-xl"},{default:L(()=>[w.value.length>0?(t(),i("div",Kt,[u.value===1?(t(),i("img",Yt)):u.value===2?(t(),i("img",en)):(t(),i("img",tn))])):(t(),i("div",nn,[u.value===1?(t(),i("img",sn)):u.value===2?(t(),i("img",on)):(t(),i("img",an))])),a("div",ln,[x.value==2&&u.value!=3?(t(),C(Ne,{key:0,class:"flex-shrink-0",pageType:"list",onOnConfirm:v})):b("",!0),x.value==1&&u.value!=3?(t(),C(Qe,{key:1,class:"flex-shrink-0",pageType:"list",onChangeTime:v})):b("",!0),$(At,{class:q({"ml-2.5":x.value===3||u.value==3})},null,8,["class"])]),w.value.length>0?(t(),C(Ct,{key:2,rankingTopList:c(W),onMakeRanking:A,onMakeRankingInfo:s[1]||(s[1]=(T,Re)=>{A()})},null,8,["rankingTopList"])):b("",!0),k.value&&M.value==0&&u.value!=3?(t(),C(He,{key:3})):u.value!=3?(t(),C(K,{key:4,loading:V.value,finished:k.value,"finished-text":r.$t("common.noMore"),class:"px-4 min-h-[40vh] pt-4 pb-[100px] relative z-10 bg-transparent"},{default:L(()=>[$(It,{list:c(G),onMakeRanking:A,onMakeRankingInfo:s[2]||(s[2]=(T,Re)=>{A()})},null,8,["list"])]),_:1},8,["loading","finished","finished-text"])):b("",!0),u.value==3?(t(),C(Ut,{key:5})):b("",!0)]),_:1},8,["onRefresh"]),c(l)?(t(),C(Fe,{key:0,show:c(l),type:N.value,info:z.value,onClose:s[3]||(s[3]=T=>c(R)(!1)),onChangeType:ke,onInit:ce,onHandleTo:Z},null,8,["show","type","info"])):b("",!0)]),$(be,{class:"child-view"}),$(Nt,{show:c(ye),loading:c(_e),onClose:s[4]||(s[4]=T=>c(se)(!1)),onConfirm:xe},null,8,["show","loading"]),c(d)&&z.value?(t(),C(Xe,{key:0,show:c(d),info:z.value,onClose:s[5]||(s[5]=T=>c(_)(!1))},null,8,["show","info"])):b("",!0),u.value!=3?(t(),C(lt,{key:1,type:u.value,cycleType:x.value,ownFunds:H.value,info:m.value,onToApply:$e,onToApplyShop:s[6]||(s[6]=T=>Z("/editShopInfo")),onToQuit:s[7]||(s[7]=T=>c(se)(!0))},null,8,["type","cycleType","ownFunds","info"])):b("",!0),$(Ee,{show:c(U),content:"原生态助力榜升级，可前往新店铺助力榜页面投票助力",showConfirm:!0,showReject:!0,confirmText:"前往新页面",noClose:"",onClose:s[8]||(s[8]=T=>c(X)(!1)),onConfirm:s[9]||(s[9]=T=>Z("/talentRanking")),onReject:s[10]||(s[10]=T=>c(X)(!1))},null,8,["show"])])}}const cn=F({...rn,setup:un}),$n=O(cn,[["__scopeId","data-v-5bd90902"]]);export{$n as default};
