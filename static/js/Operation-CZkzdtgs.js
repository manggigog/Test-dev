import{y as z,bc as oe,E as x,F as w,G as y,H as t,O as h,P as o,N as V,I as U,J as H,R as le,a0 as I,K,a2 as W,Q as l,$ as ce,_ as ie,w as re,r as k,x as S,bd as de,D as ue,T as pe,Y as me,Z as _e,n as ye}from"./vendor-CjApaIpB.js";import{v as fe,w as ve,b8 as be,A as d,D as $,E as D,F as M,G as L,H as T,r as ge,q as A,B as he,s as xe,d as j,b7 as R}from"./index-lKIcPnY0.js";import{_ as we}from"./LinkAddress-7XMBvltH.js";import{n as Fe}from"./nftContract-L2378X3K.js";const ke="/Test-dev/static/images/tip-icon-BgBW1BFB.svg",Ce="/Test-dev/static/images/lang-Koz5IXIg.svg",Ee={id:"lan",class:"text-black"},Be=t("img",{class:"w-8 h-8",src:Ce,alt:""},null,-1),$e=[Be],De={class:"w-[150px] mt-20 ml-auto bg-[#f9f9f9] rounded-xl box-1 px-4"},Me=["onClick"],Le=z({setup(i){const{langs:r,currentLocale:p,changeLocale:C}=fe(),[f,F]=oe(!1),E=a=>{ve(a),C(a),F(!1)};return(a,s)=>{const v=x("van-icon"),e=x("VanPopup");return y(),w("div",Ee,[t("div",{onClick:s[0]||(s[0]=c=>o(F)(!o(f)))},$e),h(e,{show:o(f),"onUpdate:show":s[1]||(s[1]=c=>ce(f)?f.value=c:null),position:"top",style:{background:"transparent",width:"80%","min-width":"300px","max-width":"335px"}},{default:V(()=>[t("div",De,[(y(!0),w(U,null,H(o(r),c=>(y(),w("div",{key:c.key,class:le(["font-Silom py-1 leading-10 border-b border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":o(p)===c.key}]),onClick:B=>E(c.key)},[I(l(c.text)+" ",1),o(p)===c.key?(y(),K(v,{key:0,name:"success",alt:""})):W("",!0)],10,Me))),128))])]),_:1},8,["show"])])}}}),Te=()=>{const i=be(),r=i==null?void 0:i.cns,p=i==null?void 0:i.address;return{buy:async a=>{try{const s=await r.estimateGas.buy(d(a)),e=await(await r.buy(d(a),{gasLimit:D(s,1e3),...$})).wait();return M(e)}catch(s){return L(s),T(s,p,"buy",{coin:d(a)})}},donate:async a=>{try{const s=await r.estimateGas.donate(d(a)),e=await(await r.donate(d(a),{gasLimit:D(s,1e3),...$})).wait();return M(e)}catch(s){return L(s),T(s,p,"donate",{amount:d(a)})}},sell:async a=>{try{const s=await r.estimateGas.sell(d(a)),e=await(await r.sell(d(a),{gasLimit:D(s,1e3),...$})).wait();return M(e)}catch(s){return L(s),T(s,p,"sell",{coin:d(a)})}},reduceCoin:async a=>{try{const s=await r.estimateGas.reduceCoin(d(a)),e=await(await r.reduceCoin(d(a),{gasLimit:D(s,1e3),...$})).wait();return M(e)}catch(s){return L(s),T(s,p,"reduceCoin",{coin:d(a)})}}}},Ve=i=>(me("data-v-8f0ba03e"),i=i(),_e(),i),Se={class:"w-full h-full container-bg"},Ie={class:"sticky top-0 z-10 flex items-center justify-between px-3 pt-3 mb-6 text-lg text-white"},Pe={class:"text-xl font-semibold text-[#2E2008]"},Ge={class:"flex"},Ne={class:"px-3"},Ae={class:"px-3 pt-3 rounded-xl bg-[#FFFDF8]"},je={class:"rounded-md bg-[#FFF8EC] px-4 pt-5"},Re={class:"text-shadow mb-7"},ze={class:"flex justify-between mb-5"},Ue={class:"text-sm font-semibold"},He={class:"text-[#928D84]"},Ke={class:"flex justify-between pb-6"},We={class:"text-sm font-semibold"},qe={class:"text-[#928D84]"},Je={class:"px-4 pt-5"},Oe={class:"flex justify-between mb-5"},Qe={class:"text-sm font-semibold"},Xe={class:"text-[#928D84]"},Ye={class:"flex justify-between pb-5"},Ze={class:"text-sm font-semibold"},et={class:"text-[#928D84]"},tt={class:"rounded-xl bg-[#FFFDF8] px-3 mt-5"},st={class:"text-[#2E2008] text-sm font-semibold mt-5"},at={class:"mt-4 px-4 py-5 bg-[#FFF8EC] rounded-xl"},nt={class:"py-5 text-center"},ot={key:0,class:"flex justify-center text-xs text-[#483535] pb-5"},lt=Ve(()=>t("img",{class:"w-4 h-4",src:ke,alt:""},null,-1)),ct=z({setup(i){const{coinPool:r,tokenPrice:p,tokenPool:C,payToken:f,userList:F}=Fe(),{buy:E,donate:a,sell:s,reduceCoin:v}=Te(),{t:e}=re(),{loadingToggle:c}=ge(),B=k("0"),u=k(null),P=k("0"),G=k("0"),g=k(1),q=S(()=>({1:e("common.buy"),2:e("admin.sell"),3:e("nft.donate energy"),4:e("nft.donate MC")})),J=S(()=>m.systemMc*.8/+B.value||0),O=S(()=>[{label:e("nft.purchase energy"),type:1,coin:null,title:e("admin.purchase-energy-input"),placeholder:e("admin.purchase-energy-placeholder",{num:parseFloat(J.value.toFixed(2))})},{label:e("nft.sell energy"),type:2,coin:null,title:e("admin.sell-energy-input"),placeholder:e("admin.sell-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate energy"),type:3,coin:null,title:e("admin.donate-energy-input"),placeholder:e("admin.donate-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate MC"),type:4,coin:null,title:e("admin.donate-MC-input"),placeholder:e("admin.donate-MC-placeholder",{num:parseFloat(m.systemMc.toFixed(2))})}]),m=de({systemEnergy:0,systemMc:0}),Q=async()=>{c(!0);let n;if(u.value&&u.value>0)switch(g.value){case 1:n=await E(u.value);break;case 2:n=await s(u.value);break;case 3:n=await v(u.value);break;case 4:n=await a(u.value);break}else return;c(!1),n.success&&(pe(e("admin.Successful-operation")),N())},X=n=>{ye(()=>{u.value=n>=0?n:0})},Y=async()=>{const{success:n,result:_}=await F(0,A.gold);n&&(m.systemEnergy=+he(_.coin))},Z=async()=>{const{balanceOf:n}=xe(await f()),_=await n(A.gold);m.systemMc=+_},N=async()=>{u.value=null,c(!0),B.value=await p(),P.value=await r(),G.value=await C(),Y(),Z(),c(!1)};return ue(async()=>{N()}),(n,_)=>{const ee=x("van-field"),te=x("van-tab"),se=x("van-tabs"),ae=x("VanButton");return y(),w("div",Se,[t("div",Ie,[t("div",Pe,l(o(e)("admin.title")),1),t("div",Ge,[h(Le,{class:"mr-2.5"}),h(we)])]),t("div",Ne,[t("div",Ae,[t("div",je,[t("div",Re,l(o(j)(B.value||0))+" MC",1),t("div",ze,[t("span",Ue,l(n.$t("nft.Total Supply")),1),t("span",He,l(o(R)(o(j)(P.value,6))),1)]),t("div",Ke,[t("span",We,l(n.$t("nft.Pool Balance")),1),t("span",qe,l(o(R)(+G.value))+" Â Mcoin",1)])]),t("div",Je,[t("div",Oe,[t("span",Qe,l(n.$t("nft.system energy value")),1),t("span",Xe,l(parseFloat(o(m).systemEnergy.toFixed(2))),1)]),t("div",Ye,[t("span",Ze,l(n.$t("nft.system mc balance")),1),t("span",et,l(parseFloat(o(m).systemMc.toFixed(2))),1)])])]),t("div",tt,[h(se,{active:g.value,"onUpdate:active":_[1]||(_[1]=b=>g.value=b),"title-active-color":"#2E2008","title-inactive-color":"#ADA9A2","line-width":"3.6rem",background:"#FFFDF8",ellipsis:!1,swipeable:""},{default:V(()=>[(y(!0),w(U,null,H(o(O),b=>(y(),K(te,{"title-style":"font-weight: 600",title:b.label,name:b.type,key:b.label},{default:V(()=>[t("div",st,l(b.title),1),t("div",at,[h(ee,{"onUpdate:modelValue":[X,_[0]||(_[0]=ne=>u.value=ne)],modelValue:u.value,type:"number",min:0,placeholder:b.placeholder,style:{"background-color":"#fff8ec"}},null,8,["modelValue","placeholder"])])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"]),t("div",nt,[h(ae,{disabled:!u.value,class:"w-1/2 font-semibold text-white btn-bg rounded-xl",onClick:Q},{default:V(()=>[I(l(o(q)[g.value]||o(e)("common.buy")),1)]),_:1},8,["disabled"])]),g.value==1||g.value==2?(y(),w("div",ot,[lt,I(" "+l(n.$t("nft.Executededuction")),1)])):W("",!0)])])])}}}),pt=ie(ct,[["__scopeId","data-v-8f0ba03e"]]);export{pt as default};
