import{y as F,l as G,E as W,F as n,G as r,H as t,a3 as V,a4 as D,P as o,Q as s,I as O,J as q,a2 as h,O as H,B as u,a0 as $,w as E,r as P,x as T,D as z,R as J}from"./vendor-D6JO6WHW.js";import{_ as w}from"./MCOIN-BcbOHmhy.js";import{u as Q,p as L}from"./useOrderStatus-DeHjEZ0k.js";import{P as R}from"./order-B5BGKYED.js";import{d as m,f as K,s as X,q as Y,l as Z,h as I}from"./index-Ds2hFbCb.js";import{P as N}from"./flashSale-DDyqLyYN.js";import{u as tt}from"./useShipTemplate-DNIdMMsN.js";import{d as et}from"./default-avatar-C3GeIXRh.js";import{_ as M}from"./USDT-BFPkoPAz.js";import{_ as st}from"./FMCP-CFalj3L2.js";import{_ as U}from"./copy-w-7FY5xbhR.js";const ot={class:"p-3 bg-white rounded-xl font-Puhui"},nt={class:"flex justify-between"},rt={class:"flex items-center overflow-hidden"},it=["src"],lt={class:"text-sm font-semibold text-b1 line-clamp-1 ml-1"},at={class:"font-semibold text-[#FF8812] text-sm line-clamp-1 ml-auto"},ct={key:0},dt={key:1},mt={key:2},ut={class:"flex w-full gap-2"},ht={class:"flex-1 flex flex-col min-h-[5rem] justify-between"},ft={class:"w-full font-semibold"},xt={class:"text-sm text-b1 font-semibold line-clamp-1 leading-5"},yt={class:"flex items-center"},_t={class:"text-sm text-b3 font-normal"},vt=t("div",{class:"w-full h-[18px]"},null,-1),bt={class:"flex justify-between mt-[2px]"},pt={class:"flex items-center"},$t={key:0,class:"text-sm text-b3 line-clamp-1 min-w-fit font-normal"},wt=t("div",{class:"flex-shrink-0"},[t("img",{class:"w-[17px] h-[17px]",src:w})],-1),At={class:"text-b1 text-sm font-normal ml-1"},kt={key:0,class:"text-b3 text-sm font-normal ml-1 line-through"},gt={class:"flex items-center text-b3 font-normal"},jt={key:0,class:"flex justify-between mt-2"},St={class:"text-sm font-normal text-b3 line-clamp-1"},Tt={key:0},Rt={key:1},Ct={class:"text-[#FF8812] text-sm font-normal font-Puhui"},Bt={key:0},Pt={key:0},Nt={key:1},Ot={key:1},It={key:0},Dt={key:1},Et=$(") "),ds=F({props:{order:null,isList:{type:Boolean},showPrice:{type:Boolean,default:!0},showShippingTemplate:{type:Boolean,default:!1}},setup(e){const c=e,A=G(),_=Q(c.order.refundStatus,c.order.payType),f=i=>{const v=new u(i.price).minus(new u(i.goodsActivityReduceAmount||0).div(i.number)).plus(new u(i.goodsAdjustChangeAmount||0).div(i.number)).toNumber();return m(v||0)},p=i=>(i==null?void 0:i.goodsActivityReduceAmount)||(i==null?void 0:i.goodsAdjustChangeAmount),b=i=>new u(i.price).toNumber(),x=i=>{A.push(i)},{getExpressTypeText:k}=tt();return(i,v)=>{const C=W("VanImage");return r(),n("div",ot,[t("div",nt,[t("div",{class:"flex-start flex items-center w-full",onClick:v[0]||(v[0]=D(a=>x(`/category?deliveryType=1&shopId=${e.order.stores.id}`),["stop"]))},[t("div",rt,[t("img",{src:e.order.stores.logo||o(et),class:"w-6 h-6 rounded-[4px] object-cover"},null,8,it),t("div",lt,s(e.order.stores.storeName||"--"),1)]),t("div",at,[e.order.status==-1?(r(),n("span",ct,s(i.$t("order.canceled")),1)):e.order.status===0&&e.order.hash?(r(),n("span",dt,s(i.$t("order.wait block chain")),1)):(r(),n("span",mt,s(o(_)[e.order.status+""]),1))])])]),(r(!0),n(O,null,q(e.order.orderGoods,a=>{var g,j,B;return r(),n("div",{class:"mt-3",key:a.goodsName},[t("div",null,[t("div",ut,[H(C,{onClick:D(l=>x(`/buyerOrderList/detail?id=${a.goodsId}`),["stop"]),src:(a.icons||"").split(",")[0],class:"w-20 h-20 overflow-hidden rounded-[8px]",alt:"",fit:"cover"},null,8,["onClick","src"]),t("div",ht,[t("div",ft,[t("div",xt,s(a.goodsName),1),t("div",yt,[t("div",_t,s(i.$t("order.quantity",{number:a.number||0})),1)]),vt,t("div",bt,[t("div",pt,[e.order.payType===o(N).STORE_CARD?(r(),n("span",$t,s(a.cardPrice||0)+s((g=e.order.fmStoredCard)==null?void 0:g.symbol),1)):(r(),n(O,{key:1},[wt,t("div",null,[t("span",At,s(f(a)),1)]),p(a)?(r(),n("div",kt,s(o(m)(b(a))),1)):h("",!0)],64))]),t("div",gt,s(o(k)(a)),1)])])])])]),e.showPrice?(r(),n("div",jt,[t("span",St,[e.order.paySource?(r(),n("span",Tt,s(o(L)(+e.order.paySource)),1)):(r(),n("span",Rt,s(i.$t("order.payAmount"))+" :",1))]),t("div",Ct,[+e.order.paySource!==o(R).USDT_WALLET?(r(),n("div",Bt,[e.order.payType===o(N).STORE_CARD?(r(),n("span",Pt,s(o(m)(+new o(u)(a.cardPrice).times(a.number??1)||0))+" "+s((j=e.order.fmStoredCard)==null?void 0:j.symbol),1)):(r(),n("span",Nt,s(o(m)(+new o(u)(a.price).times(a.number??1).minus(a.goodsActivityReduceAmount||0)||0))+" Mcoin",1))])):(r(),n("div",Ot,[$(s(o(m)(e.order.totalUsdt))+"USDT(",1),e.order.payType===o(N).STORE_CARD?(r(),n("span",It,s(o(m)(+new o(u)(a.cardPrice).times(a.number??1)||0))+" "+s((B=e.order.fmStoredCard)==null?void 0:B.symbol),1)):(r(),n("span",Dt,s(o(m)(+new o(u)(a.price).times(a.number??1).minus(a.goodsActivityReduceAmount||0)||0))+" Mcoin",1)),Et]))])])):h("",!0)])}),128)),V(i.$slots,"default")])}}}),Lt={class:"title text-b1 text-sm font-semibold"},Mt={class:"content"},Ut={key:0,class:"flex justify-between items-center h-[44px]"},Ft={class:"text-b3 text-sm font-normal"},Gt={class:"text-b1 text-sm font-normal text-right"},Wt={key:0,class:"text-right"},Vt={class:"flex items-center justify-end gap-1"},qt=t("img",{src:M,class:"w-4 h-4 inline-block"},null,-1),Ht={class:"text-xxs text-b3"},zt=t("span",null,"（",-1),Jt=t("span",null,"）",-1),Qt={key:1,class:"flex items-center justify-end gap-1"},Kt=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),Xt={key:1,class:"flex justify-between items-center h-[44px]"},Yt={class:"text-b3 text-sm font-normal"},Zt={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},te=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),ee={class:"text-sm text-b1 font-semibold"},se={key:2,class:"flex justify-between items-center h-[44px]"},oe={class:"text-b3 text-sm font-normal"},ne={class:"text-b1 text-sm font-normal text-right"},re={key:3,class:"flex justify-between items-center h-[44px]"},ie={class:"text-b3 text-sm font-normal line-clamp-1 max-w-[100px]"},le={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},ae=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),ce={class:"text-sm text-b1 font-semibold text-right"},de={key:4,class:"flex justify-between items-center h-[44px]"},me={class:"text-b3 text-sm font-normal"},ue={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},he=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),fe={class:"text-sm text-b1 font-semibold text-right"},xe=t("div",{class:"divider h-[1px] bg-b4"},null,-1),ye={key:5,class:"flex justify-between items-center h-[44px]"},_e={class:"text-b3 text-sm font-normal"},ve={class:"text-b1 text-sm font-normal text-right"},be={class:"flex items-center justify-end gap-1"},pe={key:0,class:"flex items-center justify-end gap-1"},$e=t("img",{src:M,class:"w-4 h-4 inline-block"},null,-1),we={key:1,class:"flex items-center justify-end gap-1"},Ae=t("img",{src:w,class:"w-4 h-4"},null,-1),ke=$(" + "),ge=t("img",{src:st,class:"w-4 h-4"},null,-1),je={class:"text-xxs text-b3 font-normal"},Se={key:6,class:"flex justify-between items-center h-[44px]"},Te={class:"text-b3 text-sm font-normal"},Re={class:"text-b1 text-sm font-normal text-right"},Ce={class:"flex items-center justify-end gap-1"},Be={class:"flex items-center justify-end gap-1"},Pe=t("img",{src:w,class:"w-4 h-4"},null,-1),ms={props:{order:{type:Object,required:!0},isBuyer:{type:Boolean,default:!1}},setup(e){const c=e,{t:A}=E(),_=P(1),{tradeContributeSelfRate:f,mcoinRate:p}=K(),b=P(null),x=T(()=>1/b.value),k=async()=>{b.value=await p(),console.log("pointRate.value",b.value)},i=T(()=>{var l;return!((l=c.order)!=null&&l.totalAmount)||!x.value?0:new u(c.order.totalAmountOriginal).times(x.value).toNumber()}),v=T(()=>{var l;return!((l=c.order)!=null&&l.totalAmount)||!x.value?0:new u(c.order.totalAmount).times(x.value).toNumber()}),C=async()=>{_.value=await f()},a=T(()=>{var y;if(!((y=c.order)!=null&&y.orderGoods))return 0;let l=new u(0);return c.order.orderGoods.forEach(d=>{if(+c.order.payType==1&&+d.payType==3||+d.payType!=2&&+d.payType!=3){const S=new u(d.price).times(d.number).minus(d.goodsActivityReduceAmount||0).plus(d.goodsAdjustChangeAmount||0).times(new u(d.discountRatio||0).div(100));l=l.plus(S)}}),l.times(_.value).toNumber()}),g=P(0),j=T(()=>{var S;if(!((S=c.order)!=null&&S.orderGoods)||g.value<=0)return 0;const l=a.value||0,y=_.value;let d=0;return c.isBuyer?d=Math.min(g.value,new u(l).div(y).times(.5).toNumber()):d=Math.min(c.order.voucherAmount,new u(l).div(y).times(.5).toNumber()),d}),B=T(()=>{var d;const l=new u(((d=c.order)==null?void 0:d.totalAmount)||0),y=new u(j.value||0);return l.minus(c.order.paySource==R.WITHDRAW_POINTS?y:0).toNumber()});return z(async()=>{g.value=await X(Y.FMCP).balanceOf(),await C(),await k()}),(l,y)=>{var d;return r(),n("div",{class:"p-3 pb-0 break-all bg-white rounded-xl",onScroll:y[0]||(y[0]=(...S)=>l.handleScroll&&l.handleScroll(...S))},[t("div",Lt,s(l.$t("order.totalPriceDetail")),1),t("div",Mt,[e.isBuyer?(r(),n("div",Ut,[t("div",Ft,s(l.$t("order.total price detail")),1),t("div",Gt,[+e.order.paySource===o(R).USDT_WALLET?(r(),n("div",Wt,[t("span",Vt,[qt,$(" "+s(o(m)(o(i))),1)]),t("span",Ht,[zt,t("span",null,s(o(m)(o(i)))+" USDT",1),t("span",null,s(l.$t("common.willAutoExchange")),1),t("span",null,s(o(m)(e.order.totalAmountOriginal))+" Mcoin",1),Jt])])):(r(),n("div",Qt,[Kt,t("span",null,s(o(m)(e.order.totalAmountOriginal)),1)]))])])):h("",!0),e.isBuyer?h("",!0):(r(),n("div",Xt,[t("div",Yt,s(l.$t("order.total")),1),t("div",Zt,[te,t("p",ee,s(o(m)(e.order.totalAmountOriginal)),1)])])),e.isBuyer?(r(),n("div",se,[t("div",oe,s(l.$t("common.pay type method")),1),t("div",ne,s(o(L)(+e.order.paySource)),1)])):h("",!0),e.order.fmGeneralActivity&&e.order.activityReduceAmount?(r(),n("div",re,[t("div",ie,s(((d=e.order.fmGeneralActivity)==null?void 0:d.name)||"-"),1),t("div",le,[ae,t("p",ce,[t("span",null,s(e.order.activityReduceAmount||0),1)])])])):h("",!0),e.order.merchantAdjustAmount?(r(),n("div",de,[t("div",me,s(l.$t("order.merchant_modify_price")),1),t("div",ue,[t("span",null,s(e.order.merchantAdjustAmount>0?"+":"-"),1),he,t("p",fe,[t("span",null,s(Math.abs(e.order.merchantAdjustAmount)||0),1)])])])):h("",!0),xe,e.isBuyer?(r(),n("div",ye,[t("div",_e,s(l.$t("order.actual payment")),1),t("div",ve,[t("div",be,[+e.order.paySource===o(R).USDT_WALLET?(r(),n("div",pe,[$e,$(" "+s(o(m)(o(v))),1)])):(r(),n("div",we,[Ae,t("span",null,s(o(m)(o(B))),1)])),o(j)>0&&e.order.paySource==o(R).WITHDRAW_POINTS?(r(),n(O,{key:2},[ke,ge,$(" "+s(o(m)(o(j))),1)],64)):h("",!0)]),t("div",je,s(l.$t("order.getContribution",{num:o(m)(o(a))})),1)])])):h("",!0),e.isBuyer?h("",!0):(r(),n("div",Se,[t("div",Te,s(l.$t("order.total price actual")),1),t("div",Re,[t("div",Ce,[t("div",Be,[Pe,t("span",null,s(o(m)(e.order.totalAmount)),1)])])])]))])],32)}}},Ne={class:"p-3 break-all bg-white rounded-xl"},Oe={class:"title text-b1 text-sm font-semibold"},Ie={class:"content"},De={class:"flex justify-between items-center mt-[16px]"},Ee={class:"text-b3 text-sm font-normal"},Le={class:"text-b1 text-sm font-normal text-right"},Me={class:"flex justify-between mt-[16px]"},Ue={class:"text-sm font-normal text-b3"},Fe={class:"text-sm text-b1 font-normal flex justify-end items-center"},Ge=t("img",{src:U,class:"w-5 h-5"},null,-1),We=[Ge],us={props:{order:{type:Object,required:!0}},setup(e){return(c,A)=>(r(),n("div",Ne,[t("div",Oe,[t("span",null,s(c.$t("order.orderInfo")),1)]),t("div",Ie,[t("div",De,[t("div",Ee,s(c.$t("order.createTime")),1),t("div",Le,s(o(Z)(e.order.createTime)),1)]),t("div",Me,[t("div",Ue,s(c.$t("order.orderNumber")),1),t("div",Fe,[$(s(e.order.id)+" ",1),t("div",{class:"ml-1",onClick:A[0]||(A[0]=(..._)=>o(I)&&o(I)(..._))},We)])])])]))}},Ve={class:"flex justify-between"},qe={class:"text-sm font-semibold w-full"},He={key:0,class:"text-b3 font-normal"},ze={key:1,class:"text-b1 font-semibold w-full flex flex-row items-center justify-between"},Je=t("img",{src:U,class:"w-5 h-5",alt:""},null,-1),Qe=[Je],Ke={key:0,class:"text-sm text-b3 font-normal min-w-max"},Xe={key:0,class:"text-sm text-b3 font-normal mt-2 flex items-center"},Ye={class:"w-full break-all"},hs={props:{order:{type:Object,required:!0},arrow:{type:Boolean,default:!1},isBuyer:{type:Boolean,default:!1}},setup(e){const c=e,{t:A}=E(),_=()=>{var p;const f=((p=c.order.userAddress)==null?void 0:p.postscript)||"--";I(f)};return(f,p)=>{var b,x,k,i,v;return r(),n("div",{class:J(["p-3 break-all bg-white rounded-xl",[(b=e.order.userAddress)!=null&&b.postscript?"py-3":"py-4"]])},[t("div",Ve,[t("div",qe,[(x=e.order.userAddress)!=null&&x.postscript?(r(),n("div",ze,[t("span",null,s(f.$t("order.sellerRemark")),1),t("div",{onClick:_},Qe)])):(r(),n("span",He,s(e.isBuyer?f.$t("order.orderRemark"):f.$t("order.sellerRemark")),1))]),(k=e.order.userAddress)!=null&&k.postscript?h("",!0):(r(),n("div",Ke,s(f.$t("order.noRemark")),1))]),(i=e.order.userAddress)!=null&&i.postscript?(r(),n("div",Xe,[t("div",Ye,s(((v=e.order.userAddress)==null?void 0:v.postscript)||""),1)])):h("",!0)],2)}}};export{hs as _,ds as a,ms as b,us as c};
