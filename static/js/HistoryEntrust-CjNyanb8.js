import{_ as H,z as M,x as X,a2 as U,r as l,y as Y,bl as Z,F as k,Z as A,H as _,$ as g,I as s,Q as f,P as p,a3 as O,O as a,N as z,a0 as P,G as B,K as G,J,a4 as R,X as K,Y as Q,o as ee}from"./vendor-Dr_RpJ_Y.js";import{E as te}from"./Item-DnmkjaNu.js";import{aA as C,g as oe}from"./index-LRhcxFAI.js";import{B as se}from"./BackIcon-CDrGaEPo.js";import{h as ne}from"./otc-CR7_hS-a.js";import{q as le}from"./bei-BYWDjbaB.js";const ie=""+new URL("../images/filter-BdP5HjSE.svg",import.meta.url).href,ae=d=>(K("data-v-084b4ed8"),d=d(),Q(),d),re={class:"relative p-4 pb-[92px]"},de={class:"text-lg leading-[26px] text-b1 font-bold text-center"},me={class:"mt-4 text-sm text-b1 font-semibold"},ue={class:"mt-3 flex items-center"},ce=ae(()=>s("div",{class:"shrink-0 mx-2 w-3 h-[1.5px] bg-b1"},null,-1)),fe={class:"mt-4 text-sm text-b1 font-semibold"},pe={class:"mt-3 flex items-center justify-start gap-2"},ve=["onClick"],Te={class:"absolute bottom-0 left-1/2 -translate-x-1/2 z-10 w-full sm:w-[375px] py-4 px-3 flex justify-between gap-3"},be=M({props:{show:{type:Boolean}},emits:["close","filter"],setup(d,{emit:$}){const{show:F}=d,{t:h}=X(),[m,u]=U(!1),[y,c]=U(!1),v=l(),w=l(),D=l(new Date(new Date("2020/1/1").getTime())),S=l(),E=Y(()=>[{id:0,label:h("common.all")},{id:1,label:h("common.buy filter")},{id:2,label:h("common.sale filter")}]),t=Z({startTime:null,endTime:null}),V=()=>{t.endTime=null,t.startTime=null,T.value=0,x.value=0},T=l(0),I=e=>{T.value=e},x=l(0),b=()=>{u(!1),c(!1),(!t.startTime||!t.endTime)&&(t.endTime=null,t.startTime=null)},q=e=>{v.value=new Date(C(e)),S.value=new Date(new Date(e).getTime()),t.startTime=C(v.value),u(!1),c(!0)},L=e=>{w.value=new Date(C(e)),t.startTime=C(v.value),t.endTime=C(e),c(!1)},o=()=>{const e={direct:T.value,clinch:x.value,startTime:t.startTime?t.startTime+" 00:00:00":t.startTime,endTime:t.endTime?t.endTime+" 23:59:59":t.endTime};$("filter",e)};return(e,n)=>{const r=k("van-datetime-picker"),j=k("van-popup"),N=k("VanButton"),W=k("VanPopup");return _(),A(W,{show:d.show,"onUpdate:show":n[6]||(n[6]=i=>P(F)?F.value=i:null),position:"bottom",round:"",class:"bg-white rounded-t-2xl",teleport:"body",closeable:"","close-on-click-overlay":"",onClose:n[7]||(n[7]=()=>{$("close")})},{default:g(()=>[s("div",re,[s("div",null,[s("div",de,f(e.$t("common.filter")),1)]),s("div",me,f(e.$t("common.Time")),1),s("div",ue,[s("div",{class:"w-full h-[36px] rounded-md bg-b5 flex justify-center items-center text-b1 text-sm font-normal",onClick:n[0]||(n[0]=O(i=>a(u)(!0),["stop"]))},[s("div",{class:z({"text-[#999]":!a(t).startTime})},f(a(t).startTime||e.$t("goods.selectStartTime")),3)]),ce,s("div",{class:"w-full h-[36px] rounded-md bg-b5 flex justify-center items-center text-b1 text-sm font-normal",onClick:n[1]||(n[1]=O(i=>a(u)(!0),["stop"]))},[s("div",{class:z({"text-[#999]":!a(t).endTime})},f(a(t).endTime||e.$t("goods.selectEndTime")),3)]),p(j,{show:a(m),"onUpdate:show":n[3]||(n[3]=i=>P(m)?m.value=i:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"}},{default:g(()=>[p(r,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=i=>v.value=i),"min-date":D.value,type:"date",title:e.$t("goods.selectStartTime"),onCancel:b,onConfirm:q},null,8,["modelValue","min-date","title"])]),_:1},8,["show"]),p(j,{show:a(y),"onUpdate:show":n[5]||(n[5]=i=>P(y)?y.value=i:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"}},{default:g(()=>[p(r,{modelValue:w.value,"onUpdate:modelValue":n[4]||(n[4]=i=>w.value=i),onConfirm:L,"min-date":S.value,onCancel:b,type:"date",title:e.$t("goods.selectEndTime")},null,8,["modelValue","min-date","title"])]),_:1},8,["show"])]),s("div",fe,f(e.$t("common.direction")),1),s("div",pe,[(_(!0),B(J,null,G(a(E),i=>(_(),B("div",{class:z(["w-1/3 h-[36px] !rounded-md flex justify-center items-center text-sm font-normal",T.value===i.id?"bg-[#FFF8EC] border border-solid border-newOrigin text-newOrigin":"bg-b5 border-none text-b1"]),key:i.id,onClick:Ee=>I(i.id)},f(i.label),11,ve))),128))]),s("div",Te,[p(N,{class:"w-full h-[46px] !rounded-full flex items-center justify-center bg-white border border-solid border-b4 text-base text-b1 font-normal",onClick:V},{default:g(()=>[R(f(e.$t("common.reset")),1)]),_:1}),p(N,{class:"w-full h-[46px] !rounded-full flex items-center justify-center !bg-btnOrBg !border-none text-base text-b1 font-semibold",onClick:o},{default:g(()=>[R(f(e.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])}}}),he=H(be,[["__scopeId","data-v-084b4ed8"]]),ye=d=>(K("data-v-7871899c"),d=d(),Q(),d),we={class:"relative h-full bg-[#F5F5F5] font-Puhui safe-bottom-page"},xe={class:"sticky top-[0rem] z-50 w-full h-[3.125rem] px-[1rem] bg-[#FFFFFF] flex items-center"},ge={class:"relative w-full flex justify-between items-center"},_e={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[18.75rem] flex justify-center items-center"},$e={class:"text-[#2E2008] text-[1.125rem] not-italic font-bold leading-[1.625rem] text-center"},Ce=ye(()=>s("img",{src:ie,class:"w-[20px] h-[20px]"},null,-1)),ke=[Ce],Fe={class:"relative mx-[0.75rem] my-[0.75rem] overflow-hidden"},Se=M({setup(d){const $=ee(),[F,h]=U(!1),m=l(!1),u=l(!1),y=l(0),c=l(0),v=l(10),w=l(0),D=l(null),S=1,E=l(""),t=l(""),V=$.query.key,T=$.query.type,I=async()=>{m.value=!0,c.value+=1,await q(),m.value=!1},x=l([]),b=l([]),q=async()=>{const o={type:y.value,startTime:E.value,endTime:t.value,userAddress:oe[`otc${V}`]};o.type===0&&delete o.type,o.startTime||delete o.startTime,o.endTime||delete o.endTime,V||delete o.userAddress;let e={queryStartTime:null,queryEndTime:null,type:null};Number(T)===2&&(e.queryStartTime=o.startTime,e.queryEndTime=o.endTime,e.type=o.type),e.queryStartTime||delete e.queryStartTime,e.queryEndTime||delete e.queryEndTime,e.type||delete e.type;const r=await(+T==2?le({...e,page:c.value,size:v.value}):ne({page:c.value,size:v.value},{...o}));if(m.value=!1,!r.success){u.value=!0;return}w.value=r.total,x.value=r.data,b.value=c.value===1?x.value:b.value.concat(x.value),b.value.length>=w.value?u.value=!0:u.value=!1},L=o=>{c.value=1,y.value=o.direct,D.value=o.clinch,E.value=o.startTime,t.value=o.endTime,h(!1),b.value=[],q()};return(o,e)=>{const n=k("VanList");return _(),B("div",we,[s("div",xe,[s("div",ge,[p(se),s("div",_e,[s("span",$e,f(o.$t("common.Historical transactions")),1)]),s("div",{onClick:e[0]||(e[0]=r=>a(h)(!0))},ke)])]),s("div",Fe,[p(n,{loading:m.value,"onUpdate:loading":e[1]||(e[1]=r=>m.value=r),finished:u.value,"finished-text":o.$t("common.noMore"),"loading-text":o.$t("common.loading"),onLoad:I},{default:g(()=>[(_(!0),B(J,null,G(b.value,(r,j)=>(_(),A(te,{key:j,type:S,routerType:+a(T),info:r},null,8,["routerType","info"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),p(he,{show:a(F),onClose:e[2]||(e[2]=r=>a(h)(!1)),onFilter:L},null,8,["show"])])}}}),Le=H(Se,[["__scopeId","data-v-7871899c"]]);export{Le as default};
