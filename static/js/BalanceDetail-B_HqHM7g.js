import{z as P,x as ct,r as u,G as r,H as n,J as K,K as Q,I as t,U as R,Q as a,N as Y,a2 as Z,y as W,B as I,Z as B,O as i,an as at,q as tt,a4 as X,a3 as wt,_ as et,o as dt,E as st,F as E,P as L,$ as V,a0 as nt,X as rt,Y as ut,bl as ot,bX as $t,bC as bt,bL as kt,ad as Ft}from"./vendor-Dr_RpJ_Y.js";import{e as D,d as At,f as J,a as Lt,O as Tt,r as it,G as O,a8 as Bt}from"./index-CU2nzZe6.js";import{_ as Ct}from"./date-picker-DvSovh-1.js";import{_ as Et}from"./arrow-bottom-CNhURWY_.js";import{_ as G}from"./arrow-right-BueA_z4m.js";import{a as It,q as Dt,b as St,g as lt}from"./piggyBank-0ChZtUOO.js";import{p as pt}from"./piggyBank-ttfOTM2O.js";import{a as Vt}from"./storeValue-BLYIZf4O.js";import{B as Nt}from"./BackIcon-CDrGaEPo.js";const Pt={class:"w-full h-[33.5px] px-[0.75rem] bg-[#FFF] flex items-center"},qt=["onClick"],zt={key:0,class:"absolute bottom-[1px] w-full h-[3px] bg-[#2E2008]"},Mt=P({props:{type:null},emits:["tabChange"],setup(e,{emit:l}){const{t:g}=ct(),h=u([{type:1,name:g("piggy.Fund_details")},{type:2,name:g("piggy.Holdings")}]),d=s=>{l("tabChange",s)};return(s,p)=>(n(),r("div",Pt,[(n(!0),r(K,null,Q(h.value,y=>(n(),r("div",{class:"relative mr-[1rem] w-fit h-full flex",onClick:S=>d(y.type),key:y.type},[t("span",{class:Y(["font-PuHuiTi text-center",[e.type==y.type?"pt-[4px] text-[#2E2008] font-semibold text-[16px]  leading-[22px]":"pt-[5.5px] text-[#999] font-normal text-[14px] leading-[20px]"]])},a(y.name),3),e.type==y.type?(n(),r("div",zt)):R("",!0)],8,qt))),128))]))}}),jt={class:"w-full px-[0.75rem] flex items-center gap-[0.75rem]"},Ut={class:"w-full h-[71px] p-[0.75rem] bg-[#FFF] rounded-[12px]"},Rt={class:"text-[#A6A6A6] text-[12px] font-Puhui font-normal leading-[18px]"},Ot={class:"mt-[0.125rem] text-[#2E2008] text-[20px] font-BebasNeue font-normal leading-[27px]"},Yt={key:1},Gt={class:"w-full h-[71px] p-[0.75rem] bg-[#FFF] rounded-[12px]"},Ht={class:"text-[#A6A6A6] text-[12px] font-Puhui font-normal leading-[18px]"},Xt={class:"mt-[0.125rem] text-[#2E2008] text-[20px] font-BebasNeue font-normal leading-[27px]"},Jt={key:1},Kt=P({props:{totalBalance:{default:"0"},tokens:{default:[]},storeValueBlanalce:{default:"0"},tokenLoading:{default:!1},earnAmountTotal:{default:0}},setup(e){const l=e,[g,h]=Z(!1);return W(()=>D(I(l.totalBalance).minus(l.storeValueBlanalce).toFixed(18),2)),(d,s)=>(n(),r("div",jt,[t("div",Ut,[t("div",Rt,a(d.$t("piggy.lump_sum"))+"(MCOIN) ",1),t("div",Ot,[e.tokenLoading?(n(),B(i(at),{key:0,size:"14"})):(n(),r("span",Yt,a(i(D)(e.totalBalance,2)),1))])]),t("div",Gt,[t("div",Ht,a(d.$t("piggy.Cumulative_income")),1),t("div",Xt,[e.tokenLoading?(n(),B(i(at),{key:0,size:"14"})):(n(),r("span",Jt,a(i(At)(e.earnAmountTotal||0)),1))])])]))}}),Qt=["onClick"],Zt={class:"pb-[0.5rem] border-b-[0.5px] border-b-[#D9D9D9] border-solid flex justify-between items-center"},Wt={class:"text-[#585654] text-[14px] font-semibold leading-[20px]"},te={class:"w-fit h-[18px] px-[0.25rem] border-[0.5px] border-[#FF8812] border-solid rounded-[2px] text-[#FF8812] text-[12px] font-normal leading-[17px]"},ee={key:0,class:"mt-[0.5rem] flex justify-between items-center"},se={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},ae={class:"flex items-center text-[#2E2008] text-[14px] font-normal leading-[20px]"},ne=t("img",{src:G,class:"w-[16px] h-[16px]",alt:""},null,-1),oe={key:1,class:"mt-[0.5rem] flex justify-between items-center"},ie={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},le={class:"flex items-center text-[#2E2008] text-[14px] font-normal leading-[20px]"},ce={key:0},de={key:1},re=t("img",{src:G,class:"w-[16px] h-[16px]",alt:""},null,-1),ue={key:2,class:"mt-[0.5rem] flex justify-between items-center"},pe={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},me={class:"flex items-center text-[#2E2008] text-[14px] font-normal leading-[20px]"},fe=t("img",{src:G,class:"w-[16px] h-[16px]",alt:""},null,-1),xe={key:3,class:"mt-[0.5rem] flex justify-between items-center"},ve={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},ge={class:"flex items-center text-[#2E2008] text-[14px] font-normal leading-[20px]"},he=t("img",{src:G,class:"w-[16px] h-[16px]",alt:""},null,-1),ye={class:"mt-[0.5rem] flex justify-between items-center"},_e={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},we={key:4,class:"mt-[0.5rem] flex justify-between items-center"},$e={class:"text-[#A6A6A6] text-[14px] font-normal leading-[20px]"},be={class:"text-[#2E2008] text-[14px] font-normal leading-[20px] text-wrap break-all"},ke=P({props:{data:null,filterList:null},setup(e){const l=e,g=tt(),h=()=>{if(l.data.type==50)g.push("/piggyBankDetail-consumeDetail?id="+l.data.id);else if(l.data.type=="100"){const d=l.data.toUserId==l.data.userId&&l.data.recipientType==2?"&recipientType=2":"";g.push("/piggyBankDetail-transferDetail?id="+l.data.id+d)}};return(d,s)=>(n(),r("div",{class:"w-full h-fit p-[1rem] bg-[#FFF] rounded-[12px]",onClick:wt(h,["stop"])},[t("div",Zt,[t("div",Wt,a(e.data.createTime),1),t("div",te,a(e.filterList.find(p=>p.value==e.data.type).text),1)]),e.data.type=="50"&&e.data.onlineFlag==1?(n(),r("div",ee,[t("div",se,a(d.$t("piggy.online consume")),1),t("div",ae,[X(a(e.data.storeName||d.$t("common.unknown"))+" ",1),ne])])):R("",!0),e.data.type=="50"&&e.data.onlineFlag==0?(n(),r("div",oe,[t("div",ie,a(d.$t("piggy.outline consume")),1),t("div",le,[e.data.shopId&&e.data.shopId!=0?(n(),r("span",ce,a(e.data.storeName||""),1)):(n(),r("span",de,a(i(J)(e.data.storeName,"***",3,4)),1)),re])])):R("",!0),e.data.type=="100"&&e.data.recipientType==1&&e.data.address?(n(),r("div",ue,[t("div",pe,a(d.$t("piggy.transfer")),1),t("div",me,[X(a(i(J)(e.data.address,"***",3,4))+" ",1),fe])])):R("",!0),e.data.type=="100"&&e.data.recipientType==2&&e.data.recipient?(n(),r("div",xe,[t("div",ve,a(d.$t("piggy.transfer")),1),t("div",ge,[X(a(i(J)(e.data.recipient,"***",3,4))+" ",1),he])])):R("",!0),t("div",ye,[t("div",_e,a(d.$t("piggy.Amount")),1),t("div",{class:Y(["text-[#2E2008] text-[14px] font-normal leading-[20px]",{"text-[#FF8812]":e.data.recipientType==1||e.data.type=="10"||e.data.type=="20"}])},[t("span",null,a(e.data.recipientType==1||e.data.type=="10"||e.data.type=="20"?"+":"-"),1),t("span",null,a(e.data.amount)+" "+a(e.data.symbol||"MCOIN"),1)],2)]),e.data.type=="100"?(n(),r("div",we,[t("div",$e,a(d.$t("order.remark")),1),t("div",be,a(e.data.remark),1)])):R("",!0)],8,Qt))}}),mt=e=>(rt("data-v-407d43cf"),e=e(),ut(),e),Fe={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},Ae=mt(()=>t("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:Ct,alt:"",srcset:""},null,-1)),Le={class:"flex items-center"},Te={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},Be=mt(()=>t("div",null,[t("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:Et,alt:"",srcset:""})],-1)),Ce={class:"px-[0.75rem]"},Ee=P({setup(e){const{t:l}=ct();Lt();const g=tt(),h=dt(),[d,s]=Z(!1),[p,y]=Z(!1),S=u(new Date),k=u(null),C=u(new Date),q=f=>{k.value=f,C.value=f,s(!1),b()},z=()=>{k.value=null,C.value=null,s(!1),b()},M=u(!1),o=u(!1),x=u(!1),_=u(0),F=u(10),T=u(0),w=u([]),A=W(()=>[{text:l("common.all"),value:null},{text:l("piggy.transfer_in"),value:"10"},{text:l("piggy.income"),value:"20"},{text:l("piggy.Consumption"),value:"50"},{text:l("piggy.transfer_out"),value:"30"},{text:l("piggy.transfer"),value:"100"}]),$=async()=>{const f=v.value.value,c=await It({page:_.value,size:F.value,startTime:k.value?it(new Date(k.value.getFullYear(),k.value.getMonth(),1).getTime()):null,endTime:k.value?it(new Date(k.value.getFullYear(),k.value.getMonth()+1,0).getTime()):null,typeList:v.value.value?[v.value.value]:null});f==v.value.value&&(T.value=c.total,w.value=_.value===1?c.data:w.value.concat(c.data||[]),w.value&&w.value.length>=T.value&&(x.value=!0))},v=u({text:l("order.All types"),value:null}),j=f=>{let c={};h.query.type&&(c.type=h.query.type),f&&(c.funType=f.value),g.replace({path:"piggyBank-balanceDetail",query:c}),v.value=f,b(),y(!1)},U=async()=>{o.value=!0,_.value+=1,await $(),o.value=!1},b=()=>{_.value=0,x.value=!1,w.value=[],U()};return st(()=>{var f;v.value.value=h.query.funType||null,v.value.text=(f=A.value.find(c=>c.value==h.query.funType))==null?void 0:f.text,U()}),(f,c)=>{const N=E("van-grid-item"),ft=E("van-grid"),xt=E("van-popover"),vt=E("van-sticky"),gt=E("van-datetime-picker"),ht=E("van-popup"),yt=E("VanList"),_t=E("van-pull-refresh");return n(),r("div",null,[L(_t,{onRefresh:b,modelValue:o.value,"onUpdate:modelValue":c[6]||(c[6]=m=>o.value=m),"head-height":o.value?0:50,class:"min-h-[80vh]"},{default:V(()=>[L(vt,{"offset-top":"50px",onChange:c[2]||(c[2]=m=>M.value=m)},{default:V(()=>[t("div",{class:Y(["p-[0.75rem] flex justify-between items-center z-10 transition-all",{"bg-[#FFF]":M.value}])},[t("div",{class:"flex items-center",onClick:c[0]||(c[0]=m=>i(s)(!0))},[t("div",Fe,a(k.value?i(Tt)(k.value):f.$t("order.All time")),1),Ae]),L(xt,{show:i(p),"onUpdate:show":c[1]||(c[1]=m=>nt(p)?p.value=m:null),placement:"bottom-end"},{reference:V(()=>[t("div",Le,[t("div",Te,a(v.value.text||f.$t("order.All types")),1),Be])]),default:V(()=>[L(ft,{border:!1,"column-num":"3",style:{width:"240px",padding:"10px 0"}},{default:V(()=>[(n(!0),r(K,null,Q(i(A),m=>(n(),B(N,{key:m.value,onClick:Bs=>j(m)},{default:V(()=>[t("div",{class:Y(["bg-[#F5F5F5] py-1.5 px-4 rounded-md text-sm",{"bg-[#FED73A]":v.value.value==m.value}])},a(m.text),3)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["show"])],2)]),_:1}),L(ht,{round:"",show:i(d),"onUpdate:show":c[4]||(c[4]=m=>nt(d)?d.value=m:null),position:"bottom",style:{height:"40%"}},{default:V(()=>[L(gt,{modelValue:C.value,"onUpdate:modelValue":c[3]||(c[3]=m=>C.value=m),type:"year-month",title:"",onConfirm:q,onCancel:z,"cancel-button-text":i(l)("common.reset"),"max-date":S.value},null,8,["modelValue","cancel-button-text","max-date"])]),_:1},8,["show"]),t("div",Ce,[L(yt,{loading:o.value,"onUpdate:loading":c[5]||(c[5]=m=>o.value=m),finished:x.value,"finished-text":f.$t("common.noMore"),"loading-text":f.$t("common.loading"),onLoad:U},{default:V(()=>[(n(!0),r(K,null,Q(w.value,m=>(n(),B(ke,{class:"mb-[0.75rem]",key:m.id,data:m,filterList:i(A)},null,8,["data","filterList"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])]),_:1},8,["modelValue","head-height"])])}}}),Ie=et(Ee,[["__scopeId","data-v-407d43cf"]]),De=P({setup(e){const{userIds:l,userMerchantCashs:g,userTotalAmount:h}=pt(),d=u("0"),s=u("0"),p=u(!1),y=async()=>{d.value=(await h()).toString()},S=u(0),k=async()=>{const F=await l();S.value=+F,S.value?await q():p.value=!1},C=u({}),q=async()=>{const{success:F,result:T}=await g(S.value+"");if(F){const w=T.amounts.map($=>O($)),A=T.cashIds.map($=>+$);A.forEach(($,v)=>{C.value[$]=w[v],$!==0&&(s.value=I(s.value).plus(w[v]||0).toString())}),await M(A)}},z=u([]),M=async F=>{try{const T=await Vt(F),w=[];for(let A in C.value){if(+A==0)continue;let $=T.data.findIndex(j=>j.id===+A),v=$===-1?{symbol:"-"}:T.data[$];w.push({...v,accountAmount:C.value[A]}),z.value=w}}finally{p.value=!1}},o=u(0),x=async()=>{const F=await Dt();F.success&&(o.value=F.data.allAmount||0)},_=async()=>{p.value=!0,y(),x(),await k()};return st(()=>{_()}),(F,T)=>(n(),r("div",null,[L(Kt,{totalBalance:d.value,tokens:z.value,storeValueBlanalce:s.value,earnAmountTotal:o.value,tokenLoading:p.value},null,8,["totalBalance","tokens","storeValueBlanalce","earnAmountTotal","tokenLoading"]),L(Ie)]))}}),H=e=>(rt("data-v-69ae37f0"),e=e(),ut(),e),Se={class:"px-[0.75rem]"},Ve={class:"bg-white p-4 rounded-xl text-[#2E2008]"},Ne={class:"text-sm opacity-60 pb-1.5"},Pe={class:"p-2.5 mt-2.5 flex items-center bg-[#F9F9F9] rounded-xl"},qe={class:"flex items-center"},ze=H(()=>t("div",{class:"w-[4px] h-4 bg-[#FED73A] mr-2.5"},null,-1)),Me={class:"text-lg"},je={class:"ml-auto text-center"},Ue={class:"text-xs opacity-60"},Re={class:"mt-1 text-sm font-medium"},Oe={key:1},Ye={class:"p-2.5 mt-2.5 bg-[#F9F9F9] rounded-xl"},Ge={class:"flex items-center"},He=H(()=>t("div",{class:"w-[4px] h-4 bg-[#FED73A] mr-2.5"},null,-1)),Xe={class:"text-lg"},Je={class:"flex items-center justify-between mt-2.5"},Ke={class:"text-center"},Qe={class:"text-xs opacity-60"},Ze={class:"text-sm font-medium mt-0.5"},We={key:1},ts={class:"text-center"},es={class:"text-xs opacity-60"},ss={class:"text-sm font-medium mt-0.5"},as={key:1},ns={class:"p-2.5 mt-2.5 bg-[#F9F9F9] rounded-xl"},os={class:"flex items-center"},is=H(()=>t("div",{class:"w-[4px] h-4 bg-[#FED73A] mr-2.5"},null,-1)),ls={class:"text-lg"},cs={class:"flex items-center justify-between mt-2.5"},ds={class:"text-center"},rs={class:"text-xs opacity-60"},us={class:"text-sm font-medium mt-0.5"},ps={key:1},ms={class:"text-center"},fs={class:"text-xs opacity-60"},xs={class:"text-sm font-medium mt-0.5"},vs={key:1},gs={class:"bg-white p-4 rounded-xl text-[#2E2008] my-2.5",style:{"padding-right":"0"}},hs={class:"text-sm text-black opacity-60"},ys=H(()=>t("div",{id:"line-echarts-assets"},null,-1)),_s=P({setup(e){const{userIds:l,pending:g,earnings:h,DAY:d}=pt(),s=ot({recordLoading:!0,records:{one:"0",two:"0",three:"0",twoList:[],threeList:[],twoProfit:0,threeProfit:0},earnings:[0,"-","-"]}),p=ot({tooltip:{trigger:"axis"},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:o=>+q.value>=1e4&&+o>=1e3?D(o/1e3,0)+"k":D(o,2)}},series:[{data:[8,10,13,18,20,13,15],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new $t(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),y=u(null),S=o=>{p.xAxis.data=o.map(x=>x.dates.split(" ")[0].split("-")[1]+"-"+x.dates.split(" ")[0].split("-")[2]),p.series[0].data=o.map(x=>x.balance),y.value.setOption(p)},k=async()=>{s.earnings[1]=+await h(1),s.earnings[2]=+await h(7)},C=async()=>{s.recordLoading=!0;const o=await l(),x=await g(o.toString()),_=+await Bt(),F=await d(),T=7*F;let w="0",A=[],$=[];x.fixs.forEach(b=>{w=I(w).plus(O(b)||0).toString()});let v="0";x.floats.forEach(b=>{v=I(v).plus(O(b)||0).toString()}),s.records.one=I(s.records.one).plus(w).plus(v).toString(),x.records.forEach((b,f)=>{let c=_-+b.timestamp;const N=I(O(b.amount)||0);+c<F?s.records.one=I(s.records.one).plus(N).toString():+c<T?(s.records.two=I(s.records.two).plus(N).toString(),s.records.twoList.push({id:f,amount:N||0,timestamp:+b.timestamp}),A.push(+b.timestamp)):(s.records.three=I(s.records.three).plus(N).toString(),s.records.threeList.push({id:f,amount:N||0,timestamp:+b.timestamp}),$.push(+b.timestamp))});const j=A.length&&await lt({dayList:A});j.success&&(s.records.twoProfit=j.data||0);const U=$.length>0&&await lt({dayList:$});U.success&&(s.records.threeProfit=U.data||0),s.recordLoading=!1},q=u(0),z=async()=>{const o=await St();if(!o.success||!o.data)return;const x=o.data.reverse()||[];q.value=Math.max.apply(Math,x.map(_=>_.balance)),S(x)},M=()=>{z(),k(),C()};return st(()=>{y.value=bt(kt(document.getElementById("line-echarts-assets"))),M()}),Ft(()=>{y.value&&y.value.dispose()}),(o,x)=>{const _=E("VanLoading");return n(),r("div",Se,[t("div",Ve,[t("div",Ne,a(o.$t("piggy.my_holding")),1),t("div",Pe,[t("div",qe,[ze,t("div",Me,a(o.$t("piggy.First_gear")),1)]),t("div",je,[t("div",Ue,a(o.$t("piggy.Amount")),1),t("div",Re,[i(s).recordLoading?(n(),B(_,{key:0,size:"18"})):(n(),r("span",Oe,a(i(D)(i(s).records.one,2)),1))])])]),t("div",Ye,[t("div",Ge,[He,t("div",Xe,a(o.$t("piggy.one to seven day")),1)]),t("div",Je,[t("div",Ke,[t("div",Qe,a(o.$t("piggy.Amount")),1),t("div",Ze,[i(s).recordLoading?(n(),B(_,{key:0,size:"18"})):(n(),r("span",We,a(i(D)(i(s).records.two,2)),1))])]),t("div",ts,[t("div",es,a(o.$t("piggy.Cumulative_income")),1),t("div",ss,[i(s).recordLoading?(n(),B(_,{key:0,size:"18"})):(n(),r("span",as,a(i(D)(i(s).records.twoProfit,2)),1))])])])]),t("div",ns,[t("div",os,[is,t("div",ls,a(o.$t("piggy.seven day up")),1)]),t("div",cs,[t("div",ds,[t("div",rs,a(o.$t("piggy.Amount")),1),t("div",us,[i(s).recordLoading?(n(),B(_,{key:0,size:"18"})):(n(),r("span",ps,a(i(D)(i(s).records.three,2)),1))])]),t("div",ms,[t("div",fs,a(o.$t("piggy.Cumulative_income")),1),t("div",xs,[i(s).recordLoading?(n(),B(_,{key:0,size:"18"})):(n(),r("span",vs,a(i(D)(i(s).records.threeProfit,2)),1))])])])])]),t("div",gs,[t("div",hs,a(o.$t("piggy.My_assets_line_chart")),1),ys])])}}}),ws=et(_s,[["__scopeId","data-v-69ae37f0"]]),$s={class:"font-Puhui bg-gradient-to-b from-[#FED73A] from-0% to-[#F2F0EF] to-50%"},bs={class:"sticky top-0 sm:top-0 z-50 w-full h-[50px] px-[1rem] bg-[#FFFFFF] flex items-center"},ks={class:"relative w-full"},Fs={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] flex justify-center items-center"},As={class:"text-[#2E2008] text-[18px] not-italic font-bold leading-[26px] text-center"},Ls={class:"py-[0.75rem]"},Ts=P({setup(e){const l=tt(),g=dt(),h=s=>{let p={};s&&(p.type=s),g.query.funType&&(p.funType=g.query.funType),l.replace({path:"piggyBank-balanceDetail",query:p})},d=W(()=>{var s;return((s=g.query)==null?void 0:s.type)??1});return(s,p)=>{const y=E("router-view");return n(),r("div",$s,[t("div",bs,[t("div",ks,[L(Nt),t("div",Fs,[t("span",As,a(s.$t("piggy.Yu_Bao_details")),1)])])]),L(Mt,{type:i(d),onTabChange:h},null,8,["type"]),t("div",Ls,[i(d)==1?(n(),B(De,{key:0})):(n(),B(ws,{key:1}))]),L(y,{class:"child-view1"})])}}}),zs=et(Ts,[["__scopeId","data-v-7a50e56e"]]);export{zs as default};
