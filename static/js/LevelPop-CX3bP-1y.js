import{_ as le,z as K,y as k,F as x,Z as d,H as o,$ as v,I as e,P as _,a4 as S,Q as n,O as t,bs as he,a0 as ie,X as ce,Y as ue,r as p,a2 as M,D as re,E as de,G as i,n as xe,x as we,U as oe,N as ne,J as ge,T as ye}from"./vendor-Dr_RpJ_Y.js";import{u as $e,a2 as ee,f as te,h as ke,a as pe,l as Le,q as Ce,e as J,g as Z,c as me,k as ae,a3 as Ve}from"./index-BckdT6oc.js";import{l as Be,u as Pe}from"./level-CL_-NWxt.js";const je=""+new URL("../images/invite_pop-DaLtpu1W.png",import.meta.url).href,Ie=a=>(ce("data-v-865ecc06"),a=a(),ue(),a),Me={class:"text-b6 border-[0.5px] border-b6 rounded-full w-8 h-8 flex items-center justify-center ml-auto mr-1"},Se={class:"w-[335px] h-[452px] relative font-Puhui"},Fe=Ie(()=>e("img",{src:je,class:"w-full h-full absolute top-0 left-0"},null,-1)),Te={class:"p-2.5 pt-[83px] relative"},Ae={class:"bg-b6 rounded-[20px] mt-4 py-4 px-[26px]"},ze={class:"text-default opacity-60 mt-2 text-center text-xs"},Ue={class:"font-semibold"},Re=K({props:{show:{type:Boolean}},emits:["close"],setup(a,{emit:u}){const{show:w}=a,{getCurrentAccount:L}=$e(),g=k(()=>window.location.origin+"/#/home?invite="+L());return(y,r)=>{const F=x("van-icon"),$=x("VanButton"),m=x("VanPopup");return o(),d(m,{show:a.show,"onUpdate:show":r[2]||(r[2]=h=>ie(w)?w.value=h:null),style:{background:"transparent"},onClickOverlay:r[3]||(r[3]=()=>u("close")),class:"invite-pop"},{default:v(()=>[e("div",{onClick:r[0]||(r[0]=h=>u("close"))},[e("div",Me,[_(F,{name:"cross",size:"20"})])]),e("div",Se,[Fe,e("div",Te,[_(ee,null,{default:v(()=>[S(n(y.$t("home.inviteRegister")),1)]),_:1}),e("div",Ae,[_(he,{value:t(g),size:180,level:"H",class:"mx-auto"},null,8,["value"]),e("div",ze,[e("span",Ue,n(y.$t("home.inviteLink")),1),e("span",null,n(t(te)(t(g),"...",15,4)),1)]),_($,{class:"btn-yellow w-full h-[46px] rounded-full text-b1 font-semibold text-base mt-6",onClick:r[1]||(r[1]=h=>t(ke)(t(g)))},{default:v(()=>[S(n(y.$t("home.copy_invite_url")),1)]),_:1})])])])]),_:1},8,["show"])}}}),qt=le(Re,[["__scopeId","data-v-865ecc06"]]),Ne=""+new URL("../images/level_tip-F88vD8MD.svg",import.meta.url).href,fe=""+new URL("../images/yes-CRT7BetE.svg",import.meta.url).href,ve=""+new URL("../images/no-0V3kjjck.svg",import.meta.url).href,Oe=""+new URL("../images/level_open-DzJFNE4Q.png",import.meta.url).href,be=a=>(ce("data-v-49604687"),a=a(),ue(),a),De={class:"w-[335px] h-[356px] relative font-Puhui"},Ee=be(()=>e("img",{src:Oe,class:"w-full h-full absolute top-0 left-0"},null,-1)),Qe={class:"p-2.5 pb-0 pt-[104px] relative"},qe={class:"bg-b6 rounded-[20px] mt-[15px] p-4"},He={class:"h-auto"},Je={class:"w-[255px] text-base flex items-center justify-between mx-auto mb-4"},We={class:"text-b3 font-normal"},Ge={key:1,class:"text-b1 font-semibold"},Xe={class:"w-[255px] text-base flex items-center justify-between mx-auto"},Ye=be(()=>e("div",{class:"text-b3 font-normal"},"MCOIN",-1)),Ze={key:1,class:"text-b1 font-semibold"},Ke={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},et={class:"text-b3 font-normal"},tt={key:1,class:"text-b1 font-semibold"},st={key:0,class:"flex items-center justify-center mt-6"},ot={class:"whitespace-nowrap"},nt={key:1,class:"flex items-center justify-center mt-6"},at={class:"whitespace-nowrap"},lt={key:0},it={key:1},ct=K({props:{openFee:null,buyMember:null},emits:["close","openVipSuccess","addParent"],setup(a,{emit:u}){const w=a,{accountStore:L}=pe(),g=Le(),{pointBalances:y,findParents:r}=me(),{getOneBalance:F}=Ce(),$=p(""),m=p(!0),h=p(""),[Q,T]=M(!0),f=k(()=>+$.value+ +h.value),A=p(0),[C,b]=M(!1),[V,B]=M(!1),z=k(()=>A.value>=w.openFee);re(()=>L.registerPopVisible,()=>{setTimeout(()=>{D()},1e3)},{immediate:!1,deep:!0});const q=async()=>{B(!0);const c=await(await g).allowance(Z.flashMall);B(!1),A.value=c.result},U=async()=>{Z.MCOIN&&($.value=await F("MCOIN"),m.value=!1)},W=async()=>{h.value=await y(),T(!1)},R=p(!1),N=p(""),[O,H]=M(!0),D=async()=>{console.log("getParent"),H(!0);const c=await r();H(!1),c.success&&c.result?(N.value=c.result||"",R.value=!0):R.value=!1},G=async()=>{B(!0),(await(await g).approve(Z.flashMall)).success&&await q(),B(!1)},P=async()=>{b(!0);const c=await w.buyMember();b(!1),c.success&&u("openVipSuccess")},j=()=>{xe(()=>{L.openRegisterPop()})},X=()=>{U(),W(),q(),D()};return de(()=>{X()}),(c,s)=>{const l=x("VanLoading"),E=x("VanButton");return o(),i("div",De,[Ee,e("div",Qe,[_(ee,null,{default:v(()=>[S(n(c.$t("home.openVip")),1)]),_:1}),e("div",qe,[e("div",He,[e("div",Je,[e("div",We,n(c.$t("assets.myParent")),1),t(O)?(o(),d(l,{key:0,size:"20"})):(o(),i("div",Ge,n(t(te)(N.value,"...",4,4)||"-"),1))]),e("div",Xe,[Ye,m.value?(o(),d(l,{key:0,size:"14"})):(o(),i("div",Ze,n(t(J)($.value,3)),1))]),e("div",Ke,[e("div",et,n(c.$t("assets.canWithdraw")),1),t(Q)?(o(),d(l,{key:0,size:"14"})):(o(),i("div",tt,n(t(J)(h.value,3)),1))])]),R.value?(o(),i("div",st,[t(z)?(o(),d(E,{key:0,class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",loading:t(C),disabled:+t(f)<+a.openFee,onClick:P},{default:v(()=>[e("span",ot,n(c.$t("home.toOpenVip",{fee:a.openFee||"-"})),1)]),_:1},8,["loading","disabled"])):(o(),d(E,{key:1,class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",loading:t(V),disabled:t(z),onClick:G},{default:v(()=>[S(n(c.$t("assets.auth")),1)]),_:1},8,["loading","disabled"]))])):(o(),i("div",nt,[_(E,{class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",onClick:j},{default:v(()=>[e("span",at,[t(O)?(o(),i("span",lt,[_(l,{size:"14"})])):(o(),i("span",it," 请添加邀请人 "))])]),_:1})]))])])])}}}),ut=le(ct,[["__scopeId","data-v-49604687"]]),rt={class:"text-b6 border-[0.5px] border-b6 rounded-full w-8 h-8 flex items-center justify-center ml-auto mr-1 -mb-2"},dt=["src"],pt={class:"p-2.5 pt-[95px] relative"},mt={class:"mx-[5px]"},ft=e("img",{class:"w-4 h-4",src:Ne,alt:""},null,-1),vt={class:"bg-b6 rounded-[20px] mt-[15px] p-4 min-h-[162px]"},bt={class:"w-[255px] text-base flex items-center justify-between mx-auto mb-4"},_t={class:"text-b3 font-normal"},ht={key:1,class:"text-b1 font-semibold"},xt={class:"w-[255px] text-base flex items-center justify-between mx-auto"},wt={class:"text-b3 font-normal"},gt={key:1,class:"text-b1 font-semibold"},yt={key:0,class:"w-[255px] overflow-x-hidden text-base flex items-center justify-between mx-auto mt-4"},$t={class:"text-b3 font-normal min-w-fit flex-1"},kt={class:"text-b1 font-semibold min-w-fit overflow-x-auto"},Lt={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Ct={class:"text-b3 font-normal"},Vt={key:1,class:"text-b1 font-semibold"},Bt={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Pt={class:"text-b3 font-normal"},jt={class:"text-b1 font-semibold"},It={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},Mt={class:"text-b3 font-normal"},St={class:"text-b1 font-semibold w-5 min-w-fit"},Ft={key:0,src:fe,class:"w-5 h-5 object-cover",alt:""},Tt={key:1,src:ve,class:"w-5 h-5 object-cover",alt:""},At={class:"w-[255px] text-base flex items-center justify-between mx-auto mt-4"},zt={class:"text-b3 font-normal"},Ut={class:"text-b1 font-semibold min-w-fit w-5"},Rt={key:0,src:fe,class:"w-5 h-5 object-cover",alt:""},Nt={key:1,src:ve,class:"w-5 h-5 object-cover",alt:""},Ot={class:"px-[11px] mt-4 flex justify-center items-center gap-3"},Ht=K({props:{show:{type:Boolean},userInfo:null,userInfoLoading:{type:Boolean}},emits:["close","invite","handleTo","openVipSuccess"],setup(a,{emit:u}){const w=a,{t:L}=we(),{members:g,memberPrice:y,buyMember:r,memberLevels:F,findParents:$}=me(),{contributesStore:m}=pe(),[h,Q]=M(!1),T=p(!1),f=p(0),A=p(0),C=p([]),b=k(()=>P.value?null:C.value[f.value-1]?C.value[f.value-1]:null),V=p({address:"",agentAmount:.001,majorAmount:.002}),B=k(()=>{var s,l;return!P.value&&b.value&&+m.contributes>=+((s=b.value)==null?void 0:s.one)&&+w.userInfo.totalContribute>=+((l=b.value)==null?void 0:l.two)}),z=async()=>{T.value=await g(),T.value||q()},q=async()=>{A.value=+await y()},U=async()=>{f.value=await F()},W=async()=>{const s=await Be();!s.success||!s.data||(C.value=s.data||[],R())},R=()=>{f.value<=0},N=async()=>{const s=await Pe();s.success&&(V.value=s.data)},O=p(""),[H,D]=M(!0),G=async()=>{D(!0);const s=await $();D(!1),s.success&&(O.value=s.result||"")},P=k(()=>{const s=C.value.length||8;return(f.value||0)>=s+1}),j=k(()=>P.value||+f.value<=0),X=async()=>{if(!V.value.address)return;Q(!0);const s=await Ve(V.value.address,V.value.agentAmount.toString());Q(!1),s.success&&(ye(L("home.upgradeTips")),setTimeout(()=>{u("close")},1500))},c=()=>{z(),N(),U(),m.fetchContributes(),u("openVipSuccess")};return re(()=>w.show,s=>{s&&(U(),G())}),de(async()=>{z(),N(),await U(),W(),m.fetchContributes()}),(s,l)=>{const E=x("van-icon"),Y=x("VanLoading"),se=x("VanButton"),_e=x("VanPopup");return a.show?(o(),d(_e,{key:0,show:a.show,"onUpdate:show":l[4]||(l[4]=I=>ie(show)?show.value=I:null),round:"",onClose:l[5]||(l[5]=I=>u("close")),style:{"background-color":"transparent"}},{default:v(()=>[e("div",{onClick:l[0]||(l[0]=I=>u("close"))},[e("div",rt,[_(E,{name:"cross",size:"20"})])]),T.value?(o(),i("div",{key:0,class:ne(["w-[335px] font-Puhui relative",t(j)?"h-[340px]":"h-[454px]"])},[e("img",{src:t(j)?t(ae)("images/level/level_max.png"):t(ae)("images/level/level_bg.png"),class:"w-full h-full absolute top-0 left-0"},null,8,dt),e("div",pt,[_(ee,null,{default:v(()=>[e("div",{onClick:l[1]||(l[1]=I=>u("handleTo","/levelPointsDetail")),class:"justify-center flex items-center font-bold"},[e("span",null,n(s.$t("home.level")),1),e("span",mt,"V"+n(f.value||0),1),ft])]),_:1}),e("div",vt,[e("div",{class:ne(["overflow-y-auto",t(j)?"h-[100px]":"h-[215px]"])},[e("div",bt,[e("div",_t,n(s.$t("assets.myParent")),1),t(H)?(o(),d(Y,{key:0,size:"20"})):(o(),i("div",ht,n(t(te)(O.value,"...",4,4)||"-"),1))]),e("div",xt,[e("div",wt,n(s.$t("home.score")),1),t(m).loading?(o(),d(Y,{key:0,size:"20"})):(o(),i("div",gt,n(t(J)(t(m).contributes||0,3)),1))]),t(j)?(o(),i("div",yt,[e("div",$t,n(s.$t("home.nextLevel")),1),e("div",kt,n(t(P)?s.$t("home.level_max"):`V${+f.value+1}`),1)])):(o(),i(ge,{key:1},[e("div",Lt,[e("div",Ct,n(s.$t("home.deductScore")),1),a.userInfoLoading?(o(),d(Y,{key:0,size:"20"})):(o(),i("div",Vt,n(t(J)(a.userInfo.totalContribute||0,3)),1))]),e("div",Bt,[e("div",Pt,n(s.$t("home.nextLevel")),1),e("div",jt," V"+n((f.value||0)+1),1)]),e("div",It,[e("div",Mt,n(s.$t("home.keepScore",{num:t(b).one||0})),1),e("div",St,[(+t(m).contributes||0)>=+t(b).one?(o(),i("img",Ft)):(o(),i("img",Tt))])]),e("div",At,[e("div",zt,n(s.$t("home.deductScore",{num:t(b).two||0})),1),e("div",Ut,[(+a.userInfo.totalContribute||0)>=+t(b).two?(o(),i("img",Rt)):(o(),i("img",Nt))])])],64))],2),e("div",Ot,[t(B)?(o(),d(se,{key:0,class:"bg-b6 !border !border-solid !border-b4 text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px]",loading:t(h),onClick:X},{default:v(()=>[S(n(s.$t("home.upgrade")),1)]),_:1},8,["loading"])):oe("",!0),_(se,{class:"bg-yellow text-b1 text-base font-semibold rounded-full h-[46px] min-w-[125px] w-full",round:"",onClick:l[2]||(l[2]=I=>u("invite"))},{default:v(()=>[S(n(s.$t("home.inviteRegister")),1)]),_:1})])])])],2)):(o(),d(ut,{key:1,openFee:A.value,buyMember:t(r),onClose:l[3]||(l[3]=I=>u("close")),onOpenVipSuccess:c},null,8,["openFee","buyMember"]))]),_:1},8,["show"])):oe("",!0)}}});export{qt as I,Oe as _,je as a,Ht as b};
