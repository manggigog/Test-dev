import{_ as z,y as E,r as l,bc as Y,D as N,E as g,K as $,G as o,N as I,H as e,O as x,a0 as D,F as d,P as f,Q as c,I as C,J as R,a2 as M,R as F,Y as j,Z as A,l as Z,a4 as q}from"./vendor-CjApaIpB.js";import{S as W}from"./SkewCard-BD-urNEn.js";import{g as P,V as X,c as ee,d as te,l as se}from"./index-B3VH42pz.js";import{b as ae}from"./beiExtRewardContract-DdWVCmLm.js";import{_ as oe}from"./DataSelectMonth-BRQKsSrC.js";import{B as ne}from"./BackIcon-D2Vm_lyR.js";import{h as le,i as ce}from"./beiRanking-BxzIQw7r.js";const ie=r=>(j("data-v-b0854434"),r=r(),A(),r),ue={class:"relative p-3"},re={class:"text-b1 text-base font-semibold flex items-center"},de=D(" 本月已完成充电"),ve={key:1,class:"text-[#FF8812]"},_e=D("次 "),pe={class:"text-xs text-b3 leading-[18px] font-normal"},me={class:"flex items-center gap-x-0.5 w-full overflow-x-auto mt-4"},fe={class:"text-center"},xe={class:"w-5 h-5 rounded-full symbol-bg mx-auto"},ge=["src"],he={class:"text-b3 text-xs leading-[18px] mt-1 font-normal"},be={key:0,class:"h-[52px] flex items-center"},we=["src"],ye=ie(()=>e("span",{class:"text-b1 text-base font-semibold"},"去充电",-1)),Fe=E({emits:["handleTo"],setup(r,{emit:T}){const{userVoteDetailView:h,voteMonthTimestampView:b}=ae(),i=5,s=l(0),[w,V]=Y(!0),_=async()=>{const{success:p,result:n}=await b();if(!p)return;const{success:y,result:v}=await h(n==null?void 0:n.thisMonthTime);y&&(V(!1),s.value=+(v==null?void 0:v.times))};return N(()=>{_()}),(p,n)=>{const y=g("VanLoading"),v=g("VanButton");return o(),$(W,{width:"175",right:"24",height:"25",class:"mt-2.5"},{default:I(()=>[e("div",ue,[e("div",re,[de,f(w)?(o(),$(y,{key:0,size:"16",color:"#FF8812"})):(o(),d("span",ve,c(s.value),1)),_e]),e("div",pe,[s.value>=i?(o(),d(C,{key:0},[D(" 领取 "+c(s.value>=i?i:s.value)+" 抵用券，已领取全部抵用券 ",1)],64)):(o(),d(C,{key:1},[D(" 已领取 "+c(s.value>=i?i:s.value)+" 抵用券，还有 "+c(i-s.value)+" 抵用券可领取，再接再厉 ",1)],64))]),e("div",me,[(o(),d(C,null,R(i,t=>e("div",{key:t,class:"flex gap-x-0.5"},[e("div",fe,[e("div",{class:F(["w-[53px] h-[52px] rounded-lg bg-b5 text-center py-2",{"!bg-[#FFF8EC] border border-solid border-[#FF8812]":t<=s.value}])},[e("div",xe,[e("img",{src:f(P)(t<=s.value?"images/ranking/received.png":"images/ranking/receiving.png")},null,8,ge)]),e("div",{class:F(["text-xs font-semibold text-b3 mt-1",{"text-[#FF8812]":t<=s.value}])}," +1 ",2)],2),e("div",he,c(t-s.value>0?`累投${t-s.value}次`:"已领取"),1)]),t!==5?(o(),d("div",be,[e("img",{src:f(X)(t<=s.value?"ranking/arrow-double-light.svg":"ranking/arrow-double.svg"),class:"w-3 h-3"},null,8,we)])):M("",!0)])),64))]),x(v,{class:"btn-calim w-full !h-10 !rounded-[10px] !mt-4",onClick:n[0]||(n[0]=t=>T("handleTo","/talentRanking"))},{default:I(()=>[ye]),_:1})])]),_:1})}}}),ke=z(Fe,[["__scopeId","data-v-b0854434"]]),H=r=>(j("data-v-386acbec"),r=r(),A(),r),Be={class:"app-container flex flex-col h-screen overflow-x-hidden overflow-y-scroll font-Puhui"},Ce={class:"sticky top-0 z-10"},$e={class:"sticky top-0 z-50 h-[50px] px-3 flex justify-center items-center"},De={class:"absolute left-3 flex items-center gap-1 -translate-y-1/2 top-1/2"},Te=H(()=>e("div",{class:"text-lg text-[#2E2008] font-bold"},"充电奖励",-1)),Ve={class:"bg-container"},Ie={class:"text-left pt-4 px-3"},Le=H(()=>e("div",{class:"text-b2 font-normal"},"累计充电投票领取抵用券",-1)),Se={class:"mt-1 text-b1 text-[40px] leading-[48px] font-BebasNeue"},ze={key:1},Ee={class:"flex items-center justify-between"},Ne={class:"text-b2"},Re={class:"flex items-center gap-x-1"},Me={class:"font-semibold"},je=["src"],Ae={class:"flex items-center justify-between mt-2"},Pe=["onClick"],He={class:"text-b2 line-clamp-1"},Ge={class:"text-b3 min-w-fit"},Je=E({setup(r){const T=Z(),h=a=>{T.push(a)},b=l(!1),i=l(0),s=async()=>{b.value=!0;const a=await le();b.value=!1,a.success&&(i.value=a.data||0)},w=l(null),V=a=>{w.value=a,S()},_=l(!1),p=l(!1),n=l(0),y=l(20),v=l(0),t=l([]),G=async()=>{var m,B;const a=await ce({page:n.value,size:y.value,month:w.value?w.value.getTime()/1e3:null});if(!a.success){p.value=!0;return}v.value=((m=a.data)==null?void 0:m.total)||0,t.value=n.value===1?((B=a.data)==null?void 0:B.records)||[]:t.value.concat(a.data.records||[]),t.value&&t.value.length>=v.value&&(p.value=!0)},L=async()=>{_.value=!0,n.value+=1,await G(),_.value=!1},S=()=>{n.value=0,p.value=!1,t.value=[],L()},k=l(0),J=a=>{k.value=a.target.scrollTop};return N(()=>{S(),s()}),(a,m)=>{const B=g("VanLoading"),K=g("Empty"),O=g("VanImage"),Q=g("VanList");return o(),d("div",Be,[e("div",{class:F(["flex-none transition-all duration-300",{"filter-color":k.value>=308}])},[e("div",Ce,[e("section",$e,[e("div",De,[x(ne)]),Te,e("div",{class:"absolute right-3 text-sm text-b2 font-normal",onClick:m[0]||(m[0]=u=>h("/assist-records"))},c("记录"))])])],2),e("div",{class:"list-wrap flex-1 pb-3 overflow-y-auto overflow-x-hidden z-20",onScroll:J},[e("div",Ve,[e("div",{class:F(["bg-pre",{"opacity-0":k.value>=308}])},null,2)]),e("div",Ie,[Le,e("div",Se,[b.value?(o(),$(B,{key:0,class:"h-[48px]",size:"40"})):(o(),d("span",ze,c(f(ee)(f(te)(i.value))),1))]),x(ke,{onHandleTo:h})]),e("div",{class:F(["p-3 sticky top-[-12px] z-20 transition-all duration-300 flex items-center",{"filter-color":k.value>=308}])},[x(oe,{class:"relative z-50",onChangeTime:V})],2),x(Q,{class:"min-h-[calc(100vh-50px-44px-12px)] bg-white rounded-xl text-sm px-3 py-1 mx-3",loading:_.value,"onUpdate:loading":m[1]||(m[1]=u=>_.value=u),finished:p.value,"loading-text":a.$t("common.loading"),onLoad:L},{default:I(()=>[!_.value&&!t.value.length?(o(),$(K,{key:0,name:a.$t("common.No data yet"),class:"pb-8"},null,8,["name"])):M("",!0),(o(!0),d(C,null,R(t.value,(u,U)=>(o(),d("div",{key:U,class:"py-2 border-b border-solid border-b4 last:border-none"},[e("div",Ee,[e("div",Ne,"充电"+c(u.ticket||0)+"票",1),e("div",Re,[e("span",Me,"+"+c(u.amount||0),1),e("img",{src:f(P)("images/tokens/FMCP.png"),class:"w-4 h-4"},null,8,je)])]),e("div",Ae,[e("div",{class:"flex items-center gap-x-1",onClick:q(Ke=>h("/category?shopId="+u.shopId),["stop"])},[x(O,{class:"w-6 h-6",round:"",src:u.logo},null,8,["src"]),e("div",He,c(u.storeName||"店铺已转移"),1)],8,Pe),e("div",Ge,c(u.createTime?f(se)(u.createTime):""),1)])]))),128))]),_:1},8,["loading","finished","loading-text"])],32)])}}}),Xe=z(Je,[["__scopeId","data-v-386acbec"]]);export{Xe as default};
