import{z as me,G as p,H as a,I as s,Q as R,q as Ie,bg as et,r as l,y as F,D as ae,E as pe,P as N,U as K,O as t,Z as Q,_ as Y,x as _e,$ as Ke,X as te,Y as se,T as Pe,N as ee,J as $e,K as Be,bh as os,ab as tt,F as de,V as D,bi as It,n as ue,bj as Ae,bk as Me,a1 as ns,a2 as j,bl as kt,bm as Rt,ad as as,a3 as is,B as le,bn as ls,o as cs,bo as yt,a4 as rs,a6 as us,t as $t,u as ds}from"./vendor-Dr_RpJ_Y.js";import{_ as ms,a as ps,b as fs,I as hs}from"./LevelPop-B4eI1OT2.js";import{_ as vs,a as gs,E as _s,H as ws}from"./EditUserNamePop-Dit7x3D0.js";import{_ as xs}from"./avatarRing-CLGxkH-F.js";import{U as bs,_ as ys,a as $s,b as Ss,p as Is,c as ks}from"./plaza-build-RtxtQ3ib.js";import{u as Ee,a as re,b as we,f as Lt,c as Se,p as Ue,d as Rs,e as ce,h as Ls,g as ge,o as Ts,i as Tt,j as St,k as Cs,_ as Bs,m as Us,l as Ps,n as As,q as Ms,r as Es,s as Ns,t as ne,v as Os}from"./index-7OiUoGXy.js";import{_ as Fs}from"./information-BXOyO4i9.js";import{_ as zs}from"./mcoin-logo-1-Deho8IWN.js";import{u as Ds}from"./usePointRelase-CczR7Un0.js";import{L as Je}from"./Lottie_v2-DIiMHpUu.js";import{e as Ws}from"./exchangeContract-DP98fDGp.js";import{I as Vs,W as js}from"./WithdrawPop-BCWlZTgM.js";import{a as qs}from"./activityContract-bcX9y4nM.js";import{u as Hs,q as Gs}from"./user-DxDy-AJj.js";import"./level-Slm86KHn.js";import"./ChangeRegionPop-BFcmEqdg.js";import"./arrow-C-JiYSPQ.js";import"./arrow-bottom-D85vJawE.js";import"./ApproveButton-BB8qyFWg.js";import"./MCOIN-Bodfn-v1.js";const Qs=""+new URL("../images/edit-D2b4Y7Fs.svg",import.meta.url).href,Ys={class:"flex items-center justify-start text-lg mt-1"},Xs={class:"truncate text-sm text-b1 font-semibold line-clamp-1"},Zs=s("img",{src:Qs,class:"w-4 h-4"},null,-1),Js=[Zs],Ks=me({props:{userName:null},emits:["handleToEditName"],setup(o,{emit:w}){return(d,$)=>(a(),p("div",Ys,[s("div",Xs,R(o.userName),1),s("div",{class:"ml-1 text-primary",onClick:$[0]||($[0]=T=>w("handleToEditName"))},Js)]))}}),eo={class:"relative pt-3 px-3 pb-1"},to={class:"avatar-wrap flex flex-row justify-start items-center"},so={class:"relative flex-shrink-0"},oo=s("img",{class:"w-[32px] h-[32px] relative m-auto",src:xs},null,-1),no=[oo],ao={class:"text-xs font-Puhui text-center px-1"},io={class:"nickname-wrap max-h-[36px]"},lo=me({props:{info:null,vsageUserInfo:null,isTag:{type:Boolean},tokens:null},emits:["setEditNameShow","setLevelShow"],setup(o,{expose:w,emit:d}){const $=o,{getCurrentAccount:T}=Ee(),{accountStore:m}=re(),f=Ie(),{account:h,isLogin:c}=et(m),{checkLoginAuth:g}=m,{memberLevels:v}=Se(),{changeUserInfo:S,userInfo:i}=we(),I=l((i==null?void 0:i.storeMemberLevel)||0),u=async()=>{I.value=await v()||0,S({...i,storeMemberLevel:I.value})},L=F(()=>{var M;return((M=$.vsageUserInfo)==null?void 0:M.nickName)||Lt(T()||"-","...",5,4)||""}),_=k=>{f.push(k)},O=()=>{d("setEditNameShow")},z=()=>{g(!0)&&d("setLevelShow")},B=()=>{g(!0)};return ae(()=>h.value,(k,M)=>{k&&u()},{immediate:!1,deep:!0}),pe(()=>{u()}),w({getMemberLevel:u}),(k,M)=>(a(),p("div",eo,[s("div",to,[s("div",so,[s("div",{onClick:B,class:"w-[32px] h-[32px]"},no),t(c)?(a(),p("div",{key:0,class:"bg-white rounded-xl flex text-center absolute right-[-14px] bottom-[-4px] min-w-max",onClick:z},[s("p",ao," V"+R(I.value||0),1)])):K("",!0)]),N(bs,{tokens:o.tokens,onHandleTo:_,class:"w-full ml-6",countTo:!1},null,8,["tokens"])]),s("div",io,[t(c)?(a(),Q(Ks,{key:0,class:"min-w-max","user-name":t(L),onHandleToEditName:O},null,8,["user-name"])):(a(),p("p",{key:1,class:"mt-1 text-xs font-semibold text-b1",onClick:B},R(k.$t("common.please login")),1))])]))}}),co=""+new URL("../images/tools-scan-C28Ke7ai.png",import.meta.url).href,ro=""+new URL("../images/tools-trans-Ck2uxaL4.png",import.meta.url).href,uo=""+new URL("../images/tools-share-Dmjj9UlR.png",import.meta.url).href,mo=""+new URL("../images/tools-i18n-cOjffy46.png",import.meta.url).href,Ne=o=>(te("data-v-77a74389"),o=o(),se(),o),po={class:"flex flex-col justify-start items-center absolute right-3 top-[54px]"},fo=Ne(()=>s("img",{src:co,alt:"扫码"},null,-1)),ho=[fo],vo=Ne(()=>s("img",{src:ro,alt:"转账"},null,-1)),go=[vo],_o=Ne(()=>s("img",{src:uo,alt:"分享"},null,-1)),wo=[_o],xo={class:"tool-item"},bo=Ne(()=>s("img",{src:mo,alt:"语言"},null,-1)),yo={emits:["handleTo","scan","invite"],setup(o,{emit:w}){const{checkLoginAuth:d}=we(),{t:$}=_e(),{members:T}=Se(),m=()=>{d(!0)&&w("scan")},f=()=>{d(!0)&&w("handleTo","/collect")},h=async()=>{if(!d(!0))return;if(!await T())return Pe($("home.inviteTip"));w("invite")};return(c,g)=>(a(),p("div",po,[s("div",{class:"tool-item",onClick:m},ho),s("div",{class:"tool-item",onClick:f},go),s("div",{class:"tool-item",onClick:h},wo),s("div",xo,[N(vs,{position:"right"},{icon:Ke(()=>[bo]),_:1})])]))}},$o=Y(yo,[["__scopeId","data-v-77a74389"]]),st=o=>(te("data-v-a99e19b8"),o=o(),se(),o),So={class:"point-days rounded-lg"},Io={class:"relative w-full"},ko=st(()=>s("img",{src:gs,class:"absolute top-0 right-0 -z-1"},null,-1)),Ro={key:0,class:"z-10"},Lo={key:0,class:"text-[#000] font-semibold text-2xl flex items-end z-10"},To={class:"time-text-shadow"},Co={class:"text-xs"},Bo={key:1,class:"text-[#000] font-semibold text-2xl flex items-end z-10"},Uo={class:"time-text-shadow"},Po={class:"text-xs text-[#000] font-semibold"},Ao={key:2,class:"text-[#000] font-semibold text-2xl flex items-end z-10"},Mo={class:"time-text-shadow"},Eo={class:"text-xs text-[#000] font-semibold"},No={key:3,class:"text-[#000] font-semibold text-2xl flex items-end z-10"},Oo={class:"time-text-shadow"},Fo={class:"text-xs text-[#000] font-semibold"},zo={key:1,class:"text-[#000] font-semibold text-3xl flex items-center z-10"},Do=st(()=>s("span",{class:"time-text-shadow text-3xl font-WorkSans"}," ∞ ",-1)),Wo={class:"ml-1 text-xs pt-3 pl-1"},Vo={class:"text-b2 font-normal text-xxs"},jo={class:"text-xxs font-bold text-b2"},qo=st(()=>s("img",{class:"w-3 h-3 ml-[2px]",src:Fs},null,-1)),Ho=me({props:{contributes:{default:0},coinPoint:{default:0},userActiveStatus:{default:0},userActiveTime:{default:null}},emits:["handleOpen"],setup(o,{emit:w}){const d=o,{t:$}=_e(),T=F(()=>d.userActiveStatus===1?d.userActiveStatus:d.contributes<=1e4?1:0),m=l(0),f=l(0),h=l(0),c=l(0),g=l(0),v=F(()=>(f.value=Math.floor(m.value/3600/24)<=0?0:Math.floor(m.value/3600/24),c.value=Math.floor(m.value/3600)<=0?0:Math.floor(m.value/3600),h.value=Math.floor(m.value/60)<=0?0:Math.floor(m.value/60),g.value=Math.floor(m.value)<=0?0:Math.floor(m.value),[f.value,c.value,h.value,g.value]));let S=null;return ae(()=>{var i;return(i=d.userActiveTime)==null?void 0:i.cutdownTimestamp},i=>{i&&(m.value=(i-new Date().getTime())/1e3,S&&clearInterval(S),S=setInterval(()=>{m.value>0?m.value--:clearInterval(S)},1e3))},{immediate:!0,deep:!0}),(i,I)=>(a(),p("div",So,[s("div",Io,[s("div",{class:ee(["flex items-end justify-center relative rounded-t-lg p-2 min-w-[80px] overflow-hidden h-[46px]",t(T)?" bg-[#FED73A]":"bg-[#E9E4DE]"])},[ko,o.contributes>=1e4?(a(),p("div",Ro,[t(v)[0]>0?(a(),p("div",Lo,[(a(!0),p($e,null,Be(t(Ue)(t(v)[0],2),(u,L)=>(a(),p("div",{class:"bg-white w-[23px] h-[30px] rounded-lg mr-1 px-1",key:L},[s("span",To,R(u),1)]))),128)),s("div",Co,R(i.$t("common.days")),1)])):t(v)[1]>0?(a(),p("div",Bo,[(a(!0),p($e,null,Be(t(Ue)(t(v)[1],2),(u,L)=>(a(),p("div",{class:"bg-white w-[23px] h-[30px] rounded-lg mr-1 px-1 overflow-hidden text-center",key:L},[s("span",Uo,R(u),1)]))),128)),s("div",Po,R(i.$t("common.hours")),1)])):t(v)[2]>0?(a(),p("div",Ao,[(a(!0),p($e,null,Be(t(Ue)(t(v)[2],2),(u,L)=>(a(),p("div",{class:"bg-white w-[23px] h-[30px] rounded-lg mr-1 px-1 overflow-hidden text-center",key:L},[s("span",Mo,R(u),1)]))),128)),s("div",Eo,R(i.$t("common.minutes")),1)])):(a(),p("div",No,[(a(!0),p($e,null,Be(t(Ue)(t(v)[3],2),(u,L)=>(a(),p("div",{class:"bg-white w-[23px] h-[30px] rounded-lg mr-1 px-1 overflow-hidden text-center",key:L},[s("span",Oo,R(u),1)]))),128)),s("div",Fo,R(i.$t("common.seconds")),1)]))])):(a(),p("div",zo,[Do,s("div",Wo,R(i.$t("common.days")),1)]))],2),s("div",{onClick:I[0]||(I[0]=u=>w("handleOpen")),class:ee(["font-normal pl-4 text-center rounded-b-[4px] pr-2 flex items-center justify-center w-full py-[1px] h-[15px]",t(T)?"bg-[#FFE0B6]":"bg-[#FFF0D9]"])},[s("span",Vo,R(t(Rs)(t(ce)(o.coinPoint,0))),1),s("span",jo,R(i.$t("common.credit")),1),qo],2)])]))}}),Go=Y(Ho,[["__scopeId","data-v-a99e19b8"]]),Qo=""+new URL("../images/go-tr-C6OxuTpH.png",import.meta.url).href,Yo=""+new URL("../images/go-tr-icon-D6nG65Ok.png",import.meta.url).href,Xo=""+new URL("../images/go-tr-arrow-BxXIWQWF.png",import.meta.url).href,ot=o=>(te("data-v-37441dd2"),o=o(),se(),o),Zo=ot(()=>s("div",{class:"tr-img"},[s("img",{src:Qo})],-1)),Jo=ot(()=>s("img",{src:Yo,alt:"token right icon",class:"absolute top-[-6px] left-[6px] w-[40px] h-[40px]"},null,-1)),Ko={class:"absolute right-[4px] top-0 h-full flex justify-end items-center -translate-y-[2px]"},en={class:"text-sm font-semibold font-Puhui text-b6"},tn=ot(()=>s("img",{src:Xo,class:"w-[16px] h-[16px] ml-[2px]"},null,-1)),sn={setup(o){const{checkLoginAuth:w}=we(),d=()=>{var T;if(!w(!0))return;const $=`${(T=window.location)==null?void 0:T.origin}/ecology/#/maiPledge?refresh=1&origin=main`;window.location.assign($)};return($,T)=>(a(),p("div",{class:"go-token-right relative w-[128px]",onClick:d},[Zo,Jo,s("p",Ko,[s("span",en,R($.$t("ecology.Token Rights road")),1),tn])]))}},on=Y(sn,[["__scopeId","data-v-37441dd2"]]),nn=""+new URL("../images/balance-big-BlAQSRAv.png",import.meta.url).href,an=""+new URL("../images/balance-small-DTMS8DT7.png",import.meta.url).href,ln=""+new URL("../images/visibility-D5JMp6Ho.svg",import.meta.url).href,cn=""+new URL("../images/copy-gray-CDg8kt-2.svg",import.meta.url).href,rn=""+new URL("../images/bank-card-fill-6SZF_gMZ.svg",import.meta.url).href,fe=o=>(te("data-v-41aeb4dc"),o=o(),se(),o),un={class:"balance-container relative w-full"},dn=fe(()=>s("img",{src:nn,class:"absolute top-0 left-0 w-full h-[107px] z-[1]"},null,-1)),mn=fe(()=>s("img",{src:an,class:"absolute top-2 right-2 w-[40%] h-[39px]"},null,-1)),pn={class:"absolute top-0 left-0 w-full h-full p-3 z-[2]"},fn={class:"point-box"},hn={class:"flex items-center font-sm text-b2 font-normal"},vn=fe(()=>s("img",{class:"w-4 h-4",src:ln},null,-1)),gn=[vn],_n={class:"text-xl text-b1 font-Audiowide mt-1 leading-[25px] min-w-max"},wn=fe(()=>s("img",{src:cn,class:"w-3 h-3 ml-2",alt:"copy"},null,-1)),xn={class:"balance-box"},bn={class:"balance-item"},yn={class:"balance-icon"},$n=fe(()=>s("img",{src:zs,alt:""},null,-1)),Sn={class:"balance-label text-b3 text-sm"},In=fe(()=>s("div",{class:"divider"},null,-1)),kn={class:"balance-icon"},Rn=fe(()=>s("img",{src:rn},null,-1)),Ln={class:"balance-label text-b3"},Tn={class:"balance-value"},Cn=me({props:{contributes:{default:0},contributesLoading:{type:Boolean,default:!1},pointBalance:{default:0},mcoinBalance:{default:0},pointLoading:{type:Boolean,default:!1},mcoinLoading:{type:Boolean,default:!1}},setup(o,{expose:w}){const d=o,{t:$}=_e(),T=Ie(),{contributesStore:m}=re(),{getCurrentAccount:f}=Ee(),{width:h,height:c}=os(),g=l(1);ae([h,c],()=>{const r=Math.max(h.value,375)/375;g.value=r||1});const v=l(1),S=()=>{const C=Math.min(window.innerWidth,375);v.value=C/375},i=l(!0),I=F(()=>i.value?1:500),u=l({pointBalance:0,mcoinBalance:0});ae(()=>d.pointBalance,(r,C)=>{u.value.pointBalance=Number(C)||0}),ae(()=>d.mcoinBalance,(r,C)=>{u.value.mcoinBalance=Number(C)||0});const L=()=>{m.changeHideIntegral(!m.hideIntegral)},_=()=>{const r=f();r&&Ls(r)},O=F(()=>Lt(f()||"-","...",5,4)),z=r=>{T.push(r)},B=l(!1),k=l({path:"lottie/coinFly.json",loop:!1,autoplay:!1}),M=l(!1),A=l(null),q=l(null),P=()=>{A.value&&A.value.destroy(),q.value&&(A.value=It.loadAnimation({container:q.value,path:k.value.path,renderer:"canvas",loop:k.value.loop,autoplay:k.value.autoplay}),A.value.addEventListener("complete",()=>{B.value=!1}))},E=()=>{A.value&&(B.value=!0,ue(()=>{A.value.goToAndPlay(0),setTimeout(()=>{M.value=!0},300),setTimeout(()=>{M.value=!1},900)}))};return pe(()=>{window.addEventListener("resize",S),P(),setTimeout(()=>{i.value=!1},3e3)}),tt(()=>{window.removeEventListener("resize",S),A.value&&A.value.destroy()}),w({handlePlay:E}),(r,C)=>{const W=de("VanLoading"),H=de("van-loading"),X=de("count-to");return a(),p("div",un,[dn,mn,s("div",pn,[s("div",fn,[s("div",hn,[s("span",null,R(r.$t("common.credit")),1),s("div",{class:"pl-1",onClick:L},gn)]),s("div",_n,[o.contributesLoading?(a(),Q(W,{key:0,color:"#000",size:"20"})):(a(),p("span",{key:1,class:"relative",onClick:C[0]||(C[0]=ie=>z("/integralDetail"))},R(t(m).hideIntegral?t(ce)(o.contributes,2):"***"),1))])]),s("div",{class:"address-box text-b1 font-normal text-xs absolute flex items-center justify-end h-[18px] leading-[18px] top-[16px] right-[20px]",onClick:_},[s("span",null,R(t(O)),1),wn]),s("div",xn,[s("div",bn,[s("div",yn,[$n,s("div",Sn,R(r.$t("common.wallet")),1)]),s("div",{class:ee(["balance-value",{"wallet-num-amplify":M.value}])},[o.mcoinLoading?(a(),Q(H,{key:0,size:"14"})):(a(),Q(X,{key:1,startVal:u.value.mcoinBalance,endVal:t(ce)(o.mcoinBalance,3),duration:t(I),autoplay:!0,decimals:3,separator:""},null,8,["startVal","endVal","duration"]))],2)]),In,s("div",{class:"balance-item",onClick:C[1]||(C[1]=ie=>z("/balanceDetail"))},[s("div",kn,[Rn,s("div",Ln,R(r.$t("assets.canWithdrawv2")),1)]),s("div",Tn,[o.pointLoading?(a(),Q(H,{key:0,size:"14"})):(a(),Q(X,{key:1,startVal:+u.value.pointBalance,endVal:t(ce)(o.pointBalance,3),duration:t(I),autoplay:!0,decimals:3,separator:""},null,8,["startVal","endVal","duration"]))])]),s("div",{ref:(ie,Z)=>{Z.coinFlyRef=ie,q.value=ie},id:"coin-fly-container",style:D({opacity:B.value?1:0,pointerEvents:B.value?"auto":"none",transform:`scaleX(${g.value})`})},null,4)])])])}}}),Bn=Y(Cn,[["__scopeId","data-v-41aeb4dc"]]),Un={class:"flex justify-between gap-3"},Pn={emits:["invest","withdraw"],setup(o){return(w,d)=>(a(),p("div",Un,[s("div",{class:"send-btn w-full h-[50px] text-[#FF8812] text-lg text-center flex items-center justify-center",onClick:d[0]||(d[0]=$=>w.$emit("invest"))},R(w.$t("home.invest")),1),s("div",{class:"get-btn w-full h-[50px] text-b1 text-lg text-center flex items-center justify-center",onClick:d[1]||(d[1]=$=>w.$emit("withdraw"))},R(w.$t("home.withdraw")),1)]))}},An=Y(Pn,[["__scopeId","data-v-8029a830"]]),Mn=""+new URL("../images/cat-house-BaIWGYDK.png",import.meta.url).href,En=""+new URL("../images/arrow-right-s-line-DoZN1Qa9.png",import.meta.url).href,Nn=""+new URL("../images/cat-food-CqiIXtTs.png",import.meta.url).href,On=o=>(te("data-v-7ab7cf68"),o=o(),se(),o),Fn={class:"text-xs text-white font-semibold text-shadow text-center whitespace-nowrap"},zn=On(()=>s("img",{src:Nn,alt:"",class:"h-[28px]"},null,-1)),Dn={class:"font-semibold text-sm text-[#B67829] display-text-shadow"},Wn={key:1},Vn=me({props:{scale:{default:1},bubbleLoading:{type:Boolean,default:!1},text:{default:""}},emits:["releaseStart","releaseSuccess","releaseFail"],setup(o,{expose:w,emit:d}){const $=o,{t:T}=_e(),{contributesStore:m}=re(),{handleNaturePoints:f}=Ds(),h=F(()=>$.bubbleLoading),c=F(()=>m.freeRelease||0);F(()=>m.releaseLoading),F(()=>m.releaseSecond);const g=l(!1),v=l(!1),S=()=>{if($.bubbleLoading||g.value||ce(c.value)<=0)return;g.value=!0,setTimeout(()=>{v.value=!0,g.value=!1;try{d("releaseStart"),f(i)}catch(I){console.error("release fail:",I),setTimeout(()=>{d("releaseFail"),v.value=!1},1e3)}},500);const i=(I=!0)=>{I?d("releaseSuccess"):(console.error("release fail"),setTimeout(()=>{d("releaseFail"),v.value=!1,console.log("animationFinished",v.value)},1e3))}};return w({handleRelease:S}),(i,I)=>{const u=de("van-loading");return Ae((a(),p("div",{class:ee(["release-bubble w-[140px] max-w-[140px] h-[140px] max-h-[140px] flex flex-col items-center justify-center",g.value?"release-loading":""]),style:D({width:`${90*o.scale}px`,height:`${90*o.scale}px`}),onClick:S},[s("div",Fn,R(o.text),1),zn,s("div",Dn,[t(h)?(a(),Q(u,{key:0,size:"14",color:"#B67829"})):(a(),p("span",Wn," +"+R(t(c)<1?t(ce)(t(c),4):t(ce)(t(c),2)),1))]),ns(i.$slots,"default",{},void 0,!0)],6)),[[Me,!v.value]])}}}),jn=Y(Vn,[["__scopeId","data-v-7ab7cf68"]]),qn=""+new URL("../images/bowl-BUuEu_lz.png",import.meta.url).href,Hn=""+new URL("../images/bowl-empty-Cc_vumgq.png",import.meta.url).href,Ct=o=>(te("data-v-d2df471a"),o=o(),se(),o),Gn={class:"release-component"},Qn=["src"],Yn={class:"progress-bar__wrap absolute z-10 left-[-16px] top-[50px]"},Xn=Ct(()=>s("div",{class:"progress_pattern"},null,-1)),Zn=[Xn],Jn={class:"progress_word absolute z-10 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"},Kn=Ct(()=>s("img",{class:"absolute z-10 right-[2px] top-1/2 transform -translate-y-1/2 w-[12px] h-[12px]",src:En,alt:""},null,-1)),ea={props:{bowlStyle:{type:Object,default:()=>({})},text:{type:String,required:!0},releaseSecond:{type:Number,default:0},bubbleLoading:{type:Boolean,default:!1}},emits:["releaseStart","releaseSuccess","releaseFail"],setup(o,{expose:w,emit:d}){const $=Ie(),{isLogin:T}=we(),{contributesStore:m}=re(),f=l(!1),h=F(()=>m.releaseData||{}),c=l(!1),g=F(()=>{const L=+h.value.monthTotal||0,_=+h.value.remainTotal||0;return L>0?_/L:0}),v=()=>{c.value=!0,d("releaseStart")},S=()=>{u(),d("releaseSuccess"),setTimeout(async()=>{await m.fetchUserRelase(),setTimeout(()=>{c.value=!1},1e3)},12e3)},i=()=>{c.value=!1,d("releaseFail")},I=l(null),u=async()=>{f.value=!0,await m.getNaturalReleaseTimes(),f.value=!1};return w({releaseBubbleRef:I}),pe(()=>{u()}),(L,_)=>(a(),p("div",Gn,[s("img",{src:t(T)?t(qn):t(Hn),class:"cat-food w-[60px] h-[44px] absolute z-[1]",style:D(o.bowlStyle),role:"img",alt:"猫粮盆"},null,12,Qn),t(T)?(a(),p($e,{key:0},[t(ce)(+t(m).freeRelease)>0?(a(),Q(jn,{key:0,ref:(O,z)=>{z.releaseBubbleRef=O,I.value=O},class:"absolute left-[-16px] top-[-96px] z-50",style:D([{transition:"opacity 0.2s ease-in"},{opacity:c.value?0:1}]),text:o.text,bubbleLoading:c.value,onReleaseSuccess:S,onReleaseStart:v,onReleaseFail:i},null,8,["style","text","bubbleLoading"])):K("",!0),s("div",Yn,[s("div",{class:"progress_bar relative flex items-center",onClick:_[0]||(_[0]=O=>t($).push("/releaseTimeDetail"))},[s("div",{class:"progress_act",style:D(`width: calc(${t(g)} * 177px / 2)`)},Zn,4),s("div",Jn,R(t(h).remainTotal||0)+"/"+R(t(h).monthTotal||0),1),Kn])])],64)):K("",!0)]))}},ta=Y(ea,[["__scopeId","data-v-d2df471a"]]),Bt=o=>(te("data-v-24628c06"),o=o(),se(),o),sa={class:"multi-lottie-container relative"},oa={class:"text-xs text-[#612600] font-semibold leading-[18px] cursor-pointer"},na=Bt(()=>s("span",null,"猫友论坛上新啦！",-1)),aa=Bt(()=>s("img",{src:ys,alt:"气泡对话框箭头",class:"w-3 h-3 inline-block"},null,-1)),ia=[na,aa],la={props:{animation:{type:String,default:"wink",validator:o=>["eat2","eat1","wink"].includes(o)},lottieClass:{type:String,default:""},lottieStyle:{type:Object,default:()=>({})}},emits:["complete"],setup(o,{expose:w,emit:d}){const $=o,{accountStore:T}=re(),{forumEntry:m}=ge,{checkLoginAuth:f}=we(),h={eat2:{path:"lottie/eat_v2.json",loop:!0},eat1:{path:"lottie/eat.json",loop:!1},wink:{path:"lottie/wink.json",loop:!0}},c=l($.animation),[g,v]=j(!1),[S,i]=j(!1),I=l(null),u=l(null),L=l(null),_=F(()=>{switch(c.value){case"eat2":return I.value;case"eat1":return u.value;case"wink":return L.value;default:return L.value}});ae(()=>$.animation,r=>{r!==c.value&&["eat2","eat1","wink"].includes(r)&&(c.value=r,ue(()=>{O()}))});const O=()=>{const r=_.value;if(r)try{c.value==="wink"?r.handlePlay():r.handleGoToAndPlay(0)}catch(C){console.warn("Failed to play animation:",C)}},z=()=>{v(!1),i(!1),ue(()=>{setTimeout(()=>{T.isLogin&&m?i(!0):T.isLogin||v(!0)},800)})},B=()=>{Ts("/forum","cf",{from:0})},k=()=>{c.value!=="wink"&&(c.value="wink",ue(()=>{O()})),d("complete",c.value)},M=r=>{["eat2","eat1","wink"].includes(r)?(c.value=r,ue(()=>{O()})):console.warn(`Invalid animation key: ${r}`)},A=()=>{O()},q=()=>{const r=_.value;if(r&&typeof r.pause=="function")try{r.handlePause()}catch(C){console.warn("Failed to pause animation:",C)}},P=()=>{const r=_.value;if(r&&typeof r.stop=="function")try{r.handleStop()}catch(C){console.warn("Failed to stop animation:",C)}},E=()=>{f(!0)};return w({setAnimation:M,play:A,pause:q,stop:P,getCurrentLottieRef:_}),pe(()=>{ue(()=>{O(),z()})}),(r,C)=>(a(),p("div",sa,[Ae(N(Je,{class:ee(["lottie-item eat-2",o.lottieClass]),style:D(o.lottieStyle),path:h.eat2.path,loop:h.eat2.loop,ref:(W,H)=>{H.eat2Ref=W,I.value=W},autoplay:!1,onComplete:k},null,8,["class","style","path","loop"]),[[Me,c.value==="eat2"]]),Ae(N(Je,{class:ee(["lottie-item",o.lottieClass]),style:D(o.lottieStyle),path:h.eat1.path,loop:h.eat1.loop,ref:(W,H)=>{H.eat1Ref=W,u.value=W},autoplay:!1,onComplete:k},null,8,["class","style","path","loop"]),[[Me,c.value==="eat1"]]),Ae(N(Je,{class:ee(["lottie-item",o.lottieClass]),style:D(o.lottieStyle),path:h.wink.path,loop:h.wink.loop,autoplay:!0,ref:(W,H)=>{H.winkRef=W,L.value=W},onComplete:k},null,8,["class","style","path","loop"]),[[Me,c.value==="wink"]]),s("div",{class:ee(["cat-bubble-dialog px-[10px] pt-[7px]",{"cat-bubble-dialog-grow":t(g)}])},[s("p",oa,[s("span",{class:"whitespace-nowrap",onClick:E},[s("span",null,R(r.$t("common.login unlock more features")),1)])])],2),s("div",{class:ee(["cat-bubble-dialog px-[10px] pt-[7px]",{"cat-bubble-dialog-grow":t(S)}])},[s("p",{class:"text-xs text-[#612600] font-semibold leading-[18px] cursor-pointer"},[s("span",{class:"whitespace-nowrap",onClick:B},ia)])],2)]))}},ca=Y(la,[["__scopeId","data-v-24628c06"]]),ra=""+new URL("../images/roadSigns-DPiZ1yw1.png",import.meta.url).href,ua=o=>(te("data-v-37cd2d2f"),o=o(),se(),o),da=ua(()=>s("img",{src:ra,alt:"road-sign",class:"w-[78px]"},null,-1)),ma=["onClick"],pa={setup(o,{expose:w}){const{checkLoginAuth:d}=we(),$=Ie(),{pointRate:T}=Se(),{withdrawMaiPending:m}=Tt(),{getCurrentAccount:f}=Ee(),{lastPrice:h}=Ws(),c=kt({pointInfo:{userMai:0,merchantMai:0,userSwap:0,merchantExtraMai:0}}),g=l({pointRate:null,lastPrice:null,cacheTime:0,cacheDuration:3e4}),v=async()=>{try{const[B,k,M,A,q]=await Promise.all([m(f()),St(ge.WMAI).balanceOf(ge.LP),St(ge.MCOIN).balanceOf(ge.LP),h(),T()]);g.value.lastPrice=A,g.value.pointRate=q||1,g.value.cacheTime=Date.now();const P=le(M).div(k).toString(),E=q||1,r=le(B.result.userMai),C=le(B.result.merchantMai),W=le(B.result.userSwap),H=le(B.result.merchantExtraMai),X=le(P),ie=le(A),Z=le(E);c.pointInfo.userMai=+r.div(Z).div(ie).div(10).times(.9),c.pointInfo.merchantMai=+C.div(X).div(2).times(.9),c.pointInfo.userSwap=+W.div(X).times(.9),c.pointInfo.merchantExtraMai=+H.div(X).div(2).times(.9)}catch(B){console.error("get mai error:",B),c.pointInfo.userMai=0,c.pointInfo.merchantMai=0,c.pointInfo.userSwap=0,c.pointInfo.merchantExtraMai=0}},S=l({path:"lottie/roadSignsWaveLight.json",loop:!0,autoplay:!1}),i=l(null),I=l(null),u=()=>{i.value&&i.value.destroy(),i.value=It.loadAnimation({container:I.value,path:S.value.path,renderer:"canvas",loop:S.value.loop,autoplay:S.value.autoplay})},L=()=>{i.value&&i.value.play()},_=()=>{i.value&&i.value.stop()},O=()=>{const{userSwap:B,userMai:k,merchantExtraMai:M,merchantMai:A}=c.pointInfo;(B>1e-4||k>1e-4||M>1e-4||A>1e-4)&&i.value?L():_()},z=()=>{d(!0)&&$.push({path:"/plaza",query:{from:"home"}})};return Rt(async()=>{await v(),O()}),pe(async()=>{u(),await v(),O()}),as(()=>{i.value&&i.value.destroy()}),w({handlePlay:L,handleStop:_}),(B,k)=>(a(),p("div",{class:"p-3 flex justify-center items-center",onClick:z},[da,s("div",{ref:(M,A)=>{A.roadSignsWaveContainerRef=M,I.value=M},id:"road-signs-wave-container",onClick:is(z,["stop"])},null,8,ma)]))}},fa=Y(pa,[["__scopeId","data-v-37cd2d2f"]]),ha=""+new URL("../images/cat-house-min-D9fPn9IA.webp",import.meta.url).href,Ut=o=>(te("data-v-84c72412"),o=o(),se(),o),va=Ut(()=>s("div",{class:"pre-bg"},null,-1)),ga=["lowsrc"],_a=["src"],wa=Ut(()=>s("img",{src:$s,class:"w-[100px]",alt:"猫影子"},null,-1)),xa=[wa],ba={props:{vsageUserInfo:{type:Object,default:()=>({})}},emits:["releaseStart","releaseSuccess","releaseFail"],setup(o,{expose:w,emit:d}){const $=o,{t:T}=_e(),{contributesStore:m,accountStore:f}=re(),{isLogin:h,userInfo:c}=et(f),g=F(()=>{var P;return(P=$.vsageUserInfo)==null?void 0:P.nftTokenId}),v=l(1),S=l(0),i=()=>{let E=0;window.innerWidth>=640?E=375:E=window.innerWidth,S.value=Number(E),v.value=E/375},I=F(()=>{const P=h.value?0:90;return{transform:` scale(${v.value}) translateY(${P}px)`,transformOrigin:"top left"}}),u=F(()=>{const E=h.value?5:110;return{transform:` scale(${v.value})`,transformOrigin:"top left",top:`${.6784*S.value+E}px`,left:`${50*v.value}px`,zIndex:10}}),L=F(()=>{const E=h.value?6:106;return{transform:`scale(${v.value})`,transformOrigin:"top right",top:`${.6784*S.value+E}px`,right:`${12*v.value-10}px`}}),_=F(()=>{const E=h.value?-60:30;return{width:"140px",top:`${.6784*S.value+E}px`,zIndex:2}}),O=F(()=>{const E=h.value?79:169;return{width:"100px",top:`${.6784*S.value+E}px`,zIndex:1}}),z=l(null),B=l("wink"),k=P=>{B.value=P,z.value&&z.value.setAnimation(P)},M=()=>{d("releaseStart"),k("eat2")},A=()=>{k("eat2"),setTimeout(()=>{d("releaseSuccess")},3e3),setTimeout(()=>{k("wink")},4e3)},q=()=>{d("releaseFail"),k("wink")};return pe(()=>{window.addEventListener("resize",i),i()}),tt(()=>{window.removeEventListener("resize",i)}),w({setLottie:k}),(P,E)=>(de("van-button"),a(),p("div",{class:ee(["mascot-cat__container relative",[t(h)?"login-bg":"un-login-bg"]])},[va,s("img",{lowsrc:t(ha),src:Mn,class:"cat-house w-[257px] h-[252px] absolute top-[31px] left-0 z-0",style:D(t(I)),role:"img",decoding:"async",alt:"猫爬架"},null,12,ga),N(ta,{ref:(r,C)=>{C.releaseComponentRef=r},text:P.$t("integral.nature"),"release-second":t(m).releaseSecond,onReleaseStart:M,onReleaseSuccess:A,onReleaseFail:q,style:D(t(u))},null,8,["text","release-second","style"]),t(g)===-1||t(g)===null||t(g)===void 0?(a(),Q(ca,{key:0,class:"pointer-events-none mx-auto absolute w-[140px] left-0 right-0",style:D(t(_)),animation:B.value,ref:(r,C)=>{C.multiLottieRef=r,z.value=r}},null,8,["style","animation"])):(a(),p("div",{key:1,class:"absolute ip-box-img left-0 right-0 mx-auto flex justify-center items-center",style:D(t(_))},[s("img",{src:t(Cs)(`nft/nft-${t(g)}.png`)},null,8,_a)],4)),t(g)===-1||t(g)===null||t(g)===void 0?(a(),p("div",{key:2,class:"cat-shadow pointer-events-none mx-auto absolute w-[100px] left-0 right-0 bottom-0",style:D(t(O))},xa,4)):K("",!0),N(fa,{class:"absolute",style:D(t(L))},null,8,["style"]),K("",!0)],2))}},ya=Y(ba,[["__scopeId","data-v-84c72412"]]),$a=""+new URL("../images/talkTips-Yalw8g2D.png",import.meta.url).href,Sa=""+new URL("../images/loading-bg-Ba9S8dsP.webp",import.meta.url).href,Ia=""+new URL("../images/paopao-skjc-CmwEPmRA.png",import.meta.url).href,ka=""+new URL("../images/paopao-skbt-Bi5tqph3.png",import.meta.url).href,Ra=""+new URL("../images/paopao-xfjc-CQi16jNs.png",import.meta.url).href,La=""+new URL("../images/paopao-xfbt-JUCSF024.png",import.meta.url).href,Ta=""+new URL("../images/level_bg-KmviYKss.png",import.meta.url).href,Ca=""+new URL("../images/level_max-C_XKSdVt.png",import.meta.url).href,Ba={},Ua={class:"hidden-assets-XSjqJwE5R__wrap w-0 h-0"},Pa=ls('<img src="'+$a+'" class="w-0 h-0" data-v-66357d00><img src="'+Ss+'" class="w-0 h-0" data-v-66357d00><img src="'+Sa+'" class="w-0 h-0" data-v-66357d00><img src="'+Is+'" class="w-0 h-0" data-v-66357d00><img src="'+ks+'" class="w-0 h-0" data-v-66357d00><img src="'+Ia+'" class="w-0 h-0" data-v-66357d00><img src="'+ka+'" class="w-0 h-0" data-v-66357d00><img src="'+Ra+'" class="w-0 h-0" data-v-66357d00><img src="'+La+'" class="w-0 h-0" data-v-66357d00><img src="'+Ta+'" class="w-0 h-0" data-v-66357d00><img src="'+Ca+'" class="w-0 h-0" data-v-66357d00><img src="'+ms+'" class="w-0 h-0" data-v-66357d00><img src="'+ps+'" class="w-0 h-0" data-v-66357d00><img src="'+Bs+'" class="w-0 h-0" data-v-66357d00>',14),Aa=[Pa];function Ma(o,w){return a(),p("div",Ua,Aa)}const Ea=Y(Ba,[["render",Ma],["__scopeId","data-v-66357d00"]]),Na=o=>(te("data-v-035116ac"),o=o(),se(),o),Oa={class:"relative home-app w-full overflow-hidden font-Puhui"},Fa={class:"home__container h-auto pb-20 w-full"},za={class:"top-ui__wrap relative z-20"},Da={key:0,class:"bottom-ui__wrap flex flex-col justify-end px-3 pb-[90px] w-full z-10 pointer-events-none"},Wa={class:"flex items-end justify-between pointer-events-none"},Va={class:"mt-3 pointer-events-auto"},ja={class:"mt-3 pointer-events-auto"},qa={key:0,class:"bottom-ui__wrap flex flex-col justify-end px-3 pb-[114px] w-full z-10 pointer-events-none min-h-[334px]"},Ha={class:"!pointer-events-auto"},Ga={key:0,class:"fixed top-0 bottom-0 left-0 right-0 z-50 min-h-screen min-w-screen"},Qa=Na(()=>s("div",{style:{color:"red"},class:"frame"},null,-1)),Ya=me({name:"Home"});function Xa(o){const w=l(!1),d=l(null);Us();const{activeStatus:$,activeAmounts:T}=qs(),{getCurrentAccount:m}=Ee(),{contributesStore:f}=re(),{pointBalances:h,pointWithdraw:c}=Se(),g=Ps(),v=As(),{trade:S}=Se(),{tradeWithUsdt:i}=Tt(),{t:I}=_e(),u=Ie(),[L,_]=j(!1),[O,z]=j(!1),[B,k]=j(!1),[M,A]=j(!1),[q,P]=j(!1),[E,r]=j(!0),[C,W]=j(!0),[H,X]=j(!1),[ie,Z]=j(!1),[nt,Oe]=j(!1),[Pt,Fe]=j(!1),at=l(null),{accountStore:xe}=re(),{isLogin:it,userInfo:At}=et(xe),{checkLoginAuth:he,checkRegisterAuth:ze,changeUserInfo:Mt}=xe,{getOneBalance:be}=Ms(),Et=cs(),ve=l(["MCOIN","MUSD","MAI"]),x=kt({nftActive:!1,userInfo:{address:"",userName:""},contributesOld:0,userContributes:{contributes:0,consumes:0,payments:0,releaseSecond:0},vsageUserInfo:{nickName:"",nftTokenId:-1},nftId:-1,coinPoint:0,userActiveStatus:0,userActiveTime:null,pointBalance:null,mcoinBalance:null,usdtBalance:null,allowance:0}),Nt=e=>{x.vsageUserInfo.nickName=e.nickName||"",ue(()=>{Re()})},Ot=async()=>{await ze(!0)&&A(!0)},De=async()=>{x.pointBalance=await h(),r(!1)},ke=async()=>{x.mcoinBalance=await(await g).balanceOf(),W(!1)},We=async()=>{try{x.usdtBalance=await(await v).balanceOf(m())}catch{x.usdtBalance=0}},lt=async()=>{const e=await(await g).allowance(ge.flashMall);x.allowance=e.result},ct=e=>{if(typeof e=="string"&&e.indexOf("address")!==-1&&(e.indexOf("offlineSubmit")!==-1||e.indexOf("pay")!==-1)){_(!1);const n=ne(e,"address"),b=ne(e,"ratio"),U=ne(e,"caddr"),G=ne(e,"cname"),y=ne(e,"amount"),V=ne(e,"orderType"),ye=ne(e,"key");u.push({path:"/offlineSubmit",query:{address:n,ratio:b,caddr:U,cname:G,amount:y,orderType:V,key:ye}})}if(typeof e=="string"&&e.indexOf("goodsDetail")!==-1&&e.indexOf("id")!==-1&&(_(!1),u.push({path:"/goodsDetail",query:{id:e.split("=")[1]}})),typeof e=="string"&&e.indexOf("offlineGoodsDetail")!==-1&&e.indexOf("goodsId")!==-1){const n=ne(e,"goodsId"),b=ne(e,"storeId");let U={};n&&(U.goodsId=n),b&&(U.storeId=b),_(!1),u.push({path:"/offlineGoodsDetail",query:U})}if(typeof e=="string"&&e.indexOf("shop")!==-1&&e.indexOf("shopId")!==-1&&(_(!1),u.push({path:"/shop",query:{shopId:e.split("=")[1]}})),typeof e=="string"&&e.indexOf("category")!==-1&&e.indexOf("shopId")!==-1){const n=J(e,"shopId");_(!1),u.push({path:"/category",query:{deliveryType:1,init:1,shopId:n}})}if(typeof e=="string"&&e.indexOf("cityMap")!==-1&&u.push({path:"/city/cityMap"}),typeof e=="string"&&e.indexOf("payHelpGoods")!==-1&&e.indexOf("payId")!==-1){const n=J(e,"payId");_(!1),u.push({path:"/payHelpGoods",query:{payId:n}})}if(typeof e=="string"&&e.indexOf("payHelpOffline")!==-1&&e.indexOf("payId")!==-1){const n=J(e,"payId");_(!1),u.push({path:"/payHelpOffline",query:{payId:n}})}if(typeof e=="string"&&e.indexOf("securityAddAddressVerify")!==-1){const n=J(e,"myad"),b=J(e,"newad"),U=J(e,"h"),G=J(e,"s"),y=J(e,"t");_(!1),u.push({path:"/securityAddAddressVerify",query:{myad:n,newad:b,h:U,s:G,t:y}})}if(typeof e=="string"&&e.indexOf("securityWithdrawVerify")!==-1){const n=J(e,"owner"),b=J(e,"t");_(!1),u.push({path:"/securityWithdrawVerify",query:{owner:n,t:b}})}if(typeof e=="string"&&e.indexOf("home?invite=")!==-1){const n=J(e,"invite");u.replace({path:"/home",query:{invite:n,t:new Date().getTime()}}),setTimeout(()=>{_(!1)},500)}};function J(e,n){const b=e.substring(e.indexOf("#")+1),U=b.indexOf("?"),G=U!==-1?b.substring(U+1):"";return new URLSearchParams(G).get(n)}const Ft=e=>{e.catch(()=>{Pe(I("common.scanError")),_(!1)})},zt=()=>{he(!0)&&z(!0)},rt=()=>{z(!1),k(!0)},ut=e=>{u.push(e)},Ve=async()=>{_t(!0);const e=await Hs(m());_t(!1),!(!e.success||!e.data)&&(x.contributesOld=x.userContributes.contributes||0,x.userInfo=e.data)},dt=l(),Dt=F(()=>dt.value&&dt.value.memberLevel||0),Wt=async()=>{if(!$t.isConnected()||!Ns.versions.android)return _(!0);$t.invokeQRScanner().then(e=>{ct(e)}).catch(e=>{Pe(e)})},Re=async()=>{const e=await Gs();!e.success||!e.data||(x.vsageUserInfo={nickName:"",nftTokenId:-1},x.vsageUserInfo=e.data,Mt({...At,vsageUserInfo:x.vsageUserInfo}))},Vt=async()=>{await ze(!0)&&X(!0)},jt=async(e,n,b)=>{if(b==="USDT")qt(e,n);else{Z(!0);try{const U=await S(m(),e,n);if(!U.success)return Z(!1);await U.result.wait(),Z(!1),X(!1),qe("eat1"),He(),setTimeout(()=>{f.getNaturalReleaseTimes()},3e3)}finally{Z(!1)}}},qt=async(e,n)=>{Z(!0);try{const b=await i(m(),e,n);if(!b.success)return;await b.result.wait(),Z(!1),X(!1),qe("eat1"),He(),setTimeout(()=>{f.getNaturalReleaseTimes()},3e3)}finally{Z(!1)}},Ht=e=>{e==="USDT"?We():ke()},Gt=()=>{Oe(!0)},je=l(!1),Qt=async(e,n)=>{Fe(!0);try{const b=await c(e,n);if(Fe(!1),!b.success)return;n===0?je.value=!0:je.value=!1,Pe(I("maiPledge.Extraction successful")),Oe(!1),qe("eat1"),He(),setTimeout(()=>{f.getNaturalReleaseTimes()},3e3),at.value.amount=null}finally{Fe(!1)}},mt=async()=>{var U,G,y;const e=await T();x.coinPoint=+e||0;const n=await $();if(!n.success)return;x.userActiveStatus=Number(((U=n.result)==null?void 0:U.status)||0);const b=Es(((G=n.result)==null?void 0:G.time)*1e3);x.userActiveTime={dateTime:b,cutdownTimestamp:+((y=n.result)==null?void 0:y.time)*1e3,m:b.split("-")[1].padStart(2,"0"),d:b.split("-")[2].split(" ")[0].padStart(2,"0"),h:b.split("-")[2].split(" ")[1].split(":")[0].padStart(2,"0")}},pt=l(null),qe=e=>{pt.value.setLottie(e)},He=async()=>{Ve(),f.fetchContributes(),Re(),mt(),De(),ke(),We(),lt(),ve.value.forEach(e=>be(e)),setTimeout(()=>{document.title="首页"},500)},Ge=l(!1);ae([()=>x.pointBalance,()=>x.mcoinBalance],([e,n],[b,U])=>{if(je.value&&(e!==b||n!==U)){if(Ge.value)return;Ge.value=!0,Yt(),setTimeout(()=>{Ge.value=!1},500)}},{immediate:!0,deep:!0});const Yt=()=>{d.value.handlePlay()};ae(()=>Et,async e=>{if(e&&ds.isAddress(e.query.invite)){console.log("邀请码",e.query.invite);const n=e.query.invite,b=m();if(b&&(Os(b,n),u.replace({path:"/home",query:{}})),!he(!0,{needRegister:!0}))return;const U=await ze(!0);console.log("邀请码有效，检查是否已经注册:",U?"已注册":"未注册")}},{immediate:!0,deep:!0}),ae(()=>xe.account,e=>{e&&setTimeout(()=>{Le(),Re(),ve.value.forEach(n=>be(n))},100)},{immediate:!1,deep:!0});const Qe=l(!1),Le=()=>{Ve(),lt(),xe.isLogin&&xe.account&&Re(),setTimeout(()=>{document.title="首页"},500)},oe=yt(()=>{if(Qe.value){if(!he(!1))return;localStorage.getItem("isRegister")?(localStorage.removeItem("isRegister"),setTimeout(()=>{f.fetchContributes(),f.fetchRelaseByScan()},3e3)):(f.fetchContributes(),f.fetchRelaseByScan()),mt(),De(),ke(),We()}},3e4,{immediateCallback:!0});let Te,Ye;const Xt=()=>{oe.pause()},Zt=()=>{oe.resume(),Ye=0,Te=yt(()=>{Ye<3?(De(),ke(),ve.value.forEach(e=>be(e))):Te.pause(),Ye++},3e3)},Jt=()=>{oe.resume()},ft=l(375),ht=l(0),Xe=()=>{ft.value=window.innerWidth,ht.value=window.innerHeight,setTimeout(()=>{Ce()},100)};F(()=>Math.min(640,ft.value)/ht.value);const vt=l(0),gt=l(0),Ce=()=>{const e=document.querySelector(".top-ui__wrap"),n=document.querySelector(".bottom-ui__wrap"),b=document.querySelector(".main-ui__wrap");if(e&&n){const U=e.getBoundingClientRect(),G=n.getBoundingClientRect(),y=b.getBoundingClientRect(),V=U.bottom,ye=G.top,ss=y.top,bt=V+(ye-V)/2;return vt.value=bt-235||0,gt.value=Math.max(ss+40,88),{topUiBottom:V,bottomUiTop:ye,centerPoint:bt,distance:ye-V}}else return null},[Kt,_t]=j(!1),wt=l(null),es=()=>{var e;(e=wt.value)==null||e.getMemberLevel(),Ve()},Ze=()=>{w.value=!0};"requestIdleCallback"in window?requestIdleCallback(Ze,{timeout:4e3}):setTimeout(Ze,3e3);const xt=()=>{document.addEventListener("visibilitychange",function(){document.hidden||(Le(),ve.value.forEach(e=>be(e)),setTimeout(()=>{f.getNaturalReleaseTimes()},3e3),setTimeout(()=>{Ce()},100),oe.pause(),setTimeout(()=>{Qe.value=!0,oe.resume()},500))})},ts=()=>{document.removeEventListener("visibilitychange",xt)};return pe(()=>{he(!1)&&(Le(),xt()),Xe(),window.addEventListener("resize",Xe),f.releaseSecond=0,f.releaseSecondFlag=!1,f.freeRelease=0,setTimeout(()=>{Ce()},100),Ze()}),Rt(()=>{he(!1)&&(Le(),ve.value.forEach(e=>be(e))),setTimeout(()=>{f.getNaturalReleaseTimes()},3e3),setTimeout(()=>{Ce()},100),oe.pause(),setTimeout(()=>{Qe.value=!0,oe.resume()},500)}),tt(()=>{window.removeEventListener("resize",Xe),ts(),oe&&oe.pause(),Te&&Te.pause()}),(e,n)=>{var G;const b=de("van-button"),U=de("van-icon");return a(),p("div",Oa,[s("div",Fa,[s("div",za,[s("div",{class:"bg-test absolute left-0 top-0 w-full",style:D({height:gt.value+"px"})},null,4),N(lo,{ref:(y,V)=>{V.userAvatarRef=y,wt.value=y},tokens:ve.value,info:t(x).userInfo,vsageUserInfo:t(x).vsageUserInfo,onSetLevelShow:zt,onSetEditNameShow:Ot},null,8,["tokens","info","vsageUserInfo"]),N($o,{onHandleTo:ut,onScan:Wt,onInvite:rt})]),s("div",{class:"main-ui__wrap w-full absolute top-0",style:D({transform:`translateY(${vt.value}px)`})},[N(ya,{ref:(y,V)=>{V.gameGrassRef=y,pt.value=y},vsageUserInfo:t(x).vsageUserInfo,onReleaseStart:Xt,onReleaseSuccess:Zt,onReleaseFail:Jt},null,8,["vsageUserInfo"])],4),t(it)?(a(),p("div",Da,[s("div",Wa,[N(Go,{class:"point-times__wrap pointer-events-auto",contributes:t(f).contributes,coinPoint:t(x).coinPoint,userActiveStatus:t(x).userActiveStatus,userActiveTime:t(x).userActiveTime,onHandleOpen:n[0]||(n[0]=y=>t(P)(!0))},null,8,["contributes","coinPoint","userActiveStatus","userActiveTime"]),N(on,{class:"pointer-events-auto"})]),s("div",Va,[N(Bn,{ref:(y,V)=>{V.balanceBoxRef=y,d.value=y},contributes:t(f).contributes,contributesLoading:t(f).loading,pointBalance:t(x).pointBalance,mcoinBalance:t(x).mcoinBalance,pointLoading:t(E),mcoinLoading:t(C)},null,8,["contributes","contributesLoading","pointBalance","mcoinBalance","pointLoading","mcoinLoading"])]),s("div",ja,[N(An,{onInvest:Vt,onWithdraw:Gt})])])):K("",!0),s("div",null,[t(it)?K("",!0):(a(),p("div",qa,[s("div",Ha,[N(b,{class:"main-btn home-login-btn rounded-full text-b1 text-lg w-full font-bold",onClick:n[1]||(n[1]=y=>t(he)(!0))},{default:Ke(()=>[rs(R(e.$t("common.login explorer more")),1)]),_:1})])]))])]),N(fs,{show:t(O),userInfo:t(x).userInfo,userInfoLoading:t(Kt),memberLevel:t(Dt),onClose:n[2]||(n[2]=y=>t(z)(!1)),onInvite:rt,onHandleTo:ut,onOpenVipSuccess:es},null,8,["show","userInfo","userInfoLoading","memberLevel"]),N(hs,{show:t(B),onClose:n[3]||(n[3]=y=>t(k)(!1))},null,8,["show"]),t(L)?(a(),p("div",Ga,[s("div",{class:"absolute z-50 text-white top-2 left-2",onClick:n[4]||(n[4]=y=>t(_)(!1))},[N(U,{name:"arrow-left"})]),N(t(us.QrStream),{onDecode:ct,onInit:Ft},{default:Ke(()=>[Qa]),_:1})])):K("",!0),N(_s,{show:t(M),userName:(G=t(x).vsageUserInfo)==null?void 0:G.nickName,onClose:n[5]||(n[5]=y=>t(A)(!1)),onSuccess:Nt},null,8,["show","userName"]),N(ws,{show:t(q),onClose:n[6]||(n[6]=y=>t(P)(!1))},null,8,["show"]),t(H)?(a(),Q(Vs,{key:1,show:t(H),MCOINBalance:+t(x).mcoinBalance+ +t(x).pointBalance,pointBalance:+t(x).pointBalance,USDTBalance:+t(x).usdtBalance,loading:t(ie),owner:t(m)(),onClose:n[7]||(n[7]=y=>t(X)(!1)),onHanldeInvest:jt,onChangeBalance:Ht},null,8,["show","MCOINBalance","pointBalance","USDTBalance","loading","owner"])):K("",!0),t(nt)?(a(),Q(js,{key:2,ref:(y,V)=>{V.withdrawRef=y,at.value=y},show:t(nt),balance:t(x).pointBalance,loading:t(Pt),onClose:n[8]||(n[8]=y=>t(Oe)(!1)),onHandleWithdraw:Qt},null,8,["show","balance","loading"])):K("",!0),w.value?(a(),Q(Ea,{key:3})):K("",!0)])}}const Za=me({...Ya,setup:Xa}),wi=Y(Za,[["__scopeId","data-v-035116ac"]]);export{wi as default};
