import{aP as W,ai as H,k as K,e as O}from"./index-7OiUoGXy.js";import{_ as S,z as T,r as I,y as q,F as b,G as x,H as u,I as a,Z as P,Q as v,O as w,J as B,K as E,N as U,n as G,P as $,V as J,$ as A,X as D,Y as z,x as X,bl as ee,a2 as te,E as se,U as oe,a4 as M,a0 as ae,bL as R,bC as ne}from"./vendor-Dr_RpJ_Y.js";import{g as le}from"./otc-DQ7C8aiz.js";const Te=""+new URL("../images/Preview-icon-BAYfYu2U.png",import.meta.url).href,Be=""+new URL("../images/top-up-CvoSjQbt.png",import.meta.url).href,ie={class:"text-[#2E2008]"},re={class:"flex justify-between text-xs opacity-60"},ce=["onClick"],pe=T({props:{type:null,list:null},emits:["onClick"],setup(n,{expose:y,emit:f}){const i=n,r=I(null),h=()=>{G(()=>{r.value.scrollTop=r.value.scrollHeight})},C=q(()=>(i.list.slice(0,30)||[]).sort((c,_)=>_.price-c.price)),t=c=>{f("onClick",c)};return y({scrollToBottom:h}),(c,_)=>{const g=b("van-skeleton");return u(),x("div",ie,[a("div",re,[a("span",null,v(c.$t("mall.price")),1),a("span",null,v(c.$t("ecology.quantity")),1)]),w(W)||!(w(C)||[]).length?(u(),P(g,{key:0,class:"mt-3",row:5})):(u(),x("div",{key:1,ref:(l,o)=>{o.scrollContainer=l,r.value=l},class:"mt-1 w-full overflow-auto list-box min-h-[8rem] max-h-[8rem]"},[(u(!0),x(B,null,E(w(C),l=>(u(),x("div",{class:"flex justify-between mb-1 text-xs",key:l.price,onClick:o=>t(l)},[a("span",{class:U({"text-[#FF507A]":n.type=="sell","text-[#14D8A9]":n.type=="buy"})},v(l.price),3),a("span",null,v(w(H)(l.amount)),1)],8,ce))),128))],512))])}}}),Ee=S(pe,[["__scopeId","data-v-7d981700"]]),Ue=""+new URL("../images/left-active-CvQBxcYP.svg",import.meta.url).href,Ve=""+new URL("../images/right-TgmWZf45.svg",import.meta.url).href,Fe=""+new URL("../images/left-CSppCxIr.svg",import.meta.url).href,Oe=""+new URL("../images/right-active-B_cYrZYT.svg",import.meta.url).href,Me=""+new URL("../images/add-wallet-D8_1TaQ3.svg",import.meta.url).href,ue=n=>(D("data-v-559fd3e0"),n=n(),z(),n),de={class:"relative"},me=["onClick"],ve=ue(()=>a("div",{class:"relative z-50 custom-button"},null,-1)),he=T({emits:["change"],setup(n,{expose:y,emit:f}){const i=I(0),r=t=>{f("change",t)},h=t=>{i.value=t*25,f("change",i.value)};return y({resetValue:()=>{i.value=0}}),(t,c)=>{const _=b("van-slider");return u(),x("div",de,[(u(),x(B,null,E(5,(g,l)=>a("div",{class:U(["breakpoint",{"breakpoint-avtive":i.value>=l*25}]),key:g,style:J(`left: ${l*25}%`),onClick:o=>h(l)},null,14,me)),64)),$(_,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=g=>i.value=g),onChange:r,"active-color":"#FEA021"},{button:A(()=>[ve]),_:1},8,["modelValue"])])}}}),Re=S(he,[["__scopeId","data-v-559fd3e0"]]),N=n=>(D("data-v-b58f191e"),n=n(),z(),n),xe={class:"flex items-center justify-between mb-4 px-[15px]"},fe={class:"flex items-end"},_e=["src"],ge={class:"text-[#2E2008]"},ye=N(()=>a("div",{class:"text-lg"},"MAI/MUSD",-1)),be={class:"text-[0.65rem] opacity-60"},we=N(()=>a("div",{id:"line-echarts"},null,-1)),Ce={class:"my-2.5 flex pl-[15px]"},ke=["onClick"],Le={class:"px-[20px] flex text-white pt-4 border-top"},Ie=T({props:{show:{type:Boolean},lastPrice:null},emits:["close","success","setOtcType"],setup(n,{emit:y}){const f=s=>{y("setOtcType",s),i()},i=()=>{y("close")},{t:r}=X(),h=I(5),C=I([{label:"1d",type:5},{label:"3d",type:6},{label:"7d",type:7}]),t=I([]),c="rgba(20, 216, 169, 1)",_="rgba(255, 80, 122, 1)",g="rgba(20, 216, 169, .4)",l="rgba(255, 80, 122, .4)",o=ee({option:{tooltip:{trigger:"axis",axisPointer:{type:"cross"},position:function(s,p,k,L,d){const m={top:10};return m[["left","right"][+(s[0]<d.viewSize[0]/2)]]=30,m}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},grid:[{left:"5%",right:"10%",top:10,height:"80%"},{left:"5%",right:"10%",top:"66%",height:"35%"}],xAxis:[{type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}},{gridIndex:1,type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],yAxis:[{scale:!0,type:"value",smooth:!0,position:"right",max:null,min:null,splitLine:{show:!1},axisLabel:{show:!0},axisLine:{lineStyle:{color:"rgba(46, 32, 8, .4)"}},axisPointer:{lineStyle:{color:"#FFD81F"},label:{color:"#2E2008",backgroundColor:"#FFD81F"}}},{gridIndex:1,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100,height:"20px"}],series:[{name:r("nft.trend"),type:"candlestick",data:[],itemStyle:{color:c,color0:_,borderColor:c,borderColor0:_},dimensions:["-",r("nft.openPrice"),r("nft.closePrice"),r("nft.lowestPrice"),r("nft.highestPrice")],encode:{x:0,y:[1,2,3,4],tooltip:[1,2,3,4]},barWidth:"90%"},{name:r("common.Trading volume"),type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:s=>{if(s.data[2]===1)return l;if(s.data[2]===-1)return g}},barWidth:"90%"}]},myChart:null}),Y=async()=>{F(!0);const s=await le(h.value);if(F(!1),!s.success)return;t.value=s.data.reverse();const p=[],k=[],L=[];let d=null,m=null;for(let e=0;e<t.value.length;e++)p.push(t.value[e].createTime),m=m?Math.max(m,Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),d=d?Math.min(d,Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),k.push([t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max]),L.push([e,t.value[e].total||0,t.value[e].open>t.value[e].close?1:-1]);o.option.yAxis[0].max=O((m*100+.1*100)/100,1),o.option.yAxis[0].min=O(d-.1>0?(d*100-.1*100)/100:0,1),o.option.xAxis[0].data=p,o.option.xAxis[1].data=p,o.option.series[0].data=k,o.option.series[1].data=L},V=async()=>{await Y();const s=document.getElementById("line-echarts");s&&(R(s).dispose(),o.myChart=ne(R(s)),o.myChart.setOption(o.option,!0))},j=async()=>{o.option.xAxis[0].data=[],o.option.xAxis[1].data=[],o.option.series[0].data=[],await V(),o.myChart.setOption(o.option,!0)},[Q,F]=te(!1),Z=s=>{h.value!==s.type&&(h.value=s.type,j())};return se(()=>{V()}),(s,p)=>{const k=b("van-loading"),L=b("van-icon"),d=b("VanButton"),m=b("van-popup");return u(),P(m,{show:n.show,"onUpdate:show":p[2]||(p[2]=e=>ae(show)?show.value=e:null),position:"bottom",round:"",style:{padding:"15px 0 25px"},onClose:i},{default:A(()=>[w(Q)?(u(),P(k,{key:0,class:"opacity-60 absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]",size:"32px"})):oe("",!0),a("div",xe,[a("div",fe,[a("img",{class:"w-8 h-8 mr-2.5 mb-1",src:w(K)("images/tokens/MCOIN.png"),alt:"",srcset:""},null,8,_e),a("div",ge,[ye,a("div",be,v(s.$t("otc.latestprice"))+" "+v(n.lastPrice),1)])]),$(L,{name:"cross",size:"22px",onClick:i})]),we,a("div",Ce,[(u(!0),x(B,null,E(C.value,e=>(u(),x("div",{class:"py-1.5 px-2.5 mr-2.5 bg-[#ECECEC] text-[#2E2008] rounded",key:e.type,onClick:$e=>Z(e)},[a("span",{class:U({"opacity-30":h.value!==e.type})},v(e.label),3)],8,ke))),128))]),a("div",Le,[$(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base mr-4",style:{"background-color":"#14d8a9"},onClick:p[0]||(p[0]=e=>f("buy"))},{default:A(()=>[M(v(s.$t("otc.buyIn")),1)]),_:1}),$(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base ml-4",style:{"background-color":"#ff507a"},onClick:p[1]||(p[1]=e=>f("sell"))},{default:A(()=>[M(v(s.$t("otc.sellOut")),1)]),_:1})])]),_:1},8,["show"])}}}),De=S(Ie,[["__scopeId","data-v-b58f191e"]]);export{De as C,Re as O,Ue as _,Ve as a,Fe as b,Oe as c,Me as d,Ee as e,Te as f,Be as g};
