import{_ as ct}from"./bg-dot-bY5zV9J7.js";import{_ as T,z as S,r as A,G as d,H as c,I as o,Q as a,N as $,J as I,K as V,V as j,X as W,Y as P,U as w,O as l,a4 as B,F as p,P as f,$ as x,a2 as it,x as dt,y as C,bl as rt,B as D,E as ut,o as mt,q as ft,n as ht,Z as gt}from"./vendor-Dr_RpJ_Y.js";import{E as vt}from"./EcologyHeader-7-hGw5pX.js";import{_ as bt}from"./copy-w-Dr8nkqKW.js";import{_ as pt}from"./link-CItP-_Ep.js";import{h as kt,f as N,az as G,b8 as xt,e as Y,g as yt,b5 as _t,R as $t,b as wt}from"./index-CU2nzZe6.js";import{B as Ct}from"./BackIcon-CDrGaEPo.js";import{u as At}from"./lendingPoolContract-2CXR5Hns.js";import"./UserLevel-BMXoJmTX.js";import"./avatarRing-DtI_kRg6.js";import"./level-CZDjoDAX.js";import"./UserAsset-5EDFIGCX.js";import"./TokenBalance-CXGFvOYs.js";const Bt=t=>(W("data-v-031a8168"),t=t(),P(),t),St=["onClick"],qt=Bt(()=>o("div",{class:"h-[2px]"},null,-1)),Lt=S({props:{list:null,color:{default:"rgba(255, 255, 255, 0.4)"},activeColor:{default:"white"}},emits:["change"],setup(t,{expose:r,emit:h}){const n=A(null),y=v=>{n.value!==v.desc?n.value=v.desc:n.value=v.asc,h("change",n.value)},b=()=>{n.value=null,h("change",n.value)};return r({resetSort:b}),(v,k)=>(c(),d("div",{class:$(["py-3 px-2.5 flex items-center text-sm text-black-0 font-light",t.list.length==1?"justify-start":"justify-between"])},[o("div",{class:$({" font-semibold":!n.value,"mr-[57px]":t.list.length==1}),onClick:b},a(v.$t("common.default")),3),(c(!0),d(I,null,V(t.list,g=>(c(),d("div",{class:"flex items-center",key:g.asc,onClick:e=>y(g)},[o("div",{class:$(["mr-2.5",{"font-semibold":n.value===g.asc||n.value===g.desc}])},a(g.name),3),o("div",null,[o("div",{class:$(["triangle_up",{triangle_up_active:n.value===g.asc}]),style:j(n.value===g.asc?`border-bottom-color: ${t.activeColor}`:`border-bottom-color: ${t.color}`)},null,6),qt,o("div",{class:$(["triangle_down",{triangle_down_active:n.value===g.desc}]),style:j(n.value===g.desc?`border-top-color: ${t.activeColor}`:`border-top-color: ${t.color}`)},null,6)])],8,St))),128))],2))}}),Ft=T(Lt,[["__scopeId","data-v-031a8168"]]),It={class:"font-normal text-[#2E2008] ml-2.5 text-sm"},Vt={class:"flex items-center justify-between pb-2.5 border-b border-soild border-[#724422]/20"},Tt=o("img",{src:bt,class:"w-4 h-4 ml-1",alt:""},null,-1),Et={class:"mt-1.5 text-xs text-balck-300 font-normal"},Rt={key:0,class:"font-semibold text-[#FB1A18]"},zt={key:1,class:"font-semibold text-[#FB1A18]"},Mt={class:"flex-center-bw mt-2.5"},jt={class:"font-semibold font-WorkSans"},Dt={class:"flex-center-bw mt-2.5"},Nt={class:"font-semibold font-WorkSans"},Ut={class:"flex-center-bw mt-2.5"},Wt={class:"font-semibold font-WorkSans"},Pt={key:0,class:"flex-center-bw mt-2.5"},Gt={class:"font-semibold font-WorkSans"},Yt=["href"],Ht=o("img",{src:pt,class:"w-5 h-5 ml-1",alt:"Link to BSC"},null,-1),Ot={class:"flex-center-bw mt-2.5"},Jt={class:"font-semibold font-WorkSans"},U=S({props:{data:{default:()=>({})}},setup(t){return(r,h)=>(c(),d("div",It,[o("div",Vt,[o("div",null,[o("div",null,a(r.$t("ecology.flow id"))+" "+a(t.data.id),1),t.data.borrower?(c(),d("div",{key:0,class:"mt-1.5 text-xs text-balck-300 font-normal flex items-center",onClick:h[0]||(h[0]=n=>l(kt)(t.data.borrower))},[B(a(l(N)(t.data.borrower,"***",5,5))+" ",1),Tt])):w("",!0),o("div",Et,a(l(G)(t.data.startTime*1e3,"Y/m/d H:i:s")),1)]),t.data.status===2?(c(),d("div",Rt,a(r.$t("ecology.Cleared")),1)):(c(),d("div",zt,a(r.$t("ecology.Overdue days",{time:l(xt)(t.data.dueTime*1e3)})),1))]),o("div",Mt,[o("span",null,a(r.$t("ecology.Original loan amount")),1),o("span",jt,a(t.data.loanAmount)+" MUSD ",1)]),o("div",Dt,[o("span",null,a(r.$t("jiebei.wait pay amount")),1),o("span",Nt,a(l(Y)(t.data.result))+" MUSD",1)]),o("div",Ut,[o("span",null,a(r.$t("ecology.Mortgage quantity")),1),o("span",Wt,a(t.data.collateralAmount)+" MAI",1)]),t.data.hash?(c(),d("div",Pt,[o("span",null,a(r.$t("order.hash")),1),o("span",Gt,[o("a",{class:"text-sm font-normal text-right flex items-center underline text-[#FF8812]",href:`${l(yt).chainConfig.blockExplorerUrls[0]}/tx/${t.data.hash}`},[B(a(l(N)(t.data.hash,"***",9,5)||"--")+" ",1),Ht],8,Yt)])])):w("",!0),o("div",Ot,[o("span",null,a(r.$t("ecology.morgage date")),1),o("span",Jt,a(l(_t)(t.data.dueTime)),1)])]))}}),Kt={class:"fixed bottom-0 w-full px-2.5 safe-bottom sm:bottom-[0%] lg:bottom-[0%] z-20 cartbarBody safe-bottom-page pointer-events-none"},Qt={class:"w-full h-14 flex items-center justify-between pb-0.5 px-3.5 bg-white rounded-xl sm:w-[355px] shadow-2 pointer-events-auto"},Xt={class:"font-normal text-[#2E2008]"},Zt={class:"flex items-center gap-3 text-base font-semibold font-WorkSans"},te={class:"text-sm opacity-80"},ee=S({props:{checked:null,loading:{type:Boolean},totalAmount:null,isCheckAll:{type:Boolean}},emits:["submit","totalCheck"],setup(t,{emit:r}){return(h,n)=>{const y=p("VanRadio"),b=p("VanButton");return c(),d("div",Kt,[o("div",Qt,[o("div",Xt,[o("div",Zt,[f(y,{checked:t.isCheckAll,"checked-color":"#FEA021",onClick:n[0]||(n[0]=v=>r("totalCheck"))},null,8,["checked"]),B(" "+a(t.totalAmount||0)+" Mai ",1)]),o("div",te,a(h.$t("ecology.pens selected",{num:t.checked.length})),1)]),f(b,{class:"btn-red btn-shadow px-8 min-w-[135px] h-[40px] text-white",loading:t.loading,disabled:!t.checked.length,onClick:n[1]||(n[1]=v=>r("submit"))},{default:x(()=>[B(a(h.$t("ecology.Liquidation")),1)]),_:1},8,["loading","disabled"])])])}}}),oe=T(ee,[["__scopeId","data-v-312ba4af"]]),se=t=>$t("GET","/lendingPool/list",t,!1),H=t=>(W("data-v-78c2b862"),t=t(),P(),t),ae={class:"mx-2 my-2 rounded-b-xl bg-[#6C4B33] bg-shadow rounded-t-xl relative"},ne=H(()=>o("img",{src:ct,class:"w-[130px] h-[75px] absolute bottom-1 right-2"},null,-1)),le={class:"justify-center items-center text-center relative h-[2.375rem] flex bg-[#2E2008] text-base rounded-t-xl font-semibold text-white p-[3px]"},ce={class:"px-1.5"},ie={key:0,class:"items-center pb-2.5 text-white flex px-2.5"},de={key:0},re={class:"min-w-min p-2.5"},ue={key:0},me=H(()=>o("div",{class:"safe-bottom-page"},null,-1)),fe=S({setup(t){const{checkLoginAuth:r}=wt(),h=ft(),n=mt(),[y,b]=it(!1),{liquidateBatch:v}=At(),{t:k}=dt(),g=C(()=>{const s=new Date().getTime()-864e5;return G(s,`Y${k("common.year")}m${k("common.month")}d${k("common.day2")}`)}),e=rt({active:0,page:0,size:10,finished:!1,list:[],loading:!1,total:0,checked:[],sort:null}),O=C(()=>[{name:k("jiebei.wait pay amount"),asc:1,desc:2},{name:k("ecology.Mortgage MAI quantity"),asc:3,desc:4}]),J=s=>{e.sort=s,R()},q=A(null),E=C(()=>!!(e.checked&&e.list&&e.list.length>0&&e.list.length===e.checked.length)),K=()=>{E.value?X():Q()},Q=()=>{q.value.toggleAll(!0)},X=()=>{q.value.toggleAll()},Z=C(()=>e.checked&&e.checked.length>0?Y(e.checked.reduce((s,m)=>s.plus(new D(m.collateralAmount)),new D(0))):0),R=()=>{e.page=0,e.total=0,e.finished=!1,e.list=[],e.checked=[],z()},z=async()=>{e.loading=!0,e.page+=1,await ot(),setTimeout(()=>{e.loading=!1},1e3)},L=A(null),u=A(null),tt=()=>{var s;u.value=2,h.replace({path:"/ecology-liquidation",query:{status:u.value}}),(s=L.value)==null||s.resetSort()},et=()=>{var s;u.value===2&&(u.value=null,h.replace({path:"/ecology-liquidation",query:{status:u.value}}),(s=L.value)==null||s.resetSort())},ot=async()=>{const s=await se({page:e.page,size:e.size,sort:e.sort,status:u.value});if(!s.success){e.finished=!0;return}if(!s.data||!+s.total){e.finished=!0;return}e.total=s.total;const m=document.getElementById("fm-page"),F=m.scrollY||m.scrollTop;e.list=e.page===1?s.data:e.list.concat(s.data),e.list.length>=e.total&&(e.finished=!0),ht(()=>{m.scrollTo({top:F})})},st=async()=>{if(!r(!0))return;const s=e.checked.map(m=>+m.id);b(!0);try{if(!(await v(s)).success)return;R()}finally{b(!1)}};return ut(()=>{n.query.status&&(u.value=+n.query.status)}),(s,m)=>{const F=p("van-icon"),M=p("van-swipe-cell"),at=p("van-checkbox"),nt=p("van-checkbox-group"),lt=p("VanList");return c(),d("div",{class:"relative",ref:(i,_)=>{_.container=i}},[f(vt),o("div",ae,[ne,o("div",le,[f(Ct,{onBack:et,url:u.value===2?"/ecology-liquidation":"",class:"absolute left-2.5 font-normal -translate-y-1/2 top-1/2"},null,8,["url"]),o("span",null,a(u.value===2?s.$t("ecology.Liquidation records"):s.$t("ecology.Loans to be liquidated")),1),u.value!==2?(c(),d("div",{key:0,onClick:tt,class:"text-primary absolute right-2.5 font-normal -translate-y-1/2 top-1/2 text-sm"},a(s.$t("flashSale.Record")),1)):w("",!0)]),o("div",ce,[f(Ft,{ref:(i,_)=>{_.sortBoxRef=i,L.value=i},list:l(O),onChange:J},null,8,["list"]),u.value!==2?(c(),d("div",ie,[f(F,{name:"info",color:"#fff",size:"18",class:"mr-1.5"}),o("span",null,a(s.$t("ecology.Current display data cutoff"))+a(l(g)),1)])):w("",!0),f(lt,{loading:l(e).loading,"onUpdate:loading":m[1]||(m[1]=i=>l(e).loading=i),finished:l(e).finished,"finished-text":s.$t("common.noMore"),"loading-text":s.$t("common.loading"),onLoad:z},{default:x(()=>[u.value===2?(c(),d("div",de,[(c(!0),d(I,null,V(l(e).list,i=>(c(),d("div",{class:"bg-[#FFFDF8] rounded-xl mb-2.5",key:i.id},[f(M,null,{default:x(()=>[o("div",re,[f(U,{data:i},null,8,["data"])])]),_:2},1024)]))),128))])):(c(),gt(nt,{key:1,modelValue:l(e).checked,"onUpdate:modelValue":m[0]||(m[0]=i=>l(e).checked=i),ref:(i,_)=>{_.checkboxGroup=i,q.value=i},"checked-color":"#FEA021"},{default:x(()=>[(c(!0),d(I,null,V(l(e).list,i=>(c(),d("div",{class:"bg-[#FFFDF8] rounded-xl mb-2.5",key:i.id},[f(M,null,{default:x(()=>[f(at,{name:i,class:"min-w-min p-2.5"},{default:x(()=>[f(U,{data:i},null,8,["data"])]),_:2},1032,["name"])]),_:2},1024)]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["loading","finished","finished-text","loading-text"])])]),u.value!==2?(c(),d("div",ue,[f(oe,{isCheckAll:l(E),checked:l(e).checked,loading:l(y),totalAmount:l(Z),onSubmit:st,onTotalCheck:K},null,8,["isCheckAll","checked","loading","totalAmount"]),me])):w("",!0)],512)}}}),Be=T(fe,[["__scopeId","data-v-78c2b862"]]);export{Be as default};
