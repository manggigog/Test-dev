import{y as x,r as t,a1 as C,D as k,F as _,G as v,O as y,H as F,Q as B,N as T,E as V,l as N,I as q,J as z,K as D,X as E}from"./vendor-BUT0HZ5j.js";import{_ as R}from"./GoodsEvaluateItem-yEK-IM35.js";import{_ as S}from"./EvalHeader-CWDe7Hp8.js";import{aB as M}from"./index-DDhEkd_5.js";import"./BackIcon-biFt6cm7.js";const O={class:"px-2.5 font-normal"},P={class:"bg-white rounded-xl p-2.5 min-h-[calc(100%-44px)]"},G={class:"mb-2 pb-2 border-b border-solid border-[#F6F6F5]"},j=x({setup(H){var h;const r=C(),b=N(),l=t(!1),u=t(!1),s=t([]),c=t(0),w=t(10),d=t(0),p=t((h=r.query)==null?void 0:h.commentLevel),I=async()=>{var i,m;const e={page:c.value,size:w.value,goodsId:f.value||null,shopId:g.value||null,commentStatus:1,commentType:null,sortBy:"desc|comment_time",havePicsFlag:null,haveContentFlag:null,havePicOrTextFlag:!1};p.value==2&&(e.commentType=2),p.value==3&&(e.commentType=1);const o=await M(e);if(!o.success){u.value=!0;return}const n=((i=o.data)==null?void 0:i.records)||[],a=((m=o.data)==null?void 0:m.total)||0;if(!n||!a){u.value=!0;return}d.value=a,s.value=c.value===1?n:s.value.concat(n),s.value.length>=d.value&&(u.value=!0)},L=async()=>{l.value=!0,c.value+=1,await I(),setTimeout(()=>{l.value=!1},1e3)},$=e=>{b.push(e)},f=t(null),g=t(null);return k(()=>{f.value=r.query.goodsId,g.value=r.query.shopId}),(e,o)=>{const n=V("VanList");return v(),_("div",O,[y(S,{title:e.$t("evaluate.Folded Reviews")},null,8,["title"]),F("div",P,[F("div",G,B(e.$t("evaluate.reviews without content",{num:d.value||"-"})),1),y(n,{class:"mt-4",loading:l.value,"onUpdate:loading":o[0]||(o[0]=a=>l.value=a),finished:u.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:L},{default:T(()=>[(v(!0),_(q,null,z(s.value,(a,i)=>(v(),D(R,{style:E(i===s.value.length-1?"margin-bottom: 0.5rem":""),onClick:m=>$(`/offlineEvaluateView?id=${a.orderId}`),data:a,key:a.id},null,8,["style","onClick","data"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])])}}});export{j as default};
