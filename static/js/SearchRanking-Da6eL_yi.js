import{y as J,bc as x,bd as O,r as s,F as h,G as l,H as a,K as k,a2 as _,O as d,N as y,Q as C,P as t,E as R,a1 as Q,l as U,I as W,J as X}from"./vendor-D6JO6WHW.js";import{M as Y,I as Z}from"./Item-BuHec0lE.js";import{a as ee}from"./ranking-OWa6OvRp.js";import{B as oe}from"./BackIcon-CPUEW9je.js";import{_ as ne}from"./ApproveInfo-DPYor_Ct.js";import{C as te}from"./index-CybuWkSo.js";import"./member-CkdtKF8y.js";import"./info-CcC__Mfc.js";import"./auth-icon-Bx5iOxx7.js";const se={style:{"background-color":"white"},class:"relative z-50 h-full min-h-screen overflow-y-hidden parent-view mall-header-bg"},ae={class:"sticky top-0 z-50 text-sm font-normal mall-header-bg"},le={class:"flex relative justify-center items-center h-[44px] px-2.5"},re={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},ue={class:"font-semibold"},ie={class:"px-2.5"},ce={key:0,class:"bg-gradient-7 text-white px-2.5 py-0.5 text-xxs leading-normal rounded-xl"},de=a("div",{class:"h-[16px]"},null,-1),fe={class:"bg-white rounded-t-xl"},Ce=J({setup(me){const b=Q(),E=U(),[I,$]=x(!1),[B,M]=x(!1),u=O({keyword:""}),T=s(null),V=e=>{e.code==="Enter"&&(w(),T.value.blur())},N=()=>{w()},F=async()=>{g.value=!0,m.value+=1,await D(),g.value=!1},w=()=>{m.value=0,f.value=!1,r.value=[],F()},g=s(!1),f=s(!1),m=s(0),j=s(10),S=s(0),r=s([]),D=async()=>{var o,c;const e=await ee({page:m.value,size:j.value,type:((o=b.query)==null?void 0:o.type)||null,cycleType:((c=b.query)==null?void 0:c.cycleType)||null,nickname:u.keyword});if(!e.success||!e.data){f.value=!0;return}S.value=e.total,r.value=m.value===1?e.data:r.value.concat(e.data),r.value&&r.value.length>=S.value&&(f.value=!0)},[P,L]=x(!1),p=s(0),i=s({}),A=(e,o)=>{e&&(o>1?(i.value=e,$(!0)):(o?p.value=o:p.value=0,i.value=e,M(!0)))},q=()=>{p.value=0},z=e=>{E.push(e)},H=()=>{w()};return(e,o)=>{const c=R("van-icon"),K=R("van-field"),G=R("VanList");return l(),h("div",se,[a("section",ae,[a("section",le,[a("div",re,[d(oe,null,{default:y(()=>[a("span",null,C(e.$t("common.return")),1)]),_:1})]),a("div",ue,C(e.$t("common.search")),1)]),a("section",ie,[d(K,{ref:(n,v)=>{v.searchRef=n,T.value=n},"model-value":t(u).keyword,"onUpdate:model-value":o[0]||(o[0]=n=>t(u).keyword=n),clearable:"",class:"flex-1 rounded-3xl flex items-center h-[30px] text-black-300",onKeypress:V,placeholder:e.$t("mall.Enter search keywords"),enterkeyhint:"search"},{"left-icon":y(()=>[t(u).keyword?_("",!0):(l(),k(c,{key:0,name:"search",size:"18"}))]),"right-icon":y(()=>[a("div",{onClick:N},[t(u).keyword?(l(),k(c,{key:1,name:"search",size:"18"})):(l(),h("div",ce,C(e.$t("common.search")),1))])]),_:1},8,["model-value","placeholder"])]),de]),a("div",fe,[d(G,{loading:g.value,finished:f.value,onLoad:F,"finished-text":e.$t("common.noMore"),class:"px-4 min-h-[40vh] pt-4 pb-0.5 bg-white rounded-t-2xl relative shadow-box z-10 -mt-1"},{default:y(()=>[(l(!0),h(W,null,X(r.value,n=>(l(),h("div",{key:n.id,class:"mb-5"},[d(Z,{noRank:!0,rankItem:n,onMakeRanking:v=>A(n),onMakeRankingInfo:v=>{A(n,v)}},null,8,["rankItem","onMakeRanking","onMakeRankingInfo"])]))),128))]),_:1},8,["loading","finished","finished-text"])]),t(I)&&i.value?(l(),k(ne,{key:0,show:t(I),info:i.value,onClose:o[1]||(o[1]=n=>t($)(!1))},null,8,["show","info"])):_("",!0),t(B)?(l(),k(Y,{key:1,show:t(B),type:p.value,info:i.value,onClose:o[2]||(o[2]=n=>t(M)(!1)),onChangeType:q,onInit:H,onHandleTo:z},null,8,["show","type","info"])):_("",!0),d(te,{show:t(P),content:"原生态助力榜升级，可前往新店铺助力榜页面投票助力",showConfirm:!0,showReject:!0,confirmText:"前往新页面",noClose:"",onClose:o[3]||(o[3]=n=>t(L)(!1)),onConfirm:o[4]||(o[4]=n=>z("/talentRanking")),onReject:o[5]||(o[5]=n=>t(L)(!1))},null,8,["show"])])}}});export{Ce as default};
