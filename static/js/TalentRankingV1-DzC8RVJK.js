import{_ as U,z as L,q as te,y as ee,r as y,E as le,G as i,H as t,P as $,bx as Te,$ as A,I as a,Q as h,a3 as D,O as c,N as q,J as ie,K as re,U as b,X as de,Y as ve,F as E,x as Ce,D as ae,Z as C,a4 as pe,a2 as j,n as Ie}from"./vendor-Dr_RpJ_Y.js";import{I as me,M as Le}from"./Item-BZJXQk3l.js";import{u as Fe,$ as Ae,c as Se,k as se,f as Me,e as ze,y as Be,a as De,C as Ee}from"./index-LRhcxFAI.js";import{R as Ve,D as Ne,a as Qe}from"./RankingTab-DfGHLVW1.js";import{_ as je}from"./member-BZWba7V1.js";import{_ as qe}from"./auth-icon-QCWqqJ9q.js";import{B as Ue}from"./BackIcon-CDrGaEPo.js";import{N as Oe}from"./NoRanking-DTEe1agy.js";import{g as He,e as Pe,m as Ge,a as We}from"./ranking-CcW7KzkF.js";import{_ as Xe}from"./ApproveInfo-B3_gzKd9.js";import"./info-B8XGZ-iV.js";import"./calendar-yellow-Dx3USFLv.js";const Ze=""+new URL("../images/talent-title-icon-DuZsBbh1.png",import.meta.url).href,Je=""+new URL("../images/shop-title-icon-b3DgBOev.png",import.meta.url).href,Ke=""+new URL("../images/community-title-icon-DkeFIdIb.png",import.meta.url).href,Ye=""+new URL("../images/talent-title-icon-white-Dk8oenuU.png",import.meta.url).href,et=""+new URL("../images/shop-title-icon-white-Cr-vaLO-.png",import.meta.url).href,tt=""+new URL("../images/community-title-icon-white-DSopQM--.png",import.meta.url).href,nt=["onClick"],ot={class:"w-[20%]"},st=["onClick"],at=L({props:{info:null,type:null,ownFunds:null,cycleType:null},emits:["toApply","toApplyShop","toQuit"],setup(s,{emit:p}){const n=s,d=Fe().getCurrentAccount(),_=te(),{memberLevels:l}=Se(),R=()=>{+n.type==2?f.value?p("toApply"):p("toApplyShop"):p("toApply")},e=ee(()=>{var k,g,S,M,x,H,P,G,N,z,F,W;return n.info?{mai:(k=n.ownFunds)==null?void 0:k.mai,lp:(g=n.ownFunds)==null?void 0:g.lp,authorizeMai:(S=n.ownFunds)==null?void 0:S.authorizeMai,authorizeLp:(M=n.ownFunds)==null?void 0:M.authorizeLp,memberLevel:v.value,contribute:(x=n.ownFunds)==null?void 0:x.contribute,authorizeContribute:(H=n.ownFunds)==null?void 0:H.authorizeContribute,myRanking:n.info&&n.info.myRanking,...n.info,address:d}:f.value?{...f.value,mai:(P=n.ownFunds)==null?void 0:P.mai,lp:(G=n.ownFunds)==null?void 0:G.lp,authorizeMai:(N=n.ownFunds)==null?void 0:N.authorizeMai,authorizeLp:(z=n.ownFunds)==null?void 0:z.authorizeLp,memberLevel:v.value,contribute:(F=n.ownFunds)==null?void 0:F.contribute,authorizeContribute:(W=n.ownFunds)==null?void 0:W.authorizeContribute,myRanking:0,address:d,avatar:f.value.logo,nickname:f.value.storeName}:{}}),v=y(0),m=async()=>{v.value=await l()},f=y(null),O=async()=>{const{success:k,data:g}=await Ae();!k||(g==null?void 0:g.status)!==1||g&&(f.value=g)},ne=k=>{_.push(k)},V=async()=>{m()};return le(()=>{O(),V()}),(k,g)=>(t(),i("div",{class:q(["fixed bottom-0 w-full sm:w-[375px] p-5 mx-auto backdrop-blur-xl bg",{"py-2":+n.type==2?!!f.value:!1}]),onClick:D(R,["stop"])},[$(me,{rankItem:c(e),index:0,showTip:!s.info&&+n.type==2?!!f.value:!1},Te({right:A(()=>[a("div",null,[a("div",{onClick:g[0]||(g[0]=D(S=>ne(`assist-recordsV1?type=${s.type}&cycleType=${s.cycleType}`),["stop"])),class:"border border-solid text-[#fea223] border-[#fea223] text-xs rounded-3xl w-[75px] h-[25px] py-1 mb-2"},h(k.$t("ranking.assistRecords")),1),a("div",ot,[s.info?(t(),i("div",{key:1,class:"btn-linear text-xs rounded-3xl w-[75px] py-1",onClick:g[1]||(g[1]=D(S=>p("toQuit"),["stop"]))},h(k.$t("ranking.Exit list")),1)):(t(),i("div",{key:0,class:"btn-linear text-xs rounded-3xl w-[75px] h-[25px] py-1",onClick:D(R,["stop"])},h(+n.type==2?f.value?k.$t("ranking.Go and apply"):k.$t("shop.applyShop"):k.$t("ranking.Go and apply")),9,st))])])]),_:2},[(s.type===2?!s.info&&!f.value||f.value&&f.value.status!==1:!s.info)?{name:"left",fn:A(()=>[a("div",null,h(k.$t("ranking.Not listed yet")),1)])}:void 0]),1032,["rankItem","showTip"])],10,nt))}}),lt=U(at,[["__scopeId","data-v-75439235"]]),fe=s=>(de("data-v-e63a3d88"),s=s(),ve(),s),it={class:"flex items-end justify-center gap-2 mx-2 bg-transparent"},rt=["onClick"],ut=["src"],ct=["src"],pt={class:"relative mx-auto mb-2 border-2 border-white border-solid rounded-full avatar-img"},dt=["src"],vt={class:"flex items-center justify-center px-2 text-xs"},mt={class:"line-clamp-1"},ft={key:0,class:"font-normal"},kt={class:"flex items-center justify-center pt-1.5 gap-1.5"},ht={key:0,class:"inline-block align-text-bottom lex-shrink-0"},gt={class:"flex items-center bg-[#FAE89C] rounded-xl py-[0.20rem] px-1.5 text-xxs"},yt=fe(()=>a("img",{src:je,class:"inline-block w-3 h-3"},null,-1)),_t=["onClick"],wt={class:"flex items-center bg-[#FAE89C] rounded-xl py-[0.20rem] px-1.5"},xt=fe(()=>a("img",{src:qe,class:"inline-block w-3 h-3"},null,-1)),$t={class:"text-xxs text-default"},bt={key:0,class:"mt-2.5 text-xs font-bold text-center text-[#7D7D7D]"},Rt=["onClick"],Tt=L({props:{rankingTopList:null},emits:["makeRanking","makeRankingInfo"],setup(s,{emit:p}){const{rankingTopList:n}=s,d=l=>{p("makeRanking",l)},_=(l,R)=>{p("makeRankingInfo",l,R)};return(l,R)=>(t(),i("div",it,[(t(!0),i(ie,null,re(s.rankingTopList,(e,v)=>(t(),i("div",{key:v,class:q(["flex-1 rounded-xl py-2.5 min-h-[194px] relative",`bg-linear__${v==1?"one":v==0?"two":"three"}`]),onClick:m=>_(e,1)},[a("img",{src:c(se)(`images/ranking/${v==1?"one":v==0?"two":"three"}.png`),class:"w-[13px] h-[20px] absolute top-2.5 right-2.5"},null,8,ut),a("img",{src:c(se)(`images/ranking/${v==1?"one":v==0?"two":"three"}-bg.png`),class:"w-auto h-[22px] mx-auto mb-2"},null,8,ct),a("div",pt,[a("img",{src:e&&e.avatar&&e.avatar.split()[0]||c(se)("images/ranking/noPosition.png"),class:"object-cover w-full h-full rounded-full"},null,8,dt)]),a("div",vt,[a("span",mt,h(e&&e.nickname||l.$t("ranking.Waiting for a vacant position")),1),e?(t(),i("span",ft," ("+h(e&&c(Me)(e.address,"",0,4))+")",1)):b("",!0)]),a("div",kt,[e?(t(),i("div",ht,[a("div",gt,[yt,a("span",null,"V"+h(e&&e.memberLevel||0),1)])])):b("",!0),e&&e.authorizeAddress?(t(),i("div",{key:1,onClick:D(m=>_(e,99),["stop"]),class:"inline-block align-text-bottom lex-shrink-0"},[a("div",wt,[xt,a("span",$t,h(l.$t("ecology.authorized")),1)])],8,_t)):b("",!0)]),e?(t(),i("div",bt,h(l.$t("ranking.hot"))+h(e&&c(ze)(e.heat)||0),1)):b("",!0),e?(t(),i("div",{key:1,class:q(["w-[60px] text-center py-1 mt-1 assist-bg rounded-3xl mx-auto text-xs",v===0?"text-[#80B0EB]":v===1?"text-[#E9AA5E]":"text-[#F2A592]"]),onClick:D(m=>d(e),["stop"])},h(l.$t("ranking.Makealist")),11,Rt)):b("",!0)],10,rt))),128))]))}}),Ct=U(Tt,[["__scopeId","data-v-e63a3d88"]]),It=L({props:{list:null},emits:["makeRanking","makeRankingInfo"],setup(s,{emit:p}){const{list:n}=s,d=l=>{p("makeRanking",l)},_=(l,R)=>{p("makeRankingInfo",l,R)};return le(()=>{}),(l,R)=>(t(!0),i(ie,null,re(s.list,(e,v)=>(t(),i("div",{key:e.id,class:"mb-5"},[$(me,{rankItem:e,index:v,onMakeRanking:m=>d(e),onMakeRankingInfo:m=>{_(e,m)}},null,8,["rankItem","index","onMakeRanking","onMakeRankingInfo"])]))),128))}}),Lt={class:"flex-1 h-4 line-clamp-1 line-clamp-ellipsis overflow-hidden text-xs text-[#2E2008] opacity-60"},Ft=L({setup(s){const p=te(),n=()=>{p.push("/postDetail-rank")};return(d,_)=>{const l=E("van-icon");return t(),i("div",{class:"w-full h-[25px] flex leading-8 bg-white rounded-3xl items-center px-2.5 mr-2.5",onClick:n},[a("div",Lt,h(d.$t("ranking.noticeContent_1")),1),$(l,{class:"ml-2.5",name:"arrow",color:"#B0AFAE"})])}}}),At={class:"pl-2.5 pt-2.5"},St={class:"w-full flex-start"},Mt=["onClick"],zt=L({emits:["changeHeader"],setup(s,{emit:p}){const{t:n}=Ce(),d=te(),_=ee(()=>[{title:n("ranking.Talent ranking"),type:1},{title:n("ranking.shop ranking"),type:2},{title:n("ranking.Community ranking"),type:3}]),l=y(null);ae(()=>d.currentRoute.value.query.type,e=>{l.value=+e||1},{immediate:!0,deep:!0});const R=e=>{e.type!==l.value&&(d.replace({path:"talentRankingV1",query:{type:e.type,cycleType:d.currentRoute.value.query.cycleType}}),l.value=e.type,p("changeHeader",e.type))};return(e,v)=>(t(),i("div",At,[a("div",St,[$(Ue),(t(!0),i(ie,null,re(c(_),m=>(t(),i("div",{key:m.type,onClick:f=>R(m),class:"w-full flex-center"},[a("div",{class:q(["",m.type===l.value?"font-bold text-xl":"opacity-60 font-normal text-lg"])},h(m.title),3)],8,Mt))),128))])]))}}),Bt={class:"py-8 text-base text-center text-black"},Dt={class:"mt-1.5 text-sm text-black-400"},Et={class:"flex"},Vt=L({props:{show:{type:Boolean},loading:{type:Boolean}},emits:["close","confirm"],setup(s,{emit:p}){const n=()=>{p("confirm")};return(d,_)=>{const l=E("van-button");return t(),C(Be,{width:"90%",show:s.show,name:d.$t("common.tip"),teleport:"body",onClose:_[1]||(_[1]=()=>{p("close")})},{default:A(()=>[a("div",Bt,[a("div",null,h(d.$t("ranking.Exit all lists")),1),a("div",Dt,h(d.$t("ranking.ExitTip")),1)]),a("div",Et,[$(l,{class:"plain-btn w-1/2 mx-2.5 text-[#FEA021] font-semibold",onClick:_[0]||(_[0]=()=>{p("close")})},{default:A(()=>[pe(h(d.$t("common.cancel")),1)]),_:1}),$(l,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:n,loading:s.loading},{default:A(()=>[pe(h(d.$t("common.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["show","name"])}}}),Nt=U(Vt,[["__scopeId","data-v-a5397e66"]]),Qt=""+new URL("../images/notOpen-C4u_k9Xa.png",import.meta.url).href,jt={},qt=s=>(de("data-v-04ea101f"),s=s(),ve(),s),Ut={class:"flex flex-col items-center justify-centers min-h-[60vh] pt-[4.5625rem] text-center text-[#2E2008] bg-transparent rounded-t-2xl"},Ot=qt(()=>a("img",{class:"w-[7.0625rem] h-[5.75rem]",src:Qt},null,-1)),Ht={class:"font-semibold text-lg mt-6"},Pt={class:"text-sm mt-1 opacity-40"};function Gt(s,p){return t(),i("div",Ut,[Ot,a("div",Ht,h(s.$t("ranking.The community list is not yet open")),1),a("div",Pt,h(s.$t("ranking.Please look forward to it")),1)])}const Wt=U(jt,[["render",Gt],["__scopeId","data-v-04ea101f"]]),Xt={class:"relative"},Zt={class:"flex flex-col w-full h-auto bg-linear parent-view"},Jt={class:"relative my-2.5 mt-5"},Kt={key:0,class:"flex justify-center py-4"},Yt={key:0,src:Ze,class:"w-auto h-10"},en={key:1,src:Je,class:"w-auto h-10"},tn={key:2,src:Ke,class:"w-auto h-10"},nn={key:1,class:"flex justify-center py-4"},on={key:0,src:Ye,class:"w-auto h-10"},sn={key:1,src:et,class:"w-auto h-10"},an={key:2,src:tt,class:"w-auto h-10"},ln={class:"pb-2.5 flex items-center"},rn=L({name:"TalentRankingV1"});function un(s){const{reloadStore:p}=De(),n=te(),[d,_]=j(!1),[l,R]=j(!1),e=y({});y(null);const v=r=>{e.value={years:r.years,cycle:r.cycle},ce(),f()},m=y(null),f=async()=>{m.value=null;const{success:r,data:o}=await He({type:u.value,...e.value,cycleType:w.value});r&&(m.value=o,ne())},O=y({}),ne=async()=>{const{success:r,data:o}=await Ge({type:u.value,cycleType:w.value,...e.value});if(r){if(!m.value){O.value=o;return}m.value={...m.value,...o,myRanking:o.myRanking+1}}},V=y(!1),k=y(!1),g=y(0),S=y(9999),M=y(0),x=y([]),H=async()=>{var K;const r=u.value,o=w.value,I=await We({page:g.value,size:S.value,type:u.value,cycleType:w.value,...e.value});if(!I.success||!I.data){k.value=!0;return}for(let Y=0;Y<((K=I.data)==null?void 0:K.length);Y++)if(r!==u.value||o!==w.value)return;M.value=I.total,x.value=g.value===1?I.data:x.value.concat(I.data),x.value&&x.value.length>=M.value&&(k.value=!0),Ie(()=>{B&&B.scrollTo({top:J.value,behavior:"smooth"})})},P=ee(()=>x.value?x.value.slice(3):[]),G=ee(()=>[x.value[1],x.value[0],x.value[2]]),N=y(0),z=y({}),F=(r,o)=>{X(!0)},[W,X]=j(!1),ke=()=>{N.value=0},w=y(1),he=r=>{w.value!==+r.value&&(e.value={},w.value=+r.value,J.value=0,w.value==3&&(Q(),f()))},u=y(1),ge=r=>{u.value!==r&&(u.value=r,J.value=0,f(),Q())},[ye,oe]=j(!1),[_e,ue]=j(!1),we=async()=>{ue(!0);const{success:r}=await Pe();oe(!1),r&&(Q(),f(),ue(!1))};ae(()=>n.currentRoute.value.query.type,r=>{if(u.value===+r)return;let o=1;n.currentRoute.value.path==="/talentRankingShop"&&(o=2),u.value=+r||o},{immediate:!0,deep:!0}),ae(()=>n.currentRoute.value.query.cycleType,r=>{w.value!==+r&&(w.value=+r||1)},{immediate:!0,deep:!0});const xe=async()=>{V.value=!0,g.value+=1,await H(),V.value=!1},Q=()=>{g.value=0,k.value=!1,x.value=[],xe()},ce=()=>{B&&(console.log(B.scrollTop),J.value=B.scrollTop),Q()},$e=()=>{X(!0)},Z=r=>{n.push(r)};let B=null;const J=y(0);return le(()=>{B=document.querySelector(".list__wrap"),w.value===3&&(Q(),f())}),(r,o)=>{const I=E("van-icon"),K=E("VanList"),Y=E("van-pull-refresh"),be=E("router-view");return t(),i("div",Xt,[a("div",Zt,[$(zt,{onChangeHeader:ge}),a("div",Jt,[$(Ve,{onChangeTab:he}),u.value===2?(t(),i("div",{key:0,class:"absolute right-2.5 top-1/2 -translate-y-1/2",onClick:o[0]||(o[0]=T=>Z(`/search-ranking?type=${u.value}&cycleType=${w.value}`))},[$(I,{name:"search",size:"20"})])):b("",!0)]),$(Y,{onRefresh:c(p).reload,class:"list__wrap flex-1 overflow-auto rounded-t-xl"},{default:A(()=>[x.value.length>0?(t(),i("div",Kt,[u.value===1?(t(),i("img",Yt)):u.value===2?(t(),i("img",en)):(t(),i("img",tn))])):(t(),i("div",nn,[u.value===1?(t(),i("img",on)):u.value===2?(t(),i("img",sn)):(t(),i("img",an))])),a("div",ln,[w.value==2&&u.value!=3?(t(),C(Ne,{key:0,class:"flex-shrink-0",pageType:"list",onOnConfirm:v})):b("",!0),w.value==1&&u.value!=3?(t(),C(Qe,{key:1,class:"flex-shrink-0",pageType:"list",onChangeTime:v})):b("",!0),$(Ft,{class:q({"ml-2.5":w.value===3||u.value==3})},null,8,["class"])]),x.value.length>0?(t(),C(Ct,{key:2,rankingTopList:c(G),onMakeRanking:F,onMakeRankingInfo:o[1]||(o[1]=(T,Re)=>{F()})},null,8,["rankingTopList"])):b("",!0),k.value&&M.value==0&&u.value!=3?(t(),C(Oe,{key:3})):u.value!=3?(t(),C(K,{key:4,loading:V.value,finished:k.value,"finished-text":r.$t("common.noMore"),class:"px-4 min-h-[40vh] pt-4 pb-[100px] relative z-10 bg-transparent"},{default:A(()=>[$(It,{list:c(P),onMakeRanking:F,onMakeRankingInfo:o[2]||(o[2]=(T,Re)=>{F()})},null,8,["list"])]),_:1},8,["loading","finished","finished-text"])):b("",!0),u.value==3?(t(),C(Wt,{key:5})):b("",!0)]),_:1},8,["onRefresh"]),c(l)?(t(),C(Le,{key:0,show:c(l),type:N.value,info:z.value,onClose:o[3]||(o[3]=T=>c(R)(!1)),onChangeType:ke,onInit:ce,onHandleTo:Z},null,8,["show","type","info"])):b("",!0)]),$(be,{class:"child-view"}),$(Nt,{show:c(ye),loading:c(_e),onClose:o[4]||(o[4]=T=>c(oe)(!1)),onConfirm:we},null,8,["show","loading"]),c(d)&&z.value?(t(),C(Xe,{key:0,show:c(d),info:z.value,onClose:o[5]||(o[5]=T=>c(_)(!1))},null,8,["show","info"])):b("",!0),u.value!=3?(t(),C(lt,{key:1,type:u.value,cycleType:w.value,ownFunds:O.value,info:m.value,onToApply:$e,onToApplyShop:o[6]||(o[6]=T=>Z("/editShopInfo")),onToQuit:o[7]||(o[7]=T=>c(oe)(!0))},null,8,["type","cycleType","ownFunds","info"])):b("",!0),$(Ee,{show:c(W),content:"原生态助力榜升级，可前往新店铺助力榜页面投票助力",showConfirm:!0,showReject:!0,confirmText:"前往新页面",noClose:"",onClose:o[8]||(o[8]=T=>c(X)(!1)),onConfirm:o[9]||(o[9]=T=>Z("/talentRanking")),onReject:o[10]||(o[10]=T=>c(X)(!1))},null,8,["show"])])}}const cn=L({...rn,setup:un}),$n=U(cn,[["__scopeId","data-v-5bd90902"]]);export{$n as default};
