import{_ as E}from"./arrow-C-JiYSPQ.js";import{a as j,q as W,e as k,k as U,o as q,g as h,x as G,j as P,b as J}from"./index-LRhcxFAI.js";import{z,y as v,r as L,D as K,E as Q,F as C,G as t,H as a,I as _,U as u,Z as V,O as o,N as y,Q as b,a3 as X,a4 as R,P as I,J as F,_ as Y,K as Z,X as ee,Y as ae}from"./vendor-Dr_RpJ_Y.js";const ne={class:"flex items-center"},te={class:"flex items-center"},se={key:0,class:"mr-1"},oe={key:0},le={key:0},re={key:1,class:"mr-1","data-no-login":"true"},ce={key:2,class:"text-[#FEA021] text-lg"},ie=z({props:{token:null,icon:{type:Boolean},tokenName:{type:Boolean},nameClass:null,balanceClass:null,unitConversion:{type:Boolean},addTokenIcon:{type:Boolean},isCountTo:{type:Boolean,default:!1}},setup(e,{expose:B}){const n=e,{accountStore:w}=j(),{addTokenBalance:x,balances:p,getOneBalance:N}=W(),m=v(()=>(p==null?void 0:p[n.token])||0),l=L(!0),s=v(()=>n.token==="BNB"?4:1),r=v(()=>{const c=Number(m.value||0);return n.unitConversion?c>1e6?Number(k(c/1e3,2)):Number(k(c,1)):Number(k(c,s.value))}),i=v(()=>n.unitConversion&&Number(m.value||0)>1e6?"k":""),T=v(()=>n.unitConversion?1:s.value),g=L(0);K(()=>m.value,(c,d)=>{if(d!=null){const f=Number(d||0);n.unitConversion?f>1e6?g.value=Number(k(f/1e3,4)):g.value=Number(k(f,4)):g.value=Number(k(f,s.value))}else g.value=r.value},{immediate:!0});const A=async()=>{h[n.token]&&(await N(n.token),l.value=!1)},M=async()=>{n.addTokenIcon&&G({address:h[n.token],symbol:(await P(h[n.token]).symbol()).result||n.token,decimals:await P(h[n.token]).decimals(),image:U(`images/tokens/${n.token}.png`)})},$=async()=>{l.value=!0,await A()},D=async()=>{await A()};return Q(()=>{$()}),B({refresh:D}),(c,d)=>{const f=C("VanImage"),S=C("van-icon"),O=C("VanLoading"),H=C("count-to");return a(),t("div",{class:"flex items-center",onClick:M},[_("div",ne,[e.icon?(a(),V(f,{key:0,class:y(["w-[22px] h-auto mr-1",e.token==="LP"?"w-[40px]":""]),round:"",src:o(U)(`images/tokens/${e.token}.png`)},null,8,["class","src"])):u("",!0),e.tokenName&&e.token!=="LP"?(a(),t("span",{key:1,class:y(["mr-1",e.nameClass])},b(e.token),3)):u("",!0),e.tokenName&&e.token==="LP"?(a(),t("span",{key:2,class:y(["mr-1",e.nameClass])},"WMAI-MCOIN LP",2)):u("",!0)]),e.token==="LP"?(a(),t("div",{key:0,onClick:d[0]||(d[0]=X(()=>{o(q)("/lp-transfer-in")},["stop"])),class:"px-1.5 flex-shrink-0 mr-1 py-0.5 rounded flex items-center border border-solid border-[#FBA923] text-xs text-[#FBA923]"},[R(b(c.$t("assets.LP transfer"))+" ",1),I(S,{name:"arrow",class:"ml-0.5 font-bold text-xs"})])):u("",!0),_("div",te,[o(w).isLogin?(a(),t("span",se,[l.value&&o(m)===0?(a(),V(O,{key:0,size:"14"})):(a(),t(F,{key:1},[e.isCountTo?(a(),t("span",{key:0,class:y(e.balanceClass)},[I(H,{startVal:g.value,endVal:o(r),duration:1200,autoplay:!0,decimals:o(T),separator:""},null,8,["startVal","endVal","decimals"]),o(i)?(a(),t("span",oe,b(o(i)),1)):u("",!0)],2)):(a(),t("span",{key:1,class:y(e.balanceClass)},[R(b(o(r))+" ",1),o(i)?(a(),t("span",le,b(o(i)),1)):u("",!0)],2))],64))])):(a(),t("span",re," 0 ")),e.addTokenIcon?(a(),t("div",ce,[I(S,{name:"add-o"})])):u("",!0)])])}}}),ue=e=>(ee("data-v-b56ff20a"),e=e(),ae(),e),me=ue(()=>_("img",{class:"w-4 h-4",src:E},null,-1)),de=z({props:{tokens:{default:["MCOIN","MUSD","MAI"]},countTo:{type:Boolean,default:!1}},emits:["handleTo"],setup(e,{expose:B,emit:n}){const{checkLoginAuth:w}=J(),x=L([]),p=(l,s)=>{if(l){const r=typeof s=="number"?s:parseInt(String(s),10);isNaN(r)||(x.value[r]=l)}},N=async()=>{const l=x.value.filter(s=>s!==null&&typeof s.refresh=="function").map(s=>s.refresh());await Promise.all(l)},m=()=>{w(!0)&&n("handleTo","/userAssets")};return B({refreshTokenBalances:N}),(l,s)=>(a(),t("div",{class:"flex items-center justify-between h-7 px-1 text-sm bg-white rounded-full line-clamp-1 asset-bg overflow-x-auto",onClick:m},[(a(!0),t(F,null,Z(e.tokens,(r,i)=>(a(),V(ie,{key:i,ref:T=>p(T,i),token:r,icon:!0,"unit-conversion":!0,class:"mr-1",nameClass:"line-clamp-1",isCountTo:e.countTo,id:r+"_ele_mark"},null,8,["token","isCountTo","id"]))),128)),me]))}}),ge=Y(de,[["__scopeId","data-v-b56ff20a"]]),ve=""+new URL("../images/cat-shadow-naI2hTWi.svg",import.meta.url).href,ye=""+new URL("../images/arrow-slide-C-9mR8Cb.svg",import.meta.url).href,be=""+new URL("../images/loading-eouHFNRU.webp",import.meta.url).href,he=""+new URL("../images/plaza-bg-D8OyAHPS.webp",import.meta.url).href,Ce=""+new URL("../images/plaza-build-BHm6pFl7.png",import.meta.url).href;export{ge as U,ye as _,ve as a,be as b,Ce as c,he as p};
