import{C as $}from"./CommonVanProvider-KZuKVOde.js";import{_ as C}from"./SearchBar-C8hJeDlC.js";import{a as L,aS as N,B as q}from"./index-BckdT6oc.js";import{H as x}from"./HomeGoodsItem-D-S5e3PT.js";import{_ as B,r as s,o as V,E as G,Z as m,H as n,$ as h,q as P,F as R,I as y,P as A,G as F,K as H,J as M}from"./vendor-Dr_RpJ_Y.js";import"./BackIcon-CDrGaEPo.js";import"./search-C4fLtTfY.js";import"./delete-BlDblrKv.js";import"./MCOIN-Bodfn-v1.js";import"./store-odfdGeH-.js";import"./useCityMap-VqEHfq08.js";import"./RatioBox-BcgP5qRZ.js";import"./ImgBoutiqueLable-B-2xCcw4.js";import"./shop-CeqcS6K2.js";const U={class:"px-3"},z={class:"goods__wrap overflow-y-scroll mt-3 h-[calc(100vh-100px)]"},E={setup(J){const{cityMapStore:g}=L(),c=V(),_=P(),f=s({storeName:c.query.storeName?decodeURIComponent(c.query.storeName):"",storeId:c.query.storeId?c.query.storeId:""}),d=s({keyword:""}),u=s(0),k=s(20),a=s(!1),l=s(!1),r=s([]),w=()=>{console.log(d.value.keyword),I(),v()},I=()=>{r.value=[],u.value=0,a.value=!1,l.value=!1},v=async()=>{a.value=!0,u.value+=1,l.value=!1,await S(),a.value=!1},S=async()=>{var e;const{success:o,data:t}=await N({goodsNameLike:d.value.keyword,page:u.value,size:k.value,storeId:(e=f.value)==null?void 0:e.storeId,sortBy:"asc|goods_id"});if(!o||!t||!t.total){l.value=!0;return}const i=t.records||[];r.value=u.value===1?i:[...r.value,...i],r.value.length>=t.total&&(l.value=!0)},b=o=>{o.goodsId&&g.setSelectedGoods(o),_.back()};return G(()=>{v()}),(o,t)=>{const i=R("van-list");return n(),m($,{title:f.value.storeName||o.$t("city.Select Service"),class:"bg-white font-Puhui font-normal relative","theme-vars":{"nav-bar-background-color":"#fff","field-placeholder-text-color":"#A6A6A6"},ref:(e,p)=>{p.searchRef=e}},{default:h(()=>[y("div",U,[A(C,{modelValue:d.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.keyword=e),placeholder:o.$t("city.Please enter the service name"),"search-button-text":o.$t("common.search"),onSearch:w},null,8,["modelValue","placeholder","search-button-text"]),y("div",z,[r.value.length===0&&!a.value?(n(),m(q,{key:0,name:o.$t("city.There are currently no service records for this store")},null,8,["name"])):(n(),m(i,{key:1,loading:a.value,"onUpdate:loading":t[1]||(t[1]=e=>a.value=e),finished:l.value,"finished-text":o.$t("common.noMore"),onLoad:v},{default:h(()=>[(n(!0),F(M,null,H(r.value,e=>(n(),m(x,{key:e.goodsId,goods:e,class:"mb-4 :last:mb-0",onClick:p=>b(e),"show-store-name":!1},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])]),_:1},8,["title"])}}},ae=B(E,[["__scopeId","data-v-be4a5f82"]]);export{ae as default};
