import{z as G,a2 as x,bl as J,r as s,G as m,H as l,I as a,Z as p,U as _,P as c,$ as h,Q as C,O as t,F as R,o as O,q as Q,J as Z,K as W}from"./vendor-Dr_RpJ_Y.js";import{M as X,I as Y}from"./Item-DtrnfknN.js";import{a as ee}from"./ranking-C95yPXZe.js";import{B as oe}from"./BackIcon-CDrGaEPo.js";import{_ as ne}from"./ApproveInfo-B-zXUCfO.js";import{C as te}from"./index-7OiUoGXy.js";import"./member-BZWba7V1.js";import"./info-B8XGZ-iV.js";import"./auth-icon-QCWqqJ9q.js";const se={style:{"background-color":"white"},class:"relative z-50 h-full min-h-screen overflow-y-hidden parent-view mall-header-bg"},ae={class:"sticky top-0 z-50 text-sm font-normal mall-header-bg"},le={class:"flex relative justify-center items-center h-[44px] px-2.5"},re={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},ie={class:"font-semibold"},ue={class:"px-2.5"},ce={key:0,class:"bg-gradient-7 text-white px-2.5 py-0.5 text-xxs leading-normal rounded-xl"},de=a("div",{class:"h-[16px]"},null,-1),fe={class:"bg-white rounded-t-xl"},Ce=G({setup(me){const b=O(),z=Q(),[I,A]=x(!1),[$,E]=x(!1),i=J({keyword:""}),B=s(null),V=e=>{e.code==="Enter"&&(v(),B.value.blur())},j=()=>{v()},M=async()=>{k.value=!0,f.value+=1,await D(),k.value=!1},v=()=>{f.value=0,d.value=!1,r.value=[],M()},k=s(!1),d=s(!1),f=s(0),q=s(10),T=s(0),r=s([]),D=async()=>{var o,u;const e=await ee({page:f.value,size:q.value,type:((o=b.query)==null?void 0:o.type)||null,cycleType:((u=b.query)==null?void 0:u.cycleType)||null,nickname:i.keyword});if(!e.success||!e.data){d.value=!0;return}T.value=e.total,r.value=f.value===1?e.data:r.value.concat(e.data),r.value&&r.value.length>=T.value&&(d.value=!0)},[N,y]=x(!1),F=s(0),w=s({}),S=(e,o)=>{e&&y(!0)},P=()=>{F.value=0},L=e=>{z.push(e)},H=()=>{v()};return(e,o)=>{const u=R("van-icon"),K=R("van-field"),U=R("VanList");return l(),m("div",se,[a("section",ae,[a("section",le,[a("div",re,[c(oe,null,{default:h(()=>[a("span",null,C(e.$t("common.return")),1)]),_:1})]),a("div",ie,C(e.$t("common.search")),1)]),a("section",ue,[c(K,{ref:(n,g)=>{g.searchRef=n,B.value=n},"model-value":t(i).keyword,"onUpdate:model-value":o[0]||(o[0]=n=>t(i).keyword=n),clearable:"",class:"flex-1 rounded-3xl flex items-center h-[30px] text-black-300",onKeypress:V,placeholder:e.$t("mall.Enter search keywords"),enterkeyhint:"search"},{"left-icon":h(()=>[t(i).keyword?_("",!0):(l(),p(u,{key:0,name:"search",size:"18"}))]),"right-icon":h(()=>[a("div",{onClick:j},[t(i).keyword?(l(),p(u,{key:1,name:"search",size:"18"})):(l(),m("div",ce,C(e.$t("common.search")),1))])]),_:1},8,["model-value","placeholder"])]),de]),a("div",fe,[c(U,{loading:k.value,finished:d.value,onLoad:M,"finished-text":e.$t("common.noMore"),class:"px-4 min-h-[40vh] pt-4 pb-0.5 bg-white rounded-t-2xl relative shadow-box z-10 -mt-1"},{default:h(()=>[(l(!0),m(Z,null,W(r.value,n=>(l(),m("div",{key:n.id,class:"mb-5"},[c(Y,{noRank:!0,rankItem:n,onMakeRanking:g=>S(n),onMakeRankingInfo:g=>{S(n)}},null,8,["rankItem","onMakeRanking","onMakeRankingInfo"])]))),128))]),_:1},8,["loading","finished","finished-text"])]),t(I)&&w.value?(l(),p(ne,{key:0,show:t(I),info:w.value,onClose:o[1]||(o[1]=n=>t(A)(!1))},null,8,["show","info"])):_("",!0),t($)?(l(),p(X,{key:1,show:t($),type:F.value,info:w.value,onClose:o[2]||(o[2]=n=>t(E)(!1)),onChangeType:P,onInit:H,onHandleTo:L},null,8,["show","type","info"])):_("",!0),c(te,{show:t(N),content:"原生态助力榜升级，可前往新店铺助力榜页面投票助力",showConfirm:!0,showReject:!0,confirmText:"前往新页面",noClose:"",onClose:o[3]||(o[3]=n=>t(y)(!1)),onConfirm:o[4]||(o[4]=n=>L("/talentRanking")),onReject:o[5]||(o[5]=n=>t(y)(!1))},null,8,["show"])])}}});export{Ce as default};
