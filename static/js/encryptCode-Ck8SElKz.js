import{_ as N,z as V,a2 as z,y as R,r as n,o as B,E as F,q as K,G as U,H as x,P as g,I as e,bj as b,Q as r,O as o,bk as w,bs as j,N as E,Z as P,U as Q,X as D,Y as M,F as O}from"./vendor-Dr_RpJ_Y.js";import{_ as A}from"./EvalHeader-BnKRlnel.js";import{a as G,V as H,f as J,h as L}from"./index-7OiUoGXy.js";import{q as T}from"./user-DxDy-AJj.js";import"./BackIcon-CDrGaEPo.js";const u=l=>(D("data-v-064d11f4"),l=l(),M(),l),W={class:"px-2.5 font-normal"},X={class:"px-4"},Y={class:"mt-8 text-lg text-center text-primary"},Z=u(()=>e("div",{class:"h-5 w-[1px] bg-primary mb-2 mx-auto"},null,-1)),ee={class:"flex items-center justify-center gap-2"},te=u(()=>e("div",{class:"flex-1 h-[1px] bg-primary"},null,-1)),se=u(()=>e("div",{class:"flex-1 h-[1px] bg-primary"},null,-1)),oe=u(()=>e("div",{class:"h-5 w-[1px] bg-primary mt-2 mx-auto"},null,-1)),ae={class:"mt-5 text-center"},ne={class:"container mx-auto px-3.5 my-8 bg-white py-2.5 rounded-xl"},re={class:"px-4"},le={class:"line-clamp-2"},ie={class:"absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},ce=V({setup(l){const{accountStore:d}=G(),a=B(),q=K(),{generateKey:v,encryptKey:S}=H(),[p,$]=z(!1),y=R(()=>{var s;let t={type:a.query.type,...S(m.value,a.query.code),id:null};return a.query.type==="1"&&(t.id=d.store.id||null),a.query.type==="2"&&(t.id=((s=f.value)==null?void 0:s.id)||null),JSON.stringify(t)}),m=n(null),f=n(null),i=n(!0),k=async()=>{const{success:t,data:s}=await T();t&&(f.value=s)},_=n(null),h=n(0);return F(async()=>{var s;h.value=((s=_.value)==null?void 0:s.clientWidth)-30,i.value=!1;const t=q.currentRoute.value.path;+a.query.type==1?m.value=await v("merchant",t):+a.query.type==2&&(m.value=await v("user",t),await k()),i.value=!0}),(t,s)=>{const C=O("van-icon");return x(),U("div",W,[g(A,{title:t.$t("encryption.Key Management")},null,8,["title"]),e("div",X,[e("div",Y,r(+o(a).query.type==1?`${o(d).store.storeName}`:`${o(J)(o(d).account,"...",4,4)} ${t.$t("encryption.consumer")}`),1),e("div",{ref:(c,I)=>{I.conRef=c,_.value=c},class:"container mx-auto px-3.5 mt-4 bg-white py-11 rounded-xl"},[Z,e("div",ee,[te,b(g(j,{value:o(y),size:h.value,level:"L"},null,8,["value","size"]),[[w,i.value]]),se]),oe],512),e("div",ae,r(t.$t("encryption.scan the QR")),1),b(e("div",ne,[e("div",re,r(t.$t("encryption.Plain text key")),1),e("div",{class:E(["w-full break-all relative overflow-hidden bg-[#F4F4F4] rounded-xl px-4 py-2.5 mt-2 text-sm",{"filter-box":!o(p)}]),onClick:s[0]||(s[0]=c=>o($)(!o(p)))},[e("div",le,r(o(y)),1),e("div",ie,[o(p)?Q("",!0):(x(),P(C,{key:0,name:"eye-o",size:"22"}))])],2),e("div",{class:"mt-3.5 text-center text-primary text-base",onClick:s[1]||(s[1]=c=>o(L)(o(y)))},r(t.$t("encryption.Copy the key")),1)],512),[[w,i.value]])])])}}}),ve=N(ce,[["__scopeId","data-v-064d11f4"]]);export{ve as default};
