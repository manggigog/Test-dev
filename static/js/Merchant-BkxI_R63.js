import{_ as we}from"./avatarRing2-Ckr5tuam.js";import{_ as ke}from"./level-mfpPkzkt.js";import{b as Ce,a as X,f as _e,c as $e,Y as O,y as ie,u as le,an as K,o as ce,ao as Oe,V as Ne,w as Se,ap as Te,aq as Fe,$ as re}from"./index-LRhcxFAI.js";import{_ as z,z as j,r as I,E as de,G as l,H as a,I as n,U as x,Q as u,O as s,N as U,J as B,K as D,X as ue,Y as pe,x as fe,o as he,y as L,a3 as Ie,a4 as R,F as oe,Z as W,$ as q,P as A,a2 as te,q as me,V as Le}from"./vendor-Dr_RpJ_Y.js";import{T as C,P as H}from"./profileEnum-CXsMKuND.js";import{a as Y}from"./offlineGoods-DvT2Go6q.js";import{U as Pe}from"./UpgradeStorePop-BuzjxTt7.js";import{q as Ee,f as Ae}from"./order-CCndJpZE.js";import{g as Me}from"./notice-C3hKb1NN.js";import{f as Re}from"./mall-B6FBC7ih.js";const xe=e=>(ue("data-v-66eb8795"),e=e(),pe(),e),Be={class:"relative px-[12px] pt-[24px] overflow-hidden"},qe={class:"flex items-center justify-between"},Ue={class:"relative flex items-center sm-flex"},De=xe(()=>n("img",{src:we,class:"w-[44px] h-[44px] mr-[8px]"},null,-1)),je={class:"mb-[4px] font-size-[14px] font-semibold font-Puhui leading-[16.5px]"},Ve=xe(()=>n("img",{class:"w-[16px] h-[16px]",src:ke},null,-1)),He={class:"ml-[2px] text-[12px] font-normal font-Audiowide leading-[16px]"},ze={key:0,class:"shrink-0 w-fit min-w-[135px] h-[32px] p-[0.125rem] bg-[#FFF] rounded-[32px] flex justify-between items-center"},Ge={class:"w-full h-full relative"},We={class:"absolute w-full h-full flex items-center justify-center left-0 top-0"},Je=["onClick"],Qe=j({props:{info:null,active:null,tabList:{default:()=>[]}},emits:["changeTab","setLevelShow","showMallOverlay"],setup(e,{expose:b,emit:i}){const{checkLoginAuth:t}=Ce(),{accountStore:g}=X(),{memberLevels:y}=$e(),_=I(0),N=async()=>{_.value=await y()},S=f=>{t(!0)&&i("changeTab",f)};return b({memberLevel:_,getMemberLevel:N}),de(()=>{N()}),(f,T)=>(a(),l("div",Be,[n("div",qe,[n("div",Ue,[De,n("div",null,[n("div",je,u(s(_e)(e.info.address||s(g).account||"","...",5,4)),1),n("div",{class:"w-fit bg-white rounded-[10px] px-[5px] py-[2px] flex items-center relative",onClick:T[0]||(T[0]=w=>i("setLevelShow"))},[Ve,n("span",He,"V"+u(_.value||0),1)])])]),e.tabList.length?(a(),l("div",ze,[n("div",Ge,[n("div",{class:U(["absolute w-[50%] h-full bg-[#2E2008] rounded-[48px] left-0 transition-all duration-300",`w-[${100/e.tabList.length}%] left-${e.tabList.findIndex(w=>w.id===e.active)||0}/${e.tabList.length}`])},null,2),n("div",We,[(a(!0),l(B,null,D(e.tabList,w=>(a(),l("div",{class:"w-[50%] h-full flex items-center justify-center overflow-hidden",onClick:E=>S(w),key:w.id},[n("span",{class:U(["text-[14px] font-Puhui leading-[20px] text-center line-clamp-1 transition-all duration-300",[e.active===w.id?"text-[#FFF] font-semibold":"text-[#999] font-normal"]])},u(w.name),3)],8,Je))),128))])])])):x("",!0)])]))}}),Fo=z(Qe,[["__scopeId","data-v-66eb8795"]]),Z=""+new M("../images/chamfer-yZWAckQP.svg",import.meta.url).href,Ye=""+new M("../images/arrow-right-DzQRo7f8.svg",import.meta.url).href,J=e=>(ue("data-v-691bcf90"),e=e(),pe(),e),Ke={key:0,class:"mb-4 h-fit bg-[rgba(255,255,255,0.5)] border-[1px] border-[#FFFFFF] outline-solid rounded-[12px] text-sm font-normal"},Xe={class:"flex"},Ze=["onClick"],et={class:"relative"},tt={key:0,class:"absolute top-[-1px] right-0 translate-x-1/2 w-[8px] h-[8px] bg-[#F44] rounded-[8px] border-[1px] border-solid border-white box-content"},ot=J(()=>n("img",{class:"absolute left-0 -bottom-[8px] w-[8px] h-[8px] transform rotate-90",src:Z,alt:""},null,-1)),nt=J(()=>n("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Z,alt:""},null,-1)),st=J(()=>n("img",{class:"absolute -left-[8px] bottom-0 w-[8px] h-[8px] transform -rotate-90",src:Z,alt:""},null,-1)),at=J(()=>n("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Z,alt:""},null,-1)),rt={class:"pr-[11px] flex items-center"},it={class:"text-[#585654] text-[14px] font-normal font-Puhui leading-[20px]"},lt=J(()=>n("img",{class:"ml-[2px] w-[12px] h-[12px]",src:Ye,alt:""},null,-1)),ct={key:0,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},dt={class:"flex items-center font-normal text-center text-default"},ut=["onClick"],pt={class:"relative"},ft=["src"],ht={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},mt={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},xt={class:"flex items-center font-normal text-center text-default"},gt=["onClick"],vt={class:"relative"},bt=["src"],yt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},wt={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},kt={key:1,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},Ct={class:"h-[48px] flex items-center font-normal text-center text-default"},_t=["onClick"],$t={class:"relative"},Ot=["src"],Nt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},St={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},Tt={class:"h-[48px] flex items-center font-normal text-center text-default"},Ft=["onClick"],It={class:"relative"},Lt=["src"],Pt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},Et={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},At=j({props:{activeTab:null,orderCount:null,offlineOrderCount:null,orderNumber:null,serviceNumber:null,isClerk:{type:Boolean},Permissions:null},emits:["handleTo","handleReplace","updateOrderData"],setup(e,{emit:b}){const i=e,{t}=fe(),g=he();X();const y=r=>r===0?0:r>99?"99+":r,_=L(()=>!!(!i.isClerk||i.isClerk&&i.Permissions.findIndex(r=>r==="allOrder")>-1)),N=L(()=>!!(!i.isClerk||!i.isClerk||i.isClerk&&i.Permissions.findIndex(r=>r==="offlineOrder")>-1)),S=L(()=>{let r=[{id:C.ONLINE,name:t("user.online")},{id:C.OFFLINE,name:t("user.offline")}],p=[];return _.value&&p.push(r[0]),N.value&&p.push(r[1]),p}),f=L(()=>{var r,p;return((r=g.query)==null?void 0:r.tab)===C.ONLINE&&_.value?C.ONLINE:((p=g.query)==null?void 0:p.tab)===C.OFFLINE&&N.value?C.OFFLINE:S.value[0].id}),T=L(()=>{var r,p,o,F,G;return[{id:"0",name:t("order.waitPay"),badge:(r=i.orderCount)==null?void 0:r.toBePaid,img:O("order/icon-paid.svg"),clickFun:()=>h("/buyerOrderList?active=0")},{id:"1",name:t("order.wait"),badge:(p=i.orderCount)==null?void 0:p.toBeDelivered,img:O("order/icon-0.svg"),clickFun:()=>h("/buyerOrderList?active=1")},{id:"2",name:t("order.waitRceived"),badge:(o=i.orderCount)==null?void 0:o.waitingForReceipt,img:O("order/icon-1.svg"),clickFun:()=>h("/buyerOrderList?active=2")},{id:"comment",name:t("evaluate.Be evaluated"),badge:(F=i.orderCount)==null?void 0:F.beEvaluatedCount,img:O("order/icon-3.svg"),clickFun:()=>h("/evaluate-my")},{id:"refund",name:t("order.Refund/After-sale"),badge:(G=i.orderCount)==null?void 0:G.afterSales,img:O("order/icon-4.svg"),clickFun:()=>h("/refundList")}]}),w=L(()=>{var r,p,o;return[{id:"11",name:t("order.To be confirmed"),badge:(r=i.offlineOrderCount)==null?void 0:r.waitShipCount,img:O("order/icon-confirm.svg"),clickFun:()=>h("/offlineConsumerorders?status="+Y.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(p=i.offlineOrderCount)==null?void 0:p.yiquxiao,img:O("order/icon-canceled.svg"),clickFun:()=>h("/offlineConsumerorders?status="+Y.CANCELLED)},{id:"13",name:t("evaluate.Be evaluated"),badge:(o=i.offlineOrderCount)==null?void 0:o.waitCommentCount,img:O("order/icon-comment.svg"),clickFun:()=>h("/offlineEvaluate?status=0")}]}),E=L(()=>{var r,p,o,F;return[{id:"0",name:t("order.waitPay"),badge:(r=i.orderCount)==null?void 0:r.toBePaid,img:O("order/icon-paid.svg"),clickFun:()=>h("/sellerOrderList?active=1")},{id:"1",name:t("order.wait"),badge:(p=i.orderCount)==null?void 0:p.toBeDelivered,img:O("order/icon-0.svg"),clickFun:()=>h("/sellerOrderList?active=2")},{id:"2",name:t("order.already"),badge:(o=i.orderCount)==null?void 0:o.waitingForReceipt,img:O("order/icon-0-merchant.svg"),clickFun:()=>h("/sellerOrderList?active=3")},{id:"refund",name:t("order.Refund/After-sale"),badge:(F=i.orderCount)==null?void 0:F.afterSales,img:O("order/icon-4.svg"),clickFun:()=>h("/sellerOrderList?type=2")}]}),m=L(()=>{var r,p;return[{id:"11",name:t("order.wait"),badge:(r=i.offlineOrderCount)==null?void 0:r.waitShipCount,img:O("order/icon-0.svg"),clickFun:()=>h("/offlineMerchantOrders?status="+Y.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(p=i.offlineOrderCount)==null?void 0:p.yiquxiao,img:O("order/icon-canceled.svg"),clickFun:()=>h("/offlineMerchantOrders?status="+Y.CANCELLED)}]}),k=r=>{var o,F;if(r.id===f.value)return;let p={};(o=g.query)!=null&&o.path&&Reflect.set(p,"path",(F=g.query)==null?void 0:F.path),Reflect.set(p,"tab",r.id),b("updateOrderData",r.id),i.isClerk?P("/clerk/index",p):P("/profile",p)},d=()=>{f.value===C.ONLINE?i.activeTab===H.CONSUMER?h("/buyerOrderList?active=-1"):h("/sellerOrderList?active=0"):i.activeTab===H.CONSUMER?h("/offlineConsumerorders"):h("/offlineMerchantOrders")},h=r=>{b("handleTo",r)},P=(r,p)=>{b("handleReplace",r,p)};return(r,p)=>s(_)||s(N)?(a(),l("div",Ke,[n("div",{class:"flex justify-between items-center",onClick:d},[n("div",Xe,[(a(!0),l(B,null,D(s(S),(o,F)=>(a(),l("div",{key:o.id,class:U(["relative h-[37px] px-[12px] rounded-[12px_12px_0_0] flex justify-center items-center font-Puhui",s(f)===o.id?"tab-active":"tab-normal"]),onClick:Ie(G=>k(o),["stop"])},[n("div",et,[R(u(o.name),1),e.activeTab===s(H).MERCHANT&&(o.id===s(C).ONLINE&&e.orderNumber>0||o.id===s(C).OFFLINE&&e.serviceNumber>0)?(a(),l("div",tt)):x("",!0)]),F===0&&s(f)===o.id?(a(),l(B,{key:0},[ot,nt],64)):x("",!0),F>0&&s(f)===o.id?(a(),l(B,{key:1},[st,at],64)):x("",!0)],10,Ze))),128))]),n("div",rt,[n("span",it,u(r.$t("common.all")+(s(f)===s(C).ONLINE?r.$t("user.online"):r.$t("user.offline"))),1),lt])]),e.activeTab===s(H).CONSUMER?(a(),l("div",ct,[n("div",{class:U(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(f)===s(C).ONLINE,"online-out-offline-in":s(f)===s(C).OFFLINE}])},[n("div",dt,[(a(!0),l(B,null,D(s(T),o=>(a(),l("div",{class:"w-[20%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",pt,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,ft),+o.badge>0?(a(),l("div",ht,u(y(o.badge)),1)):x("",!0)]),n("div",mt,u(o.name),1)],8,ut))),128))])],2),n("div",{class:U(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-out-offline-in":s(f)===s(C).OFFLINE,"online-in-offline-out":s(f)===s(C).ONLINE}])},[n("div",xt,[(a(!0),l(B,null,D(s(w),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",vt,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,bt),+o.badge>0?(a(),l("div",yt,u(y(o.badge)),1)):x("",!0)]),n("div",wt,u(o.name),1)],8,gt))),128))])],2)])):x("",!0),e.activeTab===s(H).MERCHANT?(a(),l("div",kt,[n("div",{class:U(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(f)===s(C).ONLINE,"online-out-offline-in":s(f)===s(C).OFFLINE}])},[n("div",Ct,[(a(!0),l(B,null,D(s(E),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",$t,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,Ot),+o.badge>0?(a(),l("div",Nt,u(y(o.badge)),1)):x("",!0)]),n("div",St,u(o.name),1)],8,_t))),128))])],2),n("div",{class:U(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(f)===s(C).ONLINE,"online-out-offline-in":s(f)===s(C).OFFLINE}])},[n("div",Tt,[(a(!0),l(B,null,D(s(m),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",It,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,Lt),+o.badge>0?(a(),l("div",Pt,u(y(o.badge)),1)):x("",!0)]),n("div",Et,u(o.name),1)],8,Ft))),128))])],2)])):x("",!0)])):x("",!0)}}),Mt=z(At,[["__scopeId","data-v-691bcf90"]]),Rt=""+new M("../images/shopApply-DhWChvzV.png",import.meta.url).href,Bt=""+new M("../images/shopAudit-DsJZJKRT.png",import.meta.url).href,qt=""+new M("../images/shopBlack-DqRN7Sls.png",import.meta.url).href,Ut={class:"py-8 text-base text-center text-black"},Dt={class:"flex"},jt=j({props:{show:{type:Boolean},loading:{type:Boolean}},emits:["close","confirm"],setup(e,{emit:b}){return(i,t)=>{const g=oe("van-button");return a(),W(ie,{width:"90%",show:e.show,name:i.$t("common.tip"),teleport:"body",onClose:t[2]||(t[2]=()=>{b("close")})},{default:q(()=>[n("div",Ut,u(i.$t("profile.need to re-guarantee")),1),n("div",Dt,[A(g,{class:"plain-btn w-1/2 mx-2.5 text-[#FEA021] font-semibold",onClick:t[0]||(t[0]=()=>{b("close")})},{default:q(()=>[R(u(i.$t("common.cancel")),1)]),_:1}),A(g,{loading:e.loading,class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:t[1]||(t[1]=y=>b("confirm"))},{default:q(()=>[R(u(i.$t("profile.Withdraw modification")),1)]),_:1},8,["loading"])])]),_:1},8,["show","name"])}}}),Vt=z(jt,[["__scopeId","data-v-8d0707de"]]),Ht={key:0,class:"py-10 text-center"},zt={key:0,src:Rt,class:"w-[150px] mx-auto"},Gt={key:1,src:Bt,class:"w-[150px] mx-auto"},Wt={key:2,src:qt,class:"w-[200px] mx-auto"},Jt={class:"px-8 mt-4 leading-6 mb-14"},Qt={key:0},Yt={key:1},Kt={key:2},Xt={key:3},Zt={key:4},eo={key:3,class:"flex items-center justify-center gap-8 px-4"},to=j({props:{status:null},emits:["handleTo","init"],setup(e,{emit:b}){const i=e,{getCurrentStoreId:t,getCurrentAccount:g}=le(),y=()=>{+i.status==4?b("handleTo","/concat"):b("handleTo","/editShopInfo")},_=()=>{ce("/guarantee-progress")},[N,S]=te(!1),f=I(!1),T=async()=>{var k;f.value=!0;const{success:m}=await Oe({shopId:(k=await t())==null?void 0:k.id});f.value=!1,m&&(S(!1),b("init"))},w=I(null),E=L(()=>(console.log(w.value,g()),!w.value||!g()?!1:K(w.value)===K(g())));return de(async()=>{var m;w.value=(m=await t())==null?void 0:m.merchant}),(m,k)=>{const d=oe("VanButton");return e.status!==-2&&e.status!==1?(a(),l("div",Ht,[e.status===-1||e.status===2||e.status===3?(a(),l("img",zt)):x("",!0),e.status===0||e.status===10?(a(),l("img",Gt)):x("",!0),e.status===4?(a(),l("img",Wt)):x("",!0),n("div",Jt,[e.status===2?(a(),l("span",Qt,u(m.$t("shop.failShop")),1)):x("",!0),e.status===-1||e.status===3?(a(),l("span",Yt,u(m.$t("shop.noShop")),1)):x("",!0),e.status===0?(a(),l("span",Kt,u(m.$t("profile.Waiting for confirmation from the guarantor")),1)):x("",!0),e.status===10?(a(),l("span",Xt,u(m.$t("profile.edit the store information again")),1)):x("",!0),e.status===4?(a(),l("div",Zt,u(m.$t("shop.balckStatus")),1)):x("",!0)]),e.status===0?(a(),l("div",eo,[s(E)?(a(),W(d,{key:0,class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:k[0]||(k[0]=h=>s(S)(!0))},{default:q(()=>[R(u(m.$t("profile.Withdraw modification")),1)]),_:1})):x("",!0),A(d,{class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:_},{default:q(()=>[R(u(m.$t("profile.View Progress")),1)]),_:1})])):e.status===10?(a(),W(d,{key:4,class:"h-10 text-white btn-orange btn-shadow w-44",onClick:k[1]||(k[1]=h=>b("handleTo","/editShopInfo"))},{default:q(()=>[R(u(m.$t("shop.modify")),1)]),_:1})):(a(),W(d,{key:5,class:"h-10 mt-2 text-white btn-orange btn-shadow w-44",onClick:y},{default:q(()=>[R(u(e.status==4?m.$t("profile.Feedback"):m.$t("shop.applyShop")),1)]),_:1})),A(Vt,{loading:f.value,show:s(N),onClose:k[2]||(k[2]=h=>s(S)(!1)),onConfirm:T},null,8,["loading","show"])])):x("",!0)}}}),oo=z(to,[["__scopeId","data-v-921bb4f0"]]);var M=(e=>(e[e.INTERNL=0]="INTERNL",e[e.EXTERNAL=1]="EXTERNAL",e[e.OPTIONS=2]="OPTIONS",e[e.LP=3]="LP",e))(M||{});const no={key:0,class:"w-full h-fit py-[16px] px-[12px] bg-white rounded-[12px] flex flex-wrap font-Puhui"},so=["onClick"],ao={class:"relative"},ro=["src"],io={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},lo={key:1,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},co={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px] text-center"},uo=j({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]},unreadCount:null,messageCount:null},emits:["handleClose"],setup(e,{emit:b}){var k;const i=e,{t}=fe(),{accountStore:g,clerkStore:y}=X(),_=d=>d===0?0:d>99?"99+":d,N=I(""),S=I("");N.value=g.account,S.value=((k=g.store)==null?void 0:k.nickname)||"";const f=me(),T=L(()=>{const d=[{name:t("profile.goodsManagement"),icon:"goods",key:"goods",to:"/shopGoods"},{name:t("profile.service"),icon:"service",key:"service",to:"/offlineGoodsManage"},{name:t("profile.category"),icon:"category",key:"category",to:"/shopCategory"},{name:t("shop.shippingTemplate.listTitle"),icon:"shippingTemplate",key:"shippingTemplate",to:"/shippingTemplate"},{name:t("profile.sale"),icon:"sale",key:"sale",to:"/shoppingCenter"},{name:t("profile.onesale order"),icon:"falsh_sale",key:"saleOrder",to:"/sellerOneSaleOrder"},{name:t("profile.shopInfo"),icon:"shop",key:"shop",to:"/editShopInfo"},{name:t("home.receive"),icon:"cashierCollect",key:"cashierCollect",to:y.isClerk?`/collect?from=clerk&role=cashier&caddr=${N.value}&cnickname=${S.value}`:"/collect"},{name:t("profile.fund"),icon:"fund",key:"fund",to:"/sellerBill"},{name:t("storeClerk.Clerk Management"),icon:"store-clerk",key:"clerk",to:"/clerk/manage"},{name:t("credit.credit"),icon:"credit-pledge",key:"creditPledge",to:"/creditPledge",type:M.LP},{name:t("profile.delivery management"),icon:"encrypted-delivery",key:"encrypted",to:"/encryption?type=1"},{name:t("city.add a store"),icon:"addStore",key:"addStore",to:"/city/merchantCreate"},{name:t("profile.close"),icon:"closeShop",key:"close",to:"",type:M.OPTIONS},{name:t("profile.announcement"),icon:"announcement",key:"announcement",to:"/postList"},{name:t("profile.notice"),icon:"message",key:"message",to:"/orderMessage?type=2",type:M.OPTIONS}];return w.value===1&&d.splice(9,0,{name:t("profile.Boutique"),icon:"boutique",to:"/boutiqueShopApply",key:"boutique"}),i.isClerk?d.filter(h=>i.Permissions.findIndex(P=>P===h.key)!==-1):d}),w=L(()=>{var d;return(d=g.store)==null?void 0:d.type}),E=d=>{d.type===M.LP?ce(d.to):(d.key==="goods"&&localStorage.removeItem("shopGoods_scrollTop"),f.push(d.to))},m=d=>{if(d.type!==M.OPTIONS)E(d);else switch(d.key){case"message":E(d),sessionStorage.setItem("orderMessage_refreshFlag","1");break;case"close":b("handleClose")}};return(d,h)=>s(T).length?(a(),l("div",no,[(a(!0),l(B,null,D(s(T),(P,r)=>(a(),l("div",{key:r,class:"w-[25%] flex flex-col items-center",style:Le(r<Math.floor((s(T).length-1)/4)*4?"margin-bottom: 16px":""),onClick:p=>m(P)},[n("div",ao,[n("img",{class:"w-[24px] h-[24px]",src:s(O)(`profile2/merchantOption/${P.icon}.svg`),alt:""},null,8,ro),P.key==="announcement"&&+e.unreadCount.totalUnread>0?(a(),l("div",io,u(_(e.unreadCount.totalUnread)),1)):x("",!0),P.key==="message"&&+e.messageCount.totalUnread>0?(a(),l("div",lo,u(_(e.messageCount.totalUnread)),1)):x("",!0)]),n("div",co,u(P.name),1)],12,so))),128))])):x("",!0)}}),po={class:"p-[4px]"},fo={class:"pb-6 text-[#2E2008] text-[14px] font-semibold text-center"},ho={class:"font-semibold"},mo={class:"w-full flex items-center gap-[12px]"},xo=j({props:{show:{type:Boolean},shopName:null},emits:["close","confirm"],setup(e,{emit:b}){const i=()=>{b("confirm"),b("close")};return(t,g)=>{const y=oe("van-button");return a(),W(ie,{width:"90%",show:e.show,noClose:"",onClose:g[1]||(g[1]=()=>{b("close")})},{default:q(()=>[n("div",po,[n("div",fo,[R(u(t.$t("merchant.closeTip1"))+" ",1),n("span",ho,u(e.shopName??""),1),R(" "+u(t.$t("merchant.closeTip2")),1)]),n("div",mo,[A(y,{class:"w-1/2 h-[46px] border-[1px] border-[#D9D9D9] border-solid rounded-[100px] text-[#2E2008] text-[16px] font-Puhui font-normal leading-[46px]",onClick:g[0]||(g[0]=()=>{b("close")})},{default:q(()=>[R(u(t.$t("common.cancel")),1)]),_:1}),A(y,{class:"w-1/2 h-[46px] bg-[#F44] border-none rounded-[100px] text-white text-[16px] font-Puhui font-semibold leading-[46px]",onClick:i},{default:q(()=>[R(u(t.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])}}}),go=z(xo,[["__scopeId","data-v-46305877"]]),vo={key:0},bo=j({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]}},emits:["handleTo","handleReplace","handleMenu"],setup(e,{expose:b,emit:i}){const{getCurrentStoreId:t}=le(),{generateKey:g}=Ne(),{loadingToggle:y}=Se(),{accountStore:_}=X(),N=he(),S=me(),[f,T]=te(!1),[w,E]=te(!1),m=I(-1),k=I(""),d=I({type:0,upgradableType:0}),h=async()=>{var $,V;const v=S.currentRoute.value.path,c=await re(($=_.store)==null?void 0:$.merchant);c.success&&(c.data?(m.value=c.data.status,k.value=c.data.storeName,m.value===1&&(K(c.data.merchant)===K(_.account)&&(c.data.upgradableType&&c.data.upgradableType<c.data.type||c.data.type===0&&c.data.upgradableType>0)&&(d.value.type=c.data.type,d.value.upgradableType=c.data.upgradableType,E(!0)),(V=N.query)!=null&&V.tab,ae(),g("merchant",v))):(m.value=-1,k.value=""))},P=async()=>{y(!0,1);const v=await Te(3);y(!1),v.success&&Q()},r=I({}),p=async()=>{var c;const v=await Ee({type:1,storeId:(c=await t())==null?void 0:c.id});v.success&&(r.value=v.data)},o=I({}),F=async()=>{var c;const v=await Ae({shopId:(c=await t())==null?void 0:c.id});v.success&&(o.value=v.data)},G=L(()=>!Object.values(r.value).every(c=>c==null||c===""||c===0)),ge=L(()=>{const v=o.value;return!v||!Object.values(v).some($=>!!$)?0:[v.waitShipCount].reduce(($,V)=>$+V)}),ne=I({versionUnread:0,platformUnread:0,totalUnread:0}),ve=async()=>{const v=await Me();v.success&&(ne.value=v.data)},se=I({}),be=async()=>{const v=await Re({type:2});v.success&&(se.value=v.data)},ae=v=>{p(),F(),ve(),be()},ee=I(!1),ye=async v=>{ee.value=!0;const{success:c}=await Fe(v);if(ee.value=!1,c){const $=await re(_.account);await _.changeStore($.data),Q()}E(!1)},Q=async()=>{console.log("merchant init"),y(!0,1),await h(),y(!1)};return b({init:Q}),(v,c)=>(a(),l(B,null,[m.value==1?(a(),l("div",vo,[A(Mt,{activeTab:s(H).MERCHANT,Permissions:e.Permissions,isClerk:e.isClerk,orderCount:r.value,offlineOrderCount:o.value,orderNumber:s(G),serviceNumber:s(ge),onHandleTo:c[0]||(c[0]=$=>i("handleTo",$)),onHandleReplace:c[1]||(c[1]=($,V)=>i("handleReplace",$,V)),onUpdateOrderData:ae},null,8,["activeTab","Permissions","isClerk","orderCount","offlineOrderCount","orderNumber","serviceNumber"]),A(uo,{unreadCount:ne.value,messageCount:se.value,Permissions:e.Permissions,isClerk:e.isClerk,onHandleClose:c[2]||(c[2]=$=>s(T)(!0))},null,8,["unreadCount","messageCount","Permissions","isClerk"])])):x("",!0),A(oo,{status:m.value,onHandleTo:c[3]||(c[3]=$=>i("handleTo",$)),onInit:Q},null,8,["status"]),A(go,{show:s(f),shopName:k.value,onClose:c[4]||(c[4]=()=>{s(T)(!1)}),onConfirm:P},null,8,["show","shopName"]),A(Pe,{upgradeInfo:d.value,show:s(w),onClose:c[5]||(c[5]=$=>s(E)(!1)),onConfirm:ye,loading:ee.value},null,8,["upgradeInfo","show","loading"])],64))}}),Io=z(bo,[["__scopeId","data-v-714b16e2"]]);export{Mt as M,M as U,Fo as a,Io as b};
