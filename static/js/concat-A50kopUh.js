import{_ as te}from"./default-img-CLGxkH-F.js";import{_ as G,z as H,x as se,y as R,F,Z as T,H as a,$ as u,I as t,G as i,U as E,Q as n,O as d,P as m,J as V,K as L,a4 as U,T as q,by as M,X as K,Y as Q,a2 as O,r as f,E as oe,q as ae,N as le}from"./vendor-Dr_RpJ_Y.js";import{f as N,y as ne,b as re,r as ce}from"./index-LRhcxFAI.js";import{B as ie}from"./BackIcon-CDrGaEPo.js";import{C as de}from"./ConcatPop-DtZBOuhO.js";import{f as ue,a as fe}from"./concat-CzA3QGh0.js";import{u as me}from"./user-BBQX_0p5.js";import"./upload-DmsmBb9j.js";import"./upload-AP7UGkIr.js";const X=l=>(K("data-v-398dfccf"),l=l(),Q(),l),pe=X(()=>t("div",{class:"h-2"},null,-1)),he={class:"max-h-[60vh] overflow-y-auto"},_e={class:"bg-[#F4F4F4] rounded-xl mb-2.5 p-2.5"},ve={class:"text-sm text-[#2E2008]/60"},xe={class:"py-2 text-base text-[#2E2008]"},ge={key:0,class:"w-full"},be=["src"],we={class:"text-sm text-right text-primary/60"},ye={class:"py-2 text-base text-right text-primary"},ke={key:0,class:"w-full pb-2 text-right"},$e=["src"],Ie=X(()=>t("div",{class:"h-4"},null,-1)),Ce={class:"text-center flex-center-bw px-2"},Fe=H({props:{show:{type:Boolean},data:null,lv:null},emits:["close","reply","delete"],setup(l,{emit:v}){const o=l,w=se().t,J=()=>{var s;if(o.lv>3)v("reply",(s=o.data)==null?void 0:s.id);else{q(w("common.lv4 tips"));return}},S=()=>{var s;if(o.lv>3){v("delete",(s=o.data)==null?void 0:s.id);return}else{q(w("common.lv4 tips"));return}},x=R(()=>o.data.imageUrls?o.data.imageUrls.split(","):[]),y=s=>{M({images:x.value,closeable:!0,showIndex:!0,startPosition:s})},g=(s,h)=>{M({images:s,closeable:!0,showIndex:!0,startPosition:h})},p=R(()=>{if(o!=null&&o.data.replyJson)try{return(o==null?void 0:o.data.replyJson.split("----")).map(h=>{const r=JSON.parse(h);return{...r,showImgs:r.imageUrls?r.imageUrls.split(","):[]}})}catch(s){return console.log(s),[]}return[]});return(s,h)=>{const r=F("van-grid-item"),b=F("van-grid"),B=F("VanButton");return a(),T(ne,{width:"90%",show:l.show,name:s.$t("user.feedbackDetail"),onClose:h[0]||(h[0]=()=>{v("close")})},{default:u(()=>[pe,t("div",he,[t("div",_e,[t("div",ve,n(d(N)(l.data.address,"****",4,4)),1),t("div",xe,n(l.data.content),1),d(x)&&d(x).length>0?(a(),i("div",ge,[m(b,{style:{"padding-left":"0"},border:!1,gutter:10,"column-num":4,square:""},{default:u(()=>[(a(!0),i(V,null,L(d(x),(c,k)=>(a(),T(r,{key:c,onClick:D=>y(k)},{default:u(()=>[t("img",{src:c,class:"w-full h-full rounded-lg"},null,8,be)]),_:2},1032,["onClick"]))),128))]),_:1})])):E("",!0)]),(a(!0),i(V,null,L(d(p),(c,k)=>(a(),i("div",{key:k,class:"bg-[#F4F4F4] mb-2.5 rounded-xl p-2.5"},[t("div",we,n(d(N)(c.address,"****",4,4)),1),t("div",ye,n(c.content),1),c.showImgs&&c.showImgs.length>0?(a(),i("div",ke,[m(b,{style:{"padding-right":"0","justify-content":"flex-end"},border:!1,gutter:10,"column-num":4,square:""},{default:u(()=>[(a(!0),i(V,null,L(c.showImgs,(D,$)=>(a(),T(r,{key:$,onClick:z=>g(c.showImgs,$)},{default:u(()=>[t("img",{src:D,class:"w-full h-full rounded-lg"},null,8,$e)]),_:2},1032,["onClick"]))),128))]),_:2},1024)])):E("",!0)]))),128))]),Ie,t("div",Ce,[m(B,{class:"font-semibold border-solid border border-[#fea021] text-primary h-[38px] min-w-[120px] px-4 rounded-3xl text-base",onClick:S},{default:u(()=>[U(n(s.$t("common.delete")),1)]),_:1}),m(B,{class:"font-semibold btn h-[38px] min-w-[120px] px-4 rounded-3xl text-base",onClick:J},{default:u(()=>[U(n(s.$t("user.I want to reply")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Se=G(Fe,[["__scopeId","data-v-398dfccf"]]),Be=l=>(K("data-v-21de5156"),l=l(),Q(),l),De={class:"w-full bg-[#F2F0EF]"},Ve={class:"relative -z-0 h-[44px] bg-[#FFFFFF]"},Le={class:"absolute top-3 left-2.5 text-[#2E2008] flex items-center h-5"},Ee={class:"font-medium"},Je={class:"overflow-y-auto bg-white scroll-box"},Pe=["onClick"],Te=Be(()=>t("img",{src:te,class:"flex-shrink-0 w-11 h-11"},null,-1)),Ue={class:"w-[calc(100%-3.5rem)] flex flex-col h-11 justify-between"},Ne={class:"flex justify-between w-full text-sm"},ze={class:"text-[#2E2008]/60"},Ae={class:"flex items-center w-full"},je={key:0,style:{flex:"0 0 6px"},class:"w-[6px] h-[6px] rounded-full mr-2.5 bg-[#FB1A18]"},Re={class:"w-full truncate text-black-600"},qe={key:1,class:"px-1.5 flex-shrink-0 ml-4 py-1 text-xs text-primary rounded border border-primary"},Me={class:"mt-2 text-xs text-center"},Oe={class:"flex flex-col items-center justify-center mt-[20px] pb-[20px] px-4"},Ge=H({setup(l){const{checkLoginAuth:v,checkRegisterAuth:o}=re(),w=ae(),[J,S]=O(!1),[x,y]=O(!1),g=f(!1),p=f(!1),s=f(0),h=f(10),r=f(0),b=f(null),B=()=>{w.push("/concatSubmit")},c=e=>{b.value=e||null,S(!0)},k=e=>{e&&(p.value=!1,s.value=0,r.value=0,P()),S(!1),y(!1)},D=async e=>{b.value=e||null,(await ue({id:e||""})).success&&(y(!1),p.value=!1,s.value=0,r.value=0,P())},$=f(null),z=e=>{$.value=e,w.push("/concatDetail?id="+e.id)},I=f([]),Y=async()=>{const e=await fe({page:s.value,size:h.value});if(!e.success){p.value=!0;return}if(!e.data||!e.total){p.value=!0;return}r.value=e.total,I.value=s.value===1?e.data:I.value.concat(e.data),I.value.length>=r.value&&(p.value=!0)},A=f({}),Z=async()=>{const e=await me();!e.success||!e.data||(A.value=e.data)},P=async()=>{v(!0)&&await o(!0)&&(g.value=!0,s.value+=1,await Y(),g.value=!1)};return oe(async()=>{v(!0)&&Z()}),(e,C)=>{const W=F("VanList"),ee=F("VanButton");return a(),i("div",De,[t("header",Ve,[t("div",Le,[m(ie,null,{default:u(()=>[t("span",Ee,n(e.$t("common.comminicate")),1)]),_:1})])]),t("div",Je,[m(W,{loading:g.value,"onUpdate:loading":C[0]||(C[0]=_=>g.value=_),finished:p.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:P},{default:u(()=>[(a(!0),i(V,null,L(I.value,(_,j)=>(a(),i("div",{key:j,onClick:He=>z(_),class:le(["flex items-center border-b px-4 gap-3 border-solid border-[#000000]/10 py-5 w-full",{"border-none":j===I.value.length-1}])},[Te,t("div",Ue,[t("div",Ne,[t("span",null,n(d(N)(_.address,"...",5,5)),1),t("span",ze,n(d(ce)(_.createTime)),1)]),t("div",Ae,[_.replyJson?E("",!0):(a(),i("div",je)),t("div",Re,n(_.content),1),_.replyJson?(a(),i("div",qe,n(e.$t("user.Replied")),1)):E("",!0)])])],10,Pe))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),t("div",Me,n(e.$t("common.lv4 tips")),1),t("div",Oe,[m(ee,{class:"font-semibold btn h-[38px] min-w-[160px] px-4 rounded-3xl text-base",onClick:B},{default:u(()=>[U(n(e.$t("user.Ialsofeedback")),1)]),_:1})]),m(de,{id:b.value,show:d(J),onClose:k},null,8,["id","show"]),m(Se,{lv:A.value.memberLevel,data:$.value,show:d(x),onReply:c,onDelete:D,onClose:C[1]||(C[1]=()=>{d(y)(!1)})},null,8,["lv","data","show"])])}}}),ot=G(Ge,[["__scopeId","data-v-21de5156"]]);export{ot as default};
