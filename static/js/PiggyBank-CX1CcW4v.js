import{_ as ct}from"./MCOIN-BcbOHmhy.js";import{_ as ut}from"./FMCP-CFalj3L2.js";import{_ as tt,y as et,bc as z,bd as mt,a9 as At,E as F,F as m,G as n,O as b,N as A,H as t,R as pt,P as e,Q as a,a4 as vt,$ as Z,a0 as D,Y as ft,Z as gt,w as Bt,r as S,x as It,K as g,be as Et,bK as Vt,bQ as Rt,D as Pt,bv as Dt,bw as Nt,bh as Tt,a2 as P,l as Lt,T as zt,B as X,S as it}from"./vendor-CjApaIpB.js";import{_ as Ot}from"./success_logo-DWbMJpkY.js";import{b2 as Ut,q as rt,d as x,bl as Mt,l as Wt,B as K,g as jt,c as dt}from"./index-lKIcPnY0.js";import{P as Gt}from"./PopHeader-RH2zyPSz.js";import{P as G}from"./flashSale-DDyqLyYN.js";import{_ as Ht}from"./EmptyTipsPop-C0Qo2Er1.js";import{p as qt}from"./piggyBank-C8fQvxR9.js";import{q as Qt}from"./piggyBank-rPn--OyF.js";import{B as Xt}from"./BackIcon-D2Vm_lyR.js";import"./close-DLkDHnDK.js";const Yt="/Test-dev/static/images/piggy-bank-bg-B2ZN3re_.png",Jt="/Test-dev/static/images/arrow-forward-C8bwXPR5.svg",Kt="/Test-dev/static/images/expansion-WUC-lB1Q.gif",_t=u=>(ft("data-v-177acfa3"),u=u(),gt(),u),Zt={class:"max-w-[375px] mx-auto"},te={class:"relative"},ee=_t(()=>t("img",{src:Kt,class:"w-full h-auto relative"},null,-1)),se={class:"-mt-14 w-6 h-6 mx-auto rounded-full bg-black/50 text-white text-xs flex justify-center items-center"},ae=_t(()=>t("img",{class:"w-[109px] h-auto ml-auto -mb-20",src:Ot},null,-1)),oe={class:"w-full p-5 bg-[#FEFFF9] rounded-[10px]"},ne={class:"text-left"},le=et({emits:["success"],setup(u,{expose:U,emit:N}){const[B,_]=z(!1),[p,v]=z(!1),i=mt({grow:null,amount:null,duration:100,number:1,animationStyle:"",intervalId:null});function M(h){return Math.random()*(h-1)+1}function T(){i.number=M(2),i.grow?i.number=i.grow:setTimeout(()=>{T(),d()},i.duration)}function I(){i.intervalId=setInterval(T,i.duration)}function d(){i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null),i.animationStyle="numberAnimation 1s forwards"}const L=async h=>{if(h){i.grow=null,i.amount=null,i.number=1,_(!0),I();try{const o=await h.wait(),y=Ut(o.logs,rt.voucherGrow,rt.FMCP);i.grow=y==null?void 0:y.grow,i.amount=y==null?void 0:y.amount,d(),N("success"),setTimeout(()=>{_(!1),v(!0)},3e3)}catch{_(!1)}finally{}}};return At(()=>{d()}),U({setAnimationShow:_,handleAnimation:L}),(h,o)=>{const y=F("van-icon"),E=F("VanPopup"),f=F("VanButton");return n(),m("div",null,[b(E,{show:e(B),"onUpdate:show":o[1]||(o[1]=$=>Z(B)?B.value=$:null),position:"top",style:{background:"transparent"},onClickOverlay:o[2]||(o[2]=$=>e(_)(!1)),onClick:o[3]||(o[3]=$=>e(_)(!1))},{default:A(()=>[t("div",Zt,[t("div",te,[ee,t("div",{class:pt(["w-full text-center absolute text-[#FF364B] top-12 grow-num",e(i).grow?"numberAnimation":""])}," X "+a(e(i).number.toFixed(3)),3)]),t("div",se,[b(y,{name:"cross",size:"16",onClick:o[0]||(o[0]=vt($=>e(_)(!1),["stop"]))})])])]),_:1},8,["show"]),b(E,{show:e(p),"onUpdate:show":o[5]||(o[5]=$=>Z(p)?p.value=$:null),position:"center",style:{background:"transparent","min-width":"280px","max-width":"335px"},onClickOverlay:o[6]||(o[6]=$=>e(v)(!1)),onClick:o[7]||(o[7]=$=>e(v)(!1))},{default:A(()=>[ae,t("div",oe,[t("div",ne,[t("div",null,"膨胀"+a(e(i).grow)+"倍",1),t("div",null,"获得"+a(e(i).amount)+"抵用券",1)]),b(f,{class:"btn-orange w-full h-8 text-white mt-8",onClick:o[4]||(o[4]=$=>e(v)(!1))},{default:A(()=>[D(a(h.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show"])])}}}),ie=tt(le,[["__scopeId","data-v-177acfa3"]]),re={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},de={class:"gap-1 mt-5 mb-3 text-xs flex-start"},ce={key:0,src:ct,class:"w-4",alt:""},ue={key:1,src:ut,class:"w-4",alt:""},me={class:"font-semibold"},pe={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},ve=et({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(u,{expose:U,emit:N}){const{show:B}=u,{t:_}=Bt(),p=S(null),v=S(G.MC),i=It(()=>[{text:"Mcoin",value:G.MC},{text:_("voucher.voucher"),value:G.VOUCHER}]),M=I=>{v.value=Number(I)},T=()=>{N("handleWithdraw",p.value,v.value===G.VOUCHER)};return U({amount:p}),(I,d)=>{const L=F("van-dropdown-item"),h=F("van-dropdown-menu"),o=F("VanField"),y=F("VanButton"),E=F("VanPopup");return n(),g(E,{show:u.show,"onUpdate:show":d[4]||(d[4]=f=>Z(B)?B.value=f:null),round:"","close-on-click-overlay":!0,onClickOverlay:d[5]||(d[5]=vt(()=>N("close"),["stop"]))},{default:A(()=>[t("div",re,[b(Gt,{onClick:d[0]||(d[0]=f=>N("close"))},{default:A(()=>[t("span",null,a(I.$t("maiPledge.Income to be collected")),1)]),_:1}),t("div",de,[v.value===e(G).MC?(n(),m("img",ce)):(n(),m("img",ue)),b(h,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:A(()=>[b(L,{onChange:M,modelValue:v.value,"onUpdate:modelValue":d[1]||(d[1]=f=>v.value=f),options:e(i)},null,8,["modelValue","options"])]),_:1}),t("span",me,a(e(x)(u.balance||0,4)),1)]),t("div",pe,[b(o,{type:"number",modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=f=>p.value=f),formatter:e(Mt),placeholder:e(x)(u.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),t("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:d[3]||(d[3]=()=>{p.value=e(x)(u.balance,4)})}," MAX ")]),b(y,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:u.loading,disabled:p.value<=0||+p.value>+u.balance,onClick:T},{default:A(()=>[D(a(I.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),fe=tt(ve,[["__scopeId","data-v-f83d25b2"]]),O=u=>(ft("data-v-6a102fd2"),u=u(),gt(),u),ge={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2"},_e=O(()=>t("img",{class:"absolute top-0 left-0 w-full",src:Yt,alt:"",srcset:""},null,-1)),he={class:"relative z-20"},ye={class:"gap-2 mt-2 flex-start"},we={class:"mt-4"},xe={class:"bg-white p-4 rounded-xl text-[#2E2008]"},be={class:"flex items-center justify-between"},$e=["src"],ke={class:"text-oriange1"},Se={class:"flex items-baseline"},Ce={key:0,class:"text-sm self-end mb-0.5"},Fe={key:1,class:"text-3xl font-bold"},Ae={key:1},Be={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},Ie={key:3,class:"text-3xl font-bold"},Ee={class:"text-xs flex-center text-black-400"},Ve=O(()=>t("img",{class:"self-center w-4 h-4 ml-auto",src:Jt,alt:"",srcset:""},null,-1)),Re={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},Pe={class:"flex flex-col justify-center"},De={class:"gap-1 text-xs flex-start"},Ne={class:"opacity-60"},Te={class:"mt-1.5 text-sm"},Le={key:1},ze={class:"flex flex-col justify-center"},Oe={class:"gap-1 text-xs flex-start"},Ue={class:"opacity-60"},Me={class:"mt-1.5 text-sm"},We={key:1},je={class:"left"},Ge={class:"gap-1 text-xs flex-start"},He={class:"opacity-60"},qe=O(()=>t("img",{src:ct,class:"w-4 h-4"},null,-1)),Qe=O(()=>t("img",{src:ut,class:"w-4 h-4"},null,-1)),Xe={class:"text-[#E88F17] text-sm font-medium"},Ye={key:1},Je={class:"flex mt-5 text-base font-medium text-center"},Ke=O(()=>t("div",{class:"w-6"},null,-1)),Ze={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},ts={class:"pl-2.5"},es={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},ss={class:"flex items-center"},as={class:"text-[#14D8A9] text-sm font-bold flex items-center"},os={key:1},ns=D("%"),ls={key:1,class:"text-[#14D8A9] text-xs font-bold"},is={class:"pr-2.5 text-right"},rs={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},ds={class:"flex items-center"},cs={key:1,class:"text-[#14D8A9] text-sm font-bold"},us={key:3,class:"text-[#14D8A9] text-xs font-bold"},ms={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},ps={class:"flex items-center justify-between pr-4 mt-1.5"},vs=O(()=>t("div",{id:"line-echarts"},null,-1)),fs=et({setup(u){Et(()=>{J()},1e4);const U=Lt(),{userIds:N,pending:B,total:_,earnings:p,nextFloatAwardAmount:v,today:i,DAY:M,dayAwardAmounts:T,userRewardPending:I,userRewardWithdraw:d}=qt(),L=s=>{U.push(s)},h=S("0"),o=Vt("showBalance",!1),y=()=>{o.value=!o.value},E=mt({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new Rt(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),f=S(null),$=s=>{E.xAxis.data=s.dates.reverse(),E.series[0].data=s.values.reverse(),f.value.setOption(E),at(!1)},st=S(0),W=S("0"),ht=async()=>{const s=await N();st.value=s;const l=await B(s.toString());let r=0;l.fixs.forEach(R=>{r+=+K(R)||0});let V=0;l.floats.forEach(R=>{V+=+K(R)||0});let c=0;l.records.forEach(R=>{c+=+K(R.amount)||0});const k=await I(s.toString());h.value=c.toFixed(18),W.value=X(V).plus(r).plus(k).toFixed(18)},H=S(["0","0"]),w=S([0,0,0,0]),yt=async()=>{Qt().then(l=>{if(!l.success)return zt.clear();H.value[0]=l.data.allAmount||0}),w.value[0]=+await p(0),w.value[1]=+await v(),w.value[2]=+await _(),w.value[3]=+await p(7);const s=w.value[1]/w.value[2]+w.value[0];H.value[1]=x(X(h.value||0).times(s).toFixed(18),2).toString()},[wt,at]=z(!1),q=S([0,0]),xt=async()=>{at(!0);let s=localStorage.getItem("taday")||"",l=localStorage.getItem("echartData")||"";const r=+await i(),V=await M();let c={dates:[],values:[]};if(s&&+s==+r&&l){c=JSON.parse(l);let k=await T(r);k=x(X(k||0).times(100).times(365).times(w.value[3]).toFixed(18),2),c.values[0]=k}else{localStorage.setItem("taday",r.toString());for(let k=0;k<7;k++){let R=r-k*V,Ct=await T(R),lt=Wt((R-V)*1e3),Ft=x(X(Ct||0).times(100).times(365).times(w.value[3]).toFixed(18),2);c.dates.push(lt.split(" ")[0].split("-")[1]+"-"+lt.split(" ")[0].split("-")[2]),c.values.push(Ft)}}localStorage.setItem("echartData",JSON.stringify(c)),q.value[1]=c.values[0],$(c)},bt=async()=>{const s=+await v(),l=+await _();q.value[0]=s/l*100},[ot,Q]=z(!1),[$t,j]=z(!1),[kt,Y]=z(!1),nt=S(null),St=async(s,l)=>{j(!0);try{let r=await d(s,l);if(!r.success)return j(!1);if(r=r.result,!l){try{await r.wait(),Q(!1),J(),Y(!0),setTimeout(()=>{Y(!1)},2e3);return}catch{j(!1)}finally{j(!1)}return}Q(!1),nt.value.handleAnimation(r)}finally{j(!1)}},C=S(!1),J=async()=>{await ht(),bt()};return Pt(async()=>{f.value=Dt(Nt(document.getElementById("line-echarts"))),C.value=!0,await Promise.all([J(),await yt(),xt()]),C.value=!1}),Tt(()=>{f.value&&f.value.dispose()}),(s,l)=>{const r=F("van-loading"),V=F("VanLoading");return n(),m("div",ge,[_e,t("div",he,[t("div",ye,[b(Xt),t("div",null,a(s.$t("piggy.Yu_Bao_details")),1)]),t("div",we,[t("div",xe,[t("div",be,[t("div",{class:"flex items-center",onClick:y},[t("span",null,a(s.$t("piggy.lump_sum")),1),t("img",{class:"w-4 h-4 ml-1.5",src:e(jt)(`images/ecology/${e(o)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,$e)]),st.value?(n(),g(e(it),{key:0,to:"/piggySettingAdmin"},{default:A(()=>[t("div",ke,a(s.$t("piggy.setting admin address")),1)]),_:1})):P("",!0)]),b(e(it),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:A(()=>[t("div",Se,[e(o)?(n(),m("span",Ce,"≈")):P("",!0),e(o)?(n(),m("span",Fe,[C.value?(n(),g(r,{key:0,size:"28px"})):(n(),m("span",Ae,a(e(x)(h.value,2)),1))])):P("",!0),e(o)?(n(),m("span",Be,"MCOIN")):P("",!0),e(o)?P("",!0):(n(),m("span",Ie," ******"))]),t("div",Ee,[D(a(s.$t("piggy.detail_record"))+" ",1),Ve])]),_:1}),t("div",Re,[t("div",Pe,[t("div",De,[t("span",Ne,a(s.$t("piggy.Cumulative_income")),1)]),t("div",Te,[C.value?(n(),g(r,{key:0,size:"14px"})):(n(),m("span",Le,a(e(dt)(H.value[0])),1))])]),t("div",ze,[t("div",Oe,[t("span",Ue,a(s.$t("piggy.tommor_earns")),1)]),t("div",Me,[C.value?(n(),g(r,{key:0,size:"14px"})):(n(),m("span",We,a(e(dt)(H.value[1])),1))])]),t("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:l[0]||(l[0]=c=>+W.value>0?e(Q)(!0):"")},[t("div",je,[t("div",Ge,[t("span",He,a(s.$t("maiPledge.Income to be collected")),1),qe,t("span",null,a(s.$t("common.or")),1),Qe]),t("div",Xe,[C.value?(n(),g(r,{key:0,color:"#E88F17",size:"14px"})):(n(),m("span",Ye,a(e(x)(W.value,2)),1))])]),t("div",{class:pt(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!W.value}])},a(s.$t("common.claim")),3)])]),t("div",Je,[t("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:l[1]||(l[1]=c=>L("/piggyBank-transferOut"))},a(s.$t("piggy.transfer_out_principal")),1),Ke,t("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:l[2]||(l[2]=c=>L("/piggyBank-transferIn"))},a(s.$t("piggy.transfer_in_principal")),1)])]),t("div",Ze,[t("div",ts,[t("div",es,a(s.$t("piggy.todayannualizedRateReturn")),1),t("div",ss,[t("span",as,[C.value?(n(),g(r,{key:0,color:"#14D8A9",size:"14px"})):(n(),m("span",os,a(e(x)(w.value[0]*100*365,2)),1)),ns]),D(a(s.$t("piggy.base"))+" + ",1),C.value?(n(),g(r,{key:0,color:"#14D8A9",size:"14px"})):(n(),m("span",ls,a(e(x)(q.value[0]*365*w.value[3],2))+"%",1)),D(a(s.$t("piggy.float")),1)])]),t("div",is,[t("div",rs,a(s.$t("piggy.yesannualizedRateReturn")),1),t("div",ds,[C.value?(n(),g(r,{key:0,color:"#14D8A9",size:"14px"})):(n(),m("span",cs,a(e(x)(w.value[0]*100*365,2))+"%",1)),D(a(s.$t("piggy.base"))+" + ",1),C.value?(n(),g(r,{key:2,color:"#14D8A9",size:"14px"})):(n(),m("span",us,a(e(x)(q.value[1]))+"%",1)),D(a(s.$t("piggy.float")),1)])])]),t("div",ms,[t("div",ps,[t("span",null,a(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),vs,e(wt)?(n(),g(V,{key:0,color:"#674c37",class:"loading-box",vertical:""})):P("",!0)])])]),e(ot)?(n(),g(fe,{key:0,show:e(ot),balance:W.value,loading:e($t),onClose:l[3]||(l[3]=c=>e(Q)(!1)),onHandleWithdraw:St},null,8,["show","balance","loading"])):P("",!0),e(kt)?(n(),g(Ht,{key:1,onClose:l[4]||(l[4]=c=>e(Y)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):P("",!0),b(ie,{ref:(c,k)=>{k.voucherLottieRef=c,nt.value=c}},null,512)])}}}),As=tt(fs,[["__scopeId","data-v-6a102fd2"]]);export{As as default};
