import{y,E as m,F as f,G as l,H as o,Q as h,O as n,a0 as V,_ as T,w as S,bd as $,x as z,D as L,N as _,P as a,l as N,I as x,J as b,K as w}from"./vendor-D6JO6WHW.js";import{R}from"./RatioBox-C9aLwz0w.js";import{B as A}from"./BackIcon-CPUEW9je.js";import{C as E}from"./ChangeRegion-mv6XnMIE.js";import{b3 as H,b4 as q}from"./index-CybuWkSo.js";import"./ChangeRegionPop-30E9HTwm.js";const M=["src"],U={class:"flex flex-col ml-2.5"},G={class:"line-clamp-1 text-base text-[#2E2008] font-semibold"},J={class:"flex items-center mt-auto"},K={class:"font-Audiowide text-[#FBA923]"},O={class:"ml-4"},P={class:"ml-auto text-[#FBA923] flex items-center"},Q={class:"ml-2 bg-[#FFF1D9] rounded pl-2 pr-1 py-1 whitespace-nowrap"},j=y({props:{shop:null},emits:["toDetail"],setup(s,{emit:g}){const{shop:c}=s;return(t,d)=>{const i=m("van-icon");return l(),f("div",{class:"bg-[#FFFDF8] rounded-lg px-2.5 py-3.5 flex mt-3",onClick:d[0]||(d[0]=()=>{g("toDetail",s.shop.shopId)})},[o("img",{src:s.shop.logo,class:"w-[4.5rem] h-[4.5rem] shrink-0 rounded-md"},null,8,M),o("div",U,[o("div",G,h(s.shop.storeName),1),o("div",J,[o("div",null,[o("span",K,h(s.shop.star),1),n(i,{name:"star",color:"#FBA923",size:"18"})]),o("div",O,[n(R,{ratio:s.shop.discountRatio||0},null,8,["ratio"])])])]),o("div",P,[o("div",Q,[V(h(t.$t("collect.intoShop"))+" ",1),n(i,{name:"arrow"})])])])}}}),W={class:"px-3 bg-[#f2f0ef]"},X={class:"gap-2 mt-2 flex-start"},Y=y({setup(s){const g=N(),{t:c}=S(),t=$({active:0,page:0,size:10,finished:!1,list:null,loading:!1,total:0}),d=e=>{g.push("/category?deliveryType=1&shopId="+e)},i=z(()=>[{id:0,name:c("common.focus on")},{id:1,name:c("common.visited")},{id:2,name:c("common.Bought")}]),F=e=>{t.active=e,t.page=0,t.finished=!1,t.list=[],v()},v=async()=>{t.loading=!0,t.page+=1,t.active===0?await B():await k(),t.loading=!1},B=async()=>{const e=await H({page:t.page,size:t.size});if(!e.success){t.finished=!0;return}if(!e.data||!e.total){t.finished=!0;return}t.total=e.total,t.list=t.page===1?e.data:t.list.concat(e.data),t.list.length>=t.total&&(t.finished=!0)},k=async()=>{const e=await q({page:t.page,size:t.size,type:i.value&&i.value[t.active].id});if(!e.success){t.finished=!0;return}if(!e.data||!e.total){t.finished=!0;return}t.total=e.total,t.list=t.page===1?e.data:t.list.concat(e.data),t.list.length>=t.total&&(t.finished=!0)};return L(()=>{v()}),(e,r)=>{const C=m("VanList"),D=m("VanTab"),I=m("VanTabs");return l(),f("div",W,[o("div",X,[n(A),o("div",null,h(e.$t("collect.shopsCollect")),1),n(E,{showIcon:!0,showDownIcon:!1,class:"ml-auto bg-gray1 px-2 rounded-[20px] border-2 border-solid border-white",style:{"box-shadow":"0px 0px 15px 0px rgba(51, 47, 42, 0.3) inset"}})]),n(I,{active:a(t).active,"onUpdate:active":r[1]||(r[1]=p=>a(t).active=p),onChange:F,background:"#f2f0ef",sticky:""},{default:_(()=>[(l(!0),f(x,null,b(a(i),p=>(l(),w(D,{title:p.name,key:p.id},{default:_(()=>[n(C,{loading:a(t).loading,"onUpdate:loading":r[0]||(r[0]=u=>a(t).loading=u),finished:a(t).finished,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:v},{default:_(()=>[(l(!0),f(x,null,b(a(t).list,u=>(l(),w(j,{key:u.shopId,shop:u,onToDetail:d},null,8,["shop"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}}),nt=T(Y,[["__scopeId","data-v-46dbca0c"]]);export{nt as default};
