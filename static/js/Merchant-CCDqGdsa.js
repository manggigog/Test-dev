import{_ as Ce}from"./level-BMr8jGFx.js";import{f as _e,b as $e,e as te,V as $,_ as ie,u as le,ag as X,t as de,ah as Ne,R as Oe,r as Se,ai as Te,aj as Fe,S as re}from"./index-BvL8wS8a.js";import{_ as W,y as U,r as O,D as ce,F as l,G as a,H as n,a2 as g,Q as c,P as s,R as q,I as R,J as D,Y as ue,Z as pe,w as fe,a1 as he,x as P,a4 as Pe,a0 as L,E as oe,K as G,N as M,O as I,be as ee,l as xe,X as Ie}from"./vendor-BUT0HZ5j.js";import{a as K}from"./offlineGoods-DvT2Go6q.js";import{T as C,P as V}from"./profileEnum-CXsMKuND.js";import{U as Le}from"./UpgradeStorePop-DEud6wTQ.js";import{q as Ee,d as Ae,e as Re}from"./order-5h45IqlB.js";import{g as Me}from"./notice-CCZQIyjY.js";import{f as Be}from"./mall-BYd2MsPp.js";const qe="/Test-dev/static/images/avatarRing2-BMN147Et.png",me=e=>(ue("data-v-050ccd17"),e=e(),pe(),e),De={class:"relative px-[12px] pt-[24px] overflow-hidden"},Ue={class:"flex items-center justify-between"},je={class:"relative flex items-center sm-flex"},He=me(()=>n("img",{src:qe,class:"w-[44px] h-[44px] mr-[8px]"},null,-1)),Ve={class:"mb-[4px] font-size-[14px] font-semibold font-Puhui leading-[16.5px]"},We=me(()=>n("img",{class:"w-[16px] h-[16px]",src:Ce},null,-1)),ze={class:"ml-[2px] text-[12px] font-normal font-Audiowide leading-[16px]"},Ge={key:0,class:"shrink-0 w-fit min-w-[135px] h-[32px] p-[0.125rem] bg-[#FFF] rounded-[32px] flex justify-between items-center"},Je={class:"w-full h-full relative"},Qe={class:"absolute w-full h-full flex items-center justify-center left-0 top-0"},Ke=["onClick"],Xe=U({props:{info:null,active:null,tabList:{default:[]}},emits:["changeTab","setLevelShow","showMallOverlay"],setup(e,{expose:b,emit:r}){const{memberLevels:t}=_e(),h=O(0),w=async()=>{h.value=await t()};return b({memberLevel:h}),ce(()=>{w()}),(N,S)=>(a(),l("div",De,[n("div",Ue,[n("div",je,[He,n("div",null,[n("div",Ve,c(s($e)(e.info.address||"","...",5,4)),1),n("div",{class:"w-fit bg-white rounded-[10px] px-[5px] py-[2px] flex items-center relative",onClick:S[0]||(S[0]=y=>r("setLevelShow"))},[We,n("span",ze,"V"+c(h.value||0),1)])])]),e.tabList.length?(a(),l("div",Ge,[n("div",Je,[n("div",{class:q(["absolute w-[50%] h-full bg-[#2E2008] rounded-[48px] left-0 transition-all duration-300",`w-[${100/e.tabList.length}%] left-${e.tabList.findIndex(y=>y.id===e.active)||0}/${e.tabList.length}`])},null,2),n("div",Qe,[(a(!0),l(R,null,D(e.tabList,y=>(a(),l("div",{class:"w-[50%] h-full flex items-center justify-center overflow-hidden",onClick:v=>r("changeTab",y),key:y.id},[n("span",{class:q(["text-[14px] font-Puhui leading-[20px] text-center line-clamp-1 transition-all duration-300",[e.active===y.id?"text-[#FFF] font-semibold":"text-[#999] font-normal"]])},c(y.name),3)],8,Ke))),128))])])])):g("",!0)])]))}}),Io=W(Xe,[["__scopeId","data-v-050ccd17"]]),Y="/Test-dev/static/images/chamfer-yZWAckQP.svg",Ye="/Test-dev/static/images/arrow-right-DzQRo7f8.svg",J=e=>(ue("data-v-03efb484"),e=e(),pe(),e),Ze={key:0,class:"mb-4 h-fit bg-[rgba(255,255,255,0.5)] border-[1px] border-[#FFFFFF] outline-solid rounded-[12px] text-sm font-normal"},et={class:"flex"},tt=["onClick"],ot={class:"relative"},nt={key:0,class:"absolute top-[-1px] right-0 translate-x-1/2 w-[8px] h-[8px] bg-[#F44] rounded-[8px] border-[1px] border-solid border-white box-content"},st=J(()=>n("img",{class:"absolute left-0 -bottom-[8px] w-[8px] h-[8px] transform rotate-90",src:Y,alt:""},null,-1)),at=J(()=>n("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Y,alt:""},null,-1)),rt=J(()=>n("img",{class:"absolute -left-[8px] bottom-0 w-[8px] h-[8px] transform -rotate-90",src:Y,alt:""},null,-1)),it=J(()=>n("img",{class:"absolute -right-[8px] bottom-0 w-[8px] h-[8px]",src:Y,alt:""},null,-1)),lt={class:"pr-[11px] flex items-center"},dt={class:"text-[#585654] text-[14px] font-normal font-Puhui leading-[20px]"},ct=J(()=>n("img",{class:"ml-[2px] w-[12px] h-[12px]",src:Ye,alt:""},null,-1)),ut={key:0,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},pt={class:"flex items-center font-normal text-center text-default"},ft=["onClick"],ht={class:"relative"},xt=["src"],mt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},gt={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},vt={class:"flex items-center font-normal text-center text-default"},bt=["onClick"],wt={class:"relative"},yt=["src"],kt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},Ct={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},_t={key:1,class:"h-fit py-[16px] px-[8px] bg-white rounded-[8px_8px_12px_12px] flex items-center gap-[16px] overflow-hidden"},$t={class:"h-[48px] flex items-center font-normal text-center text-default"},Nt=["onClick"],Ot={class:"relative"},St=["src"],Tt={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},Ft={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},Pt={class:"h-[48px] flex items-center font-normal text-center text-default"},It=["onClick"],Lt={class:"relative"},Et=["src"],At={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},Rt={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px]"},Mt=U({props:{activeTab:null,orderCount:null,offlineOrderCount:null,orderNumber:null,serviceNumber:null,isClerk:{type:Boolean},Permissions:null},emits:["handleTo","handleReplace","updateOrderData"],setup(e,{emit:b}){const r=e,{t}=fe(),h=he();te();const w=i=>i===0?0:i>99?"99+":i,N=P(()=>!!(!r.isClerk||r.isClerk&&r.Permissions.findIndex(i=>i==="allOrder")>-1)),S=P(()=>!!(!r.isClerk||!r.isClerk||r.isClerk&&r.Permissions.findIndex(i=>i==="offlineOrder")>-1)),y=P(()=>{let i=[{id:C.ONLINE,name:t("user.online")},{id:C.OFFLINE,name:t("user.offline")}],p=[];return N.value&&p.push(i[0]),S.value&&p.push(i[1]),p}),v=P(()=>{var i,p;return((i=h.query)==null?void 0:i.tab)===C.ONLINE&&N.value?C.ONLINE:((p=h.query)==null?void 0:p.tab)===C.OFFLINE&&S.value?C.OFFLINE:y.value[0].id}),E=P(()=>{var i,p,o,F,j;return[{id:"0",name:t("order.waitPay"),badge:(i=r.orderCount)==null?void 0:i.toBePaid,img:$("order/icon-paid.svg"),clickFun:()=>m("/buyerOrderList?active=0")},{id:"1",name:t("order.wait"),badge:(p=r.orderCount)==null?void 0:p.toBeDelivered,img:$("order/icon-0.svg"),clickFun:()=>m("/buyerOrderList?active=1")},{id:"2",name:t("order.waitRceived"),badge:(o=r.orderCount)==null?void 0:o.waitingForReceipt,img:$("order/icon-1.svg"),clickFun:()=>m("/buyerOrderList?active=2")},{id:"comment",name:t("evaluate.Be evaluated"),badge:(F=r.orderCount)==null?void 0:F.beEvaluatedCount,img:$("order/icon-3.svg"),clickFun:()=>m("/evaluate-my")},{id:"refund",name:t("order.Refund/After-sale"),badge:(j=r.orderCount)==null?void 0:j.afterSales,img:$("order/icon-4.svg"),clickFun:()=>m("/refundList")}]}),A=P(()=>{var i,p,o;return[{id:"11",name:t("order.To be confirmed"),badge:(i=r.offlineOrderCount)==null?void 0:i.waitShipCount,img:$("order/icon-confirm.svg"),clickFun:()=>m("/offlineConsumerorders?status="+K.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(p=r.offlineOrderCount)==null?void 0:p.yiquxiao,img:$("order/icon-canceled.svg"),clickFun:()=>m("/offlineConsumerorders?status="+K.CANCELLED)},{id:"13",name:t("evaluate.Be evaluated"),badge:(o=r.offlineOrderCount)==null?void 0:o.waitCommentCount,img:$("order/icon-comment.svg"),clickFun:()=>m("/offlineEvaluate?status=0")}]}),B=P(()=>{var i,p,o,F;return[{id:"0",name:t("order.waitPay"),badge:(i=r.orderCount)==null?void 0:i.toBePaid,img:$("order/icon-paid.svg"),clickFun:()=>m("/sellerOrderList?active=0")},{id:"1",name:t("order.wait"),badge:(p=r.orderCount)==null?void 0:p.toBeDelivered,img:$("order/icon-0.svg"),clickFun:()=>m("/sellerOrderList?active=1")},{id:"2",name:t("order.already"),badge:(o=r.orderCount)==null?void 0:o.waitingForReceipt,img:$("order/icon-0-merchant.svg"),clickFun:()=>m("/sellerOrderList?active=2")},{id:"refund",name:t("order.Refund/After-sale"),badge:(F=r.orderCount)==null?void 0:F.afterSales,img:$("order/icon-4.svg"),clickFun:()=>m("/sellerOrderList?type=2")}]}),x=P(()=>{var i,p;return[{id:"11",name:t("order.wait"),badge:(i=r.offlineOrderCount)==null?void 0:i.waitShipCount,img:$("order/icon-0.svg"),clickFun:()=>m("/offlineMerchantOrders?status="+K.PAYMENT_SUCCESS)},{id:"12",name:t("order.canceled"),badge:(p=r.offlineOrderCount)==null?void 0:p.yiquxiao,img:$("order/icon-canceled.svg"),clickFun:()=>m("/offlineMerchantOrders?status="+K.CANCELLED)}]}),k=i=>{var o,F;if(i.id===v.value)return;let p={};(o=h.query)!=null&&o.path&&Reflect.set(p,"path",(F=h.query)==null?void 0:F.path),Reflect.set(p,"tab",i.id),b("updateOrderData",i.id),r.isClerk?T("/clerk/index",p):T("/profile",p)},u=()=>{v.value===C.ONLINE?r.activeTab===V.CONSUMER?m("/buyerOrderList?active=4"):m("/sellerOrderList?active=4"):r.activeTab===V.CONSUMER?m("/offlineConsumerorders"):m("/offlineMerchantOrders")},m=i=>{b("handleTo",i)},T=(i,p)=>{b("handleReplace",i,p)};return(i,p)=>s(N)||s(S)?(a(),l("div",Ze,[n("div",{class:"flex justify-between items-center",onClick:u},[n("div",et,[(a(!0),l(R,null,D(s(y),(o,F)=>(a(),l("div",{key:o.id,class:q(["relative h-[37px] px-[12px] rounded-[12px_12px_0_0] flex justify-center items-center font-Puhui",s(v)===o.id?"tab-active":"tab-normal"]),onClick:Pe(j=>k(o),["stop"])},[n("div",ot,[L(c(o.name),1),e.activeTab===s(V).MERCHANT&&(o.id===s(C).ONLINE&&e.orderNumber>0||o.id===s(C).OFFLINE&&e.serviceNumber>0)?(a(),l("div",nt)):g("",!0)]),F===0&&s(v)===o.id?(a(),l(R,{key:0},[st,at],64)):g("",!0),F>0&&s(v)===o.id?(a(),l(R,{key:1},[rt,it],64)):g("",!0)],10,tt))),128))]),n("div",lt,[n("span",dt,c(i.$t("common.all")+(s(v)===s(C).ONLINE?i.$t("user.online"):i.$t("user.offline"))),1),ct])]),e.activeTab===s(V).CONSUMER?(a(),l("div",ut,[n("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(v)===s(C).ONLINE,"online-out-offline-in":s(v)===s(C).OFFLINE}])},[n("div",pt,[(a(!0),l(R,null,D(s(E),o=>(a(),l("div",{class:"w-[20%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",ht,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,xt),+o.badge>0?(a(),l("div",mt,c(w(o.badge)),1)):g("",!0)]),n("div",gt,c(o.name),1)],8,ft))),128))])],2),n("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-out-offline-in":s(v)===s(C).OFFLINE,"online-in-offline-out":s(v)===s(C).ONLINE}])},[n("div",vt,[(a(!0),l(R,null,D(s(A),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",wt,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,yt),+o.badge>0?(a(),l("div",kt,c(w(o.badge)),1)):g("",!0)]),n("div",Ct,c(o.name),1)],8,bt))),128))])],2)])):g("",!0),e.activeTab===s(V).MERCHANT?(a(),l("div",_t,[n("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(v)===s(C).ONLINE,"online-out-offline-in":s(v)===s(C).OFFLINE}])},[n("div",$t,[(a(!0),l(R,null,D(s(B),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",Ot,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,St),+o.badge>0?(a(),l("div",Tt,c(w(o.badge)),1)):g("",!0)]),n("div",Ft,c(o.name),1)],8,Nt))),128))])],2),n("div",{class:q(["shrink-0 w-full transition delay-0 duration-500 ease-in-out",{"online-in-offline-out":s(v)===s(C).ONLINE,"online-out-offline-in":s(v)===s(C).OFFLINE}])},[n("div",Pt,[(a(!0),l(R,null,D(s(x),o=>(a(),l("div",{class:"w-[25%] h-[48px] flex flex-col justify-between items-center",key:o.id,onClick:o.clickFun},[n("div",Lt,[n("img",{src:o.img,class:"shrink-0 w-[24px] h-[24px]"},null,8,Et),+o.badge>0?(a(),l("div",At,c(w(o.badge)),1)):g("",!0)]),n("div",Rt,c(o.name),1)],8,It))),128))])],2)])):g("",!0)])):g("",!0)}}),Bt=W(Mt,[["__scopeId","data-v-03efb484"]]),qt="/Test-dev/static/images/shopApply-DhWChvzV.png",Dt="/Test-dev/static/images/shopAudit-DsJZJKRT.png",Ut="/Test-dev/static/images/shopBlack-DqRN7Sls.png",jt={class:"py-8 text-base text-center text-black"},Ht={class:"flex"},Vt=U({props:{show:{type:Boolean},loading:{type:Boolean}},emits:["close","confirm"],setup(e,{emit:b}){return(r,t)=>{const h=oe("van-button");return a(),G(ie,{width:"90%",show:e.show,name:r.$t("common.tip"),teleport:"body",onClose:t[2]||(t[2]=()=>{b("close")})},{default:M(()=>[n("div",jt,c(r.$t("profile.need to re-guarantee")),1),n("div",Ht,[I(h,{class:"plain-btn w-1/2 mx-2.5 text-[#FEA021] font-semibold",onClick:t[0]||(t[0]=()=>{b("close")})},{default:M(()=>[L(c(r.$t("common.cancel")),1)]),_:1}),I(h,{loading:e.loading,class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:t[1]||(t[1]=w=>b("confirm"))},{default:M(()=>[L(c(r.$t("profile.Withdraw modification")),1)]),_:1},8,["loading"])])]),_:1},8,["show","name"])}}}),Wt=W(Vt,[["__scopeId","data-v-8d0707de"]]),zt={key:0,class:"py-10 text-center"},Gt={key:0,src:qt,class:"w-[150px] mx-auto"},Jt={key:1,src:Dt,class:"w-[150px] mx-auto"},Qt={key:2,src:Ut,class:"w-[200px] mx-auto"},Kt={class:"px-8 mt-4 leading-6 mb-14"},Xt={key:0},Yt={key:1},Zt={key:2},eo={key:3},to={key:4},oo={key:3,class:"flex items-center justify-center gap-8 px-4"},no=U({props:{status:null},emits:["handleTo","init"],setup(e,{emit:b}){const r=e,{getCurrentStoreId:t,getCurrentAccount:h}=le(),w=()=>{+r.status==4?b("handleTo","/concat"):b("handleTo","/editShopInfo")},N=()=>{de("/guarantee-progress")},[S,y]=ee(!1),v=O(!1),E=async()=>{var k;v.value=!0;const{success:x}=await Ne({shopId:(k=await t())==null?void 0:k.id});v.value=!1,x&&(y(!1),b("init"))},A=O(null),B=P(()=>(console.log(A.value,h()),!A.value||!h()?!1:X(A.value)===X(h())));return ce(async()=>{var x;A.value=(x=await t())==null?void 0:x.merchant}),(x,k)=>{const u=oe("VanButton");return e.status!==-2&&e.status!==1?(a(),l("div",zt,[e.status===-1||e.status===2||e.status===3?(a(),l("img",Gt)):g("",!0),e.status===0||e.status===10?(a(),l("img",Jt)):g("",!0),e.status===4?(a(),l("img",Qt)):g("",!0),n("div",Kt,[e.status===2?(a(),l("span",Xt,c(x.$t("shop.failShop")),1)):g("",!0),e.status===-1||e.status===3?(a(),l("span",Yt,c(x.$t("shop.noShop")),1)):g("",!0),e.status===0?(a(),l("span",Zt,c(x.$t("profile.Waiting for confirmation from the guarantor")),1)):g("",!0),e.status===10?(a(),l("span",eo,c(x.$t("profile.edit the store information again")),1)):g("",!0),e.status===4?(a(),l("div",to,c(x.$t("shop.balckStatus")),1)):g("",!0)]),e.status===0?(a(),l("div",oo,[s(B)?(a(),G(u,{key:0,class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:k[0]||(k[0]=m=>s(y)(!0))},{default:M(()=>[L(c(x.$t("profile.Withdraw modification")),1)]),_:1})):g("",!0),I(u,{class:"flex-1 h-10 max-w-[160px] text-white btn-orange btn-shadow",onClick:N},{default:M(()=>[L(c(x.$t("profile.View Progress")),1)]),_:1})])):e.status===10?(a(),G(u,{key:4,class:"h-10 text-white btn-orange btn-shadow w-44",onClick:k[1]||(k[1]=m=>b("handleTo","/editShopInfo"))},{default:M(()=>[L(c(x.$t("shop.modify")),1)]),_:1})):(a(),G(u,{key:5,class:"h-10 mt-2 text-white btn-orange btn-shadow w-44",onClick:w},{default:M(()=>[L(c(e.status==4?x.$t("profile.Feedback"):x.$t("shop.applyShop")),1)]),_:1})),I(Wt,{loading:v.value,show:s(S),onClose:k[2]||(k[2]=m=>s(y)(!1)),onConfirm:E},null,8,["loading","show"])])):g("",!0)}}}),so=W(no,[["__scopeId","data-v-921bb4f0"]]);var z=(e=>(e[e.INTERNL=0]="INTERNL",e[e.EXTERNAL=1]="EXTERNAL",e[e.OPTIONS=2]="OPTIONS",e[e.LP=3]="LP",e))(z||{});const ao={key:0,class:"w-full h-fit py-[16px] px-[12px] bg-white rounded-[12px] flex flex-wrap font-Puhui"},ro=["onClick"],io={class:"relative"},lo=["src"],co={key:0,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},uo={key:1,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},po={key:2,class:"absolute top-[-5px] right-[1px] translate-x-1/2 min-w-[6px] w-fit h-[14px] px-1 bg-[#F44] rounded-[12px] text-white text-[10px] leading-[14px] font-normal text-center border-[1px] border-solid border-white box-content"},fo={class:"mt-[4px] text-[14px] text-[#2E2008] font-normal font-Puhui leading-[20px] text-center"},ho=U({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]},unreadCount:null,messageCount:null},emits:["handleClose"],setup(e,{emit:b}){var k;const r=e,{t}=fe(),{accountStore:h,clerkStore:w}=te(),N=u=>u===0?0:u>99?"99+":u,S=O(""),y=O("");S.value=h.account,y.value=((k=h.store)==null?void 0:k.nickname)||"";const v=xe(),E=P(()=>{const u=[{name:t("profile.goodsManagement"),icon:"goods",key:"goods",to:"/shopGoods"},{name:t("profile.service"),icon:"service",key:"service",to:"/offlineGoods"},{name:t("profile.category"),icon:"category",key:"category",to:"/shopCategory"},{name:t("shop.shippingTemplate.listTitle"),icon:"shippingTemplate",key:"shippingTemplate",to:"/shippingTemplate"},{name:t("profile.sale"),icon:"sale",key:"sale",to:"/shoppingCenter"},{name:t("profile.onesale order"),icon:"falsh_sale",key:"saleOrder",to:"/sellerOneSaleOrder"},{name:t("profile.shopInfo"),icon:"shop",key:"shop",to:"/editShopInfo"},{name:t("home.receive"),icon:"cashierCollect",key:"cashierCollect",to:w.isClerk?`/collect?from=clerk&role=cashier&caddr=${S.value}&cnickname=${y.value}`:"/collect"},{name:t("profile.fund"),icon:"fund",key:"fund",to:"/sellerBill"},{name:t("storeClerk.Clerk Management"),icon:"store-clerk",key:"clerk",to:"/clerk/manage"},{name:t("credit.credit"),icon:"credit-pledge",key:"creditPledge",to:"/creditPledge",type:z.LP},{name:t("profile.delivery management"),icon:"encrypted-delivery",key:"encrypted",to:"/encryption?type=1"},{name:t("profile.close"),icon:"closeShop",key:"close",to:"",type:z.OPTIONS},{name:t("profile.announcement"),icon:"announcement",key:"announcement",to:"/postList"},{name:t("profile.notice"),icon:"message",key:"message",to:"/orderMessage?type=2"}];return A.value===1&&u.splice(9,0,{name:t("profile.Boutique"),icon:"boutique",to:"/boutiqueShopApply",key:"boutique"}),r.isClerk?u.filter(m=>r.Permissions.findIndex(T=>T===m.key)!==-1):u}),A=P(()=>{var u;return(u=h.store)==null?void 0:u.type}),B=u=>{u.type===z.LP?de(u.to):(u.key==="goods"&&localStorage.removeItem("shopGoods_scrollTop"),v.push(u.to))},x=u=>{if(u.type!==z.OPTIONS)B(u);else switch(u.key){case"close":b("handleClose")}};return(u,m)=>s(E).length?(a(),l("div",ao,[(a(!0),l(R,null,D(s(E),(T,i)=>(a(),l("div",{key:i,class:"w-[25%] flex flex-col items-center",style:Ie(i<Math.floor((s(E).length-1)/4)*4?"margin-bottom: 16px":""),onClick:p=>x(T)},[n("div",io,[n("img",{class:"w-[24px] h-[24px]",src:s($)(`profile2/merchantOption/${T.icon}.svg`),alt:""},null,8,lo),T.key==="creditPledge"?(a(),l("div",co," NEW ")):g("",!0),T.key==="announcement"&&+e.unreadCount.totalUnread>0?(a(),l("div",uo,c(N(e.unreadCount.totalUnread)),1)):g("",!0),T.key==="message"&&+e.messageCount.totalUnread>0?(a(),l("div",po,c(N(e.messageCount.totalUnread)),1)):g("",!0)]),n("div",fo,c(T.name),1)],12,ro))),128))])):g("",!0)}}),xo={class:"p-[4px]"},mo={class:"pb-6 text-[#2E2008] text-[14px] font-semibold text-center"},go={class:"font-semibold"},vo={class:"w-full flex items-center gap-[12px]"},bo=U({props:{show:{type:Boolean},shopName:null},emits:["close","confirm"],setup(e,{emit:b}){const r=()=>{b("confirm"),b("close")};return(t,h)=>{const w=oe("van-button");return a(),G(ie,{width:"90%",show:e.show,noClose:"",onClose:h[1]||(h[1]=()=>{b("close")})},{default:M(()=>[n("div",xo,[n("div",mo,[L(c(t.$t("merchant.closeTip1"))+" ",1),n("span",go,c(e.shopName??""),1),L(" "+c(t.$t("merchant.closeTip2")),1)]),n("div",vo,[I(w,{class:"w-1/2 h-[46px] border-[1px] border-[#D9D9D9] border-solid rounded-[100px] text-[#2E2008] text-[16px] font-Puhui font-normal leading-[46px]",onClick:h[0]||(h[0]=()=>{b("close")})},{default:M(()=>[L(c(t.$t("common.cancel")),1)]),_:1}),I(w,{class:"w-1/2 h-[46px] bg-[#F44] border-none rounded-[100px] text-white text-[16px] font-Puhui font-semibold leading-[46px]",onClick:r},{default:M(()=>[L(c(t.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])}}}),wo=W(bo,[["__scopeId","data-v-46305877"]]),yo={key:0},ko=U({props:{isClerk:{type:Boolean,default:!1},Permissions:{default:()=>[]}},emits:["handleTo","handleReplace","handleMenu"],setup(e,{expose:b,emit:r}){const{getCurrentStoreId:t}=le(),{generateKey:h}=Oe(),{loadingToggle:w}=Se(),{accountStore:N}=te(),S=he(),y=xe(),[v,E]=ee(!1),[A,B]=ee(!1),x=O(-1),k=O(""),u=O({type:0,upgradableType:0}),m=async()=>{var _,H;const f=y.currentRoute.value.path,d=await re((_=N.store)==null?void 0:_.merchant);if(d.success)if(d.data){if(x.value=d.data.status,k.value=d.data.storeName,x.value===1){X(d.data.merchant)===X(N.account)&&(d.data.upgradableType&&d.data.upgradableType<d.data.type||d.data.type===0&&d.data.upgradableType>0)&&(u.value.type=d.data.type,u.value.upgradableType=d.data.upgradableType,B(!0));const ke=((H=S.query)==null?void 0:H.tab)||"online";ae(ke),h("merchant",f)}}else x.value=-1,k.value=""},T=async()=>{w(!0,1);const f=await Te(3);w(!1),f.success&&Q()},i=O({}),p=async()=>{var d;const f=await Ee({type:1,storeId:(d=await t())==null?void 0:d.id});f.success&&(i.value=f.data)},o=O({}),F=async()=>{var d;const f=await Re({shopId:(d=await t())==null?void 0:d.id});f.success&&(o.value=f.data)},j=O(0),ge=P(()=>{const f=o.value;return!f||!Object.values(f).some(_=>!!_)?0:[f.waitShipCount].reduce((_,H)=>_+H)});async function ve(){var d;if(x.value!==1)return;const f=await Ae({shopId:(d=await t())==null?void 0:d.id});f.success&&(j.value=f.data||0)}const ne=O({versionUnread:0,platformUnread:0,totalUnread:0}),be=async()=>{const f=await Me();f.success&&(ne.value=f.data)},se=O({}),we=async()=>{const f=await Be({type:2});f.success&&(se.value=f.data)},ae=f=>{f==="online"&&p(),ve(),F(),be(),we()},Z=O(!1),ye=async f=>{Z.value=!0;const{success:d}=await Fe(f);if(Z.value=!1,d){const _=await re(N.account);await N.changeStore(_.data),Q()}B(!1)},Q=async()=>{console.log("merchant init"),w(!0,1),await m(),w(!1)};return b({init:Q}),(f,d)=>(a(),l(R,null,[x.value==1?(a(),l("div",yo,[I(Bt,{activeTab:s(V).MERCHANT,Permissions:e.Permissions,isClerk:e.isClerk,orderCount:i.value,offlineOrderCount:o.value,orderNumber:j.value,serviceNumber:s(ge),onHandleTo:d[0]||(d[0]=_=>r("handleTo",_)),onHandleReplace:d[1]||(d[1]=(_,H)=>r("handleReplace",_,H)),onUpdateOrderData:ae},null,8,["activeTab","Permissions","isClerk","orderCount","offlineOrderCount","orderNumber","serviceNumber"]),I(ho,{unreadCount:ne.value,messageCount:se.value,Permissions:e.Permissions,isClerk:e.isClerk,onHandleClose:d[2]||(d[2]=_=>s(E)(!0))},null,8,["unreadCount","messageCount","Permissions","isClerk"])])):g("",!0),I(so,{status:x.value,onHandleTo:d[3]||(d[3]=_=>r("handleTo",_)),onInit:Q},null,8,["status"]),I(wo,{show:s(v),shopName:k.value,onClose:d[4]||(d[4]=()=>{s(E)(!1)}),onConfirm:T},null,8,["show","shopName"]),I(Le,{upgradeInfo:u.value,show:s(A),onClose:d[5]||(d[5]=_=>s(B)(!1)),onConfirm:ye,loading:Z.value},null,8,["upgradeInfo","show","loading"])],64))}}),Lo=W(ko,[["__scopeId","data-v-1e523ed3"]]);export{Bt as M,z as U,Io as a,Lo as b};
