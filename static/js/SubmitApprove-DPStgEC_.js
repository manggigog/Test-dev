import{s as f}from"./index-DBW_ANsl.js";import{y as b,r as i,x as d,z as g,D as B,E as w,K as C,a2 as h,P as s,G as c,N as A,F as m,Q as p,a3 as N,R as x}from"./vendor-CjApaIpB.js";const V={key:0},$={key:1},S=b({props:{contract:null,token:null,fallBack:null,loading:{type:Boolean},symbol:null,approveAmount:null,disabled:{type:Boolean},classes:null},setup(e){const a=e,o=i(!1),n=i(0),t=d(()=>Number(n.value)>0&&Number(n.value)>=Number(a.approveAmount??0)),r=d(()=>f(a.token)),l=async()=>{o.value=!0,n.value=+await(await r.value.allowance(a.contract)).result,o.value=!1},v=async()=>{o.value=!0,await r.value.approve(a.contract),await l()},k=()=>{t.value?a==null||a.fallBack():v()};return g(()=>a.token,()=>{l()}),B(()=>{l()}),(u,z)=>{const y=w("VanButton");return s(t)?h("",!0):(c(),C(y,{key:0,loading:e.loading||o.value,disabled:s(t)&&e.disabled,class:x(`${e.classes??"text-red-600 px-4 py-2 bg-gray3"}`),onClick:k},{default:A(()=>[s(t)?(c(),m("div",$,[N(u.$slots,"default")])):(c(),m("div",V,p(u.$t("common.approve"))+p(e.symbol??null),1))]),_:3},8,["loading","disabled","class"]))}}});export{S as _};
