function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_extends.apply(this,arguments)}window.EVA=window.EVA||{},window.EVA.plugin=window.EVA.plugin||{},window.EVA.plugin.renderer=window.EVA.plugin.renderer||{};var _EVA_IIFE_render=function(e,n,t){"use strict";var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},r(e,n)};function o(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function i(e,n,t,r){var o,i=arguments.length,a=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var p=e.length-1;p>=0;p--)(o=e[p])&&(a=(i<3?o(a):i>3?o(n,t,a):o(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a}function a(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}function p(e,n){return e.constructor.IDEProps||(e.constructor.IDEProps={}),e.constructor.IDEProps[n]||(e.constructor.IDEProps[n]={}),e.constructor.IDEProps[n]}function c(e){return function(n,t){var r=p(n,t);r.key=t,r.type=e}}function u(e){return function(n,t){p(n,t).step=e}}var s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.sortDirty=!1,n.visible=!0,n.alpha=1,n.zIndex=0,n.sortableChildren=!1,n}return o(n,e),n.prototype.init=function(e){e&&_extends(this,e)},n.componentName="Render",i([c("boolean")],n.prototype,"visible",void 0),i([c("number"),u(.1)],n.prototype,"alpha",void 0),i([c("number"),u(1)],n.prototype,"zIndex",void 0),i([c("boolean")],n.prototype,"sortableChildren",void 0),n}(n.Component),d=s,l=function(e){function r(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="Render",n}return o(r,e),r.prototype.init=function(){this.renderSystem=this.game.getSystem(t.RendererSystem),this.renderSystem.rendererManager.register(this)},r.prototype.rendererUpdate=function(e){var n=this,t=e.getComponent("Render"),r=this.containerManager.getContainer(e.id);if(r.alpha=t.alpha,r.visible=t.visible,t.sortDirty&&t.sortableChildren){var o=e.transform.children.map((function(e){return e.gameObject})).sort((function(e,n){var t=e.getComponent("Render"),r=n.getComponent("Render");return t?r?t.zIndex-r.zIndex:1:-1})).map((function(e){return n.containerManager.getContainer(e.id)})),i=this.containerManager.getContainer(t.gameObject.id).children,p=i.filter((function(e){return-1===o.indexOf(e)}));i.length=0,i.push.apply(i,function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(a(arguments[n]));return e}(p,o)),t.sortDirty=!1}},r.prototype.componentChanged=function(e){e.type!==n.OBSERVER_TYPE.ADD&&e.type!==n.OBSERVER_TYPE.REMOVE||this.add(e),e.type===n.OBSERVER_TYPE.CHANGE&&this.change(e),e.type===n.OBSERVER_TYPE.REMOVE&&this.remove(e)},r.prototype.add=function(e){"Render"===e.component.name&&this.setDirty(e)},r.prototype.change=function(e){"Render"===e.component.name&&"zIndex"===e.prop.prop[0]&&this.setDirty(e)},r.prototype.remove=function(e){"Render"===e.component.name&&(this.containerManager.getContainer(e.gameObject.id).alpha=1)},r.prototype.setDirty=function(e){var n=e.gameObject.parent&&e.gameObject.parent.getComponent("Render");n&&(n.sortDirty=!0)},r.systemName="Render",r=i([n.decorators.componentObserver({Render:["zIndex"]})],r)}(t.Renderer),f=l;return e.Render=d,e.RenderSystem=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({},EVA,EVA.plugin.renderer);window.EVA.plugin.renderer.render=window.EVA.plugin.renderer.render||_EVA_IIFE_render;
